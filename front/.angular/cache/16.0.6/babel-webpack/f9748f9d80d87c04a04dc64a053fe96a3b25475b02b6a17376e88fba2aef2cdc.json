{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"bg-cyan-400\": a0,\n    \"bg-gray-500\": a1\n  };\n};\nfunction ReservationsHistoriqueComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"div\", 9);\n    i0.ɵɵelementStart(2, \"div\", 10)(3, \"div\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 12);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const r_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, r_r1.etat === \"Termin\\u00E9e\", r_r1.etat === \"Annul\\u00E9e\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate((r_r1.borne == null ? null : r_r1.borne.nomBorne) || (r_r1.borne == null ? null : r_r1.borne.nom));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", r_r1.dateDebut, \" \\u2192 \", r_r1.dateFin, \" \\u2014 \\u00C9tat: \", r_r1.etat, \"\");\n  }\n}\nlet ReservationsHistoriqueComponent = /*#__PURE__*/(() => {\n  class ReservationsHistoriqueComponent {\n    constructor(api) {\n      this.api = api;\n      this.reservations = [];\n      this.q = '';\n      this.filterBorne = '';\n      this.filterEtat = '';\n      this.fromDate = '';\n      this.toDate = '';\n    }\n    ngOnInit() {\n      this.api.list('reservations').subscribe(d => this.reservations = d || []);\n    }\n    get filtered() {\n      return this.reservations.filter(r => {\n        if (this.q && !(r.borneName || '').toLowerCase().includes(this.q.toLowerCase()) && !(r.utilisateurName || '').toLowerCase().includes(this.q.toLowerCase())) return false;\n        if (this.filterBorne && String(r.idBorne) !== String(this.filterBorne)) return false;\n        if (this.filterEtat && r.etat !== this.filterEtat) return false;\n        if (this.fromDate) {\n          const fd = new Date(this.fromDate);\n          if (new Date(r.dateDebut) < fd) return false;\n        }\n        if (this.toDate) {\n          const td = new Date(this.toDate);\n          if (new Date(r.dateFin) > td) return false;\n        }\n        return true;\n      });\n    }\n    clearFilters() {\n      this.q = '';\n      this.filterBorne = '';\n      this.filterEtat = '';\n      this.fromDate = '';\n      this.toDate = '';\n    }\n    static {\n      this.ɵfac = function ReservationsHistoriqueComponent_Factory(t) {\n        return new (t || ReservationsHistoriqueComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ReservationsHistoriqueComponent,\n        selectors: [[\"reservations-historique\"]],\n        decls: 11,\n        vars: 4,\n        consts: [[1, \"max-w-4xl\", \"mx-auto\", \"p-6\"], [1, \"text-xl\", \"mb-4\", \"font-bold\"], [1, \"flex\", \"gap-2\", \"mb-4\"], [\"placeholder\", \"Recherche\", 1, \"p-2\", \"border\", \"rounded\", \"flex-1\", \"bg-transparent\", \"text-white\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"date\", 1, \"p-2\", \"border\", \"rounded\", \"bg-transparent\", \"text-white\", 3, \"ngModel\", \"ngModelChange\"], [1, \"px-3\", \"py-2\", \"border\", \"rounded\", 3, \"click\"], [1, \"space-y-6\"], [\"class\", \"flex items-start gap-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"items-start\", \"gap-4\"], [1, \"w-3\", \"h-3\", \"rounded-full\", \"mt-2\", 3, \"ngClass\"], [1, \"bg-white/5\", \"p-4\", \"rounded-lg\", \"flex-1\"], [1, \"text-white\", \"font-semibold\"], [1, \"text-gray-300\", \"text-sm\"]],\n        template: function ReservationsHistoriqueComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n            i0.ɵɵtext(2, \"Historique des r\\u00E9servations\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"input\", 3);\n            i0.ɵɵlistener(\"ngModelChange\", function ReservationsHistoriqueComponent_Template_input_ngModelChange_4_listener($event) {\n              return ctx.q = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"input\", 4);\n            i0.ɵɵlistener(\"ngModelChange\", function ReservationsHistoriqueComponent_Template_input_ngModelChange_5_listener($event) {\n              return ctx.fromDate = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"input\", 4);\n            i0.ɵɵlistener(\"ngModelChange\", function ReservationsHistoriqueComponent_Template_input_ngModelChange_6_listener($event) {\n              return ctx.toDate = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function ReservationsHistoriqueComponent_Template_button_click_7_listener() {\n              return ctx.clearFilters();\n            });\n            i0.ɵɵtext(8, \"Nettoyer\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 6);\n            i0.ɵɵtemplate(10, ReservationsHistoriqueComponent_div_10_Template, 7, 8, \"div\", 7);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.q);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngModel\", ctx.fromDate);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngModel\", ctx.toDate);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.reservations);\n          }\n        },\n        dependencies: [i2.NgClass, i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n        styles: [\"[_nghost-%COMP%]{display:block}\"]\n      });\n    }\n  }\n  return ReservationsHistoriqueComponent;\n})();\nexport { ReservationsHistoriqueComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}