(self.webpackChunkelectricity_business_front=self.webpackChunkelectricity_business_front||[]).push([[179],{372:(yp,md,pd)=>{"use strict";function Pi(t){return"function"==typeof t}function du(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const vp=du(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function v(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class zi{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Pi(i))try{i()}catch(o){e=o instanceof vp?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Oi(o)}catch(c){e=e??[],c instanceof vp?e=[...e,...c.errors]:e.push(c)}}if(e)throw new vp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Oi(e);else{if(e instanceof zi){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&v(n,e)}remove(e){const{_finalizers:n}=this;n&&v(n,e),e instanceof zi&&e._removeParent(this)}}zi.EMPTY=(()=>{const t=new zi;return t.closed=!0,t})();const Vs=zi.EMPTY;function ys(t){return t instanceof zi||t&&"closed"in t&&Pi(t.remove)&&Pi(t.add)&&Pi(t.unsubscribe)}function Oi(t){Pi(t)?t():t.unsubscribe()}const Ae={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Us={setTimeout(t,e,...n){const{delegate:i}=Us;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Us;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Oo(t){Us.setTimeout(()=>{const{onUnhandledError:e}=Ae;if(!e)throw t;e(t)})}function hn(){}const fd=Gr("C",void 0,void 0);function Gr(t,e,n){return{kind:t,value:e,error:n}}let Qo=null;function xn(t){if(Ae.useDeprecatedSynchronousErrorHandling){const e=!Qo;if(e&&(Qo={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=Qo;if(Qo=null,n)throw i}}else t()}class bs extends zi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ys(e)&&e.add(this)):this.destination=ua}static create(e,n,i){return new Jo(e,n,i)}next(e){this.isStopped?xs(function js(t){return Gr("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?xs(function hc(t){return Gr("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xs(fd,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fo=Function.prototype.bind;function vl(t,e){return Fo.call(t,e)}class Hs{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Lo(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Lo(i)}else Lo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Lo(n)}}}class Jo extends bs{constructor(e,n,i){let r;if(super(),Pi(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Ae.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&vl(e.next,o),error:e.error&&vl(e.error,o),complete:e.complete&&vl(e.complete,o)}):r=e}this.destination=new Hs(r)}}function Lo(t){Ae.useDeprecatedSynchronousErrorHandling?function vs(t){Ae.useDeprecatedSynchronousErrorHandling&&Qo&&(Qo.errorThrown=!0,Qo.error=t)}(t):Oo(t)}function xs(t,e){const{onStoppedNotification:n}=Ae;n&&Us.setTimeout(()=>n(t,e))}const ua={closed:!0,next:hn,error:function bl(t){throw t},complete:hn},Pt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Er(t){return t}function No(t){return 0===t.length?Er:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let Si=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function wl(t){return t&&t instanceof bs||function xl(t){return t&&Pi(t.next)&&Pi(t.error)&&Pi(t.complete)}(t)&&ys(t)}(n)?n:new Jo(n,i,r);return xn(()=>{const{operator:c,source:h}=this;o.add(c?c.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=ha(i))((r,o)=>{const c=new Jo({next:h=>{try{n(h)}catch(g){o(g),c.unsubscribe()}},error:o,complete:r});this.subscribe(c)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Pt](){return this}pipe(...n){return No(n)(this)}toPromise(n){return new(n=ha(n))((i,r)=>{let o;this.subscribe(c=>o=c,c=>r(c),()=>i(o))})}}return t.create=e=>new t(e),t})();function ha(t){var e;return null!==(e=t??Ae.Promise)&&void 0!==e?e:Promise}const Cl=du(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ct=(()=>{class t extends Si{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Gs(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Cl}next(n){xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Vs:(this.currentObservers=null,o.push(n),new zi(()=>{this.currentObservers=null,v(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new Si;return n.source=this,n}}return t.create=(e,n)=>new Gs(e,n),t})();class Gs extends Ct{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:Vs}}class Pn extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function qs(t){return Pi(t?.lift)}function Ti(t){return e=>{if(qs(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function nn(t,e,n,i,r){return new mc(t,e,n,i,r)}class mc extends bs{constructor(e,n,i,r,o,c){super(e),this.onFinalize=o,this.shouldUnsubscribe=c,this._next=n?function(h){try{n(h)}catch(g){e.error(g)}}:super._next,this._error=r?function(h){try{r(h)}catch(g){e.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(h){e.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Gt(t,e){return Ti((n,i)=>{let r=0;n.subscribe(nn(i,o=>{i.next(t.call(e,o,r++))}))})}function Wn(t){return this instanceof Wn?(this.v=t,this):new Wn(t)}function Ys(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Re(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(c){return new Promise(function(h,g){!function r(o,c,h,g){Promise.resolve(g).then(function(C){o({value:C,done:h})},c)}(h,g,(c=t[o](c)).done,c.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Bo=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function _a(t){return Pi(t?.then)}function ya(t){return Pi(t[Pt])}function Za(t){return Symbol.asyncIterator&&Pi(t?.[Symbol.asyncIterator])}function va(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const O=function K(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function B(t){return Pi(t?.[O])}function W(t){return function so(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",function c(q){return function(te){return Promise.resolve(te).then(q,I)}}),r[Symbol.asyncIterator]=function(){return this},r;function h(q,te){i[q]&&(r[q]=function(ce){return new Promise(function(ge,Te){o.push([q,ce,ge,Te])>1||g(q,ce)})},te&&(r[q]=te(r[q])))}function g(q,te){try{!function C(q){q.value instanceof Wn?Promise.resolve(q.value.v).then(S,I):U(o[0][2],q)}(i[q](te))}catch(ce){U(o[0][3],ce)}}function S(q){g("next",q)}function I(q){g("throw",q)}function U(q,te){q(te),o.shift(),o.length&&g(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Wn(n.read());if(r)return yield Wn(void 0);yield yield Wn(i)}}finally{n.releaseLock()}})}function Z(t){return Pi(t?.getReader)}function re(t){if(t instanceof Si)return t;if(null!=t){if(ya(t))return function he(t){return new Si(e=>{const n=t[Pt]();if(Pi(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Bo(t))return function le(t){return new Si(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(_a(t))return function ae(t){return new Si(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Oo)})}(t);if(Za(t))return Me(t);if(B(t))return function me(t){return new Si(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Z(t))return function Ve(t){return Me(W(t))}(t)}throw va(t)}function Me(t){return new Si(e=>{(function Se(t,e){var n,i,r,o;return function Ds(t,e,n,i){return new(n||(n=Promise))(function(o,c){function h(S){try{C(i.next(S))}catch(I){c(I)}}function g(S){try{C(i.throw(S))}catch(I){c(I)}}function C(S){S.done?o(S.value):function r(o){return o instanceof n?o:new n(function(c){c(o)})}(S.value).then(h,g)}C((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Ys(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(c){r={error:c}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function st(t,e,n,i=0,r=!1){const o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function qe(t,e,n=1/0){return Pi(e)?qe((i,r)=>Gt((o,c)=>e(i,o,r,c))(re(t(i,r))),n):("number"==typeof e&&(n=e),Ti((i,r)=>function gt(t,e,n,i,r,o,c,h){const g=[];let C=0,S=0,I=!1;const U=()=>{I&&!g.length&&!C&&e.complete()},q=ce=>C<i?te(ce):g.push(ce),te=ce=>{o&&e.next(ce),C++;let ge=!1;re(n(ce,S++)).subscribe(nn(e,Te=>{r?.(Te),o?q(Te):e.next(Te)},()=>{ge=!0},void 0,()=>{if(ge)try{for(C--;g.length&&C<i;){const Te=g.shift();c?st(e,c,()=>te(Te)):te(Te)}U()}catch(Te){e.error(Te)}}))};return t.subscribe(nn(e,q,()=>{I=!0,U()})),()=>{h?.()}}(i,r,t,n)))}function xt(t=1/0){return qe(Er,t)}const vt=new Si(t=>t.complete());function ti(t){return t&&Pi(t.schedule)}function _i(t){return t[t.length-1]}function Ki(t){return Pi(_i(t))?t.pop():void 0}function Mn(t){return ti(_i(t))?t.pop():void 0}function mr(t,e=0){return Ti((n,i)=>{n.subscribe(nn(i,r=>st(i,t,()=>i.next(r),e),()=>st(i,t,()=>i.complete(),e),r=>st(i,t,()=>i.error(r),e)))})}function Ya(t,e=0){return Ti((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function mu(t,e){if(!t)throw new Error("Iterable cannot be null");return new Si(n=>{st(n,e,()=>{const i=t[Symbol.asyncIterator]();st(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Un(t,e){return e?function pu(t,e){if(null!=t){if(ya(t))return function yc(t,e){return re(t).pipe(Ya(e),mr(e))}(t,e);if(Bo(t))return function uu(t,e){return new Si(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(_a(t))return function rn(t,e){return re(t).pipe(Ya(e),mr(e))}(t,e);if(Za(t))return mu(t,e);if(B(t))return function hu(t,e){return new Si(n=>{let i;return st(n,e,()=>{i=t[O](),st(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(c){return void n.error(c)}o?n.complete():n.next(r)},0,!0)}),()=>Pi(i?.return)&&i.return()})}(t,e);if(Z(t))return function Lh(t,e){return mu(W(t),e)}(t,e)}throw va(t)}(t,e):re(t)}function ao(...t){const e=Mn(t),n=function gn(t,e){return"number"==typeof _i(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?re(i[0]):xt(n)(Un(i,e)):vt}function bt(...t){return Un(t,Mn(t))}function gd(t={}){const{connector:e=(()=>new Ct),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let c,h,g,C=0,S=!1,I=!1;const U=()=>{h?.unsubscribe(),h=void 0},q=()=>{U(),c=g=void 0,S=I=!1},te=()=>{const ce=c;q(),ce?.unsubscribe()};return Ti((ce,ge)=>{C++,!I&&!S&&U();const Te=g=g??e();ge.add(()=>{C--,0===C&&!I&&!S&&(h=_d(te,r))}),Te.subscribe(ge),!c&&C>0&&(c=new Jo({next:Ee=>Te.next(Ee),error:Ee=>{I=!0,U(),h=_d(q,n,Ee),Te.error(Ee)},complete:()=>{S=!0,U(),h=_d(q,i),Te.complete()}}),re(ce).subscribe(c))})(o)}}function _d(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Jo({next:()=>{i.unsubscribe(),t()}});return re(e(...n)).subscribe(i)}function Sr(t,e){return Ti((n,i)=>{let r=null,o=0,c=!1;const h=()=>c&&!r&&i.complete();n.subscribe(nn(i,g=>{r?.unsubscribe();let C=0;const S=o++;re(t(g,S)).subscribe(r=nn(i,I=>i.next(e?e(g,I,S,C++):I),()=>{r=null,h()}))},()=>{c=!0,h()}))})}function Ks(t,e=Er){return t=t??vc,Ti((n,i)=>{let r,o=!0;n.subscribe(nn(i,c=>{const h=e(c);(o||!t(r,h))&&(o=!1,r=h,i.next(c))}))})}function vc(t,e){return t===e}function Fi(t){for(let e in t)if(t[e]===Fi)return e;throw Error("Could not find renamed property on target object.")}function Ml(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(kn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ba(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const fu=Fi({__forward_ref__:Fi});function Vi(t){return t.__forward_ref__=Vi,t.toString=function(){return kn(this())},t}function Bt(t){return ln(t)?t():t}function ln(t){return"function"==typeof t&&t.hasOwnProperty(fu)&&t.__forward_ref__===Vi}function Xa(t){return t&&!!t.\u0275providers}const gu="https://g.co/ng/security#xss";class Ie extends Error{constructor(e,n){super(function Ka(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Xt(t){return"string"==typeof t?t:null==t?"":String(t)}function kl(t,e){throw new Ie(-201,!1)}function Yr(t,e){null==t&&function Hi(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function We(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zt(t){return{providers:t.providers||[],imports:t.imports||[]}}function bd(t){return jh(t,Tl)||jh(t,xd)}function jh(t,e){return t.hasOwnProperty(e)?t[e]:null}function Hh(t){return t&&(t.hasOwnProperty(Il)||t.hasOwnProperty(xu))?t[Il]:null}const Tl=Fi({\u0275prov:Fi}),Il=Fi({\u0275inj:Fi}),xd=Fi({ngInjectableDef:Fi}),xu=Fi({ngInjectorDef:Fi});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let wd;function pr(t){const e=wd;return wd=t,e}function xa(t,e,n){const i=bd(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&It.Optional?null:void 0!==e?e:void kl(kn(t))}const qi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xi={},on="__NG_DI_FLAG__",an="ngTempTokenPath",Al=/\n/gm,$h="__source";let Qa;function ts(t){const e=Qa;return Qa=t,e}function wc(t,e=It.Default){if(void 0===Qa)throw new Ie(-203,!1);return null===Qa?xa(t,void 0,e):Qa.get(t,e&It.Optional?null:void 0,e)}function we(t,e=It.Default){return(function wu(){return wd}()||wc)(Bt(t),e)}function Je(t,e=It.Default){return we(t,Cc(e))}function Cc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Pl(t){const e=[];for(let n=0;n<t.length;n++){const i=Bt(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Ie(900,!1);let r,o=It.Default;for(let c=0;c<i.length;c++){const h=i[c],g=is(h);"number"==typeof g?-1===g?r=h.token:o|=g:r=h}e.push(we(r,o))}else e.push(we(i))}return e}function wa(t,e){return t[on]=e,t.prototype[on]=e,t}function is(t){return t[on]}function Es(t){return{toString:t}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),tr=(()=>{return(t=tr||(tr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",tr;var t})();const lo={},$i=[],Ja=Fi({\u0275cmp:Fi}),Cd=Fi({\u0275dir:Fi}),Dd=Fi({\u0275pipe:Fi}),Ol=Fi({\u0275mod:Fi}),ns=Fi({\u0275fac:Fi}),Ca=Fi({__NG_ELEMENT_ID__:Fi}),Fl=Fi({__NG_ENV_ID__:Fi});function el(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function tl(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],c=n[i++],h=n[i++];t.setAttribute(e,c,h,o)}else{const o=r,c=n[++i];Ll(o)?t.setProperty(e,o,c):t.setAttribute(e,o,c),i++}}return i}function Du(t){return 3===t||4===t||6===t}function Ll(t){return 64===t.charCodeAt(0)}function Nl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Eu(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Eu(t,e,n,i,r){let o=0,c=t.length;if(-1===e)c=-1;else for(;o<t.length;){const h=t[o++];if("number"==typeof h){if(h===e){c=-1;break}if(h>e){c=o-1;break}}}for(;o<t.length;){const h=t[o];if("number"==typeof h)break;if(h===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==c&&(t.splice(c,0,e),o=c+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Su="ng-template";function Bl(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if("string"==typeof o&&r){const c=t[i++];if(n&&"class"===o&&-1!==el(c.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<t.length&&"string"==typeof(o=t[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function Mu(t){return 4===t.type&&t.value!==Su}function Dc(t,e,n){return e===(4!==t.type||n?t.value:Su)}function Ec(t,e,n){let i=4;const r=t.attrs||[],o=function Da(t){for(let e=0;e<t.length;e++)if(Du(t[e]))return e;return t.length}(r);let c=!1;for(let h=0;h<e.length;h++){const g=e[h];if("number"!=typeof g){if(!c)if(4&i){if(i=2|1&i,""!==g&&!Dc(t,g,n)||""===g&&1===e.length){if(wn(i))return!1;c=!0}}else{const C=8&i?g:e[++h];if(8&i&&null!==t.attrs){if(!Bl(t.attrs,C,n)){if(wn(i))return!1;c=!0}continue}const I=Sc(8&i?"class":g,r,Mu(t),n);if(-1===I){if(wn(i))return!1;c=!0;continue}if(""!==C){let U;U=I>o?"":r[I+1].toLowerCase();const q=8&i?U:null;if(q&&-1!==el(q,C,0)||2&i&&C!==U){if(wn(i))return!1;c=!0}}}}else{if(!c&&!wn(i)&&!wn(g))return!1;if(c&&wn(g))continue;c=!1,i=g|1&i}}return wn(i)||c}function wn(t){return 0==(1&t)}function Sc(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){const c=e[r];if(c===t)return r;if(3===c||6===c)o=!0;else{if(1===c||2===c){let h=e[++r];for(;"string"==typeof h;)h=e[++r];continue}if(4===c)break;if(0===c){r+=4;continue}}r+=o?1:2}return-1}return function qh(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function co(t,e,n=!1){for(let i=0;i<e.length;i++)if(Ec(t,e[i],n))return!0;return!1}function Qs(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function zl(t,e){return t?":not("+e.trim()+")":e}function ku(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let c=t[n];if("string"==typeof c)if(2&i){const h=t[++n];r+="["+c+(h.length>0?'="'+h+'"':"")+"]"}else 8&i?r+="."+c:4&i&&(r+=" "+c);else""!==r&&!wn(c)&&(e+=zl(o,r),r=""),i=c,o=o||!wn(i);n++}return""!==r&&(e+=zl(o,r)),e}function Mt(t){return Es(()=>{const e=Tu(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||tr.Emulated,styles:t.styles||$i,_:null,schemas:t.schemas||null,tView:null,id:""};Wh(n);const i=t.dependencies;return n.directiveDefs=kc(i,!1),n.pipeDefs=kc(i,!0),n.id=function Au(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Js(t){return Li(t)||kr(t)}function ut(t){return null!==t}function Vt(t){return Es(()=>({type:t.type,bootstrap:t.bootstrap||$i,declarations:t.declarations||$i,imports:t.imports||$i,exports:t.exports||$i,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ea(t,e){if(null==t)return lo;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function Fe(t){return Es(()=>{const e=Tu(t);return Wh(e),e})}function Ze(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Li(t){return t[Ja]||null}function kr(t){return t[Cd]||null}function Tr(t){return t[Dd]||null}function uo(t,e){const n=t[Ol]||null;if(!n&&!0===e)throw new Error(`Type ${kn(t)} does not have '\u0275mod' property.`);return n}function Tu(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||$i,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ea(t.inputs,e),outputs:ea(t.outputs)}}function Wh(t){t.features?.forEach(e=>e(t))}function kc(t,e){if(!t)return null;const n=e?Tr:Js;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(ut)}const On=0,ht=1,At=2,Ji=3,Uo=4,jo=5,ir=6,Ss=7,Cn=8,fr=9,Wi=10,qt=11,Sa=12,Ru=13,nl=14,Fn=15,Tc=16,Xr=17,ho=18,pt=19,kt=20,Co=21,rs=22,os=23,jn=24,oi=25,Ed=1,ia=2,Zi=7,Dn=8,Ma=9,f=11;function u(t){return Array.isArray(t)&&"object"==typeof t[Ed]}function p(t){return Array.isArray(t)&&!0===t[Ed]}function y(t){return 0!=(4&t.flags)}function x(t){return t.componentOffset>-1}function D(t){return 1==(1&t.flags)}function k(t){return!!t.template}function T(t){return 0!=(512&t[At])}function yt(t,e){return t.hasOwnProperty(ns)?t[ns]:null}let nr=qi.WeakRef??class tn{constructor(e){this.ref=e}deref(){return this.ref}},Ts=0,gr=null,Kr=!1;function Yi(t){const e=gr;return gr=t,e}class Is{constructor(){this.id=Ts++,this.ref=function Ms(t){return new nr(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(void 0!==i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Kr;Kr=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();void 0!==r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{Kr=e}}producerAccessed(){if(Kr)throw new Error("");if(null===gr)return;let e=gr.producers.get(this.id);void 0===e?(e={consumerNode:gr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:gr.trackingVersion},gr.producers.set(this.id,e),this.consumers.set(gr.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=gr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==gr?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let mn=null;const ka=()=>{};class ol extends Is{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=ka,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Yi(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ka,this.watch(this.registerOnCleanup)}finally{Yi(e)}}cleanup(){this.cleanupFn()}}class Sd{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Zn(){return s_}function s_(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ou),Op}function Op(){const t=Ta(this),e=t?.current;if(e){const n=t.previous;if(n===lo)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Ou(t,e,n,i){const r=this.declaredInputs[n],o=Ta(t)||function ra(t,e){return t[Ic]=e}(t,{previous:lo,current:null}),c=o.current||(o.current={}),h=o.previous,g=h[r];c[r]=new Sd(g&&g.currentValue,e,h===lo),t[i]=e}Zn.ngInherit=!0;const Ic="__ngSimpleChanges__";function Ta(t){return t[Ic]||null}const po=function(t,e,n){},l_="svg";function ai(t){for(;Array.isArray(t);)t=t[On];return t}function Fu(t,e){return ai(e[t])}function or(t,e){return ai(e[t.index])}function Lu(t,e){return t.data[e]}function jl(t,e){return t[e]}function Do(t,e){const n=e[t];return u(n)?n:n[On]}function Nu(t){return 128==(128&t[At])}function Aa(t,e){return null==e?null:t[e]}function c_(t){t[Xr]=0}function Np(t){1024&t[At]||(t[At]|=1024,zp(t,1))}function Bp(t){1024&t[At]&&(t[At]&=-1025,zp(t,-1))}function zp(t,e){let n=t[Ji];if(null===n)return;n[jo]+=e;let i=n;for(n=n[Ji];null!==n&&(1===e&&1===i[jo]||-1===e&&0===i[jo]);)n[jo]+=e,i=n,n=n[Ji]}const Ut={lFrame:f_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Qr(){return Ut.bindingsEnabled}function Pc(){return null!==Ut.skipHydrationRootTNode}function He(){return Ut.lFrame.lView}function Ri(){return Ut.lFrame.tView}function Wt(t){return Ut.lFrame.contextLView=t,t[Cn]}function Zt(t){return Ut.lFrame.contextLView=null,t}function Ir(){let t=h_();for(;null!==t&&64===t.type;)t=t.parent;return t}function h_(){return Ut.lFrame.currentTNode}function oa(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Vu(){return Ut.lFrame.isParent}function Fc(){Ut.lFrame.isParent=!1}function Eo(){const t=Ut.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function sl(){return Ut.lFrame.bindingIndex}function al(){return Ut.lFrame.bindingIndex++}function Ra(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ub(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,jp(e)}function jp(t){Ut.lFrame.currentDirectiveIndex=t}function p_(){return Ut.lFrame.currentQueryIndex}function $p(t){Ut.lFrame.currentQueryIndex=t}function Hb(t){const e=t[ht];return 2===e.type?e.declTNode:1===e.type?t[ir]:null}function Yh(t,e,n){if(n&It.SkipSelf){let r=e,o=t;for(;!(r=r.parent,null!==r||n&It.Host||(r=Hb(o),null===r||(o=o[nl],10&r.type))););if(null===r)return!1;e=r,t=o}const i=Ut.lFrame=Nc();return i.currentTNode=e,i.lView=t,!0}function Gp(t){const e=Nc(),n=t[ht];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Nc(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?f_(t):e}function f_(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Tn(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ju=Tn;function Xh(){const t=Tn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yr(){return Ut.lFrame.selectedIndex}function Hl(t){Ut.lFrame.selectedIndex=t}function In(){const t=Ut.lFrame;return Lu(t.tView,t.selectedIndex)}function ll(){Ut.lFrame.currentNamespace=l_}let kd=!0;function em(){return kd}function Pa(t){kd=t}function Td(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:C,ngOnDestroy:S}=o;c&&(t.contentHooks??=[]).push(-n,c),h&&((t.contentHooks??=[]).push(n,h),(t.contentCheckHooks??=[]).push(n,h)),g&&(t.viewHooks??=[]).push(-n,g),C&&((t.viewHooks??=[]).push(n,C),(t.viewCheckHooks??=[]).push(n,C)),null!=S&&(t.destroyHooks??=[]).push(n,S)}}function Id(t,e,n){g_(t,e,3,n)}function Ad(t,e,n,i){(3&t[At])===n&&g_(t,e,n,i)}function Zp(t,e){let n=t[At];(3&n)===e&&(n&=4095,n+=1,t[At]=n)}function g_(t,e,n,i){const o=i??-1,c=e.length-1;let h=0;for(let g=void 0!==i?65535&t[Xr]:0;g<c;g++)if("number"==typeof e[g+1]){if(h=e[g],null!=i&&h>=i)break}else e[g]<0&&(t[Xr]+=65536),(h<o||-1==o)&&(qb(t,n,e,g),t[Xr]=(4294901760&t[Xr])+g+2),g++}function __(t,e){po(4,t,e);const n=Yi(null);try{e.call(t)}finally{Yi(n),po(5,t,e)}}function qb(t,e,n,i){const r=n[i]<0,o=n[i+1],h=t[r?-n[i]:n[i]];r?t[At]>>12<t[Xr]>>16&&(3&t[At])===e&&(t[At]+=4096,__(h,o)):__(h,o)}const Rd=-1;class As{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function y_(t){return t!==Rd}function tm(t){return 32767&t}function im(t,e){let n=function Jb(t){return t>>16}(t),i=e;for(;n>0;)i=i[nl],n--;return i}let Hu=!0;function Gl(t){const e=Hu;return Hu=t,e}const b_=255,x_=5;let e0=0;const Ho={};function nm(t,e){const n=C_(t,e);if(-1!==n)return n;const i=e[ht];i.firstCreatePass&&(t.injectorIndex=e.length,Yp(i.data,t),Yp(e,null),Yp(i.blueprint,null));const r=Xp(t,e),o=t.injectorIndex;if(y_(r)){const c=tm(r),h=im(r,e),g=h[ht].data;for(let C=0;C<8;C++)e[o+C]=h[c+C]|g[c+C]}return e[o+8]=r,o}function Yp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function C_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Xp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=nf(r),null===i)return Rd;if(n++,r=r[nl],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Rd}function Kp(t,e,n){!function w_(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ca)&&(i=n[Ca]),null==i&&(i=n[Ca]=e0++);const r=i&b_;e.data[t+(r>>x_)]|=1<<r}(t,e,n)}function Qp(t,e,n){if(n&It.Optional||void 0!==t)return t;kl()}function rm(t,e,n,i){if(n&It.Optional&&void 0===i&&(i=null),!(n&(It.Self|It.Host))){const r=t[fr],o=pr(void 0);try{return r?r.get(e,i,n&It.Optional):xa(e,i,n&It.Optional)}finally{pr(o)}}return Qp(i,0,n)}function D_(t,e,n,i=It.Default,r){if(null!==t){if(2048&e[At]&&!(i&It.Self)){const c=function tf(t,e,n,i,r){let o=t,c=e;for(;null!==o&&null!==c&&2048&c[At]&&!(512&c[At]);){const h=Jp(o,c,n,i|It.Self,Ho);if(h!==Ho)return h;let g=o.parent;if(!g){const C=c[kt];if(C){const S=C.get(n,Ho,i);if(S!==Ho)return S}g=nf(c),c=c[nl]}o=g}return r}(t,e,n,i,Ho);if(c!==Ho)return c}const o=Jp(t,e,n,i,Ho);if(o!==Ho)return o}return rm(e,n,i,r)}function Jp(t,e,n,i,r){const o=function n0(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ca)?t[Ca]:void 0;return"number"==typeof e?e>=0?e&b_:r0:e}(n);if("function"==typeof o){if(!Yh(e,t,i))return i&It.Host?Qp(r,0,i):rm(e,n,i,r);try{const c=o(i);if(null!=c||i&It.Optional)return c;kl()}finally{ju()}}else if("number"==typeof o){let c=null,h=C_(t,e),g=Rd,C=i&It.Host?e[Fn][ir]:null;for((-1===h||i&It.SkipSelf)&&(g=-1===h?Xp(t,e):e[h+8],g!==Rd&&ef(i,!1)?(c=e[ht],h=tm(g),e=im(g,e)):h=-1);-1!==h;){const S=e[ht];if(S_(o,h,S.data)){const I=E_(h,e,n,c,i,C);if(I!==Ho)return I}g=e[h+8],g!==Rd&&ef(i,e[ht].data[h+8]===C)&&S_(o,h,e)?(c=S,h=tm(g),e=im(g,e)):h=-1}}return r}function E_(t,e,n,i,r,o){const c=e[ht],h=c.data[t+8],S=$u(h,c,n,null==i?x(h)&&Hu:i!=c&&0!=(3&h.type),r&It.Host&&o===h);return null!==S?Bc(e,c,S,h):Ho}function $u(t,e,n,i,r){const o=t.providerIndexes,c=e.data,h=1048575&o,g=t.directiveStart,S=o>>20,U=r?h+S:t.directiveEnd;for(let q=i?h:h+S;q<U;q++){const te=c[q];if(q<g&&n===te||q>=g&&te.type===n)return q}if(r){const q=c[g];if(q&&k(q)&&q.type===n)return g}return null}function Bc(t,e,n,i){let r=t[n];const o=e.data;if(function Wb(t){return t instanceof As}(r)){const c=r;c.resolving&&function xp(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Qi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Xt(t)}(o[n]));const h=Gl(c.canSeeViewProviders);c.resolving=!0;const g=c.injectImpl?pr(c.injectImpl):null;Yh(t,i,It.Default);try{r=t[n]=c.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function Gb(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const c=s_(e);(n.preOrderHooks??=[]).push(t,c),(n.preOrderCheckHooks??=[]).push(t,c)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==g&&pr(g),Gl(h),c.resolving=!1,ju()}}return r}function S_(t,e,n){return!!(n[e+(t>>x_)]&1<<t)}function ef(t,e){return!(t&It.Self||t&It.Host&&e)}class Pd{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return D_(this._tNode,this._lView,e,Cc(i),n)}}function r0(){return new Pd(Ir(),He())}function li(t){return Es(()=>{const e=t.prototype.constructor,n=e[ns]||Yn(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[ns]||Yn(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Yn(t){return ln(t)?()=>{const e=Yn(Bt(t));return e&&e()}:yt(t)}function nf(t){const e=t[ht],n=e.type;return 2===n?e.declTNode:1===n?t[ir]:null}function Oa(t){return function t0(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(Du(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===e)return n[r+1];r+=2}}}return null}(Ir(),t)}const ls="__parameters__";function $o(t,e,n){return Es(()=>{const i=function om(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const c=new r(...o);return h.annotation=c,h;function h(g,C,S){const I=g.hasOwnProperty(ls)?g[ls]:Object.defineProperty(g,ls,{value:[]})[ls];for(;I.length<=S;)I.push(null);return(I[S]=I[S]||[]).push(c),g}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Wu(t,e){t.forEach(n=>Array.isArray(n)?Wu(n,e):e(n))}function sf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ld(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Nd(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function go(t,e,n){let i=zc(t,e);return i>=0?t[1|i]=n:(i=~i,function Bd(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function lf(t,e){const n=zc(t,e);if(n>=0)return t[1|n]}function zc(t,e){return function k_(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const o=i+(r-i>>1),c=t[o<<n];if(e===c)return o<<n;c>e?r=o:i=o+1}return~(r<<n)}(t,e,1)}const Jr=wa($o("Optional"),8),cl=wa($o("SkipSelf"),4);function yn(t){return 128==(128&t.flags)}var So=(()=>((So=So||{})[So.Important=1]="Important",So[So.DashCase=2]="DashCase",So))();const q_=/^>|^->|<!--|-->|--!>|<!-$/g,W_=/(<|>)/,Z_="\u200b$1\u200b";const Ku=new Map;let um=0;const mm="__ngContext__";function eo(t,e){u(e)?(t[mm]=e[pt],function Cf(t){Ku.set(t[pt],t)}(e)):t[mm]=e}let _;function b(t,e){return _(t,e)}function E(t){const e=t[Ji];return p(e)?e[Ji]:e}function F(t){return V(t[Sa])}function N(t){return V(t[Uo])}function V(t){for(;null!==t&&!p(t);)t=t[Uo];return t}function j(t,e,n,i,r){if(null!=i){let o,c=!1;p(i)?o=i:u(i)&&(c=!0,i=i[On]);const h=ai(i);0===t&&null!==n?null==r?ii(e,n,h):mt(e,n,h,r||null,!0):1===t&&null!==n?mt(e,n,h,r||null,!0):2===t?function Or(t,e,n){const i=_o(t,e);i&&function vn(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,h,c):3===t&&e.destroyNode(h),null!=o&&function Fr(t,e,n,i,r){const o=n[Zi];o!==ai(n)&&j(e,t,i,o,r);for(let h=f;h<n.length;h++){const g=n[h];An(g[ht],g,t,e,i,o)}}(e,t,o,n,r)}}function ie(t,e){return t.createComment(function wf(t){return t.replace(q_,e=>e.replace(W_,Z_))}(e))}function _e(t,e,n){return t.createElement(e,n)}function ft(t,e){const n=t[Ma],i=n.indexOf(e);Bp(e),n.splice(i,1)}function it(t,e){if(t.length<=f)return;const n=f+e,i=t[n];if(i){const r=i[Tc];null!==r&&r!==t&&ft(r,i),e>0&&(t[n-1][Uo]=i[Uo]);const o=Ld(t,f+e);!function De(t,e){An(t,e,e[qt],2,null,null),e[On]=null,e[ir]=null}(i[ht],i);const c=o[ho];null!==c&&c.detachView(o[ht]),i[Ji]=null,i[Uo]=null,i[At]&=-129}return i}function Ke(t,e){if(!(256&e[At])){const n=e[qt];e[os]?.destroy(),e[jn]?.destroy(),n.destroyNode&&An(t,e,n,3,null,null),function Be(t){let e=t[Sa];if(!e)return Ye(t[ht],t);for(;e;){let n=null;if(u(e))n=e[Sa];else{const i=e[f];i&&(n=i)}if(!n){for(;e&&!e[Uo]&&e!==t;)u(e)&&Ye(e[ht],e),e=e[Ji];null===e&&(e=t),u(e)&&Ye(e[ht],e),n=e&&e[Uo]}e=n}}(e)}}function Ye(t,e){if(!(256&e[At])){e[At]&=-129,e[At]|=256,function tt(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof As)){const o=n[i+1];if(Array.isArray(o))for(let c=0;c<o.length;c+=2){const h=r[o[c]],g=o[c+1];po(4,h,g);try{g.call(h)}finally{po(5,h,g)}}else{po(4,r,o);try{o.call(r)}finally{po(5,r,o)}}}}}(t,e),function nt(t,e){const n=t.cleanup,i=e[Ss];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const c=n[o+3];c>=0?i[c]():i[-c].unsubscribe(),o+=2}else n[o].call(i[n[o+1]]);null!==i&&(e[Ss]=null);const r=e[Co];if(null!==r){e[Co]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,e),1===e[ht].type&&e[qt].destroy();const n=e[Tc];if(null!==n&&p(e[Ji])){n!==e[Ji]&&ft(n,e);const i=e[ho];null!==i&&i.detachView(t)}!function cs(t){Ku.delete(t[pt])}(e)}}function $e(t,e,n){return function wt(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[On];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===tr.None||o===tr.Emulated)return null}return or(i,n)}}(t,e.parent,n)}function mt(t,e,n,i,r){t.insertBefore(e,n,i,r)}function ii(t,e,n){t.appendChild(e,n)}function cn(t,e,n,i,r){null!==i?mt(t,e,n,i,r):ii(t,e,n)}function _o(t,e){return t.parentNode(e)}function Nn(t,e,n){return vr(t,e,n)}let br,Ns,Ju,eh,vr=function Xn(t,e,n){return 40&t.type?or(t,n):null};function En(t,e,n,i){const r=$e(t,i,e),o=e[qt],h=Nn(i.parent||e[ir],i,e);if(null!=r)if(Array.isArray(n))for(let g=0;g<n.length;g++)cn(o,r,n[g],h,!1);else cn(o,r,n,h,!1);void 0!==br&&br(o,i,e,n,r)}function $n(t,e){if(null!==e){const n=e.type;if(3&n)return or(e,t);if(4&n)return Pr(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return $n(t,i);{const r=t[e.index];return p(r)?Pr(-1,r):ai(r)}}if(32&n)return b(e,t)()||ai(t[e.index]);{const i=Rr(t,e);return null!==i?Array.isArray(i)?i[0]:$n(E(t[Fn]),i):$n(t,e.next)}}return null}function Rr(t,e){return null!==e?t[Fn][ir].projection[e.projection]:null}function Pr(t,e){const n=f+t+1;if(n<e.length){const i=e[n],r=i[ht].firstChild;if(null!==r)return $n(i,r)}return e[Zi]}function pn(t,e,n,i,r,o,c){for(;null!=n;){const h=i[n.index],g=n.type;if(c&&0===e&&(h&&eo(ai(h),i),n.flags|=2),32!=(32&n.flags))if(8&g)pn(t,e,n.child,i,r,o,!1),j(e,t,r,h,o);else if(32&g){const C=b(n,i);let S;for(;S=C();)j(e,t,r,S,o);j(e,t,r,h,o)}else 16&g?ko(t,e,i,n,r,o):j(e,t,r,h,o);n=c?n.projectionNext:n.next}}function An(t,e,n,i,r,o){pn(n,i,t.firstChild,e,r,o,!1)}function ko(t,e,n,i,r,o){const c=n[Fn],g=c[ir].projection[i.projection];if(Array.isArray(g))for(let C=0;C<g.length;C++)j(e,t,r,g[C],o);else{let C=g;const S=c[Ji];yn(i)&&(C.flags|=128),pn(t,e,C,S,r,o,!0)}}function Fs(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ls(t,e,n){const{mergedAttrs:i,classes:r,styles:o}=n;null!==i&&tl(t,e,i),null!==r&&Fs(t,e,r),null!==o&&function Os(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Lr(t){return function Go(){if(void 0===Ns&&(Ns=null,qi.trustedTypes))try{Ns=qi.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ns}()?.createHTML(t)||t}function ds(){if(void 0!==Ju)return Ju;if(typeof document<"u")return document;throw new Ie(210,!1)}function th(){if(void 0===eh&&(eh=null,qi.trustedTypes))try{eh=qi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return eh}function _m(t){return th()?.createHTML(t)||t}function J_(t){return th()?.createScriptURL(t)||t}class jc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gu})`}}class f0 extends jc{getTypeName(){return"HTML"}}class g0 extends jc{getTypeName(){return"Style"}}class _0 extends jc{getTypeName(){return"Script"}}class y0 extends jc{getTypeName(){return"URL"}}class v0 extends jc{getTypeName(){return"ResourceURL"}}function us(t){return t instanceof jc?t.changingThisBreaksApplicationSecurity:t}function ar(t,e){const n=function ym(t){return t instanceof jc&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${gu})`)}return n===e}class Hc{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Lr(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class sO{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Lr(e),n}}const lO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ty(t){return(t=String(t)).match(lO)?t:"unsafe:"+t}function $c(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function If(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const ED=$c("area,br,col,hr,img,wbr"),SD=$c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),MD=$c("rp,rt"),b0=If(ED,If(SD,$c("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),If(MD,$c("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),If(MD,SD)),x0=$c("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kD=If(x0,$c("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$c("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cO=$c("script,style,template");class dO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!b0.hasOwnProperty(n))return this.sanitizedSomething=!0,!cO.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),c=o.name,h=c.toLowerCase();if(!kD.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;x0[h]&&(g=ty(g)),this.buf.push(" ",c,'="',TD(g),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();b0.hasOwnProperty(n)&&!ED.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(TD(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const uO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hO=/([^\#-~ |!])/g;function TD(t){return t.replace(/&/g,"&amp;").replace(uO,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(hO,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let iy;function ID(t,e){let n=null;try{iy=iy||function Tf(t){const e=new sO(t);return function aO(){try{return!!(new window.DOMParser).parseFromString(Lr(""),"text/html")}catch{return!1}}()?new Hc(e):e}(t);let i=e?String(e):"";n=iy.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=iy.getInertBodyElement(i)}while(i!==o);return Lr((new dO).sanitizeChildren(w0(n)||n))}finally{if(n){const i=w0(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function w0(t){return"content"in t&&function mO(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var dn=(()=>((dn=dn||{})[dn.NONE=0]="NONE",dn[dn.HTML=1]="HTML",dn[dn.STYLE=2]="STYLE",dn[dn.SCRIPT=3]="SCRIPT",dn[dn.URL=4]="URL",dn[dn.RESOURCE_URL=5]="RESOURCE_URL",dn))();function C0(t){const e=Af();return e?_m(e.sanitize(dn.HTML,t)||""):ar(t,"HTML")?_m(us(t)):ID(ds(),Xt(t))}function vm(t){const e=Af();return e?e.sanitize(dn.URL,t)||"":ar(t,"URL")?us(t):ty(Xt(t))}function AD(t){const e=Af();if(e)return J_(e.sanitize(dn.RESOURCE_URL,t)||"");if(ar(t,"ResourceURL"))return J_(us(t));throw new Ie(904,!1)}function Af(){const t=He();return t&&t[Wi].sanitizer}class Le{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=We({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Rf=new Le("ENVIRONMENT_INITIALIZER"),PD=new Le("INJECTOR",-1),OD=new Le("INJECTOR_DEF_TYPES");class FD{get(e,n=xi){if(n===xi){const i=new Error(`NullInjectorError: No provider for ${kn(e)}!`);throw i.name="NullInjectorError",i}return n}}function vO(...t){return{\u0275providers:LD(0,t),\u0275fromNgModule:!0}}function LD(t,...e){const n=[],i=new Set;let r;return Wu(e,o=>{const c=o;E0(c,n,[],i)&&(r||=[],r.push(c))}),void 0!==r&&ND(r,n),n}function ND(t,e){for(let n=0;n<t.length;n++){const{providers:r}=t[n];S0(r,o=>{e.push(o)})}}function E0(t,e,n,i){if(!(t=Bt(t)))return!1;let r=null,o=Hh(t);const c=!o&&Li(t);if(o||c){if(c&&!c.standalone)return!1;r=t}else{const g=t.ngModule;if(o=Hh(g),!o)return!1;r=g}const h=i.has(r);if(c){if(h)return!1;if(i.add(r),c.dependencies){const g="function"==typeof c.dependencies?c.dependencies():c.dependencies;for(const C of g)E0(C,e,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!h){let C;i.add(r);try{Wu(o.imports,S=>{E0(S,e,n,i)&&(C||=[],C.push(S))})}finally{}void 0!==C&&ND(C,e)}if(!h){const C=yt(r)||(()=>new r);e.push({provide:r,useFactory:C,deps:$i},{provide:OD,useValue:r,multi:!0},{provide:Rf,useValue:()=>we(r),multi:!0})}const g=o.providers;null==g||h||S0(g,S=>{e.push(S)})}}return r!==t&&void 0!==t.providers}function S0(t,e){for(let n of t)Xa(n)&&(n=n.\u0275providers),Array.isArray(n)?S0(n,e):e(n)}const bO=Fi({provide:String,useValue:Fi});function M0(t){return null!==t&&"object"==typeof t&&bO in t}function rh(t){return"function"==typeof t}const k0=new Le("Set Injector scope."),ny={},wO={};let T0;function ry(){return void 0===T0&&(T0=new FD),T0}class Wl{}class I0 extends Wl{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,R0(e,c=>this.processProvider(c)),this.records.set(PD,bm(void 0,this)),r.has("environment")&&this.records.set(Wl,bm(void 0,this));const o=this.records.get(k0);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(OD.multi,$i,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ts(this),i=pr(void 0);try{return e()}finally{ts(n),pr(i)}}get(e,n=xi,i=It.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Fl))return e[Fl](this);i=Cc(i);const r=ts(this),o=pr(void 0);try{if(!(i&It.SkipSelf)){let h=this.records.get(e);if(void 0===h){const g=function MO(t){return"function"==typeof t||"object"==typeof t&&t instanceof Le}(e)&&bd(e);h=g&&this.injectableDefInScope(g)?bm(A0(e),ny):null,this.records.set(e,h)}if(null!=h)return this.hydrate(e,h)}return(i&It.Self?ry():this.parent).get(e,n=i&It.Optional&&n===xi?null:n)}catch(c){if("NullInjectorError"===c.name){if((c[an]=c[an]||[]).unshift(kn(e)),r)throw c;return function Gh(t,e,n,i){const r=t[an];throw e[$h]&&r.unshift(e[$h]),t.message=function Cu(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=kn(e);if(Array.isArray(e))r=e.map(kn).join(" -> ");else if("object"==typeof e){let o=[];for(let c in e)if(e.hasOwnProperty(c)){let h=e[c];o.push(c+":"+("string"==typeof h?JSON.stringify(h):kn(h)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Al,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[an]=null,t}(c,e,"R3InjectorError",this.source)}throw c}finally{pr(o),ts(r)}}resolveInjectorInitializers(){const e=ts(this),n=pr(void 0);try{const i=this.get(Rf.multi,$i,It.Self);for(const r of i)r()}finally{ts(e),pr(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(kn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(e){let n=rh(e=Bt(e))?e:Bt(e&&e.provide);const i=function DO(t){return M0(t)?bm(void 0,t.useValue):bm(VD(t),ny)}(e);if(rh(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=bm(void 0,ny,!0),r.factory=()=>Pl(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===ny&&(n.value=wO,n.value=n.factory()),"object"==typeof n.value&&n.value&&function SO(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Bt(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function A0(t){const e=bd(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof Le)throw new Ie(204,!1);if(t instanceof Function)return function CO(t){const e=t.length;if(e>0)throw Nd(e,"?"),new Ie(204,!1);const n=function Ep(t){return t&&(t[Tl]||t[xd])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Ie(204,!1)}function VD(t,e,n){let i;if(rh(t)){const r=Bt(t);return yt(r)||A0(r)}if(M0(t))i=()=>Bt(t.useValue);else if(function zD(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Pl(t.deps||[]));else if(function BD(t){return!(!t||!t.useExisting)}(t))i=()=>we(Bt(t.useExisting));else{const r=Bt(t&&(t.useClass||t.provide));if(!function EO(t){return!!t.deps}(t))return yt(r)||A0(r);i=()=>new r(...Pl(t.deps))}return i}function bm(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function R0(t,e){for(const n of t)Array.isArray(n)?R0(n,e):n&&Xa(n)?R0(n.\u0275providers,e):e(n)}const oy=new Le("AppId",{providedIn:"root",factory:()=>kO}),kO="ng",UD=new Le("Platform Initializer"),Gd=new Le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hs=new Le("AnimationModuleType"),P0=new Le("CSP nonce",{providedIn:"root",factory:()=>ds().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let HD=(t,e)=>null;function $D(t,e){return HD(t,e)}class NO{}class WD{}class zO{resolveComponentFactory(e){throw function BO(t){const e=Error(`No component factory found for ${kn(t)}.`);return e.ngComponent=t,e}(e)}}let xm=(()=>{const e=class{};let t=e;return e.NULL=new zO,t})();function VO(){return wm(Ir(),He())}function wm(t,e){return new St(or(t,e))}let St=(()=>{const e=class{constructor(i){this.nativeElement=i}};let t=e;return e.__NG_ELEMENT_ID__=VO,t})();function UO(t){return t instanceof St?t.nativeElement:t}class Lf{}let Gc=(()=>{const e=class{};let t=e;return e.__NG_ELEMENT_ID__=()=>function jO(){const t=He(),n=Do(Ir().index,t);return(u(n)?n:t)[qt]}(),t})(),HO=(()=>{const e=class{};let t=e;return e.\u0275prov=We({token:e,providedIn:"root",factory:()=>null}),t})();class oh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const $O=new oh("16.0.6"),$0={};function Nf(t){for(;t;){t[At]|=64;const e=E(t);if(T(t)&&!e)return t;t=e}return null}function G0(t){return t.ngOriginalError}class Zl{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&G0(e);for(;n&&G0(n);)n=G0(n);return n||null}}const KD=new Le("",{providedIn:"root",factory:()=>!1});function QD(t){return t.ownerDocument.defaultView}function qc(t){return t instanceof Function?t():t}class nE extends Is{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Nf(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=Yi(this);this.trackingVersion++;try{e(n,i)}finally{Yi(r)}}destroy(){this.trackingVersion++}}let uy=null;function rE(){return uy??=new nE,uy}function oE(t,e){return t[e]??rE()}function sE(t,e){const n=rE();n.hasReadASignal&&(t[e]=uy,n.lView=t,uy=new nE)}const hi={};function se(t){aE(Ri(),He(),yr()+t,!1)}function aE(t,e,n,i){if(!i)if(3==(3&e[At])){const o=t.preOrderCheckHooks;null!==o&&Id(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Ad(e,o,0,n)}Hl(n)}function uE(t,e=null,n=null,i){const r=hE(t,e,n,i);return r.resolveInjectorInitializers(),r}function hE(t,e=null,n=null,i,r=new Set){const o=[n||$i,vO(t)];return i=i||("object"==typeof t?void 0:kn(t)),new I0(o,e||ry(),i||null,r)}let Ao=(()=>{const e=class{static create(i,r){if(Array.isArray(i))return uE({name:""},r,i,"");{const o=i.name??"";return uE({name:o},i.parent,i.providers,o)}}};let t=e;return e.THROW_IF_NOT_FOUND=xi,e.NULL=new FD,e.\u0275prov=We({token:e,providedIn:"any",factory:()=>we(PD)}),e.__NG_ELEMENT_ID__=-1,t})();function G(t,e=It.Default){const n=He();return null===n?we(t,e):D_(Ir(),n,Bt(t),e)}function Bf(){throw new Error("invalid")}function hy(t,e,n,i,r,o,c,h,g,C,S){const I=e.blueprint.slice();return I[On]=r,I[At]=140|i,(null!==C||t&&2048&t[At])&&(I[At]|=2048),c_(I),I[Ji]=I[nl]=t,I[Cn]=n,I[Wi]=c||t&&t[Wi],I[qt]=h||t&&t[qt],I[fr]=g||t&&t[fr]||null,I[ir]=o,I[pt]=function Y_(){return um++}(),I[rs]=S,I[kt]=C,I[Fn]=2==e.type?t[Fn]:I,I}function Dm(t,e,n,i,r){let o=t.data[e];if(null===o)o=function q0(t,e,n,i,r){const o=h_(),c=Vu(),g=t.data[e]=function dF(t,e,n,i,r,o){let c=e?e.injectorIndex:-1,h=0;return Pc()&&(h|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,c?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=g),null!==o&&(c?null==o.child&&null!==g.parent&&(o.child=g):null===o.next&&(o.next=g,g.prev=o)),g}(t,e,n,i,r),function Lc(){return Ut.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const c=function Oc(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===c?-1:c.injectorIndex}return oa(o,!0),o}function zf(t,e,n,i){if(0===n)return-1;const r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function mE(t,e,n,i,r){const o=oE(e,os),c=yr(),h=2&i;try{if(Hl(-1),h&&e.length>oi&&aE(t,e,oi,!1),po(h?2:0,r),h)o.runInContext(n,i,r);else{const C=Yi(null);try{n(i,r)}finally{Yi(C)}}}finally{h&&null===e[os]&&sE(e,os),Hl(c),po(h?3:1,r)}}function W0(t,e,n){if(y(e)){const i=Yi(null);try{const o=e.directiveEnd;for(let c=e.directiveStart;c<o;c++){const h=t.data[c];h.contentQueries&&h.contentQueries(1,n[c],c)}}finally{Yi(i)}}}function Z0(t,e,n){Qr()&&(function _F(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;x(n)&&function DF(t,e,n){const i=or(e,t),c=my(t,hy(t,pE(n),null,n.onPush?64:16,i,e,null,t[Wi].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=c}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||nm(n,e),eo(i,e);const c=n.initialInputs;for(let h=r;h<o;h++){const g=t.data[h],C=Bc(e,t,h,n);eo(C,e),null!==c&&EF(0,h-r,C,g,0,c),k(g)&&(Do(n.index,e)[Cn]=Bc(e,t,h,n))}}(t,e,n,or(n,e)),64==(64&n.flags)&&vE(t,e,n))}function Y0(t,e,n=or){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const c=i[o+1],h=-1===c?n(e,t):t[c];t[r++]=h}}}function pE(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=X0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function X0(t,e,n,i,r,o,c,h,g,C,S){const I=oi+i,U=I+r,q=function rF(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:hi);return n}(I,U),te="function"==typeof C?C():C;return q[ht]={type:t,blueprint:q,template:n,queries:null,viewQuery:h,declTNode:e,data:q.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof c?c():c,firstChild:null,schemas:g,consts:te,incompleteFirstPass:!1,ssrId:S}}let fE=t=>null;function gE(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const o=t[r];null===i?_E(n,e,r,o):i.hasOwnProperty(r)&&_E(n,e,i[r],o)}return n}function _E(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function sa(t,e,n,i,r,o,c,h){const g=or(e,n);let S,C=e.inputs;!h&&null!=C&&(S=C[i])?(tx(t,n,S,i,r),x(e)&&function mF(t,e){const n=Do(e,t);16&n[At]||(n[At]|=64)}(n,e.index)):3&e.type&&(i=function hF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=c?c(r,e.value||"",i):r,o.setProperty(g,i,r))}function K0(t,e,n,i){if(Qr()){const r=null===i?null:{"":-1},o=function vF(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let o=0;o<n.length;o++){const c=n[o];if(co(e,c.selectors,!1))if(i||(i=[]),k(c))if(null!==c.findHostDirectiveDefs){const h=[];r=r||new Map,c.findHostDirectiveDefs(c,h,r),i.unshift(...h,c),Q0(t,e,h.length)}else i.unshift(c),Q0(t,e,0);else r=r||new Map,c.findHostDirectiveDefs?.(c,i,r),i.push(c)}return null===i?null:[i,r]}(t,n);let c,h;null===o?c=h=null:[c,h]=o,null!==c&&yE(t,e,n,c,r,h),r&&function bF(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const o=n[e[r+1]];if(null==o)throw new Ie(-301,!1);i.push(e[r],o)}}}(n,i,r)}n.mergedAttrs=Nl(n.mergedAttrs,n.attrs)}function yE(t,e,n,i,r,o){for(let C=0;C<i.length;C++)Kp(nm(n,e),t,i[C].type);!function wF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let C=0;C<i.length;C++){const S=i[C];S.providersResolver&&S.providersResolver(S)}let c=!1,h=!1,g=zf(t,e,i.length,null);for(let C=0;C<i.length;C++){const S=i[C];n.mergedAttrs=Nl(n.mergedAttrs,S.hostAttrs),CF(t,n,e,g,S),xF(g,S,r),null!==S.contentQueries&&(n.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(n.flags|=64);const I=S.type.prototype;!c&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),g++}!function uF(t,e,n){const r=e.directiveEnd,o=t.data,c=e.attrs,h=[];let g=null,C=null;for(let S=e.directiveStart;S<r;S++){const I=o[S],U=n?n.get(I):null,te=U?U.outputs:null;g=gE(I.inputs,S,g,U?U.inputs:null),C=gE(I.outputs,S,C,te);const ce=null===g||null===c||Mu(e)?null:SF(g,S,c);h.push(ce)}null!==g&&(g.hasOwnProperty("class")&&(e.flags|=8),g.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=h,e.inputs=g,e.outputs=C}(t,n,o)}function vE(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,c=function jb(){return Ut.lFrame.currentDirectiveIndex}();try{Hl(o);for(let h=i;h<r;h++){const g=t.data[h],C=e[h];jp(h),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&yF(g,C)}}finally{Hl(-1),jp(c)}}function yF(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Q0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function xF(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;k(e)&&(n[""]=t)}}function CF(t,e,n,i,r){t.data[i]=r;const o=r.factory||(r.factory=yt(r.type)),c=new As(o,k(r),G);t.blueprint[i]=c,n[i]=c,function fF(t,e,n,i,r){const o=r.hostBindings;if(o){let c=t.hostBindingOpCodes;null===c&&(c=t.hostBindingOpCodes=[]);const h=~e.index;(function gF(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(c)!=h&&c.push(h),c.push(n,i,o)}}(t,e,i,zf(t,n,r.hostVars,hi),r)}function Yl(t,e,n,i,r,o){const c=or(t,e);!function J0(t,e,n,i,r,o,c){if(null==o)t.removeAttribute(e,r,n);else{const h=null==c?Xt(o):c(o,i||"",r);t.setAttribute(e,r,h,n)}}(e[qt],c,o,t.value,n,i,r)}function EF(t,e,n,i,r,o){const c=o[e];if(null!==c)for(let h=0;h<c.length;)bE(i,n,c[h++],c[h++],c[h++])}function bE(t,e,n,i,r){const o=Yi(null);try{null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{Yi(o)}}function SF(t,e,n){let i=null,r=0;for(;r<n.length;){const o=n[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const c=t[o];for(let h=0;h<c.length;h+=2)if(c[h]===e){i.push(o,c[h+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function xE(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function wE(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const c=t.data[o];$p(n[i]),c.contentQueries(2,e[o],o)}}}function my(t,e){return t[Sa]?t[Ru][Uo]=e:t[Sa]=e,t[Ru]=e,e}function ex(t,e,n){$p(0);const i=Yi(null);try{e(t,n)}finally{Yi(i)}}function CE(t){return t[Ss]||(t[Ss]=[])}function DE(t){return t.cleanup||(t.cleanup=[])}function SE(t,e){const n=t[fr],i=n?n.get(Zl,null):null;i&&i.handleError(e)}function tx(t,e,n,i,r){for(let o=0;o<n.length;){const c=n[o++],h=n[o++];bE(t.data[c],e[c],i,h,r)}}function Wc(t,e,n){const i=Fu(e,t);!function oe(t,e,n){t.setValue(e,n)}(t[qt],i,n)}function MF(t,e){const n=Do(e,t),i=n[ht];!function kF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[On];null!==r&&null===n[rs]&&(n[rs]=$D(r,n[fr])),ix(i,n,n[Cn])}function ix(t,e,n){Gp(e);try{const i=t.viewQuery;null!==i&&ex(1,i,n);const r=t.template;null!==r&&mE(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wE(t,e),t.staticViewQueries&&ex(2,t.viewQuery,n);const o=t.components;null!==o&&function TF(t,e){for(let n=0;n<e.length;n++)MF(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[At]&=-5,Xh()}}let ME=(()=>{const e=class{constructor(){this.all=new Set,this.queue=new Map}create(i,r,o){const c=typeof Zone>"u"?null:Zone.current,h=new ol(i,S=>{this.all.has(S)&&this.queue.set(S,c)},o);let g;this.all.add(h),h.notify();const C=()=>{h.cleanup(),g?.(),this.all.delete(h),this.queue.delete(h)};return g=r?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}};let t=e;return e.\u0275prov=We({token:e,providedIn:"root",factory:()=>new e}),t})();function py(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let c=0;c<e.length;c++){const h=e[c];"number"==typeof h?o=h:1==o?r=ba(r,h):2==o&&(i=ba(i,h+": "+e[++c]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function Vf(t,e,n,i,r=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&i.push(ai(o)),p(o)){for(let h=f;h<o.length;h++){const g=o[h],C=g[ht].firstChild;null!==C&&Vf(g[ht],g,C,i)}o[Zi]!==o[On]&&i.push(o[Zi])}const c=n.type;if(8&c)Vf(t,e,n.child,i);else if(32&c){const h=b(n,e);let g;for(;g=h();)i.push(g)}else if(16&c){const h=Rr(e,n);if(Array.isArray(h))i.push(...h);else{const g=E(e[Fn]);Vf(g[ht],g,h,i,!0)}}n=r?n.projectionNext:n.next}return i}function fy(t,e,n,i=!0){const r=e[Wi].rendererFactory;r.begin&&r.begin();try{gy(t,e,t.template,n)}catch(c){throw i&&SE(e,c),c}finally{r.end&&r.end(),e[Wi].effectManager?.flush()}}function gy(t,e,n,i){const r=e[At];if(256!=(256&r)){e[Wi].effectManager?.flush(),Gp(e);try{c_(e),function Uu(t){return Ut.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&mE(t,e,n,2,i);const c=3==(3&r);if(c){const C=t.preOrderCheckHooks;null!==C&&Id(e,C,null)}else{const C=t.preOrderHooks;null!==C&&Ad(e,C,0,null),Zp(e,0)}if(function FF(t){for(let e=F(t);null!==e;e=N(e)){if(!e[ia])continue;const n=e[Ma];for(let i=0;i<n.length;i++){Np(n[i])}}}(e),function OF(t){for(let e=F(t);null!==e;e=N(e))for(let n=f;n<e.length;n++){const i=e[n],r=i[ht];Nu(i)&&gy(r,i,r.template,i[Cn])}}(e),null!==t.contentQueries&&wE(t,e),c){const C=t.contentCheckHooks;null!==C&&Id(e,C)}else{const C=t.contentHooks;null!==C&&Ad(e,C,1),Zp(e,1)}!function nF(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=oE(e,jn);try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Hl(~o);else{const c=o,h=n[++r],g=n[++r];Ub(h,c),i.runInContext(g,2,e[c])}}}finally{null===e[jn]&&sE(e,jn),Hl(-1)}}(t,e);const h=t.components;null!==h&&function NF(t,e){for(let n=0;n<e.length;n++)LF(t,e[n])}(e,h);const g=t.viewQuery;if(null!==g&&ex(2,g,i),c){const C=t.viewCheckHooks;null!==C&&Id(e,C)}else{const C=t.viewHooks;null!==C&&Ad(e,C,2),Zp(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[At]&=-73,Bp(e)}finally{Xh()}}}function LF(t,e){const n=Do(e,t);if(Nu(n)){const i=n[ht];80&n[At]?gy(i,n,i.template,n[Cn]):n[jo]>0&&nx(n)}}function nx(t){for(let i=F(t);null!==i;i=N(i))for(let r=f;r<i.length;r++){const o=i[r];if(Nu(o))if(1024&o[At]){const c=o[ht];gy(c,o,c.template,o[Cn])}else o[jo]>0&&nx(o)}const n=t[ht].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Do(n[i],t);Nu(r)&&r[jo]>0&&nx(r)}}class Uf{get rootNodes(){const e=this._lView,n=e[ht];return Vf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cn]}set context(e){this._lView[Cn]=e}get destroyed(){return 256==(256&this._lView[At])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ji];if(p(e)){const n=e[Dn],i=n?n.indexOf(this):-1;i>-1&&(it(e,i),Ld(n,i))}this._attachedToViewContainer=!1}Ke(this._lView[ht],this._lView)}onDestroy(e){!function Rc(t,e){if(256==(256&t[At]))throw new Ie(911,!1);null===t[Co]&&(t[Co]=[]),t[Co].push(e)}(this._lView,e)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[At]&=-129}reattach(){this._lView[At]|=128}detectChanges(){fy(this._lView[ht],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xe(t,e){An(t,e,e[qt],2,null,null)}(this._lView[ht],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=e}}class BF extends Uf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;fy(e[ht],e,e[Cn],!1)}checkNoChanges(){}get context(){return null}}class kE extends xm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Li(e);return new jf(n,this.ngModule)}}function TE(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class VF{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Cc(i);const r=this.injector.get(e,$0,i);return r!==$0||n===$0?r:this.parentInjector.get(e,n,i)}}class jf extends WD{get inputs(){return TE(this.componentDef.inputs)}get outputs(){return TE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Ap(t){return t.map(ku).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=(r=r||this.ngModule)instanceof Wl?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const c=o?new VF(e,o):e,h=c.get(Lf,null);if(null===h)throw new Ie(407,!1);const S={rendererFactory:h,sanitizer:c.get(HO,null),effectManager:c.get(ME,null)},I=h.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",q=i?function oF(t,e,n,i){const o=i.get(KD,!1)||n===tr.ShadowDom,c=t.selectRootElement(e,o);return function sF(t){fE(t)}(c),c}(I,i,this.componentDef.encapsulation,c):_e(I,U,function zF(t){const e=t.toLowerCase();return"svg"===e?l_:"math"===e?"math":null}(U)),te=this.componentDef.onPush?576:528,ce=X0(0,null,null,1,0,null,null,null,null,null,null),ge=hy(null,ce,null,te,null,null,S,I,c,null,null);let Te,Ee;Gp(ge);try{const dt=this.componentDef;let lt,ni=null;dt.findHostDirectiveDefs?(lt=[],ni=new Map,dt.findHostDirectiveDefs(dt,lt,ni),lt.push(dt)):lt=[dt];const qn=function jF(t,e){const n=t[ht],i=oi;return t[i]=e,Dm(n,i,2,"#host",null)}(ge,q),$r=function HF(t,e,n,i,r,o,c){const h=r[ht];!function $F(t,e,n,i){for(const r of t)e.mergedAttrs=Nl(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(py(e,e.mergedAttrs,!0),null!==n&&Ls(i,n,e))}(i,t,e,c);let g=null;null!==e&&(g=$D(e,r[fr]));const C=o.rendererFactory.createRenderer(e,n),S=hy(r,pE(n),null,n.onPush?64:16,r[t.index],t,o,C,null,null,g);return h.firstCreatePass&&Q0(h,t,i.length-1),my(r,S),r[t.index]=S}(qn,q,dt,lt,ge,S,I);Ee=Lu(ce,oi),q&&function qF(t,e,n,i){if(i)tl(t,n,["ng-version",$O.full]);else{const{attrs:r,classes:o}=function Rp(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!wn(r))break;r=o}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&tl(t,n,r),o&&o.length>0&&Fs(t,n,o.join(" "))}}(I,dt,q,i),void 0!==n&&function WF(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const o=n[r];i.push(null!=o?Array.from(o):null)}}(Ee,this.ngContentSelectors,n),Te=function GF(t,e,n,i,r,o){const c=Ir(),h=r[ht],g=or(c,r);yE(h,r,c,n,null,i);for(let S=0;S<n.length;S++)eo(Bc(r,h,c.directiveStart+S,c),r);vE(h,r,c),g&&eo(g,r);const C=Bc(r,h,c.directiveStart+c.componentOffset,c);if(t[Cn]=r[Cn]=C,null!==o)for(const S of o)S(C,e);return W0(h,c,t),C}($r,dt,lt,ni,ge,[ZF]),ix(ce,ge,null)}finally{Xh()}return new UF(this.componentType,Te,wm(Ee,ge),ge,Ee)}}class UF extends NO{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new BF(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;tx(o[ht],o,r,e,n),this.previousInputValues.set(e,n),Nf(Do(this._tNode.index,o))}}get injector(){return new Pd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function ZF(){const t=Ir();Td(He()[ht],t)}function ot(t){let e=function IE(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(k(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ie(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const c=t;c.inputs=rx(t.inputs),c.declaredInputs=rx(t.declaredInputs),c.outputs=rx(t.outputs);const h=r.hostBindings;h&&QF(t,h);const g=r.viewQuery,C=r.contentQueries;if(g&&XF(t,g),C&&KF(t,C),Ml(t.inputs,r.inputs),Ml(t.declaredInputs,r.declaredInputs),Ml(t.outputs,r.outputs),k(r)&&r.data.animation){const S=t.data;S.animation=(S.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let c=0;c<o.length;c++){const h=o[c];h&&h.ngInherit&&h(t),h===ot&&(n=!1)}}e=Object.getPrototypeOf(e)}!function YF(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Nl(r.hostAttrs,n=Nl(n,r.hostAttrs))}}(i)}function rx(t){return t===lo?{}:t===$i?[]:t}function XF(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function KF(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,o)=>{e(i,r,o),n(i,r,o)}:e}function QF(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function _y(t){return!!ox(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ox(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Xl(t,e,n){return t[e]=n}function qo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function sh(t,e,n,i){const r=qo(t,e,n);return qo(t,e+1,i)||r}function yy(t,e,n,i,r){const o=sh(t,e,n,i);return qo(t,e+2,r)||o}function vi(t,e,n,i){const r=He();return qo(r,al(),e)&&(Ri(),Yl(In(),r,t,e,n,i)),vi}function Sm(t,e,n,i){return qo(t,al(),n)?e+Xt(n)+i:hi}function Tm(t,e,n,i,r,o,c,h,g,C){const I=function Na(t,e,n,i,r,o){const c=sh(t,e,n,i);return sh(t,e+2,r,o)||c}(t,sl(),n,r,c,g);return Ra(4),I?e+Xt(n)+i+Xt(r)+o+Xt(c)+h+Xt(g)+C:hi}function ze(t,e,n,i,r,o,c,h){const g=He(),C=Ri(),S=t+oi,I=C.firstCreatePass?function CL(t,e,n,i,r,o,c,h,g){const C=e.consts,S=Dm(e,t,4,c||null,Aa(C,h));K0(e,n,S,Aa(C,g)),Td(e,S);const I=S.tView=X0(2,S,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,C,null);return null!==e.queries&&(e.queries.template(e,S),I.queries=e.queries.embeddedTView(S)),S}(S,C,g,e,n,i,r,o,c):C.data[S];oa(I,!1);const U=qE(C,g,I,t);em()&&En(C,g,U,I),eo(U,g),my(g,g[S]=xE(U,g,U,I)),D(I)&&Z0(C,g,I),null!=c&&Y0(g,I,h)}let qE=function WE(t,e,n,i){return Pa(!0),e[qt].createComment("")};function Nr(t){return jl(function as(){return Ut.lFrame.contextLView}(),oi+t)}function ue(t,e,n){const i=He();return qo(i,al(),e)&&sa(Ri(),In(),i,t,e,i[qt],n,!1),ue}function ux(t,e,n,i,r){const c=r?"class":"style";tx(t,n,e.inputs[c],c,i)}function Y(t,e,n,i){const r=He(),o=Ri(),c=oi+t,h=r[qt],g=o.firstCreatePass?function ML(t,e,n,i,r,o){const c=e.consts,g=Dm(e,t,2,i,Aa(c,r));return K0(e,n,g,Aa(c,o)),null!==g.attrs&&py(g,g.attrs,!1),null!==g.mergedAttrs&&py(g,g.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,g),g}(c,o,r,e,n,i):o.data[c],C=ZE(o,r,g,h,e,t);r[c]=C;const S=D(g);return oa(g,!0),Ls(h,C,g),32!=(32&g.flags)&&em()&&En(o,r,C,g),0===function Nb(){return Ut.lFrame.elementDepthCount}()&&eo(C,r),function Bb(){Ut.lFrame.elementDepthCount++}(),S&&(Z0(o,r,g),W0(o,g,r)),null!==i&&Y0(r,g),Y}function X(){let t=Ir();Vu()?Fc():(t=t.parent,oa(t,!1));const e=t;(function Up(t){return Ut.skipHydrationRootTNode===t})(e)&&function u_(){Ut.skipHydrationRootTNode=null}(),function fo(){Ut.lFrame.elementDepthCount--}();const n=Ri();return n.firstCreatePass&&(Td(n,t),y(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Yb(t){return 0!=(8&t.flags)}(e)&&ux(n,e,He(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Xb(t){return 0!=(16&t.flags)}(e)&&ux(n,e,He(),e.stylesWithoutHost,!1),X}function Ot(t,e,n,i){return Y(t,e,n,i),X(),Ot}let ZE=(t,e,n,i,r,o)=>(Pa(!0),_e(i,r,function Wp(){return Ut.lFrame.currentNamespace}()));function Wo(t,e,n){const i=He(),r=Ri(),o=t+oi,c=r.firstCreatePass?function IL(t,e,n,i,r){const o=e.consts,c=Aa(o,i),h=Dm(e,t,8,"ng-container",c);return null!==c&&py(h,c,!0),K0(e,n,h,Aa(o,r)),null!==e.queries&&e.queries.elementStart(e,h),h}(o,r,i,e,n):r.data[o];oa(c,!0);const h=YE(r,i,c,t);return i[o]=h,em()&&En(r,i,h,c),eo(h,i),D(c)&&(Z0(r,i,c),W0(r,c,i)),null!=n&&Y0(i,c),Wo}function Zo(){let t=Ir();const e=Ri();return Vu()?Fc():(t=t.parent,oa(t,!1)),e.firstCreatePass&&(Td(e,t),y(t)&&e.queries.elementEnd(t)),Zo}function Yo(t,e,n){return Wo(t,e,n),Zo(),Yo}let YE=(t,e,n,i)=>(Pa(!0),ie(e[qt],""));function Br(){return He()}function Wf(t){return!!t&&"function"==typeof t.then}function XE(t){return!!t&&"function"==typeof t.subscribe}function Ue(t,e,n,i){const r=He(),o=Ri(),c=Ir();return function QE(t,e,n,i,r,o,c){const h=D(i),C=t.firstCreatePass&&DE(t),S=e[Cn],I=CE(e);let U=!0;if(3&i.type||c){const ce=or(i,e),ge=c?c(ce):ce,Te=I.length,Ee=c?lt=>c(ai(lt[i.index])):i.index;let dt=null;if(!c&&h&&(dt=function PL(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const c=r[o];if(c===n&&r[o+1]===i){const h=e[Ss],g=r[o+2];return h.length>g?h[g]:null}"string"==typeof c&&(o+=2)}return null}(t,e,r,i.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=o,dt.__ngLastListenerFn__=o,U=!1;else{o=eS(i,e,S,o,!1);const lt=n.listen(ge,r,o);I.push(o,lt),C&&C.push(r,Ee,Te,Te+1)}}else o=eS(i,e,S,o,!1);const q=i.outputs;let te;if(U&&null!==q&&(te=q[r])){const ce=te.length;if(ce)for(let ge=0;ge<ce;ge+=2){const ni=e[te[ge]][te[ge+1]].subscribe(o),qn=I.length;I.push(o,ni),C&&C.push(r,i.index,qn,-(qn+1))}}}(o,r,r[qt],c,t,e,i),Ue}function JE(t,e,n,i){try{return po(6,e,n),!1!==n(i)}catch(r){return SE(t,r),!1}finally{po(7,e,n)}}function eS(t,e,n,i,r){return function o(c){if(c===Function)return i;Nf(t.componentOffset>-1?Do(t.index,e):e);let g=JE(e,n,i,c),C=o.__ngNextListenerFn__;for(;C;)g=JE(e,n,C,c)&&g,C=C.__ngNextListenerFn__;return r&&!1===g&&c.preventDefault(),g}}function Ge(t=1){return function Kh(t){return(Ut.lFrame.contextLView=function Qh(t,e){for(;t>0;)e=e[nl],t--;return e}(t,Ut.lFrame.contextLView))[Cn]}(t)}function OL(t,e){let n=null;const i=function Ip(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?co(t,o,!0):Qs(i,o))return r}else n=r}return n}function Bn(t){const e=He()[Fn][ir];if(!e.projection){const i=e.projection=Nd(t?t.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const c=t?OL(o,t):0;null!==c&&(r[c]?r[c].projectionNext=o:i[c]=o,r[c]=o),o=o.next}}}function Lt(t,e=0,n){const i=He(),r=Ri(),o=Dm(r,oi+t,16,null,n||null);null===o.projection&&(o.projection=e),Fc(),(!i[rs]||Pc())&&32!=(32&o.flags)&&function ui(t,e,n){ko(e[qt],0,e,n,$e(t,n,e),Nn(n.parent||e[ir],n,e))}(r,i,o)}function hx(t,e,n){return mx(t,"",e,"",n),hx}function mx(t,e,n,i,r){const o=He(),c=Sm(o,e,n,i);return c!==hi&&sa(Ri(),In(),o,t,c,o[qt],r,!1),mx}function wy(t,e){return t<<17|e<<2}function qd(t){return t>>17&32767}function px(t){return 2|t}function ah(t){return(131068&t)>>2}function fx(t,e){return-131069&t|e<<2}function gx(t){return 1|t}function cS(t,e,n,i,r){const o=t[n+1],c=null===e;let h=i?qd(o):ah(o),g=!1;for(;0!==h&&(!1===g||c);){const S=t[h+1];VL(t[h],e)&&(g=!0,t[h+1]=i?gx(S):px(S)),h=i?qd(S):ah(S)}g&&(t[n+1]=i?px(o):gx(o))}function VL(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&zc(t,e)>=0}const io={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dS(t){return t.substring(io.key,io.keyEnd)}function uS(t,e){const n=io.textEnd;return n===e?-1:(e=io.keyEnd=function $L(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,io.key=e,n),Om(t,e,n))}function Om(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Wd(t,e,n){return hl(t,e,n,!1),Wd}function pi(t,e){return hl(t,e,null,!0),pi}function Ql(t,e){for(let n=function jL(t){return function mS(t){io.key=0,io.keyEnd=0,io.value=0,io.valueEnd=0,io.textEnd=t.length}(t),uS(t,Om(t,0,io.textEnd))}(e);n>=0;n=uS(e,n))go(t,dS(e),!0)}function hl(t,e,n,i){const r=He(),o=Ri(),c=Ra(2);o.firstUpdatePass&&yS(o,t,c,i),e!==hi&&qo(r,c,e)&&bS(o,o.data[yr()],r,r[qt],t,r[c+1]=function tN(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=kn(us(t)))),t}(e,n),i,c)}function ml(t,e,n,i){const r=Ri(),o=Ra(2);r.firstUpdatePass&&yS(r,null,o,i);const c=He();if(n!==hi&&qo(c,o,n)){const h=r.data[yr()];if(wS(h,i)&&!_S(r,o)){let g=i?h.classesWithoutHost:h.stylesWithoutHost;null!==g&&(n=ba(g,n||"")),ux(r,h,c,n,i)}else!function eN(t,e,n,i,r,o,c,h){r===hi&&(r=$i);let g=0,C=0,S=0<r.length?r[0]:null,I=0<o.length?o[0]:null;for(;null!==S||null!==I;){const U=g<r.length?r[g+1]:void 0,q=C<o.length?o[C+1]:void 0;let ce,te=null;S===I?(g+=2,C+=2,U!==q&&(te=I,ce=q)):null===I||null!==S&&S<I?(g+=2,te=S):(C+=2,te=I,ce=q),null!==te&&bS(t,e,n,i,te,ce,c,h),S=g<r.length?r[g]:null,I=C<o.length?o[C]:null}}(r,h,c,c[qt],c[o+1],c[o+1]=function QL(t,e,n){if(null==n||""===n)return $i;const i=[],r=us(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}function _S(t,e){return e>=t.expandoStartIndex}function yS(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[yr()],c=_S(t,n);wS(o,i)&&null===e&&!c&&(e=!1),e=function ZL(t,e,n,i){const r=function Hp(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Zf(n=_x(null,t,e,n,i),e.attrs,i),o=null);else{const c=e.directiveStylingLast;if(-1===c||t[c]!==r)if(n=_x(r,t,e,n,i),null===o){let g=function YL(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==ah(i))return t[qd(i)]}(t,e,i);void 0!==g&&Array.isArray(g)&&(g=_x(null,t,e,g[1],i),g=Zf(g,e.attrs,i),function XL(t,e,n,i){t[qd(n?e.classBindings:e.styleBindings)]=i}(t,e,i,g))}else o=function KL(t,e,n){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Zf(i,t[o].hostAttrs,n);return Zf(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function BL(t,e,n,i,r,o){let c=o?e.classBindings:e.styleBindings,h=qd(c),g=ah(c);t[i]=n;let S,C=!1;if(Array.isArray(n)?(S=n[1],(null===S||zc(n,S)>0)&&(C=!0)):S=n,r)if(0!==g){const U=qd(t[h+1]);t[i+1]=wy(U,h),0!==U&&(t[U+1]=fx(t[U+1],i)),t[h+1]=function LL(t,e){return 131071&t|e<<17}(t[h+1],i)}else t[i+1]=wy(h,0),0!==h&&(t[h+1]=fx(t[h+1],i)),h=i;else t[i+1]=wy(g,0),0===h?h=i:t[g+1]=fx(t[g+1],i),g=i;C&&(t[i+1]=px(t[i+1])),cS(t,S,i,!0),cS(t,S,i,!1),function zL(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&zc(o,e)>=0&&(n[i+1]=gx(n[i+1]))}(e,S,t,i,o),c=wy(h,g),o?e.classBindings=c:e.styleBindings=c}(r,o,e,n,c,i)}}function _x(t,e,n,i,r){let o=null;const c=n.directiveEnd;let h=n.directiveStylingLast;for(-1===h?h=n.directiveStart:h++;h<c&&(o=e[h],i=Zf(i,o.hostAttrs,r),o!==t);)h++;return null!==t&&(n.directiveStylingLast=h),i}function Zf(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const c=e[o];"number"==typeof c?r=c:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),go(t,c,!!n||e[++o]))}return void 0===t?null:t}function JL(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&go(t,i,n)}function bS(t,e,n,i,r,o,c,h){if(!(3&e.type))return;const g=t.data,C=g[h+1],S=function NL(t){return 1==(1&t)}(C)?xS(g,e,n,r,ah(C),c):void 0;Cy(S)||(Cy(o)||function FL(t){return 2==(2&t)}(C)&&(o=xS(g,null,n,r,h,c)),function to(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:So.DashCase;null==r?t.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=So.Important),t.setStyle(n,i,r,o))}}(i,c,Fu(yr(),n),r,o))}function xS(t,e,n,i,r,o){const c=null===e;let h;for(;r>0;){const g=t[r],C=Array.isArray(g),S=C?g[1]:g,I=null===S;let U=n[r+1];U===hi&&(U=I?$i:void 0);let q=I?lf(U,i):S===i?U:void 0;if(C&&!Cy(q)&&(q=lf(g,i)),Cy(q)&&(h=q,c))return h;const te=t[r+1];r=c?qd(te):ah(te)}if(null!==e){let g=o?e.residualClasses:e.residualStyles;null!=g&&(h=lf(g,i))}return h}function Cy(t){return void 0!==t}function wS(t,e){return 0!=(t.flags&(e?8:16))}function ye(t,e=""){const n=He(),i=Ri(),r=t+oi,o=i.firstCreatePass?Dm(i,r,1,e,null):i.data[r],c=CS(i,n,o,e,t);n[r]=c,em()&&En(i,n,c,o),oa(o,!1)}let CS=(t,e,n,i,r)=>(Pa(!0),function $(t,e){return t.createText(e)}(e[qt],i));function Bi(t){return Ro("",t,""),Bi}function Ro(t,e,n){const i=He(),r=Sm(i,t,e,n);return r!==hi&&Wc(i,yr(),r),Ro}function Yf(t,e,n,i,r){const o=He(),c=function Mm(t,e,n,i,r,o){const h=sh(t,sl(),n,r);return Ra(2),h?e+Xt(n)+i+Xt(r)+o:hi}(o,t,e,n,i,r);return c!==hi&&Wc(o,yr(),c),Yf}function yx(t,e,n,i,r,o,c){const h=He(),g=function km(t,e,n,i,r,o,c,h){const C=yy(t,sl(),n,r,c);return Ra(3),C?e+Xt(n)+i+Xt(r)+o+Xt(c)+h:hi}(h,t,e,n,i,r,o,c);return g!==hi&&Wc(h,yr(),g),yx}function vx(t,e,n,i,r,o,c,h,g){const C=He(),S=Tm(C,t,e,n,i,r,o,c,h,g);return S!==hi&&Wc(C,yr(),S),vx}function Ba(t,e,n){const i=He();return qo(i,al(),e)&&sa(Ri(),In(),i,t,e,i[qt],n,!0),Ba}const lh=void 0;var wN=["en",[["a","p"],["AM","PM"],lh],[["AM","PM"],lh,lh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lh,"{1} 'at' {0}",lh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xN(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Fm={};function ms(t){const e=function CN(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=US(e);if(n)return n;const i=e.split("-")[0];if(n=US(i),n)return n;if("en"===i)return wN;throw new Ie(701,!1)}function US(t){return t in Fm||(Fm[t]=qi.ng&&qi.ng.common&&qi.ng.common.locales&&qi.ng.common.locales[t]),Fm[t]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Lm="en-US";let jS=Lm;function wx(t,e,n,i,r){if(t=Bt(t),Array.isArray(t))for(let o=0;o<t.length;o++)wx(t[o],e,n,i,r);else{const o=Ri(),c=He();let h=rh(t)?t:Bt(t.provide),g=VD(t);const C=Ir(),S=1048575&C.providerIndexes,I=C.directiveStart,U=C.providerIndexes>>20;if(rh(t)||!t.multi){const q=new As(g,r,G),te=Dx(h,e,r?S:S+U,I);-1===te?(Kp(nm(C,c),o,h),Cx(o,t,e.length),e.push(h),C.directiveStart++,C.directiveEnd++,r&&(C.providerIndexes+=1048576),n.push(q),c.push(q)):(n[te]=q,c[te]=q)}else{const q=Dx(h,e,S+U,I),te=Dx(h,e,S,S+U),ge=te>=0&&n[te];if(r&&!ge||!r&&!(q>=0&&n[q])){Kp(nm(C,c),o,h);const Te=function bB(t,e,n,i,r){const o=new As(t,n,G);return o.multi=[],o.index=e,o.componentProviders=0,mM(o,r,i&&!n),o}(r?vB:yB,n.length,r,i,g);!r&&ge&&(n[te].providerFactory=Te),Cx(o,t,e.length,0),e.push(h),C.directiveStart++,C.directiveEnd++,r&&(C.providerIndexes+=1048576),n.push(Te),c.push(Te)}else Cx(o,t,q>-1?q:te,mM(n[r?te:q],g,!r&&i));!r&&i&&ge&&n[te].componentProviders++}}}function Cx(t,e,n,i){const r=rh(e),o=function xO(t){return!!t.useClass}(e);if(r||o){const g=(o?Bt(e.useClass):e).prototype.ngOnDestroy;if(g){const C=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const S=C.indexOf(n);-1===S?C.push(n,[i,g]):C[S+1].push(i,g)}else C.push(n,g)}}}function mM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Dx(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function yB(t,e,n,i){return Ex(this.multi,[])}function vB(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const c=this.providerFactory.componentProviders,h=Bc(n,n[ht],this.providerFactory.index,i);o=h.slice(0,c),Ex(r,o);for(let g=c;g<h.length;g++)o.push(h[g])}else o=[],Ex(r,o);return o}function Ex(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ft(t,e=[]){return n=>{n.providersResolver=(i,r)=>function _B(t,e,n){const i=Ri();if(i.firstCreatePass){const r=k(t);wx(n,i.data,i.blueprint,r,!0),wx(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Nm{}class pM{}class Sx extends Nm{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kE(this);const r=uo(e);this._bootstrapComponents=qc(r.bootstrap),this._r3Injector=hE(e,n,[{provide:Nm,useValue:this},{provide:xm,useValue:this.componentFactoryResolver},...i],kn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Mx extends pM{constructor(e){super(),this.moduleType=e}create(e){return new Sx(this.moduleType,e,[])}}class fM extends Nm{constructor(e){super(),this.componentFactoryResolver=new kE(this),this.instance=null;const n=new I0([...e.providers,{provide:Nm,useValue:this},{provide:xm,useValue:this.componentFactoryResolver}],e.parent||ry(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function kx(t,e,n=null){return new fM({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let CB=(()=>{const e=class{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i.id)){const r=LD(0,i.type),o=r.length>0?kx([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i.id,o)}return this.cachedInjectors.get(i.id)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}};let t=e;return e.\u0275prov=We({token:e,providedIn:"environment",factory:()=>new e(we(Wl))}),t})();function gM(t){t.getStandaloneInjector=e=>e.get(CB).getOrCreateStandaloneInjector(t)}function Ix(t,e,n,i){return function DM(t,e,n,i,r,o){const c=e+n;return qo(t,c,r)?Xl(t,c+1,o?i.call(o,r):i(r)):tg(t,c+1)}(He(),Eo(),t,e,n,i)}function ch(t,e,n,i,r){return EM(He(),Eo(),t,e,n,i,r)}function tg(t,e){const n=t[e];return n===hi?void 0:n}function EM(t,e,n,i,r,o,c){const h=e+n;return sh(t,h,r,o)?Xl(t,h+2,c?i.call(c,r,o):i(r,o)):tg(t,h+2)}function Bm(t,e){const n=Ri();let i;const r=t+oi;n.firstCreatePass?(i=function zB(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=yt(i.type)),c=pr(G);try{const h=Gl(!1),g=o();return Gl(h),function SL(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,He(),r,g),g}finally{pr(c)}}function ky(t,e,n,i){const r=t+oi,o=He(),c=jl(o,r);return ig(o,r)?EM(o,Eo(),e,c.transform,n,i,c):c.transform(n,i)}function Ax(t,e,n,i,r){const o=t+oi,c=He(),h=jl(c,o);return ig(c,o)?function SM(t,e,n,i,r,o,c,h){const g=e+n;return yy(t,g,r,o,c)?Xl(t,g+3,h?i.call(h,r,o,c):i(r,o,c)):tg(t,g+3)}(c,Eo(),e,h.transform,n,i,r,h):h.transform(n,i,r)}function ig(t,e){return t[ht].data[e].pure}function Rx(t){return e=>{setTimeout(t,void 0,e)}}const fi=class HB extends Ct{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),c=i;if(e&&"object"==typeof e){const g=e;r=g.next?.bind(g),o=g.error?.bind(g),c=g.complete?.bind(g)}this.__isAsync&&(o=Rx(o),r&&(r=Rx(r)),c&&(c=Rx(c)));const h=super.subscribe({next:r,error:o,complete:c});return e instanceof zi&&e.add(h),h}};function $B(){return this._results[Symbol.iterator]()}class Jl{get changes(){return this._changes||(this._changes=new fi)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Jl.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=$B)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Rs(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function o0(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Kn=(()=>{const e=class{};let t=e;return e.__NG_ELEMENT_ID__=WB,t})();const GB=Kn,qB=class extends GB{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n,null)}createEmbeddedViewImpl(e,n,i){const r=this._declarationTContainer.tView,o=hy(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,n||null,i||null);o[Tc]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[ho];return null!==h&&(o[ho]=h.createEmbeddedView(r)),ix(r,o,e),new Uf(o)}};function WB(){return Ty(Ir(),He())}function Ty(t,e){return 4&t.type?new qB(e,t,wm(t,e)):null}let no=(()=>{const e=class{};let t=e;return e.__NG_ELEMENT_ID__=ez,t})();function ez(){return OM(Ir(),He())}const tz=no,RM=class extends tz{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return wm(this._hostTNode,this._hostLView)}get injector(){return new Pd(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xp(this._hostTNode,this._hostLView);if(y_(e)){const n=im(e,this._hostLView),i=tm(e);return new Pd(n[ht].data[i+8],n)}return new Pd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=PM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-f}createEmbeddedView(e,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const h=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(h,r,false),h}createComponent(e,n,i,r,o){const c=e&&!function Fd(t){return"function"==typeof t}(e);let h;if(c)h=n;else{const ce=n||{};h=ce.index,i=ce.injector,r=ce.projectableNodes,o=ce.environmentInjector||ce.ngModuleRef}const g=c?e:new jf(Li(e)),C=i||this.parentInjector;if(!o&&null==g.ngModule){const ge=(c?C:this.parentInjector).get(Wl,null);ge&&(o=ge)}Li(g.componentType??{});const q=g.create(C,r,null,o);return this.insertImpl(q.hostView,h,false),q}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView,o=r[ht];if(function Fb(t){return p(t[Ji])}(r)){const g=this.indexOf(e);if(-1!==g)this.detach(g);else{const C=r[Ji],S=new RM(C,C[ir],C[Ji]);S.detach(S.indexOf(e))}}const c=this._adjustIndex(n),h=this._lContainer;if(function Ne(t,e,n,i){const r=f+i,o=n.length;i>0&&(n[r-1][Uo]=e),i<o-f?(e[Uo]=n[r],sf(n,f+i,e)):(n.push(e),e[Uo]=null),e[Ji]=n;const c=e[Tc];null!==c&&n!==c&&function at(t,e){const n=t[Ma];e[Fn]!==e[Ji][Ji][Fn]&&(t[ia]=!0),null===n?t[Ma]=[e]:n.push(e)}(c,e);const h=e[ho];null!==h&&h.insertView(t),e[At]|=128}(o,r,h,c),!i){const g=Pr(c,h),C=r[qt],S=_o(C,h[Zi]);null!==S&&function fe(t,e,n,i,r,o){i[On]=r,i[ir]=e,An(t,i,n,1,r,o)}(o,h[ir],C,r,S,g)}return e.attachToViewContainerRef(),sf(Ox(h),c,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=PM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=it(this._lContainer,n);i&&(Ld(Ox(this._lContainer),n),Ke(i[ht],i))}detach(e){const n=this._adjustIndex(e,-1),i=it(this._lContainer,n);return i&&null!=Ld(Ox(this._lContainer),n)?new Uf(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function PM(t){return t[Dn]}function Ox(t){return t[Dn]||(t[Dn]=[])}function OM(t,e){let n;const i=e[t.index];return p(i)?n=i:(n=xE(i,e,null,t),e[t.index]=n,my(e,n)),FM(n,e,t,i),new RM(n,t,e)}let FM=function LM(t,e,n,i){if(t[Zi])return;let r;r=8&n.type?ai(i):function iz(t,e){const n=t[qt],i=n.createComment(""),r=or(e,t);return mt(n,_o(n,r),i,function Ar(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Zi]=r};class Fx{constructor(e){this.queryList=e,this.matches=null}clone(){return new Fx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lx{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const c=n.getByIndex(o);r.push(this.queries[c.indexInDeclarationView].clone())}return new Lx(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==UM(e,n).matches&&this.queries[n].setDirty()}}class NM{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class Nx{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new Nx(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Bx{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new Bx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,n,oz(n,o)),this.matchTNodeWithReadOption(e,n,$u(n,e,o,!1,!1))}else i===Kn?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,$u(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===St||r===no||r===Kn&&4&n.type)this.addMatch(n.index,-2);else{const o=$u(n,e,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function oz(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function az(t,e,n,i){return-1===n?function sz(t,e){return 11&t.type?wm(t,e):4&t.type?Ty(t,e):null}(e,t):-2===n?function lz(t,e,n){return n===St?wm(e,t):n===Kn?Ty(e,t):n===no?OM(e,t):void 0}(t,e,i):Bc(t,t[ht],n,e)}function BM(t,e,n,i){const r=e[ho].queries[i];if(null===r.matches){const o=t.data,c=n.matches,h=[];for(let g=0;g<c.length;g+=2){const C=c[g];h.push(C<0?null:az(e,o[C],c[g+1],n.metadata.read))}r.matches=h}return r.matches}function zx(t,e,n,i){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const c=BM(t,e,r,n);for(let h=0;h<o.length;h+=2){const g=o[h];if(g>0)i.push(c[h/2]);else{const C=o[h+1],S=e[-g];for(let I=f;I<S.length;I++){const U=S[I];U[Tc]===U[Ji]&&zx(U[ht],U,C,i)}if(null!==S[Ma]){const I=S[Ma];for(let U=0;U<I.length;U++){const q=I[U];zx(q[ht],q,C,i)}}}}}return i}function Dt(t){const e=He(),n=Ri(),i=p_();$p(i+1);const r=UM(n,i);if(t.dirty&&function Ob(t){return 4==(4&t[At])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?zx(n,e,i,[]):BM(n,e,r,i);t.reset(o,UO),t.notifyOnChanges()}return!0}return!1}function cr(t,e,n){const i=Ri();i.firstCreatePass&&(VM(i,new NM(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),zM(i,He(),e)}function gi(t,e,n,i){const r=Ri();if(r.firstCreatePass){const o=Ir();VM(r,new NM(e,n,i),o.index),function dz(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}zM(r,He(),n)}function Et(){return function cz(t,e){return t[ho].queries[e].queryList}(He(),p_())}function zM(t,e,n){const i=new Jl(4==(4&n));(function cF(t,e,n,i){const r=CE(e);r.push(n),t.firstCreatePass&&DE(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[ho]&&(e[ho]=new Lx),e[ho].queries.push(new Fx(i))}function VM(t,e,n){null===t.queries&&(t.queries=new Nx),t.queries.track(new Bx(e,n))}function UM(t,e){return t.queries.getByIndex(e)}function ec(t,e){return Ty(t,e)}const Gx=new Le("Application Initializer");let qx=(()=>{const e=class{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Je(Gx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const o of this.appInits){const c=o();if(Wf(c))i.push(c);else if(XE(c)){const h=new Promise((g,C)=>{c.subscribe({complete:g,error:C})});i.push(h)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),0===i.length&&r(),this.initialized=!0}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),rk=(()=>{const e=class{log(i){console.log(i)}warn(i){console.warn(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"platform"}),t})();const tc=new Le("LocaleId",{providedIn:"root",factory:()=>Je(tc,It.Optional|It.SkipSelf)||function Az(){return typeof $localize<"u"&&$localize.locale||Lm}()});let Ay=(()=>{const e=class{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pn(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class Pz{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let ok=(()=>{const e=class{compileModuleSync(i){return new Mx(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const r=this.compileModuleSync(i),c=qc(uo(i).declarations).reduce((h,g)=>{const C=Li(g);return C&&h.push(new jf(C)),h},[]);return new Pz(r,c)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const Lz=(()=>Promise.resolve(0))();function Wx(t){typeof Zone>"u"?Lz.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function lk(...t){}class Rt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fi(!1),this.onMicrotaskEmpty=new fi(!1),this.onStable=new fi(!1),this.onError=new fi(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Nz(){let t=qi.requestAnimationFrame,e=qi.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Vz(t){const e=()=>{!function zz(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(qi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Yx(t),t.isCheckStableRunning=!0,Zx(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Yx(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,c,h)=>{try{return ck(t),n.invokeTask(r,o,c,h)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),dk(t)}},onInvoke:(n,i,r,o,c,h,g)=>{try{return ck(t),n.invoke(r,o,c,h,g)}finally{t.shouldCoalesceRunChangeDetection&&e(),dk(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Yx(t),Zx(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rt.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Rt.isInAngularZone())throw new Ie(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const o=this._inner,c=o.scheduleEventTask("NgZoneEvent: "+r,e,Bz,lk,lk);try{return o.runTask(c,n,i)}finally{o.cancelTask(c)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const Bz={};function Zx(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Yx(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ck(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dk(t){t._nesting--,Zx(t)}class Uz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fi,this.onMicrotaskEmpty=new fi,this.onStable=new fi,this.onError=new fi}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const uk=new Le("",{providedIn:"root",factory:hk});function hk(){const t=Je(Rt);let e=!0;return ao(new Si(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Si(r=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),Wx(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const c=t.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),c.unsubscribe()}}).pipe(gd()))}const mk=new Le(""),Ry=new Le("");let Qx,Xx=(()=>{const e=class{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qx||(function jz(t){Qx=t}(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rt.assertNotInAngularZone(),Wx(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wx(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let c=-1;r&&r>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==c),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:c,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Rt),we(Kx),we(Ry))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})(),Kx=(()=>{const e=class{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return Qx?.findTestabilityInTree(this,i,r)??null}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"platform"}),t})(),Zd=null;const pk=new Le("AllowMultipleToken"),Jx=new Le("PlatformDestroyListeners"),ew=new Le("appBootstrapListener");class gk{constructor(e,n){this.name=e,this.token=n}}function yk(t,e,n=[]){const i=`Platform: ${e}`,r=new Le(i);return(o=[])=>{let c=tw();if(!c||c.injector.get(pk,!1)){const h=[...n,...o,{provide:r,useValue:!0}];t?t(h):function Gz(t){if(Zd&&!Zd.get(pk,!1))throw new Ie(400,!1);(function fk(){!function rl(t){mn=t}(()=>{throw new Ie(600,!1)})})(),Zd=t;const e=t.get(bk);(function _k(t){t.get(UD,null)?.forEach(n=>n())})(t)}(function vk(t=[],e){return Ao.create({name:e,providers:[{provide:k0,useValue:"platform"},{provide:Jx,useValue:new Set([()=>Zd=null])},...t]})}(h,i))}return function Wz(t){const e=tw();if(!e)throw new Ie(401,!1);return e}()}}function tw(){return Zd?.get(bk)??null}let bk=(()=>{const e=class{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const o=function Zz(t="zone.js",e){return"noop"===t?new Uz:"zone.js"===t?new Rt(e):t}(r?.ngZone,function xk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const c=function wB(t,e,n){return new Sx(t,e,n)}(i.moduleType,this.injector,function Sk(t){return[{provide:Rt,useFactory:t},{provide:Rf,multi:!0,useFactory:()=>{const e=Je(Xz,{optional:!0});return()=>e.initialize()}},{provide:Ek,useFactory:Yz},{provide:uk,useFactory:hk}]}(()=>o)),h=c.injector.get(Zl,null);return o.runOutsideAngular(()=>{const g=o.onError.subscribe({next:C=>{h.handleError(C)}});c.onDestroy(()=>{Py(this._modules,c),g.unsubscribe()})}),function wk(t,e,n){try{const i=n();return Wf(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(h,o,()=>{const g=c.injector.get(qx);return g.runInitializers(),g.donePromise.then(()=>(function HS(t){Yr(t,"Expected localeId to be defined"),"string"==typeof t&&(jS=t.toLowerCase().replace(/_/g,"-"))}(c.injector.get(tc,Lm)||Lm),this._moduleDoBootstrap(c),c))})})}bootstrapModule(i,r=[]){const o=Ck({},r);return function Hz(t,e,n){const i=new Mx(n);return Promise.resolve(i)}(0,0,i).then(c=>this.bootstrapModuleFactory(c,o))}_moduleDoBootstrap(i){const r=i.injector.get(Yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!i.instance.ngDoBootstrap)throw new Ie(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(Jx,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Ao))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"platform"}),t})();function Ck(t,e){return Array.isArray(e)?e.reduce(Ck,t):{...t,...e}}let Yd=(()=>{const e=class{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Je(Ek),this.zoneIsStable=Je(uk),this.componentTypes=[],this.components=[],this.isStable=Je(Ay).hasPendingTasks.pipe(Sr(i=>i?bt(!1):this.zoneIsStable),Ks(),gd()),this._injector=Je(Wl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const o=i instanceof WD;if(!this._injector.get(qx).done)throw!o&&function Ea(t){const e=Li(t)||kr(t)||Tr(t);return null!==e&&e.standalone}(i),new Ie(405,!1);let h;h=o?i:this._injector.get(xm).resolveComponentFactory(i),this.componentTypes.push(h.componentType);const g=function $z(t){return t.isBoundToModule}(h)?void 0:this._injector.get(Nm),S=h.create(Ao.NULL,[],r||h.selector,g),I=S.location.nativeElement,U=S.injector.get(mk,null);return U?.registerApplication(I),S.onDestroy(()=>{this.detachView(S.hostView),Py(this.components,S),U?.unregisterApplication(I)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;Py(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(ew,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Py(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Ie(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function Py(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ek=new Le("",{providedIn:"root",factory:()=>Je(Zl).handleError.bind(void 0)});function Yz(){const t=Je(Rt),e=Je(Zl);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Xz=(()=>{const e=class{constructor(){this.zone=Je(Rt),this.applicationRef=Je(Yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();let bo=(()=>{const e=class{};let t=e;return e.__NG_ELEMENT_ID__=Qz,t})();function Qz(t){return function Jz(t,e,n){if(x(t)&&!n){const i=Do(t.index,e);return new Uf(i,i)}return 47&t.type?new Uf(e[Fn],e):null}(Ir(),He(),16==(16&t))}class Ik{constructor(){}supports(e){return _y(e)}create(e){return new s4(e)}}const o4=(t,e)=>e;class s4{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||o4}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const c=!i||n&&n.currentIndex<Rk(i,r,o)?n:i,h=Rk(c,r,o),g=c.currentIndex;if(c===i)r--,i=i._nextRemoved;else if(n=n._next,null==c.previousIndex)r++;else{o||(o=[]);const C=h-r,S=g-r;if(C!=S){for(let U=0;U<C;U++){const q=U<o.length?o[U]:o[U]=0,te=q+U;S<=te&&te<C&&(o[U]=q+1)}o[c.previousIndex]=S-C}}h!==g&&e(c,h,g)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!_y(e))throw new Ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,c,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let h=0;h<this.length;h++)o=e[h],c=this._trackByFn(h,o),null!==n&&Object.is(n.trackById,c)?(i&&(n=this._verifyReinsertion(n,o,c,h)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,c,h),i=!0),n=n._next}else r=0,function oL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,h=>{c=this._trackByFn(r,h),null!==n&&Object.is(n.trackById,c)?(i&&(n=this._verifyReinsertion(n,h,c,r)),Object.is(n.item,h)||this._addIdentityChange(n,h)):(n=this._mismatch(n,h,c,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new a4(n,i),o,r),e}_verifyReinsertion(e,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ak),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ak),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class a4{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class l4{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class Ak{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new l4,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rk(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class Pk{constructor(){}supports(e){return e instanceof Map||ox(e)}create(){return new c4}}class c4{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||ox(e)))throw new Ie(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,n);const o=r._prev,c=r._next;return o&&(o._next=c),c&&(c._prev=o),r._next=null,r._prev=null,r}const i=new d4(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}}class d4{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ok(){return new Zc([new Ik])}let Zc=(()=>{const e=class{constructor(i){this.factories=i}static create(i,r){if(null!=r){const o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||Ok()),deps:[[e,new cl,new Jr]]}}find(i){const r=this.factories.find(o=>o.supports(i));if(null!=r)return r;throw new Ie(901,!1)}};let t=e;return e.\u0275prov=We({token:e,providedIn:"root",factory:Ok}),t})();function Fk(){return new rg([new Pk])}let rg=(()=>{const e=class{constructor(i){this.factories=i}static create(i,r){if(r){const o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||Fk()),deps:[[e,new cl,new Jr]]}}find(i){const r=this.factories.find(o=>o.supports(i));if(r)return r;throw new Ie(901,!1)}};let t=e;return e.\u0275prov=We({token:e,providedIn:"root",factory:Fk}),t})();const m4=yk(null,"core",[]);let p4=(()=>{const e=class{constructor(i){}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Yd))},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})();function Um(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let lw=null;function Xd(){return lw}class S4{}const ci=new Le("DocumentToken");let cw=(()=>{const e=class{historyGo(i){throw new Error("Not implemented")}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return Je(k4)},providedIn:"platform"}),t})();const M4=new Le("Location Initialized");let k4=(()=>{const e=class extends cw{constructor(){super(),this._doc=Je(ci),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xd().getBaseHref(this._doc)}onPopState(i){const r=Xd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=Xd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return new e},providedIn:"platform"}),t})();function dw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function jk(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Yc(t){return t&&"?"!==t[0]?"?"+t:t}let uh=(()=>{const e=class{historyGo(i){throw new Error("Not implemented")}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return Je($k)},providedIn:"root"}),t})();const Hk=new Le("appBaseHref");let $k=(()=>{const e=class extends uh{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Je(ci).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return dw(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+Yc(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,c){const h=this.prepareExternalUrl(o+Yc(c));this._platformLocation.pushState(i,r,h)}replaceState(i,r,o,c){const h=this.prepareExternalUrl(o+Yc(c));this._platformLocation.replaceState(i,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(cw),we(Hk,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),T4=(()=>{const e=class extends uh{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){const r=dw(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,c){let h=this.prepareExternalUrl(o+Yc(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(i,r,h)}replaceState(i,r,o,c){let h=this.prepareExternalUrl(o+Yc(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(cw),we(Hk,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})(),og=(()=>{const e=class{constructor(i){this._subject=new fi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function R4(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(jk(Gk(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Yc(r))}normalize(i){return e.stripTrailingSlash(function A4(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Gk(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Yc(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Yc(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};let t=e;return e.normalizeQueryParams=Yc,e.joinWithSlash=dw,e.stripTrailingSlash=jk,e.\u0275fac=function(r){return new(r||e)(we(uh))},e.\u0275prov=We({token:e,factory:function(){return function I4(){return new og(we(uh))}()},providedIn:"root"}),t})();function Gk(t){return t.replace(/\/index.html$/,"")}var xr=(()=>((xr=xr||{})[xr.Format=0]="Format",xr[xr.Standalone=1]="Standalone",xr))(),Ui=(()=>((Ui=Ui||{})[Ui.Narrow=0]="Narrow",Ui[Ui.Abbreviated=1]="Abbreviated",Ui[Ui.Wide=2]="Wide",Ui[Ui.Short=3]="Short",Ui))(),Qn=(()=>((Qn=Qn||{})[Qn.Short=0]="Short",Qn[Qn.Medium=1]="Medium",Qn[Qn.Long=2]="Long",Qn[Qn.Full=3]="Full",Qn))(),Yt=(()=>((Yt=Yt||{})[Yt.Decimal=0]="Decimal",Yt[Yt.Group=1]="Group",Yt[Yt.List=2]="List",Yt[Yt.PercentSign=3]="PercentSign",Yt[Yt.PlusSign=4]="PlusSign",Yt[Yt.MinusSign=5]="MinusSign",Yt[Yt.Exponential=6]="Exponential",Yt[Yt.SuperscriptingExponent=7]="SuperscriptingExponent",Yt[Yt.PerMille=8]="PerMille",Yt[Yt.Infinity=9]="Infinity",Yt[Yt.NaN=10]="NaN",Yt[Yt.TimeSeparator=11]="TimeSeparator",Yt[Yt.CurrencyDecimal=12]="CurrencyDecimal",Yt[Yt.CurrencyGroup=13]="CurrencyGroup",Yt))();function Ny(t,e){return Va(ms(t)[_t.DateFormat],e)}function By(t,e){return Va(ms(t)[_t.TimeFormat],e)}function zy(t,e){return Va(ms(t)[_t.DateTimeFormat],e)}function za(t,e){const n=ms(t),i=n[_t.NumberSymbols][e];if(typeof i>"u"){if(e===Yt.CurrencyDecimal)return n[_t.NumberSymbols][Yt.Decimal];if(e===Yt.CurrencyGroup)return n[_t.NumberSymbols][Yt.Group]}return i}function Wk(t){if(!t[_t.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[_t.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Va(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function hw(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const G4=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sg={},q4=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ro=(()=>((ro=ro||{})[ro.Short=0]="Short",ro[ro.ShortGMT=1]="ShortGMT",ro[ro.Long=2]="Long",ro[ro.Extended=3]="Extended",ro))(),Qt=(()=>((Qt=Qt||{})[Qt.FullYear=0]="FullYear",Qt[Qt.Month=1]="Month",Qt[Qt.Date=2]="Date",Qt[Qt.Hours=3]="Hours",Qt[Qt.Minutes=4]="Minutes",Qt[Qt.Seconds=5]="Seconds",Qt[Qt.FractionalSeconds=6]="FractionalSeconds",Qt[Qt.Day=7]="Day",Qt))(),Ci=(()=>((Ci=Ci||{})[Ci.DayPeriods=0]="DayPeriods",Ci[Ci.Days=1]="Days",Ci[Ci.Months=2]="Months",Ci[Ci.Eras=3]="Eras",Ci))();function W4(t,e,n,i){let r=function n3(t){if(Xk(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[r,o=1,c=1]=t.split("-").map(h=>+h);return Vy(r,o-1,c)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let i;if(i=t.match(G4))return function r3(t){const e=new Date(0);let n=0,i=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const c=Number(t[4]||0)-n,h=Number(t[5]||0)-i,g=Number(t[6]||0),C=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,c,h,g,C),e}(i)}const e=new Date(t);if(!Xk(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Xc(n,e)||e;let h,c=[];for(;e;){if(h=q4.exec(e),!h){c.push(e);break}{c=c.concat(h.slice(1));const S=c.pop();if(!S)break;e=S}}let g=r.getTimezoneOffset();i&&(g=Yk(i,g),r=function t3(t,e,n){const i=n?-1:1,r=t.getTimezoneOffset();return function e3(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,i*(Yk(e,r)-r))}(r,i,!0));let C="";return c.forEach(S=>{const I=function J4(t){if(pw[t])return pw[t];let e;switch(t){case"G":case"GG":case"GGG":e=Rn(Ci.Eras,Ui.Abbreviated);break;case"GGGG":e=Rn(Ci.Eras,Ui.Wide);break;case"GGGGG":e=Rn(Ci.Eras,Ui.Narrow);break;case"y":e=Vr(Qt.FullYear,1,0,!1,!0);break;case"yy":e=Vr(Qt.FullYear,2,0,!0,!0);break;case"yyy":e=Vr(Qt.FullYear,3,0,!1,!0);break;case"yyyy":e=Vr(Qt.FullYear,4,0,!1,!0);break;case"Y":e=$y(1);break;case"YY":e=$y(2,!0);break;case"YYY":e=$y(3);break;case"YYYY":e=$y(4);break;case"M":case"L":e=Vr(Qt.Month,1,1);break;case"MM":case"LL":e=Vr(Qt.Month,2,1);break;case"MMM":e=Rn(Ci.Months,Ui.Abbreviated);break;case"MMMM":e=Rn(Ci.Months,Ui.Wide);break;case"MMMMM":e=Rn(Ci.Months,Ui.Narrow);break;case"LLL":e=Rn(Ci.Months,Ui.Abbreviated,xr.Standalone);break;case"LLLL":e=Rn(Ci.Months,Ui.Wide,xr.Standalone);break;case"LLLLL":e=Rn(Ci.Months,Ui.Narrow,xr.Standalone);break;case"w":e=mw(1);break;case"ww":e=mw(2);break;case"W":e=mw(1,!0);break;case"d":e=Vr(Qt.Date,1);break;case"dd":e=Vr(Qt.Date,2);break;case"c":case"cc":e=Vr(Qt.Day,1);break;case"ccc":e=Rn(Ci.Days,Ui.Abbreviated,xr.Standalone);break;case"cccc":e=Rn(Ci.Days,Ui.Wide,xr.Standalone);break;case"ccccc":e=Rn(Ci.Days,Ui.Narrow,xr.Standalone);break;case"cccccc":e=Rn(Ci.Days,Ui.Short,xr.Standalone);break;case"E":case"EE":case"EEE":e=Rn(Ci.Days,Ui.Abbreviated);break;case"EEEE":e=Rn(Ci.Days,Ui.Wide);break;case"EEEEE":e=Rn(Ci.Days,Ui.Narrow);break;case"EEEEEE":e=Rn(Ci.Days,Ui.Short);break;case"a":case"aa":case"aaa":e=Rn(Ci.DayPeriods,Ui.Abbreviated);break;case"aaaa":e=Rn(Ci.DayPeriods,Ui.Wide);break;case"aaaaa":e=Rn(Ci.DayPeriods,Ui.Narrow);break;case"b":case"bb":case"bbb":e=Rn(Ci.DayPeriods,Ui.Abbreviated,xr.Standalone,!0);break;case"bbbb":e=Rn(Ci.DayPeriods,Ui.Wide,xr.Standalone,!0);break;case"bbbbb":e=Rn(Ci.DayPeriods,Ui.Narrow,xr.Standalone,!0);break;case"B":case"BB":case"BBB":e=Rn(Ci.DayPeriods,Ui.Abbreviated,xr.Format,!0);break;case"BBBB":e=Rn(Ci.DayPeriods,Ui.Wide,xr.Format,!0);break;case"BBBBB":e=Rn(Ci.DayPeriods,Ui.Narrow,xr.Format,!0);break;case"h":e=Vr(Qt.Hours,1,-12);break;case"hh":e=Vr(Qt.Hours,2,-12);break;case"H":e=Vr(Qt.Hours,1);break;case"HH":e=Vr(Qt.Hours,2);break;case"m":e=Vr(Qt.Minutes,1);break;case"mm":e=Vr(Qt.Minutes,2);break;case"s":e=Vr(Qt.Seconds,1);break;case"ss":e=Vr(Qt.Seconds,2);break;case"S":e=Vr(Qt.FractionalSeconds,1);break;case"SS":e=Vr(Qt.FractionalSeconds,2);break;case"SSS":e=Vr(Qt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=jy(ro.Short);break;case"ZZZZZ":e=jy(ro.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jy(ro.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=jy(ro.Long);break;default:return null}return pw[t]=e,e}(S);C+=I?I(r,n,g):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Vy(t,e,n){const i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function Xc(t,e){const n=function P4(t){return ms(t)[_t.LocaleId]}(t);if(sg[n]=sg[n]||{},sg[n][e])return sg[n][e];let i="";switch(e){case"shortDate":i=Ny(t,Qn.Short);break;case"mediumDate":i=Ny(t,Qn.Medium);break;case"longDate":i=Ny(t,Qn.Long);break;case"fullDate":i=Ny(t,Qn.Full);break;case"shortTime":i=By(t,Qn.Short);break;case"mediumTime":i=By(t,Qn.Medium);break;case"longTime":i=By(t,Qn.Long);break;case"fullTime":i=By(t,Qn.Full);break;case"short":const r=Xc(t,"shortTime"),o=Xc(t,"shortDate");i=Uy(zy(t,Qn.Short),[r,o]);break;case"medium":const c=Xc(t,"mediumTime"),h=Xc(t,"mediumDate");i=Uy(zy(t,Qn.Medium),[c,h]);break;case"long":const g=Xc(t,"longTime"),C=Xc(t,"longDate");i=Uy(zy(t,Qn.Long),[g,C]);break;case"full":const S=Xc(t,"fullTime"),I=Xc(t,"fullDate");i=Uy(zy(t,Qn.Full),[S,I])}return i&&(sg[n][e]=i),i}function Uy(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,i){return null!=e&&i in e?e[i]:n})),t}function fl(t,e,n="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=n));let c=String(t);for(;c.length<e;)c="0"+c;return i&&(c=c.slice(c.length-e)),o+c}function Vr(t,e,n=0,i=!1,r=!1){return function(o,c){let h=function Y4(t,e){switch(t){case Qt.FullYear:return e.getFullYear();case Qt.Month:return e.getMonth();case Qt.Date:return e.getDate();case Qt.Hours:return e.getHours();case Qt.Minutes:return e.getMinutes();case Qt.Seconds:return e.getSeconds();case Qt.FractionalSeconds:return e.getMilliseconds();case Qt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||h>-n)&&(h+=n),t===Qt.Hours)0===h&&-12===n&&(h=12);else if(t===Qt.FractionalSeconds)return function Z4(t,e){return fl(t,3).substring(0,e)}(h,e);const g=za(c,Yt.MinusSign);return fl(h,e,g,i,r)}}function Rn(t,e,n=xr.Format,i=!1){return function(r,o){return function X4(t,e,n,i,r,o){switch(n){case Ci.Months:return function L4(t,e,n){const i=ms(t),o=Va([i[_t.MonthsFormat],i[_t.MonthsStandalone]],e);return Va(o,n)}(e,r,i)[t.getMonth()];case Ci.Days:return function F4(t,e,n){const i=ms(t),o=Va([i[_t.DaysFormat],i[_t.DaysStandalone]],e);return Va(o,n)}(e,r,i)[t.getDay()];case Ci.DayPeriods:const c=t.getHours(),h=t.getMinutes();if(o){const C=function V4(t){const e=ms(t);return Wk(e),(e[_t.ExtraData][2]||[]).map(i=>"string"==typeof i?hw(i):[hw(i[0]),hw(i[1])])}(e),S=function U4(t,e,n){const i=ms(t);Wk(i);const o=Va([i[_t.ExtraData][0],i[_t.ExtraData][1]],e)||[];return Va(o,n)||[]}(e,r,i),I=C.findIndex(U=>{if(Array.isArray(U)){const[q,te]=U,ce=c>=q.hours&&h>=q.minutes,ge=c<te.hours||c===te.hours&&h<te.minutes;if(q.hours<te.hours){if(ce&&ge)return!0}else if(ce||ge)return!0}else if(U.hours===c&&U.minutes===h)return!0;return!1});if(-1!==I)return S[I]}return function O4(t,e,n){const i=ms(t),o=Va([i[_t.DayPeriodsFormat],i[_t.DayPeriodsStandalone]],e);return Va(o,n)}(e,r,i)[c<12?0:1];case Ci.Eras:return function N4(t,e){return Va(ms(t)[_t.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,o,t,e,n,i)}}function jy(t){return function(e,n,i){const r=-1*i,o=za(n,Yt.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case ro.Short:return(r>=0?"+":"")+fl(c,2,o)+fl(Math.abs(r%60),2,o);case ro.ShortGMT:return"GMT"+(r>=0?"+":"")+fl(c,1,o);case ro.Long:return"GMT"+(r>=0?"+":"")+fl(c,2,o)+":"+fl(Math.abs(r%60),2,o);case ro.Extended:return 0===i?"Z":(r>=0?"+":"")+fl(c,2,o)+":"+fl(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const K4=0,Hy=4;function Zk(t){return Vy(t.getFullYear(),t.getMonth(),t.getDate()+(Hy-t.getDay()))}function mw(t,e=!1){return function(n,i){let r;if(e){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();r=1+Math.floor((c+o)/7)}else{const o=Zk(n),c=function Q4(t){const e=Vy(t,K4,1).getDay();return Vy(t,0,1+(e<=Hy?Hy:Hy+7)-e)}(o.getFullYear()),h=o.getTime()-c.getTime();r=1+Math.round(h/6048e5)}return fl(r,t,za(i,Yt.MinusSign))}}function $y(t,e=!1){return function(n,i){return fl(Zk(n).getFullYear(),t,za(i,Yt.MinusSign),e)}}const pw={};function Yk(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Xk(t){return t instanceof Date&&!isNaN(t.valueOf())}function eT(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}const bw=/\s+/,tT=[];let lg=(()=>{const e=class{constructor(i,r,o,c){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=o,this._renderer=c,this.initialClasses=tT,this.stateMap=new Map}set klass(i){this.initialClasses=null!=i?i.trim().split(bw):tT}set ngClass(i){this.rawClass="string"==typeof i?i.trim().split(bw):i}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(const r of i)this._updateState(r,!0);else if(null!=i)for(const r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){const o=this.stateMap.get(i);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const i of this.stateMap){const r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){(i=i.trim()).length>0&&i.split(bw).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Zc),G(rg),G(St),G(Gc))},e.\u0275dir=Fe({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class _3{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gl=(()=>{const e=class{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((o,c,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new _3(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===c?void 0:c);else if(null!==c){const g=r.get(c);r.move(g,h),nT(g,o)}});for(let o=0,c=r.length;o<c;o++){const g=r.get(o).context;g.index=o,g.count=c,g.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{nT(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(i,r){return!0}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(no),G(Kn),G(Zc))},e.\u0275dir=Fe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function nT(t,e){t.context.$implicit=e.item}let oo=(()=>{const e=class{constructor(i,r){this._viewContainer=i,this._context=new y3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){rT("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){rT("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(no),G(Kn))},e.\u0275dir=Fe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class y3{constructor(){this.$implicit=null,this.ngIf=null}}function rT(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${kn(e)}'.`)}class xw{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let hh=(()=>{const e=class{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(i){this._ngSwitch=i,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(i){this._defaultViews.push(i)}_matchCase(i){const r=i==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(i){if(this._defaultViews.length>0&&i!==this._defaultUsed){this._defaultUsed=i;for(const r of this._defaultViews)r.enforceState(i)}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),t})(),cg=(()=>{const e=class{constructor(i,r,o){this.ngSwitch=o,o._addCase(),this._view=new xw(i,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(no),G(Kn),G(hh,9))},e.\u0275dir=Fe({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),t})(),oT=(()=>{const e=class{constructor(i,r,o){o._addDefault(new xw(i,r))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(no),G(Kn),G(hh,9))},e.\u0275dir=Fe({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),t})(),dg=(()=>{const e=class{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(i.ngTemplateOutlet||i.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:o,ngTemplateOutletContext:c,ngTemplateOutletInjector:h}=this;this._viewRef=r.createEmbeddedView(o,c,h?{injector:h}:void 0)}else this._viewRef=null}else this._viewRef&&i.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(no))},e.\u0275dir=Fe({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Zn]}),t})();function _l(t,e){return new Ie(2100,!1)}const A3=new Le("DATE_PIPE_DEFAULT_TIMEZONE"),R3=new Le("DATE_PIPE_DEFAULT_OPTIONS");let aT=(()=>{const e=class{constructor(i,r,o){this.locale=i,this.defaultTimezone=r,this.defaultOptions=o}transform(i,r,o,c){if(null==i||""===i||i!=i)return null;try{return W4(i,r??this.defaultOptions?.dateFormat??"mediumDate",c||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(h){throw _l()}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(tc,16),G(A3,24),G(R3,24))},e.\u0275pipe=Ze({name:"date",type:e,pure:!0,standalone:!0}),t})(),Dw=(()=>{const e=class{transform(i,r,o){if(null==i)return null;if(!this.supports(i))throw _l();return i.slice(r,o)}supports(i){return"string"==typeof i||Array.isArray(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ze({name:"slice",type:e,pure:!1,standalone:!0}),t})(),fs=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})();const cT="browser";function dT(t){return"server"===t}let q3=(()=>{const e=class{};let t=e;return e.\u0275prov=We({token:e,providedIn:"root",factory:()=>new W3(we(ci),window)}),t})();class W3{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function Z3(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=uT(this.window.history)||uT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function uT(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class hT{}class xV extends S4{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Mw extends xV{static makeCurrent(){!function E4(t){lw||(lw=t)}(new Mw)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function wV(){return hg=hg||document.querySelector("base"),hg?hg.getAttribute("href"):null}();return null==n?null:function CV(t){Yy=Yy||document.createElement("a"),Yy.setAttribute("href",t);const e=Yy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){hg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eT(document.cookie,e)}}let Yy,hg=null,EV=(()=>{const e=class{build(){return new XMLHttpRequest}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();const kw=new Le("EventManagerPlugins");let _T=(()=>{const e=class{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(c=>c.supports(i)),!r)throw new Ie(5101,!1);return this._eventNameToPlugin.set(i,r),r}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(kw),we(Rt))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();class yT{constructor(e){this._doc=e}}const Tw="ng-app-id";let vT=(()=>{const e=class{constructor(i,r,o,c={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dT(c),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${Tw}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){const o=this.styleRef;if(o.has(i)){const c=o.get(i);return c.usage+=r,c.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const o=this.styleNodesInDOM,c=o?.get(r);if(c?.parentNode===i)return o.delete(r),c.removeAttribute(Tw),c;{const h=this.doc.createElement("style");return this.nonce&&h.setAttribute("nonce",this.nonce),h.textContent=r,this.platformIsServer&&h.setAttribute(Tw,this.appId),h}}addStyleToHost(i,r){const o=this.getStyleElement(i,r);i.appendChild(o);const c=this.styleRef,h=c.get(r)?.elements;h?h.push(o):c.set(r,{elements:[o],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci),we(oy),we(P0,8),we(Gd))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();const Iw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Aw=/%COMP%/g,TV=new Le("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function xT(t,e){return e.map(n=>n.replace(Aw,t))}let Rw=(()=>{const e=class{constructor(i,r,o,c,h,g,C,S=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=c,this.doc=h,this.platformId=g,this.ngZone=C,this.nonce=S,this.rendererByCompId=new Map,this.platformIsServer=dT(g),this.defaultRenderer=new Pw(i,h,C,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tr.ShadowDom&&(r={...r,encapsulation:tr.Emulated});const o=this.getOrCreateRenderer(i,r);return o instanceof CT?o.applyToHost(i):o instanceof Ow&&o.applyStyles(),o}getOrCreateRenderer(i,r){const o=this.rendererByCompId;let c=o.get(r.id);if(!c){const h=this.doc,g=this.ngZone,C=this.eventManager,S=this.sharedStylesHost,I=this.removeStylesOnCompDestory,U=this.platformIsServer;switch(r.encapsulation){case tr.Emulated:c=new CT(C,S,r,this.appId,I,h,g,U);break;case tr.ShadowDom:return new PV(C,S,i,r,h,g,this.nonce,U);default:c=new Ow(C,S,r,I,h,g,U)}c.onDestroy=()=>o.delete(r.id),o.set(r.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(_T),we(vT),we(oy),we(TV),we(ci),we(Gd),we(Rt),we(P0))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();class Pw{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Iw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(wT(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(wT(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Ie(5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const o=Iw[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=Iw[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(So.DashCase|So.Important)?e.style.setProperty(n,i,r&So.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&So.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=Xd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function wT(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class PV extends Pw{constructor(e,n,i,r,o,c,h,g){super(e,o,c,g),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const C=xT(r.id,r.styles);for(const S of C){const I=document.createElement("style");h&&I.setAttribute("nonce",h),I.textContent=S,this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ow extends Pw{constructor(e,n,i,r,o,c,h,g){super(e,o,c,h),this.sharedStylesHost=n,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=g?xT(g,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class CT extends Ow{constructor(e,n,i,r,o,c,h,g){const C=r+"-"+i.id;super(e,n,i,o,c,h,g,C),this.contentAttr=function IV(t){return"_ngcontent-%COMP%".replace(Aw,t)}(C),this.hostAttr=function AV(t){return"_nghost-%COMP%".replace(Aw,t)}(C)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let OV=(()=>{const e=class extends yT{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();const DT=["alt","control","meta","shift"],FV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let NV=(()=>{const e=class extends yT{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,o){const c=e.parseEventName(r),h=e.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xd().onAndCancel(i,c.domEventName,h))}static parseEventName(i){const r=i.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=e._normalizeKey(r.pop());let h="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),h="code."),DT.forEach(S=>{const I=r.indexOf(S);I>-1&&(r.splice(I,1),h+=S+".")}),h+=c,0!=r.length||0===c.length)return null;const C={};return C.domEventName=o,C.fullKey=h,C}static matchEventFullKeyCode(i,r){let o=FV[i.key]||i.key,c="";return r.indexOf("code.")>-1&&(o=i.code,c="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),DT.forEach(h=>{h!==o&&(0,LV[h])(i)&&(c+=h+".")}),c+=o,c===r)}static eventCallback(i,r,o){return c=>{e.matchEventFullKeyCode(c,i)&&o.runGuarded(()=>r(c))}}static _normalizeKey(i){return"esc"===i?"escape":i}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();const UV=yk(m4,"browser",[{provide:Gd,useValue:cT},{provide:UD,useValue:function BV(){Mw.makeCurrent()},multi:!0},{provide:ci,useFactory:function VV(){return function Mf(t){Ju=t}(document),document},deps:[]}]),jV=new Le(""),MT=[{provide:Ry,useClass:class DV{addToWindow(e){qi.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Ie(5103,!1);return o},qi.getAllAngularTestabilities=()=>e.getAllTestabilities(),qi.getAllAngularRootElements=()=>e.getAllRootElements(),qi.frameworkStabilizers||(qi.frameworkStabilizers=[]),qi.frameworkStabilizers.push(i=>{const r=qi.getAllAngularTestabilities();let o=r.length,c=!1;const h=function(g){c=c||g,o--,0==o&&i(c)};r.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?Xd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:mk,useClass:Xx,deps:[Rt,Kx,Ry]},{provide:Xx,useClass:Xx,deps:[Rt,Kx,Ry]}],kT=[{provide:k0,useValue:"root"},{provide:Zl,useFactory:function zV(){return new Zl},deps:[]},{provide:kw,useClass:OV,multi:!0,deps:[ci,Rt,Gd]},{provide:kw,useClass:NV,multi:!0,deps:[ci]},Rw,vT,_T,{provide:Lf,useExisting:Rw},{provide:hT,useClass:EV,deps:[]},[]];let TT=(()=>{const e=class{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:oy,useValue:i.appId}]}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(jV,12))},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[...kT,...MT],imports:[fs,p4]}),t})(),IT=(()=>{const e=class{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci))},e.\u0275prov=We({token:e,factory:function(r){let o=null;return o=r?new r:function $V(){return new IT(we(ci))}(),o},providedIn:"root"}),t})();typeof window<"u"&&window;let Lw=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(r){let o=null;return o=r?new(r||e):we(PT),o},providedIn:"root"}),t})(),PT=(()=>{const e=class extends Lw{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case dn.NONE:return r;case dn.HTML:return ar(r,"HTML")?us(r):ID(this._doc,String(r)).toString();case dn.STYLE:return ar(r,"Style")?us(r):r;case dn.SCRIPT:if(ar(r,"Script"))return us(r);throw new Ie(5200,!1);case dn.URL:return ar(r,"URL")?us(r):ty(String(r));case dn.RESOURCE_URL:if(ar(r,"ResourceURL"))return us(r);throw new Ie(5201,!1);default:throw new Ie(5202,!1)}}bypassSecurityTrustHtml(i){return function ey(t){return new f0(t)}(i)}bypassSecurityTrustStyle(i){return function Io(t){return new g0(t)}(i)}bypassSecurityTrustScript(i){return function La(t){return new _0(t)}(i)}bypassSecurityTrustUrl(i){return function ih(t){return new y0(t)}(i)}bypassSecurityTrustResourceUrl(i){return function nh(t){return new v0(t)}(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci))},e.\u0275prov=We({token:e,factory:function(r){let o=null;return o=r?new r:function ZV(t){return new PT(t.get(ci))}(we(Ao)),o},providedIn:"root"}),t})();class FT{}class YV{}const Kc="*";function Po(t,e){return{type:7,name:t,definitions:e,options:{}}}function zn(t,e=null){return{type:4,styles:e,timings:t}}function NT(t,e=null){return{type:2,steps:t,options:e}}function Jt(t){return{type:6,styles:t,offset:null}}function fn(t,e,n){return{type:0,name:t,styles:e,options:n}}function Sn(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function BT(t){Promise.resolve().then(t)}class mg{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){BT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class zT{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0;const o=this.players.length;0==o?BT(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++n==o&&this._onFinish()}),c.onDestroy(()=>{++i==o&&this._onDestroy()}),c.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const Nw="!";function VT(t){return new Ie(3e3,!1)}function Qd(t){switch(t.length){case 0:return new mg;case 1:return t[0];default:return new zT(t)}}function UT(t,e,n=new Map,i=new Map){const r=[],o=[];let c=-1,h=null;if(e.forEach(g=>{const C=g.get("offset"),S=C==c,I=S&&h||new Map;g.forEach((U,q)=>{let te=q,ce=U;if("offset"!==q)switch(te=t.normalizePropertyName(te,r),ce){case Nw:ce=n.get(q);break;case Kc:ce=i.get(q);break;default:ce=t.normalizeStyleValue(q,te,ce,r)}I.set(te,ce)}),S||o.push(I),h=I,c=C}),r.length)throw function v5(t){return new Ie(3502,!1)}();return o}function Bw(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&zw(n,"start",t)));break;case"done":t.onDone(()=>i(n&&zw(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&zw(n,"destroy",t)))}}function zw(t,e,n){const o=Vw(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,n.totalTime??t.totalTime,!!n.disabled),c=t._data;return null!=c&&(o._data=c),o}function Vw(t,e,n,i,r="",o=0,c){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!c}}function aa(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function jT(t){const e=t.indexOf(":");return[t.substring(1,e),t.slice(e+1)]}const A5=(()=>typeof document>"u"?null:document.documentElement)();function Uw(t){const e=t.parentNode||t.host||null;return e===A5?null:e}let mh=null,HT=!1;function $T(t,e){for(;e;){if(e===t)return!0;e=Uw(e)}return!1}function GT(t,e,n){if(n)return Array.from(t.querySelectorAll(e));const i=t.querySelector(e);return i?[i]:[]}let qT=(()=>{const e=class{validateStyleProperty(i){return function P5(t){mh||(mh=function O5(){return typeof document<"u"?document.body:null}()||{},HT=!!mh.style&&"WebkitAppearance"in mh.style);let e=!0;return mh.style&&!function R5(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in mh.style,!e&&HT&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in mh.style)),e}(i)}matchesElement(i,r){return!1}containsElement(i,r){return $T(i,r)}getParentElement(i){return Uw(i)}query(i,r,o){return GT(i,r,o)}computeStyle(i,r,o){return o||""}animate(i,r,o,c,h,g=[],C){return new mg(o,c)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})(),jw=(()=>{const e=class{};let t=e;return e.NOOP=new qT,t})();const F5=1e3,Hw="ng-enter",Jy="ng-leave",ev="ng-trigger",tv=".ng-trigger",ZT="ng-animating",$w=".ng-animating";function Qc(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Gw(parseFloat(e[1]),e[2])}function Gw(t,e){return"s"===e?t*F5:t}function iv(t,e,n){return t.hasOwnProperty("duration")?t:function N5(t,e,n){let r,o=0,c="";if("string"==typeof t){const h=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(VT()),{duration:0,delay:0,easing:""};r=Gw(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(o=Gw(parseFloat(g),h[4]));const C=h[5];C&&(c=C)}else r=t;if(!n){let h=!1,g=e.length;r<0&&(e.push(function XV(){return new Ie(3100,!1)}()),h=!0),o<0&&(e.push(function KV(){return new Ie(3101,!1)}()),h=!0),h&&e.splice(g,0,VT())}return{duration:r,delay:o,easing:c}}(t,e,n)}function pg(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function YT(t){const e=new Map;return Object.keys(t).forEach(n=>{e.set(n,t[n])}),e}function Jd(t,e=new Map,n){if(n)for(let[i,r]of n)e.set(i,r);for(let[i,r]of t)e.set(i,r);return e}function ic(t,e,n){e.forEach((i,r)=>{const o=Ww(r);n&&!n.has(r)&&n.set(r,t.style[o]),t.style[o]=i})}function ph(t,e){e.forEach((n,i)=>{const r=Ww(i);t.style[r]=""})}function fg(t){return Array.isArray(t)?1==t.length?t[0]:NT(t):t}const qw=new RegExp("{{\\s*(.+?)\\s*}}","g");function KT(t){let e=[];if("string"==typeof t){let n;for(;n=qw.exec(t);)e.push(n[1]);qw.lastIndex=0}return e}function gg(t,e,n){const i=t.toString(),r=i.replace(qw,(o,c)=>{let h=e[c];return null==h&&(n.push(function JV(t){return new Ie(3003,!1)}()),h=""),h.toString()});return r==i?t:r}function nv(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const V5=/-+([a-z0-9])/g;function Ww(t){return t.replace(V5,(...e)=>e[1].toUpperCase())}function la(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw function e5(t){return new Ie(3004,!1)}()}}function QT(t,e){return window.getComputedStyle(t)[e]}const rv="*";function H5(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function $5(t,e,n){if(":"==t[0]){const g=function G5(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(function f5(t){return new Ie(3016,!1)}()),"* => *"}}(t,n);if("function"==typeof g)return void e.push(g);t=g}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function p5(t){return new Ie(3015,!1)}()),e;const r=i[1],o=i[2],c=i[3];e.push(JT(r,c));"<"==o[0]&&!(r==rv&&c==rv)&&e.push(JT(c,r))}(i,n,e)):n.push(t),n}const ov=new Set(["true","1"]),sv=new Set(["false","0"]);function JT(t,e){const n=ov.has(t)||sv.has(t),i=ov.has(e)||sv.has(e);return(r,o)=>{let c=t==rv||t==r,h=e==rv||e==o;return!c&&n&&"boolean"==typeof r&&(c=r?ov.has(t):sv.has(t)),!h&&i&&"boolean"==typeof o&&(h=o?ov.has(e):sv.has(e)),c&&h}}const q5=new RegExp("s*:selfs*,?","g");function Zw(t,e,n,i){return new W5(t).build(e,n,i)}class W5{constructor(e){this._driver=e}build(e,n,i){const r=new X5(n);return this._resetContextStyleTimingState(r),la(this,fg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],c=[];return"@"==e.name.charAt(0)&&n.errors.push(function n5(){return new Ie(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(n),0==h.type){const g=h,C=g.name;C.toString().split(/\s*,\s*/).forEach(S=>{g.name=S,o.push(this.visitState(g,n))}),g.name=C}else if(1==h.type){const g=this.visitTransition(h,n);i+=g.queryCount,r+=g.depCount,c.push(g)}else n.errors.push(function r5(){return new Ie(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:c,queryCount:i,depCount:r,options:null}}visitState(e,n){const i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,c=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(g=>{KT(g).forEach(C=>{c.hasOwnProperty(C)||o.add(C)})})}),o.size&&(nv(o.values()),n.errors.push(function o5(t,e){return new Ie(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const i=la(this,fg(e.animation),n);return{type:1,matchers:H5(e.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:fh(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(i=>la(this,i,n)),options:fh(e.options)}}visitGroup(e,n){const i=n.currentTime;let r=0;const o=e.steps.map(c=>{n.currentTime=i;const h=la(this,c,n);return r=Math.max(r,n.currentTime),h});return n.currentTime=r,{type:3,steps:o,options:fh(e.options)}}visitAnimate(e,n){const i=function Q5(t,e){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return Yw(iv(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Yw(0,0,"");return o.dynamic=!0,o.strValue=n,o}const r=iv(n,e);return Yw(r.duration,r.delay,r.easing)}(e.timings,n.errors);n.currentAnimateTimings=i;let r,o=e.styles?e.styles:Jt({});if(5==o.type)r=this.visitKeyframes(o,n);else{let c=e.styles,h=!1;if(!c){h=!0;const C={};i.easing&&(C.easing=i.easing),c=Jt(C)}n.currentTime+=i.duration+i.delay;const g=this.visitStyle(c,n);g.isEmptyStep=h,r=g}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,n){const i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===Kc?i.push(h):n.errors.push(new Ie(3002,!1)):i.push(YT(h));let o=!1,c=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!o))for(let g of h.values())if(g.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:c,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){const i=n.currentAnimateTimings;let r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,g)=>{const C=n.collectedStyles.get(n.currentQuerySelector),S=C.get(g);let I=!0;S&&(o!=r&&o>=S.startTime&&r<=S.endTime&&(n.errors.push(function a5(t,e,n,i,r){return new Ie(3010,!1)}()),I=!1),o=S.startTime),I&&C.set(g,{startTime:o,endTime:r}),n.options&&function z5(t,e,n){const i=e.params||{},r=KT(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(function QV(t){return new Ie(3001,!1)}())})}(h,n.options,n.errors)})})}visitKeyframes(e,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function l5(){return new Ie(3011,!1)}()),i;let o=0;const c=[];let h=!1,g=!1,C=0;const S=e.steps.map(Te=>{const Ee=this._makeStyleAst(Te,n);let dt=null!=Ee.offset?Ee.offset:function K5(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(Ee.styles),lt=0;return null!=dt&&(o++,lt=Ee.offset=dt),g=g||lt<0||lt>1,h=h||lt<C,C=lt,c.push(lt),Ee});g&&n.errors.push(function c5(){return new Ie(3012,!1)}()),h&&n.errors.push(function d5(){return new Ie(3200,!1)}());const I=e.steps.length;let U=0;o>0&&o<I?n.errors.push(function u5(){return new Ie(3202,!1)}()):0==o&&(U=1/(I-1));const q=I-1,te=n.currentTime,ce=n.currentAnimateTimings,ge=ce.duration;return S.forEach((Te,Ee)=>{const dt=U>0?Ee==q?1:U*Ee:c[Ee],lt=dt*ge;n.currentTime=te+ce.delay+lt,ce.duration=lt,this._validateStyleAst(Te,n),Te.offset=dt,i.styles.push(Te)}),i}visitReference(e,n){return{type:8,animation:la(this,fg(e.animation),n),options:fh(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:fh(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:fh(e.options)}}visitQuery(e,n){const i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;const[o,c]=function Z5(t){const e=!!t.split(/\s*,\s*/).find(n=>":self"==n);return e&&(t=t.replace(q5,"")),t=t.replace(/@\*/g,tv).replace(/@\w+/g,n=>tv+"-"+n.slice(1)).replace(/:animating/g,$w),[t,e]}(e.selector);n.currentQuerySelector=i.length?i+" "+o:o,aa(n.collectedStyles,n.currentQuerySelector,new Map);const h=la(this,fg(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:fh(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function h5(){return new Ie(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:iv(e.timings,n.errors,!0);return{type:12,animation:la(this,fg(e.animation),n),timings:i,options:null}}}class X5{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fh(t){return t?(t=pg(t)).params&&(t.params=function Y5(t){return t?pg(t):null}(t.params)):t={},t}function Yw(t,e,n){return{duration:t,delay:e,easing:n}}function Xw(t,e,n,i,r,o,c=null,h=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:c,subTimeline:h}}class av{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const t6=new RegExp(":enter","g"),r6=new RegExp(":leave","g");function Kw(t,e,n,i,r,o=new Map,c=new Map,h,g,C=[]){return(new o6).buildKeyframes(t,e,n,i,r,o,c,h,g,C)}class o6{buildKeyframes(e,n,i,r,o,c,h,g,C,S=[]){C=C||new av;const I=new Qw(e,n,C,r,o,S,[]);I.options=g;const U=g.delay?Qc(g.delay):0;I.currentTimeline.delayNextStep(U),I.currentTimeline.setStyles([c],null,I.errors,g),la(this,i,I);const q=I.timelines.filter(te=>te.containsAnimation());if(q.length&&h.size){let te;for(let ce=q.length-1;ce>=0;ce--){const ge=q[ce];if(ge.element===n){te=ge;break}}te&&!te.allowOnlyTimelineStyles()&&te.setStyles([h],null,I.errors,g)}return q.length?q.map(te=>te.buildKeyframes()):[Xw(n,[],[],[],0,U,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(e.options),o=n.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);o!=c&&n.transformIntoNewTimeline(c)}n.previousNode=e}visitAnimateRef(e,n){const i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(const r of e){const o=r?.delay;if(o){const c="number"==typeof o?o:Qc(gg(o,r?.params??{},n.errors));i.delayNextStep(c)}}}_visitSubInstructions(e,n,i){let o=n.currentTimeline.currentTime;const c=null!=i.duration?Qc(i.duration):null,h=null!=i.delay?Qc(i.delay):null;return 0!==c&&e.forEach(g=>{const C=n.appendInstructionToTimeline(g,c,h);o=Math.max(o,C.duration+C.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),la(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const i=n.subContextCount;let r=n;const o=e.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=lv);const c=Qc(o.delay);r.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>la(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const i=[];let r=n.currentTimeline.currentTime;const o=e.options&&e.options.delay?Qc(e.options.delay):0;e.steps.forEach(c=>{const h=n.createSubContext(e.options);o&&h.delayNextStep(o),la(this,c,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(c=>n.currentTimeline.mergeTimelineCollectedStyles(c)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const i=e.strValue;return iv(n.params?gg(i,n.params,n.errors):i,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,h=n.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(g=>{h.forwardTime((g.offset||0)*o),h.setStyles(g.styles,g.easing,n.errors,n.options),h.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(h),n.transformIntoNewTimeline(r+o),n.previousNode=e}visitQuery(e,n){const i=n.currentTimeline.currentTime,r=e.options||{},o=r.delay?Qc(r.delay):0;o&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=lv);let c=i;const h=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=h.length;let g=null;h.forEach((C,S)=>{n.currentQueryIndex=S;const I=n.createSubContext(e.options,C);o&&I.delayNextStep(o),C===n.element&&(g=I.currentTimeline),la(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,I.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(c),g&&(n.currentTimeline.mergeTimelineCollectedStyles(g),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const i=n.parentContext,r=n.currentTimeline,o=e.timings,c=Math.abs(o.duration),h=c*(n.currentQueryTotal-1);let g=c*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=h-g;break;case"full":g=i.currentStaggerTime}const S=n.currentTimeline;g&&S.delayNextStep(g);const I=S.currentTime;la(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const lv={};class Qw{constructor(e,n,i,r,o,c,h,g){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new cv(this._driver,n,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Qc(i.duration)),null!=i.delay&&(r.delay=Qc(i.delay));const o=i.params;if(o){let c=r.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!n||!c.hasOwnProperty(h))&&(c[h]=gg(o[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){const r=n||this.element,o=new Qw(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=lv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){const r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new s6(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,o,c){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(t6,"."+this._enterClassName)).replace(r6,"."+this._leaveClassName);let C=this._driver.query(this.element,e,1!=i);0!==i&&(C=i<0?C.slice(C.length+i,C.length):C.slice(0,i)),h.push(...C)}return!o&&0==h.length&&c.push(function m5(t){return new Ie(3014,!1)}()),h}}class cv{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new cv(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||Kc),this._currentKeyframe.set(n,Kc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);const o=r&&r.params||{},c=function a6(t,e){const n=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)n.set(o,Kc)}else Jd(r,n)}),n}(e,this._globalTimelineStyles);for(let[h,g]of c){const C=gg(g,o,i);this._pendingStyles.set(h,C),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Kc),this._updateStyle(h,C)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,g)=>{const C=Jd(h,new Map,this._backFill);C.forEach((S,I)=>{S===Nw?e.add(I):S===Kc&&n.add(I)}),i||C.set("offset",g/this.duration),r.push(C)});const o=e.size?nv(e.values()):[],c=n.size?nv(n.values()):[];if(i){const h=r[0],g=new Map(h);h.set("offset",0),g.set("offset",1),r=[h,g]}return Xw(this.element,r,o,c,this.duration,this.startTime,this.easing,!1)}}class s6 extends cv{constructor(e,n,i,r,o,c,h=!1){super(e,n,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const o=[],c=i+n,h=n/c,g=Jd(e[0]);g.set("offset",0),o.push(g);const C=Jd(e[0]);C.set("offset",iI(h)),o.push(C);const S=e.length-1;for(let I=1;I<=S;I++){let U=Jd(e[I]);const q=U.get("offset");U.set("offset",iI((n+q*i)/c)),o.push(U)}i=c,n=0,r="",e=o}return Xw(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function iI(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Jw{}const l6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class c6 extends Jw{normalizePropertyName(e,n){return Ww(e)}normalizeStyleValue(e,n,i,r){let o="";const c=i.toString().trim();if(l6.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function t5(t,e){return new Ie(3005,!1)}())}return c+o}}function nI(t,e,n,i,r,o,c,h,g,C,S,I,U){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:c,timelines:h,queriedElements:g,preStyleProps:C,postStyleProps:S,totalTime:I,errors:U}}const e1={};class rI{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return function d6(t,e,n,i,r){return t.some(o=>o(e,n,i,r))}(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,o,c,h,g,C,S){const I=[],U=this.ast.options&&this.ast.options.params||e1,te=this.buildStyles(i,h&&h.params||e1,I),ce=g&&g.params||e1,ge=this.buildStyles(r,ce,I),Te=new Set,Ee=new Map,dt=new Map,lt="void"===r,ni={params:u6(ce,U),delay:this.ast.options?.delay},qn=S?[]:Kw(e,n,this.ast.animation,o,c,te,ge,ni,C,I);let $r=0;if(qn.forEach(ud=>{$r=Math.max(ud.duration+ud.delay,$r)}),I.length)return nI(n,this._triggerName,i,r,lt,te,ge,[],[],Ee,dt,$r,I);qn.forEach(ud=>{const hd=ud.element,tO=aa(Ee,hd,new Set);ud.preStyleProps.forEach(Oh=>tO.add(Oh));const r_=aa(dt,hd,new Set);ud.postStyleProps.forEach(Oh=>r_.add(Oh)),hd!==n&&Te.add(hd)});const dd=nv(Te.values());return nI(n,this._triggerName,i,r,lt,te,ge,qn,dd,Ee,dt,$r)}}function u6(t,e){const n=pg(e);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(n[i]=t[i]);return n}class h6{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){const i=new Map,r=pg(this.defaultParams);return Object.keys(e).forEach(o=>{const c=e[o];null!==c&&(r[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,h)=>{c&&(c=gg(c,r,n));const g=this.normalizer.normalizePropertyName(h,n);c=this.normalizer.normalizeStyleValue(h,g,c,n),i.set(h,c)})}),i}}class p6{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new h6(r.style,r.options&&r.options.params||{},i))}),oI(this.states,"true","1"),oI(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new rI(e,r,this.states))}),this.fallbackTransition=function f6(t,e,n){return new rI(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(c=>c.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}}function oI(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}const g6=new av;class _6{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const i=[],o=Zw(this._driver,n,i,[]);if(i.length)throw function b5(t){return new Ie(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,n,i){const r=e.element,o=UT(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){const r=[],o=this._animations.get(e);let c;const h=new Map;if(o?(c=Kw(this._driver,n,o,Hw,Jy,new Map,new Map,i,g6,r),c.forEach(S=>{const I=aa(h,S.element,new Map);S.postStyleProps.forEach(U=>I.set(U,null))})):(r.push(function x5(){return new Ie(3300,!1)}()),c=[]),r.length)throw function w5(t){return new Ie(3504,!1)}();h.forEach((S,I)=>{S.forEach((U,q)=>{S.set(q,this._driver.computeStyle(I,q,Kc))})});const C=Qd(c.map(S=>{const I=h.get(S.element);return this._buildPlayer(S,new Map,I)}));return this._playersById.set(e,C),C.onDestroy(()=>this.destroy(e)),this.players.push(C),C}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function C5(t){return new Ie(3301,!1)}();return n}listen(e,n,i,r){const o=Vw(n,"","","");return Bw(this._getPlayer(e),i,o,r),()=>{}}command(e,n,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,n,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const sI="ng-animate-queued",t1="ng-animate-disabled",w6=[],aI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},C6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ua="__ng_removed";class n1{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const i=e&&e.hasOwnProperty("value");if(this.value=function M6(t){return t??null}(i?e.value:e),i){const o=pg(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const _g="void",r1=new n1(_g);class D6{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ja(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw function D5(t,e){return new Ie(3302,!1)}();if(null==i||0==i.length)throw function E5(t){return new Ie(3303,!1)}();if(!function k6(t){return"start"==t||"done"==t}(i))throw function S5(t,e){return new Ie(3400,!1)}();const o=aa(this._elementListeners,e,[]),c={name:n,phase:i,callback:r};o.push(c);const h=aa(this._engine.statesByElement,e,new Map);return h.has(n)||(ja(e,ev),ja(e,ev+"-"+n),h.set(n,r1)),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(c);g>=0&&o.splice(g,1),this._triggers.has(n)||h.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function M5(t){return new Ie(3401,!1)}();return n}trigger(e,n,i,r=!0){const o=this._getTrigger(n),c=new o1(this.id,n,e);let h=this._engine.statesByElement.get(e);h||(ja(e,ev),ja(e,ev+"-"+n),this._engine.statesByElement.set(e,h=new Map));let g=h.get(n);const C=new n1(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&g&&C.absorbOptions(g.options),h.set(n,C),g||(g=r1),C.value!==_g&&g.value===C.value){if(!function A6(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const o=n[r];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(g.params,C.params)){const ce=[],ge=o.matchStyles(g.value,g.params,ce),Te=o.matchStyles(C.value,C.params,ce);ce.length?this._engine.reportError(ce):this._engine.afterFlush(()=>{ph(e,ge),ic(e,Te)})}return}const U=aa(this._engine.playersByElement,e,[]);U.forEach(ce=>{ce.namespaceId==this.id&&ce.triggerName==n&&ce.queued&&ce.destroy()});let q=o.matchTransition(g.value,C.value,e,C.params),te=!1;if(!q){if(!r)return;q=o.fallbackTransition,te=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:q,fromState:g,toState:C,player:c,isFallbackTransition:te}),te||(ja(e,sI),c.onStart(()=>{jm(e,sI)})),c.onDone(()=>{let ce=this.players.indexOf(c);ce>=0&&this.players.splice(ce,1);const ge=this._engine.playersByElement.get(e);if(ge){let Te=ge.indexOf(c);Te>=0&&ge.splice(Te,1)}}),this.players.push(c),U.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const i=this._engine.driver.query(e,tv,!0);i.forEach(r=>{if(r[Ua])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(c=>c.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){const o=this._engine.statesByElement.get(e),c=new Map;if(o){const h=[];if(o.forEach((g,C)=>{if(c.set(C,g.value),this._triggers.has(C)){const S=this.trigger(e,C,_g,r);S&&h.push(S)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,c),i&&Qd(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){const r=new Set;n.forEach(o=>{const c=o.name;if(r.has(c))return;r.add(c);const g=this._triggers.get(c).fallbackTransition,C=i.get(c)||r1,S=new n1(_g),I=new o1(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:g,fromState:C,toState:S,player:I,isFallbackTransition:!0})})}}removeNode(e,n){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let c=e;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{const o=e[Ua];(!o||o===aI)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){ja(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==i.triggerName){const g=Vw(o,i.triggerName,i.fromState.value,i.toState.value);g._data=e,Bw(i.player,h.phase,g,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const o=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let n=!1;return this._elementListeners.has(e)&&(n=!0),n=!!this._queue.find(i=>i.element===e)||n,n}}class E6{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){const i=new D6(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,h=this.driver.getParentElement(n);for(;h;){const g=r.get(h);if(g){const C=i.indexOf(g);i.splice(C+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}return n}trigger(e,n,i,r){if(dv(n)){const o=this._fetchNamespace(e);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!dv(n))return;const o=n[Ua];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(n);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ja(e,t1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),jm(e,t1))}removeNode(e,n,i){if(dv(n)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);const o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,o){this.collectedLeaveElements.push(n),n[Ua]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,i,r,o){return dv(n)?this._fetchNamespace(e).listen(n,i,r,o):()=>{}}_buildInstruction(e,n,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,tv,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,$w,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[Ua];if(n&&n.setForRemoval){if(e[Ua]=aI,n.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(t1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ja(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?Qd(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function k5(t){return new Ie(3402,!1)}()}_flushAnimations(e,n){const i=new av,r=[],o=new Map,c=[],h=new Map,g=new Map,C=new Map,S=new Set;this.disabledNodes.forEach(Tt=>{S.add(Tt);const $t=this.driver.query(Tt,".ng-animate-queued",!0);for(let ei=0;ei<$t.length;ei++)S.add($t[ei])});const I=this.bodyNode,U=Array.from(this.statesByElement.keys()),q=dI(U,this.collectedEnterElements),te=new Map;let ce=0;q.forEach((Tt,$t)=>{const ei=Hw+ce++;te.set($t,ei),Tt.forEach(sn=>ja(sn,ei))});const ge=[],Te=new Set,Ee=new Set;for(let Tt=0;Tt<this.collectedLeaveElements.length;Tt++){const $t=this.collectedLeaveElements[Tt],ei=$t[Ua];ei&&ei.setForRemoval&&(ge.push($t),Te.add($t),ei.hasAnimation?this.driver.query($t,".ng-star-inserted",!0).forEach(sn=>Te.add(sn)):Ee.add($t))}const dt=new Map,lt=dI(U,Array.from(Te));lt.forEach((Tt,$t)=>{const ei=Jy+ce++;dt.set($t,ei),Tt.forEach(sn=>ja(sn,ei))}),e.push(()=>{q.forEach((Tt,$t)=>{const ei=te.get($t);Tt.forEach(sn=>jm(sn,ei))}),lt.forEach((Tt,$t)=>{const ei=dt.get($t);Tt.forEach(sn=>jm(sn,ei))}),ge.forEach(Tt=>{this.processLeaveNode(Tt)})});const ni=[],qn=[];for(let Tt=this._namespaceList.length-1;Tt>=0;Tt--)this._namespaceList[Tt].drainQueuedTransitions(n).forEach(ei=>{const sn=ei.player,xo=ei.element;if(ni.push(sn),this.collectedEnterElements.length){const Ko=xo[Ua];if(Ko&&Ko.setForMove){if(Ko.previousTriggersValues&&Ko.previousTriggersValues.has(ei.triggerName)){const Fh=Ko.previousTriggersValues.get(ei.triggerName),qa=this.statesByElement.get(ei.element);if(qa&&qa.has(ei.triggerName)){const Pb=qa.get(ei.triggerName);Pb.value=Fh,qa.set(ei.triggerName,Pb)}}return void sn.destroy()}}const uc=!I||!this.driver.containsElement(I,xo),da=dt.get(xo),cu=te.get(xo),Jn=this._buildInstruction(ei,i,cu,da,uc);if(Jn.errors&&Jn.errors.length)return void qn.push(Jn);if(uc)return sn.onStart(()=>ph(xo,Jn.fromStyles)),sn.onDestroy(()=>ic(xo,Jn.toStyles)),void r.push(sn);if(ei.isFallbackTransition)return sn.onStart(()=>ph(xo,Jn.fromStyles)),sn.onDestroy(()=>ic(xo,Jn.toStyles)),void r.push(sn);const rO=[];Jn.timelines.forEach(Ko=>{Ko.stretchStartingKeyframe=!0,this.disabledNodes.has(Ko.element)||rO.push(Ko)}),Jn.timelines=rO,i.append(xo,Jn.timelines),c.push({instruction:Jn,player:sn,element:xo}),Jn.queriedElements.forEach(Ko=>aa(h,Ko,[]).push(sn)),Jn.preStyleProps.forEach((Ko,Fh)=>{if(Ko.size){let qa=g.get(Fh);qa||g.set(Fh,qa=new Set),Ko.forEach((Pb,mD)=>qa.add(mD))}}),Jn.postStyleProps.forEach((Ko,Fh)=>{let qa=C.get(Fh);qa||C.set(Fh,qa=new Set),Ko.forEach((Pb,mD)=>qa.add(mD))})});if(qn.length){const Tt=[];qn.forEach($t=>{Tt.push(function T5(t,e){return new Ie(3505,!1)}())}),ni.forEach($t=>$t.destroy()),this.reportError(Tt)}const $r=new Map,dd=new Map;c.forEach(Tt=>{const $t=Tt.element;i.has($t)&&(dd.set($t,$t),this._beforeAnimationBuild(Tt.player.namespaceId,Tt.instruction,$r))}),r.forEach(Tt=>{const $t=Tt.element;this._getPreviousPlayers($t,!1,Tt.namespaceId,Tt.triggerName,null).forEach(sn=>{aa($r,$t,[]).push(sn),sn.destroy()})});const ud=ge.filter(Tt=>hI(Tt,g,C)),hd=new Map;cI(hd,this.driver,Ee,C,Kc).forEach(Tt=>{hI(Tt,g,C)&&ud.push(Tt)});const r_=new Map;q.forEach((Tt,$t)=>{cI(r_,this.driver,new Set(Tt),g,Nw)}),ud.forEach(Tt=>{const $t=hd.get(Tt),ei=r_.get(Tt);hd.set(Tt,new Map([...$t?.entries()??[],...ei?.entries()??[]]))});const Oh=[],iO=[],nO={};c.forEach(Tt=>{const{element:$t,player:ei,instruction:sn}=Tt;if(i.has($t)){if(S.has($t))return ei.onDestroy(()=>ic($t,sn.toStyles)),ei.disabled=!0,ei.overrideTotalTime(sn.totalTime),void r.push(ei);let xo=nO;if(dd.size>1){let da=$t;const cu=[];for(;da=da.parentNode;){const Jn=dd.get(da);if(Jn){xo=Jn;break}cu.push(da)}cu.forEach(Jn=>dd.set(Jn,xo))}const uc=this._buildAnimation(ei.namespaceId,sn,$r,o,r_,hd);if(ei.setRealPlayer(uc),xo===nO)Oh.push(ei);else{const da=this.playersByElement.get(xo);da&&da.length&&(ei.parentPlayer=Qd(da)),r.push(ei)}}else ph($t,sn.fromStyles),ei.onDestroy(()=>ic($t,sn.toStyles)),iO.push(ei),S.has($t)&&r.push(ei)}),iO.forEach(Tt=>{const $t=o.get(Tt.element);if($t&&$t.length){const ei=Qd($t);Tt.setRealPlayer(ei)}}),r.forEach(Tt=>{Tt.parentPlayer?Tt.syncPlayerEvents(Tt.parentPlayer):Tt.destroy()});for(let Tt=0;Tt<ge.length;Tt++){const $t=ge[Tt],ei=$t[Ua];if(jm($t,Jy),ei&&ei.hasAnimation)continue;let sn=[];if(h.size){let uc=h.get($t);uc&&uc.length&&sn.push(...uc);let da=this.driver.query($t,$w,!0);for(let cu=0;cu<da.length;cu++){let Jn=h.get(da[cu]);Jn&&Jn.length&&sn.push(...Jn)}}const xo=sn.filter(uc=>!uc.destroyed);xo.length?T6(this,$t,xo):this.processLeaveNode($t)}return ge.length=0,Oh.forEach(Tt=>{this.players.push(Tt),Tt.onDone(()=>{Tt.destroy();const $t=this.players.indexOf(Tt);this.players.splice($t,1)}),Tt.play()}),Oh}elementContainsData(e,n){let i=!1;const r=n[Ua];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(e).elementContainsData(n)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,o){let c=[];if(n){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const g=!o||o==_g;h.forEach(C=>{C.queued||!g&&C.triggerName!=r||c.push(C)})}}return(i||r)&&(c=c.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),c}_beforeAnimationBuild(e,n,i){const o=n.element,c=n.isRemovalTransition?void 0:e,h=n.isRemovalTransition?void 0:n.triggerName;for(const g of n.timelines){const C=g.element,S=C!==o,I=aa(i,C,[]);this._getPreviousPlayers(C,S,c,h,n.toState).forEach(q=>{const te=q.getRealPlayer();te.beforeDestroy&&te.beforeDestroy(),q.destroy(),I.push(q)})}ph(o,n.fromStyles)}_buildAnimation(e,n,i,r,o,c){const h=n.triggerName,g=n.element,C=[],S=new Set,I=new Set,U=n.timelines.map(te=>{const ce=te.element;S.add(ce);const ge=ce[Ua];if(ge&&ge.removedBeforeQueried)return new mg(te.duration,te.delay);const Te=ce!==g,Ee=function I6(t){const e=[];return uI(t,e),e}((i.get(ce)||w6).map($r=>$r.getRealPlayer())).filter($r=>!!$r.element&&$r.element===ce),dt=o.get(ce),lt=c.get(ce),ni=UT(this._normalizer,te.keyframes,dt,lt),qn=this._buildPlayer(te,ni,Ee);if(te.subTimeline&&r&&I.add(ce),Te){const $r=new o1(e,h,ce);$r.setRealPlayer(qn),C.push($r)}return qn});C.forEach(te=>{aa(this.playersByQueriedElement,te.element,[]).push(te),te.onDone(()=>function S6(t,e,n){let i=t.get(e);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&t.delete(e)}return i}(this.playersByQueriedElement,te.element,te))}),S.forEach(te=>ja(te,ZT));const q=Qd(U);return q.onDestroy(()=>{S.forEach(te=>jm(te,ZT)),ic(g,n.toStyles)}),I.forEach(te=>{aa(r,te,[]).push(q)}),q}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new mg(e.duration,e.delay)}}class o1{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new mg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>Bw(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){aa(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function dv(t){return t&&1===t.nodeType}function lI(t,e){const n=t.style.display;return t.style.display=e??"none",n}function cI(t,e,n,i,r){const o=[];n.forEach(g=>o.push(lI(g)));const c=[];i.forEach((g,C)=>{const S=new Map;g.forEach(I=>{const U=e.computeStyle(C,I,r);S.set(I,U),(!U||0==U.length)&&(C[Ua]=C6,c.push(C))}),t.set(C,S)});let h=0;return n.forEach(g=>lI(g,o[h++])),c}function dI(t,e){const n=new Map;if(t.forEach(h=>n.set(h,[])),0==e.length)return n;const i=1,r=new Set(e),o=new Map;function c(h){if(!h)return i;let g=o.get(h);if(g)return g;const C=h.parentNode;return g=n.has(C)?C:r.has(C)?i:c(C),o.set(h,g),g}return e.forEach(h=>{const g=c(h);g!==i&&n.get(g).push(h)}),n}function ja(t,e){t.classList?.add(e)}function jm(t,e){t.classList?.remove(e)}function T6(t,e,n){Qd(n).onDone(()=>t.processLeaveNode(e))}function uI(t,e){for(let n=0;n<t.length;n++){const i=t[n];i instanceof zT?uI(i.players,e):e.push(i)}}function hI(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(o=>r.add(o)):e.set(t,i),n.delete(t),!0}class uv{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new E6(e,n,i),this._timelineEngine=new _6(e,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,n,i,r,o){const c=e+"-"+r;let h=this._triggerCache[c];if(!h){const g=[],S=Zw(this._driver,o,g,[]);if(g.length)throw function y5(t,e){return new Ie(3404,!1)}();h=function m6(t,e,n){return new p6(t,e,n)}(r,S,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(n,r,h)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if("@"==i.charAt(0)){const[o,c]=jT(i);this._timelineEngine.command(o,n,c,r)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,o){if("@"==i.charAt(0)){const[c,h]=jT(i);return this._timelineEngine.listen(c,n,h,o)}return this._transitionEngine.listen(e,n,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let P6=(()=>{const e=class{constructor(i,r,o){this._element=i,this._startStyles=r,this._endStyles=o,this._state=0;let c=e.initialStylesByElement.get(i);c||e.initialStylesByElement.set(i,c=new Map),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&ic(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ic(this._element,this._initialStyles),this._endStyles&&(ic(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ph(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ph(this._element,this._endStyles),this._endStyles=null),ic(this._element,this._initialStyles),this._state=3)}};let t=e;return e.initialStylesByElement=new WeakMap,t})();function s1(t){let e=null;return t.forEach((n,i)=>{(function O6(t){return"display"===t||"position"===t})(i)&&(e=e||new Map,e.set(i,n))}),e}class mI{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:QT(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class F6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return $T(e,n)}getParentElement(e){return Uw(e)}query(e,n,i){return GT(e,n,i)}computeStyle(e,n,i){return window.getComputedStyle(e)[n]}animate(e,n,i,r,o,c=[]){const g={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(g.easing=o);const C=new Map,S=c.filter(q=>q instanceof mI);(function U5(t,e){return 0===t||0===e})(i,r)&&S.forEach(q=>{q.currentSnapshot.forEach((te,ce)=>C.set(ce,te))});let I=function B5(t){return t.length?t[0]instanceof Map?t:t.map(e=>YT(e)):[]}(n).map(q=>Jd(q));I=function j5(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((o,c)=>{i.has(c)||r.push(c),i.set(c,o)}),r.length)for(let o=1;o<e.length;o++){let c=e[o];r.forEach(h=>c.set(h,QT(t,h)))}}return e}(e,I,C);const U=function R6(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=s1(e[0]),e.length>1&&(i=s1(e[e.length-1]))):e instanceof Map&&(n=s1(e)),n||i?new P6(t,n,i):null}(e,I);return new mI(e,I,g,U)}}let L6=(()=>{const e=class extends FT{constructor(i,r){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(r.body,{id:"0",encapsulation:tr.None,styles:[],data:{animation:[]}})}build(i){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(i)?NT(i):i;return pI(this._renderer,null,r,"register",[o]),new N6(r,this._renderer)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Lf),we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();class N6 extends YV{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new B6(this._id,e,n||{},this._renderer)}}class B6{constructor(e,n,i,r){this.id=e,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return pI(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function pI(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const fI="@.disabled";let z6=(()=>{const e=class{constructor(i,r,o){this.delegate=i,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(c,h)=>{const g=h?.parentNode(c);g&&h.removeChild(g,c)}}createRenderer(i,r){const c=this.delegate.createRenderer(i,r);if(!(i&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(c);return I||(I=new gI("",c,this.engine,()=>this._rendererCache.delete(c)),this._rendererCache.set(c,I)),I}const h=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,i);const C=I=>{Array.isArray(I)?I.forEach(C):this.engine.registerTrigger(h,g,i,I.name,I)};return r.data.animation.forEach(C),new V6(this,g,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(i,r,o){i>=0&&i<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[h,g]=c;h(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Lf),we(uv),we(Rt))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();class gI{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){"@"==n.charAt(0)&&n==fI?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class V6 extends gI{constructor(e,n,i,r,o){super(n,i,r,o),this.factory=e,this.namespaceId=n}setProperty(e,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==fI?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if("@"==n.charAt(0)){const r=function U6(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(e);let o=n.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function j6(t){const e=t.indexOf(".");return[t.substring(0,e),t.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,n,i)}}const _I=[{provide:FT,useClass:L6},{provide:Jw,useFactory:function $6(){return new c6}},{provide:uv,useClass:(()=>{const e=class extends uv{constructor(i,r,o,c){super(i.body,r,o)}ngOnDestroy(){this.flush()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci),we(jw),we(Jw),we(Yd))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})()},{provide:Lf,useFactory:function G6(t,e,n){return new z6(t,e,n)},deps:[Rw,uv,Rt]}],a1=[{provide:jw,useFactory:()=>new F6},{provide:hs,useValue:"BrowserAnimations"},..._I],yI=[{provide:jw,useClass:qT},{provide:hs,useValue:"NoopAnimations"},..._I];let q6=(()=>{const e=class{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?yI:a1}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:a1,imports:[TT]}),t})();const{isArray:W6}=Array,{getPrototypeOf:Z6,prototype:Y6,keys:X6}=Object;function vI(t){if(1===t.length){const e=t[0];if(W6(e))return{args:e,keys:null};if(function K6(t){return t&&"object"==typeof t&&Z6(t)===Y6}(e)){const n=X6(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:Q6}=Array;function l1(t){return Gt(e=>function J6(t,e){return Q6(e)?t(...e):t(e)}(t,e))}function bI(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function xI(...t){const e=Ki(t),{args:n,keys:i}=vI(t),r=new Si(o=>{const{length:c}=n;if(!c)return void o.complete();const h=new Array(c);let g=c,C=c;for(let S=0;S<c;S++){let I=!1;re(n[S]).subscribe(nn(o,U=>{I||(I=!0,C--),h[S]=U},()=>g--,void 0,()=>{(!g||!I)&&(C||o.next(i?bI(i,h):h),o.complete())}))}});return e?r.pipe(l1(e)):r}let wI=(()=>{const e=class{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Gc),G(St))},e.\u0275dir=Fe({type:e}),t})(),gh=(()=>{const e=class extends wI{};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,features:[ot]}),t})();const Ha=new Le("NgValueAccessor"),eU={provide:Ha,useExisting:Vi(()=>c1),multi:!0};let c1=(()=>{const e=class extends gh{writeValue(i){this.setProperty("checked",i)}};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){1&r&&Ue("change",function(h){return o.onChange(h.target.checked)})("blur",function(){return o.onTouched()})},features:[Ft([eU]),ot]}),t})();const tU={provide:Ha,useExisting:Vi(()=>nc),multi:!0},nU=new Le("CompositionEventMode");let nc=(()=>{const e=class extends wI{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function iU(){const t=Xd()?Xd().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(i){this.setProperty("value",i??"")}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Gc),G(St),G(nU,8))},e.\u0275dir=Fe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&Ue("input",function(h){return o._handleInput(h.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(h){return o._compositionEnd(h.target.value)})},features:[Ft([tU]),ot]}),t})();function eu(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function CI(t){return null!=t&&"number"==typeof t.length}const Xo=new Le("NgValidators"),tu=new Le("NgAsyncValidators"),rU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $a{static min(e){return function DI(t){return e=>{if(eu(e.value)||eu(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function EI(t){return e=>{if(eu(e.value)||eu(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return SI(e)}static requiredTrue(e){return function MI(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function kI(t){return eu(t.value)||rU.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function TI(t){return e=>eu(e.value)||!CI(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function II(t){return e=>CI(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function AI(t){if(!t)return mv;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(eu(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return NI(e)}static composeAsync(e){return BI(e)}}function SI(t){return eu(t.value)?{required:!0}:null}function mv(t){return null}function RI(t){return null!=t}function PI(t){return Wf(t)?Un(t):t}function OI(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function FI(t,e){return e.map(n=>n(t))}function LI(t){return t.map(e=>function oU(t){return!t.validate}(e)?e:n=>e.validate(n))}function NI(t){if(!t)return null;const e=t.filter(RI);return 0==e.length?null:function(n){return OI(FI(n,e))}}function d1(t){return null!=t?NI(LI(t)):null}function BI(t){if(!t)return null;const e=t.filter(RI);return 0==e.length?null:function(n){return xI(FI(n,e).map(PI)).pipe(Gt(OI))}}function u1(t){return null!=t?BI(LI(t)):null}function zI(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function VI(t){return t._rawValidators}function UI(t){return t._rawAsyncValidators}function h1(t){return t?Array.isArray(t)?t:[t]:[]}function pv(t,e){return Array.isArray(t)?t.includes(e):t===e}function jI(t,e){const n=h1(e);return h1(t).forEach(r=>{pv(n,r)||n.push(r)}),n}function HI(t,e){return h1(e).filter(n=>!pv(t,n))}class $I{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=d1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=u1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class gs extends $I{get formDirective(){return null}get path(){return null}}class rc extends $I{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class GI{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jc=(()=>{const e=class extends GI{constructor(i){super(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(rc,2))},e.\u0275dir=Fe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&pi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[ot]}),t})(),_h=(()=>{const e=class extends GI{constructor(i){super(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(gs,10))},e.\u0275dir=Fe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&pi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[ot]}),t})();const yg="VALID",gv="INVALID",Hm="PENDING",vg="DISABLED";function f1(t){return(_v(t)?t.validators:t)||null}function g1(t,e){return(_v(e)?e.asyncValidators:t)||null}function _v(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function WI(t,e,n){const i=t.controls;if(!(e?Object.keys(i):i).length)throw new Ie(1e3,"");if(!i[n])throw new Ie(1001,"")}function ZI(t,e,n){t._forEachChild((i,r)=>{if(void 0===n[r])throw new Ie(1002,"")})}class yv{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yg}get invalid(){return this.status===gv}get pending(){return this.status==Hm}get disabled(){return this.status===vg}get enabled(){return this.status!==vg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(HI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(HI(e,this._rawAsyncValidators))}hasValidator(e){return pv(this._rawValidators,e)}hasAsyncValidator(e){return pv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=vg,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=yg,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yg||this.status===Hm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vg:yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hm,this._hasOwnPendingAsyncValidator=!0;const n=PI(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new fi,this.statusChanges=new fi}_calculateStatus(){return this._allControlsDisabled()?vg:this.errors?gv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hm)?Hm:this._anyControlsHaveStatus(gv)?gv:yg}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_v(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cU(t){return Array.isArray(t)?d1(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dU(t){return Array.isArray(t)?u1(t):t||null}(this._rawAsyncValidators)}}class bg extends yv{constructor(e,n,i){super(f1(n),g1(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ZI(this,0,e),Object.keys(e).forEach(i=>{WI(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class YI extends bg{}const yh=new Le("CallSetDisabledState",{providedIn:"root",factory:()=>xg}),xg="always";function vv(t,e){return[...e.path,t]}function wg(t,e,n=xg){_1(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function hU(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&XI(t,e)})}(t,e),function pU(t,e){const n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function mU(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&XI(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function uU(t,e){if(e.valueAccessor.setDisabledState){const n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function bv(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),wv(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function xv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function _1(t,e){const n=VI(t);null!==e.validator?t.setValidators(zI(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=UI(t);null!==e.asyncValidator?t.setAsyncValidators(zI(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();xv(e._rawValidators,r),xv(e._rawAsyncValidators,r)}function wv(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=VI(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(c=>c!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const r=UI(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(c=>c!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}const i=()=>{};return xv(e._rawValidators,i),xv(e._rawAsyncValidators,i),n}function XI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function KI(t,e){_1(t,e)}function v1(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function QI(t,e){t._syncPendingControls(),e.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function b1(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===nc?n=o:function _U(t){return Object.getPrototypeOf(t.constructor)===gh}(o)?i=o:r=o}),r||i||n||null}const vU={provide:gs,useExisting:Vi(()=>oc)},Cg=(()=>Promise.resolve())();let oc=(()=>{const e=class extends gs{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new fi,this.form=new bg({},d1(i),u1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Cg.then(()=>{const r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),wg(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Cg.then(()=>{const r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Cg.then(()=>{const r=this._findContainer(i.path),o=new bg({});KI(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Cg.then(()=>{const r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Cg.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,QI(this.form,this._directives),this.ngSubmit.emit(i),"dialog"===i?.target?.method}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Xo,10),G(tu,10),G(yh,8))},e.\u0275dir=Fe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){1&r&&Ue("submit",function(h){return o.onSubmit(h)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ft([vU]),ot]}),t})();function JI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function eA(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Dg=class extends yv{constructor(e=null,n,i){super(f1(n),g1(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_v(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=eA(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){eA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wU={provide:rc,useExisting:Vi(()=>ed)},nA=(()=>Promise.resolve())();let ed=(()=>{const e=class extends rc{constructor(i,r,o,c,h,g){super(),this._changeDetectorRef=h,this.callSetDisabledState=g,this.control=new Dg,this._registered=!1,this.name="",this.update=new fi,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=b1(0,c)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){const r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),v1(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(i){nA.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){const r=i.isDisabled.currentValue,o=0!==r&&Um(r);nA.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?vv(i,this._parent):[i]}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(gs,9),G(Xo,10),G(tu,10),G(Ha,10),G(bo,8),G(yh,8))},e.\u0275dir=Fe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ft([wU]),ot,Zn]}),t})(),vh=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const CU={provide:Ha,useExisting:Vi(()=>x1),multi:!0};let x1=(()=>{const e=class extends gh{writeValue(i){this.setProperty("value",i??"")}registerOnChange(i){this.onChange=r=>{i(""==r?null:parseFloat(r))}}};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){1&r&&Ue("input",function(h){return o.onChange(h.target.value)})("blur",function(){return o.onTouched()})},features:[Ft([CU]),ot]}),t})();const DU={provide:Ha,useExisting:Vi(()=>w1),multi:!0};let rA=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})(),EU=(()=>{const e=class{constructor(){this._accessors=[]}add(i,r){this._accessors.push([i,r])}remove(i){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===i)return void this._accessors.splice(r,1)}select(i){this._accessors.forEach(r=>{this._isSameGroup(r,i)&&r[1]!==i&&r[1].fireUncheck(i.value)})}_isSameGroup(i,r){return!!i[0].control&&i[0]._parent===r._control._parent&&i[1].name===r.name}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:rA}),t})(),w1=(()=>{const e=class extends gh{constructor(i,r,o,c){super(i,r),this._registry=o,this._injector=c,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Je(yh,{optional:!0})??xg}ngOnInit(){this._control=this._injector.get(rc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(i){this._state=i===this.value,this.setProperty("checked",this._state)}registerOnChange(i){this._fn=i,this.onChange=()=>{i(this.value),this._registry.select(this)}}setDisabledState(i){(this.setDisabledStateFired||i||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",i),this.setDisabledStateFired=!0}fireUncheck(i){this.writeValue(i)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Gc),G(St),G(EU),G(Ao))},e.\u0275dir=Fe({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,o){1&r&&Ue("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ft([DU]),ot]}),t})();const C1=new Le("NgModelWithFormControlWarning"),kU={provide:gs,useExisting:Vi(()=>$m)};let $m=(()=>{const e=class extends gs{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new fi,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){const r=this.form.get(i.path);return wg(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){bv(i.control||null,i,!1),function yU(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,QI(this.form,this.directives),this.ngSubmit.emit(i),"dialog"===i?.target?.method}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{const r=i.control,o=this.form.get(i.path);r!==o&&(bv(r||null,i),(t=>t instanceof Dg)(o)&&(wg(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){const r=this.form.get(i.path);KI(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){const r=this.form.get(i.path);r&&function fU(t,e){return wv(t,e)}(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_1(this.form,this),this._oldForm&&wv(this._oldForm,this)}_checkFormPresent(){}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Xo,10),G(tu,10),G(yh,8))},e.\u0275dir=Fe({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){1&r&&Ue("submit",function(h){return o.onSubmit(h)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ft([kU]),ot,Zn]}),t})();const AU={provide:rc,useExisting:Vi(()=>S1)};let S1=(()=>{const e=class extends rc{set isDisabled(i){}constructor(i,r,o,c,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.name=null,this.update=new fi,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=b1(0,c)}ngOnChanges(i){this._added||this._setUpControl(),v1(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return vv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};let t=e;return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(G(gs,13),G(Xo,10),G(tu,10),G(Ha,10),G(C1,8))},e.\u0275dir=Fe({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ft([AU]),ot,Zn]}),t})();const RU={provide:Ha,useExisting:Vi(()=>Gm),multi:!0};function lA(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Gm=(()=>{const e=class extends gh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;const o=lA(this._getOptionId(i),i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){const r=function PU(t){return t.split(":")[0]}(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){1&r&&Ue("change",function(h){return o.onChange(h.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ft([RU]),ot]}),t})(),Cv=(()=>{const e=class{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){null!=this._select&&(this._select._optionMap.set(this.id,i),this._setElementValue(lA(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Gc),G(Gm,9))},e.\u0275dir=Fe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const OU={provide:Ha,useExisting:Vi(()=>M1),multi:!0};function cA(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let M1=(()=>{const e=class extends gh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){let r;if(this.value=i,Array.isArray(i)){const o=i.map(c=>this._getOptionId(c));r=(c,h)=>{c._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{const o=[],c=r.selectedOptions;if(void 0!==c){const h=c;for(let g=0;g<h.length;g++){const S=this._getOptionValue(h[g].value);o.push(S)}}else{const h=r.options;for(let g=0;g<h.length;g++){const C=h[g];if(C.selected){const S=this._getOptionValue(C.value);o.push(S)}}}this.value=o,i(o)}}_registerOption(i){const r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){const r=function FU(t){return t.split(":")[0]}(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){1&r&&Ue("change",function(h){return o.onChange(h.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ft([OU]),ot]}),t})(),Dv=(()=>{const e=class{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){null!=this._select&&(this._value=i,this._setElementValue(cA(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(cA(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Gc),G(M1,9))},e.\u0275dir=Fe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),bh=(()=>{const e=class{constructor(){this._validator=mv}ngOnChanges(i){if(this.inputName in i){const r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):mv,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return null!=i}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,features:[Zn]}),t})();const BU={provide:Xo,useExisting:Vi(()=>qm),multi:!0};let qm=(()=>{const e=class extends bh{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Um,this.createValidator=i=>SI}enabled(i){return i}};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){2&r&&vi("required",o._enabled?"":null)},inputs:{required:"required"},features:[Ft([BU]),ot]}),t})(),vA=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[rA]}),t})();class bA extends yv{constructor(e,n,i){super(f1(n),g1(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){ZI(this,0,e),e.forEach((i,r)=>{WI(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>!!i._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function xA(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let $U=(()=>{const e=class{constructor(){this.useNonNullable=!1}get nonNullable(){const i=new e;return i.useNonNullable=!0,i}group(i,r=null){const o=this._reduceControls(i);let c={};return xA(r)?c=r:null!==r&&(c.validators=r.validator,c.asyncValidators=r.asyncValidator),new bg(o,c)}record(i,r=null){const o=this._reduceControls(i);return new YI(o,r)}control(i,r,o){let c={};return this.useNonNullable?(xA(r)?c=r:(c.validators=r,c.asyncValidators=o),new Dg(i,{...c,nonNullable:!0})):new Dg(i,r,o)}array(i,r,o){const c=i.map(h=>this._createControl(h));return new bA(c,r,o)}_reduceControls(i){const r={};return Object.keys(i).forEach(o=>{r[o]=this._createControl(i[o])}),r}_createControl(i){return i instanceof Dg||i instanceof yv?i:Array.isArray(i)?this.control(i[0],i.length>1?i[1]:null,i.length>2?i[2]:null):this.control(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),GU=(()=>{const e=class{static withConfig(i){return{ngModule:e,providers:[{provide:yh,useValue:i.callSetDisabledState??xg}]}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[vA]}),t})(),qU=(()=>{const e=class{static withConfig(i){return{ngModule:e,providers:[{provide:C1,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:yh,useValue:i.callSetDisabledState??xg}]}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[vA]}),t})();function Wm(t,e){return Pi(e)?qe(t,e,1):qe(t,1)}function dr(t,e){return Ti((n,i)=>{let r=0;n.subscribe(nn(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Zm(t){return Ti((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}class Ev{}class k1{}class sc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),c=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(o=>o.toString()),r.length>0){const o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof sc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new sc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof sc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=e.value;if(o){let c=this.headers.get(n);if(!c)return;c=c.filter(h=>-1===o.indexOf(h)),0===c.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,c)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class WU{encodeKey(e){return wA(e)}encodeValue(e){return wA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YU=/%(\d[a-f0-9])/gi,XU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wA(t){return encodeURIComponent(t).replace(YU,(e,n)=>XU[n]??e)}function Sv(t){return`${t}`}class iu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new WU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ZU(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[c,h]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],g=n.get(c)||[];g.push(h),n.set(c,g)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(Sv):[Sv(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new iu({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Sv(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Sv(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class KU{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function CA(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function DA(t){return typeof Blob<"u"&&t instanceof Blob}function EA(t){return typeof FormData<"u"&&t instanceof FormData}class Eg{constructor(e,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function QU(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new sc),this.context||(this.context=new KU),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=n;else{const h=n.indexOf("?");this.urlWithParams=n+(-1===h?"?":h<n.length-1?"&":"")+c}}else this.params=new iu,this.urlWithParams=n}serializeBody(){return null===this.body?null:CA(this.body)||DA(this.body)||EA(this.body)||function JU(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof iu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||EA(this.body)?null:DA(this.body)?this.body.type||null:CA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof iu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,C=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((I,U)=>I.set(U,e.setHeaders[U]),g)),e.setParams&&(C=Object.keys(e.setParams).reduce((I,U)=>I.set(U,e.setParams[U]),C)),new Eg(n,i,o,{params:C,headers:g,context:S,reportProgress:h,responseType:r,withCredentials:c})}}var Ur=(()=>((Ur=Ur||{})[Ur.Sent=0]="Sent",Ur[Ur.UploadProgress=1]="UploadProgress",Ur[Ur.ResponseHeader=2]="ResponseHeader",Ur[Ur.DownloadProgress=3]="DownloadProgress",Ur[Ur.Response=4]="Response",Ur[Ur.User=5]="User",Ur))();class T1{constructor(e,n=200,i="OK"){this.headers=e.headers||new sc,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class I1 extends T1{constructor(e={}){super(e),this.type=Ur.ResponseHeader}clone(e={}){return new I1({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ym extends T1{constructor(e={}){super(e),this.type=Ur.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ym({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class SA extends T1{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function A1(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Mv=(()=>{const e=class{constructor(i){this.handler=i}request(i,r,o={}){let c;if(i instanceof Eg)c=i;else{let C,S;C=o.headers instanceof sc?o.headers:new sc(o.headers),o.params&&(S=o.params instanceof iu?o.params:new iu({fromObject:o.params})),c=new Eg(i,r,void 0!==o.body?o.body:null,{headers:C,context:o.context,params:S,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=bt(c).pipe(Wm(C=>this.handler.handle(C)));if(i instanceof Eg||"events"===o.observe)return h;const g=h.pipe(dr(C=>C instanceof Ym));switch(o.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return g.pipe(Gt(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return g.pipe(Gt(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return g.pipe(Gt(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return g.pipe(Gt(C=>C.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new iu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,A1(o,r))}post(i,r,o={}){return this.request("POST",i,A1(o,r))}put(i,r,o={}){return this.request("PUT",i,A1(o,r))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Ev))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();function MA(t,e){return e(t)}function ej(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}const kA=new Le(""),Sg=new Le(""),TA=new Le("");function ij(){let t=null;return(e,n)=>{null===t&&(t=(Je(kA,{optional:!0})??[]).reduceRight(ej,MA));const i=Je(Ay),r=i.add();return t(e,n).pipe(Zm(()=>i.remove(r)))}}let IA=(()=>{const e=class extends Ev{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=Je(Ay)}handle(i){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Sg),...this.injector.get(TA,[])]));this.chain=o.reduceRight((c,h)=>function tj(t,e,n){return(i,r)=>n.runInContext(()=>e(i,o=>t(o,r)))}(c,h,this.injector),MA)}const r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(Zm(()=>this.pendingTasks.remove(r)))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(k1),we(Wl))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();const sj=/^\)\]\}',?\n/;let RA=(()=>{const e=class{constructor(i){this.xhrFactory=i}handle(i){if("JSONP"===i.method)throw new Ie(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Un(r.\u0275loadImpl()):bt(null)).pipe(Sr(()=>new Si(c=>{const h=r.build();if(h.open(i.method,i.urlWithParams),i.withCredentials&&(h.withCredentials=!0),i.headers.forEach((ge,Te)=>h.setRequestHeader(ge,Te.join(","))),i.headers.has("Accept")||h.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){const ge=i.detectContentTypeHeader();null!==ge&&h.setRequestHeader("Content-Type",ge)}if(i.responseType){const ge=i.responseType.toLowerCase();h.responseType="json"!==ge?ge:"text"}const g=i.serializeBody();let C=null;const S=()=>{if(null!==C)return C;const ge=h.statusText||"OK",Te=new sc(h.getAllResponseHeaders()),Ee=function aj(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(h)||i.url;return C=new I1({headers:Te,status:h.status,statusText:ge,url:Ee}),C},I=()=>{let{headers:ge,status:Te,statusText:Ee,url:dt}=S(),lt=null;204!==Te&&(lt=typeof h.response>"u"?h.responseText:h.response),0===Te&&(Te=lt?200:0);let ni=Te>=200&&Te<300;if("json"===i.responseType&&"string"==typeof lt){const qn=lt;lt=lt.replace(sj,"");try{lt=""!==lt?JSON.parse(lt):null}catch($r){lt=qn,ni&&(ni=!1,lt={error:$r,text:lt})}}ni?(c.next(new Ym({body:lt,headers:ge,status:Te,statusText:Ee,url:dt||void 0})),c.complete()):c.error(new SA({error:lt,headers:ge,status:Te,statusText:Ee,url:dt||void 0}))},U=ge=>{const{url:Te}=S(),Ee=new SA({error:ge,status:h.status||0,statusText:h.statusText||"Unknown Error",url:Te||void 0});c.error(Ee)};let q=!1;const te=ge=>{q||(c.next(S()),q=!0);let Te={type:Ur.DownloadProgress,loaded:ge.loaded};ge.lengthComputable&&(Te.total=ge.total),"text"===i.responseType&&h.responseText&&(Te.partialText=h.responseText),c.next(Te)},ce=ge=>{let Te={type:Ur.UploadProgress,loaded:ge.loaded};ge.lengthComputable&&(Te.total=ge.total),c.next(Te)};return h.addEventListener("load",I),h.addEventListener("error",U),h.addEventListener("timeout",U),h.addEventListener("abort",U),i.reportProgress&&(h.addEventListener("progress",te),null!==g&&h.upload&&h.upload.addEventListener("progress",ce)),h.send(g),c.next({type:Ur.Sent}),()=>{h.removeEventListener("error",U),h.removeEventListener("abort",U),h.removeEventListener("load",I),h.removeEventListener("timeout",U),i.reportProgress&&(h.removeEventListener("progress",te),null!==g&&h.upload&&h.upload.removeEventListener("progress",ce)),h.readyState!==h.DONE&&h.abort()}})))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(hT))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();const R1=new Le("XSRF_ENABLED"),PA=new Le("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),OA=new Le("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class FA{}let dj=(()=>{const e=class{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=eT(i,this.cookieName),this.lastCookieString=i),this.lastToken}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci),we(Gd),we(PA))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();function uj(t,e){const n=t.url.toLowerCase();if(!Je(R1)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const i=Je(FA).getToken(),r=Je(OA);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var Cr=(()=>((Cr=Cr||{})[Cr.Interceptors=0]="Interceptors",Cr[Cr.LegacyInterceptors=1]="LegacyInterceptors",Cr[Cr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Cr[Cr.NoXsrfProtection=3]="NoXsrfProtection",Cr[Cr.JsonpSupport=4]="JsonpSupport",Cr[Cr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Cr))();function Xm(t,e){return{\u0275kind:t,\u0275providers:e}}function hj(...t){const e=[Mv,RA,IA,{provide:Ev,useExisting:IA},{provide:k1,useExisting:RA},{provide:Sg,useValue:uj,multi:!0},{provide:R1,useValue:!0},{provide:FA,useClass:dj}];for(const n of t)e.push(...n.\u0275providers);return function D0(t){return{\u0275providers:t}}(e)}const LA=new Le("LEGACY_INTERCEPTOR_FN");let pj=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[hj(Xm(Cr.LegacyInterceptors,[{provide:LA,useFactory:ij},{provide:Sg,useExisting:LA,multi:!0}]))]}),t})();function Tv(...t){const e=Mn(t),n=Ki(t),{args:i,keys:r}=vI(t);if(0===i.length)return Un([],e);const o=new Si(function bj(t,e,n=Er){return i=>{BA(e,()=>{const{length:r}=t,o=new Array(r);let c=r,h=r;for(let g=0;g<r;g++)BA(e,()=>{const C=Un(t[g],e);let S=!1;C.subscribe(nn(i,I=>{o[g]=I,S||(S=!0,h--),h||i.next(n(o.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,e,r?c=>bI(r,c):Er));return n?o.pipe(l1(n)):o}function BA(t,e,n){t?st(n,t,e):e()}const Iv=du(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Mg(...t){return function xj(){return xt(1)}()(Un(t,Mn(t)))}function Av(t){return new Si(e=>{re(t()).subscribe(e)})}function xh(t,e){const n=Pi(t)?t:()=>t,i=r=>r.error(n());return new Si(e?r=>e.schedule(i,0,r):i)}function P1(){return Ti((t,e)=>{let n=null;t._refCount++;const i=nn(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class O1 extends Si{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,qs(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zi;const n=this.getSubject();e.add(this.source.subscribe(nn(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zi.EMPTY)}return e}refCount(){return P1()(this)}}function Dr(t){return t<=0?()=>vt:Ti((e,n)=>{let i=0;e.subscribe(nn(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function _s(...t){const e=Mn(t);return Ti((n,i)=>{(e?Mg(t,n,e):Mg(t,n)).subscribe(i)})}function Rv(t){return Ti((e,n)=>{let i=!1;e.subscribe(nn(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function zA(t=wj){return Ti((e,n)=>{let i=!1;e.subscribe(nn(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function wj(){return new Iv}function wh(t,e){const n=arguments.length>=2;return i=>i.pipe(t?dr((r,o)=>t(r,o,i)):Er,Dr(1),n?Rv(e):zA(()=>new Iv))}function jr(t,e,n){const i=Pi(t)||e||n?{next:t,error:e,complete:n}:t;return i?Ti((r,o)=>{var c;null===(c=i.subscribe)||void 0===c||c.call(i);let h=!0;r.subscribe(nn(o,g=>{var C;null===(C=i.next)||void 0===C||C.call(i,g),o.next(g)},()=>{var g;h=!1,null===(g=i.complete)||void 0===g||g.call(i),o.complete()},g=>{var C;h=!1,null===(C=i.error)||void 0===C||C.call(i,g),o.error(g)},()=>{var g,C;h&&(null===(g=i.unsubscribe)||void 0===g||g.call(i)),null===(C=i.finalize)||void 0===C||C.call(i)}))}):Er}function td(t){return Ti((e,n)=>{let o,i=null,r=!1;i=e.subscribe(nn(n,void 0,void 0,c=>{o=re(t(c,td(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function F1(t){return t<=0?()=>vt:Ti((e,n)=>{let i=[];e.subscribe(nn(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function VA(t){return Gt(()=>t)}const bi="primary",kg=Symbol("RouteTitle");class Sj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Km(t){return new Sj(t)}function Mj(t,e,n){const i=n.path.split("/");if(i.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const c=i[o],h=t[o];if(c.startsWith(":"))r[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function ac(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!UA(t[r],e[r]))return!1;return!0}function UA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}return t===e}function jA(t){return t.length>0?t[t.length-1]:null}function nu(t){return function NA(t){return!!t&&(t instanceof Si||Pi(t.lift)&&Pi(t.subscribe))}(t)?t:Wf(t)?Un(Promise.resolve(t)):bt(t)}const Tj={exact:function GA(t,e,n){if(!Ch(t.segments,e.segments)||!Pv(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!t.children[i]||!GA(t.children[i],e.children[i],n))return!1;return!0},subset:qA},HA={exact:function Ij(t,e){return ac(t,e)},subset:function Aj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>UA(t[n],e[n]))},ignored:()=>!0};function $A(t,e,n){return Tj[n.paths](t.root,e.root,n.matrixParams)&&HA[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function qA(t,e,n){return WA(t,e,e.segments,n)}function WA(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!(!Ch(r,n)||e.hasChildren()||!Pv(r,n,i))}if(t.segments.length===n.length){if(!Ch(t.segments,n)||!Pv(t.segments,n,i))return!1;for(const r in e.children)if(!t.children[r]||!qA(t.children[r],e.children[r],i))return!1;return!0}{const r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Ch(t.segments,r)&&Pv(t.segments,r,i)&&t.children[bi])&&WA(t.children[bi],e,o,i)}}function Pv(t,e,n){return e.every((i,r)=>HA[n](t[r].parameters,i.parameters))}class Qm{constructor(e=new bn([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Km(this.queryParams)),this._queryParamMap}toString(){return Oj.serialize(this)}}class bn{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ov(this)}}class Tg{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Km(this.parameters)),this._parameterMap}toString(){return XA(this)}}function Ch(t,e){return t.length===e.length&&t.every((n,i)=>n.path===e[i].path)}let Ig=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return new L1},providedIn:"root"}),t})();class L1{parse(e){const n=new Gj(e);return new Qm(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Ag(e.root,!0)}`,i=function Nj(t){const e=Object.keys(t).map(n=>{const i=t[n];return Array.isArray(i)?i.map(r=>`${Fv(n)}=${Fv(r)}`).join("&"):`${Fv(n)}=${Fv(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${i}${"string"==typeof e.fragment?`#${function Fj(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Oj=new L1;function Ov(t){return t.segments.map(e=>XA(e)).join("/")}function Ag(t,e){if(!t.hasChildren())return Ov(t);if(e){const n=t.children[bi]?Ag(t.children[bi],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==bi&&i.push(`${r}:${Ag(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function Pj(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===bi&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==bi&&(n=n.concat(e(r,i)))}),n}(t,(i,r)=>r===bi?[Ag(t.children[bi],!1)]:[`${r}:${Ag(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[bi]?`${Ov(t)}/${n[0]}`:`${Ov(t)}/(${n.join("//")})`}}function ZA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fv(t){return ZA(t).replace(/%3B/gi,";")}function N1(t){return ZA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lv(t){return decodeURIComponent(t)}function YA(t){return Lv(t.replace(/\+/g,"%20"))}function XA(t){return`${N1(t.path)}${function Lj(t){return Object.keys(t).map(e=>`;${N1(e)}=${N1(t[e])}`).join("")}(t.parameters)}`}const Bj=/^[^\/()?;#]+/;function B1(t){const e=t.match(Bj);return e?e[0]:""}const zj=/^[^\/()?;=#]+/,Uj=/^[^=?&#]+/,Hj=/^[^&#]+/;class Gj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[bi]=new bn(e,n)),i}parseSegment(){const e=B1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ie(4009,!1);return this.capture(e),new Tg(Lv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Vj(t){const e=t.match(zj);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=B1(this.remaining);r&&(i=r,this.capture(i))}e[Lv(n)]=Lv(i)}parseQueryParam(e){const n=function jj(t){const e=t.match(Uj);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const c=function $j(t){const e=t.match(Hj);return e?e[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=YA(n),o=YA(i);if(e.hasOwnProperty(r)){let c=e[r];Array.isArray(c)||(c=[c],e[r]=c),c.push(o)}else e[r]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=B1(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Ie(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=bi);const c=this.parseChildren();n[o]=1===Object.keys(c).length?c[bi]:new bn([],c),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ie(4011,!1)}}function KA(t){return t.segments.length>0?new bn([],{[bi]:t}):t}function QA(t){const e={};for(const i of Object.keys(t.children)){const o=QA(t.children[i]);if(i===bi&&0===o.segments.length&&o.hasChildren())for(const[c,h]of Object.entries(o.children))e[c]=h;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function qj(t){if(1===t.numberOfChildren&&t.children[bi]){const e=t.children[bi];return new bn(t.segments.concat(e.segments),e.children)}return t}(new bn(t.segments,e))}function Dh(t){return t instanceof Qm}function JA(t){let e;const r=KA(function n(o){const c={};for(const g of o.children){const C=n(g);c[g.outlet]=C}const h=new bn(o.url,c);return o===t&&(e=h),h}(t.root));return e??r}function e2(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(0===e.length)return z1(r,r,r,n,i);const o=function Zj(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new n2(!0,0,t);let e=0,n=!1;const i=t.reduce((r,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([g,C])=>{h[g]="string"==typeof C?C.split("/"):C}),[...r,{outlets:h}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===c?(o.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?n=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,o]},[]);return new n2(n,e,i)}(e);if(o.toRoot())return z1(r,r,new bn([],{}),n,i);const c=function Yj(t,e,n){if(t.isAbsolute)return new Bv(e,!0,0);if(!n)return new Bv(e,!1,NaN);if(null===n.parent)return new Bv(n,!0,0);const i=Nv(t.commands[0])?0:1;return function Xj(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ie(4005,!1);r=i.segments.length}return new Bv(i,!1,r-o)}(n,n.segments.length-1+i,t.numberOfDoubleDots)}(o,r,t),h=c.processChildren?Pg(c.segmentGroup,c.index,o.commands):r2(c.segmentGroup,c.index,o.commands);return z1(r,c.segmentGroup,h,n,i)}function Nv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Rg(t){return"object"==typeof t&&null!=t&&t.outlets}function z1(t,e,n,i,r){let c,o={};i&&Object.entries(i).forEach(([g,C])=>{o[g]=Array.isArray(C)?C.map(S=>`${S}`):`${C}`}),c=t===e?n:t2(t,e,n);const h=KA(QA(c));return new Qm(h,o,r)}function t2(t,e,n){const i={};return Object.entries(t.children).forEach(([r,o])=>{i[r]=o===e?n:t2(o,e,n)}),new bn(t.segments,i)}class n2{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Nv(i[0]))throw new Ie(4003,!1);const r=i.find(Rg);if(r&&r!==jA(i))throw new Ie(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bv{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}}function r2(t,e,n){if(t||(t=new bn([],{})),0===t.segments.length&&t.hasChildren())return Pg(t,e,n);const i=function Qj(t,e,n){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;const c=t.segments[r],h=n[i];if(Rg(h))break;const g=`${h}`,C=i<n.length-1?n[i+1]:null;if(r>0&&void 0===g)break;if(g&&C&&"object"==typeof C&&void 0===C.outlets){if(!s2(g,C,c))return o;i+=2}else{if(!s2(g,{},c))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const o=new bn(t.segments.slice(0,i.pathIndex),{});return o.children[bi]=new bn(t.segments.slice(i.pathIndex),t.children),Pg(o,0,r)}return i.match&&0===r.length?new bn(t.segments,{}):i.match&&!t.hasChildren()?V1(t,e,n):i.match?Pg(t,0,r):V1(t,e,n)}function Pg(t,e,n){if(0===n.length)return new bn(t.segments,{});{const i=function Kj(t){return Rg(t[0])?t[0].outlets:{[bi]:t}}(n),r={};if(!i[bi]&&t.children[bi]&&1===t.numberOfChildren&&0===t.children[bi].segments.length){const o=Pg(t.children[bi],e,n);return new bn(t.segments,o.children)}return Object.entries(i).forEach(([o,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(r[o]=r2(t.children[o],e,c))}),Object.entries(t.children).forEach(([o,c])=>{void 0===i[o]&&(r[o]=c)}),new bn(t.segments,r)}}function V1(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const o=n[r];if(Rg(o)){const g=Jj(o.outlets);return new bn(i,g)}if(0===r&&Nv(n[0])){i.push(new Tg(t.segments[e].path,o2(n[0]))),r++;continue}const c=Rg(o)?o.outlets[bi]:`${o}`,h=r<n.length-1?n[r+1]:null;c&&h&&Nv(h)?(i.push(new Tg(c,o2(h))),r+=2):(i.push(new Tg(c,{})),r++)}return new bn(i,{})}function Jj(t){const e={};return Object.entries(t).forEach(([n,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[n]=V1(new bn([],{}),0,i))}),e}function o2(t){const e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function s2(t,e,n){return t==n.path&&ac(e,n.parameters)}const Og="imperative";class lc{constructor(e,n){this.id=e,this.url=n}}class U1 extends lc{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ru extends lc{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zv extends lc{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fg extends lc{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=16}}class j1 extends lc{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class e8 extends lc{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t8 extends lc{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n8 extends lc{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class r8 extends lc{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o8 extends lc{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class a8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class l8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class a2{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class h8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Lg,this.attachRef=null}}let Lg=(()=>{const e=class{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){const o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){const r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new h8,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class l2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=H1(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){const n=H1(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=$1(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return $1(e,this._root).map(n=>n.value)}}function H1(t,e){if(t===e.value)return e;for(const n of e.children){const i=H1(t,n);if(i)return i}return null}function $1(t,e){if(t===e.value)return[e];for(const n of e.children){const i=$1(t,n);if(i.length)return i.unshift(e),i}return[]}class id{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Jm(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class c2 extends l2{constructor(e,n){super(e),this.snapshot=n,G1(this,e)}toString(){return this.snapshot.toString()}}function d2(t,e){const n=function m8(t,e){const c=new Vv([],{},{},"",{},bi,e,null,{});return new h2("",new id(c,[]))}(0,e),i=new Pn([new Tg("",{})]),r=new Pn({}),o=new Pn({}),c=new Pn({}),h=new Pn(""),g=new Eh(i,r,c,h,o,bi,e,n.root);return g.snapshot=n.root,new c2(new id(g,[]),n)}class Eh{constructor(e,n,i,r,o,c,h,g){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=c,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Gt(C=>C[kg]))??bt(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Gt(e=>Km(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Gt(e=>Km(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function u2(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function p8(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Vv{get title(){return this.data?.[kg]}constructor(e,n,i,r,o,c,h,g,C){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=c,this.component=h,this.routeConfig=g,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Km(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Km(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class h2 extends l2{constructor(e,n){super(n),this.url=e,G1(this,n)}toString(){return m2(this._root)}}function G1(t,e){e.value._routerState=t,e.children.forEach(n=>G1(t,n))}function m2(t){const e=t.children.length>0?` { ${t.children.map(m2).join(", ")} } `:"";return`${t.value}${e}`}function q1(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ac(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ac(e.params,n.params)||t.paramsSubject.next(n.params),function kj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ac(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),ac(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function W1(t,e){const n=ac(t.params,e.params)&&function Rj(t,e){return Ch(t,e)&&t.every((n,i)=>ac(n.parameters,e[i].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||W1(t.parent,e.parent))}let Z1=(()=>{const e=class{constructor(){this.activated=null,this._activatedRoute=null,this.name=bi,this.activateEvents=new fi,this.deactivateEvents=new fi,this.attachEvents=new fi,this.detachEvents=new fi,this.parentContexts=Je(Lg),this.location=Je(no),this.changeDetector=Je(bo),this.environmentInjector=Je(Wl),this.inputBinder=Je(Uv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){const{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ie(4012,!1);this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Ie(4013,!1);this._activatedRoute=i;const o=this.location,h=i.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,C=new f8(i,g,o.injector);this.activated=o.createComponent(h,{index:o.length,injector:C,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zn]}),t})();class f8{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Eh?this.route:e===Lg?this.childContexts:this.parent.get(e,n)}}const Uv=new Le("");let p2=(()=>{const e=class{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){const{activatedRoute:r}=i,o=Tv([r.queryParams,r.params,r.data]).pipe(Sr(([c,h,g],C)=>(g={...c,...h,...g},0===C?bt(g):Promise.resolve(g)))).subscribe(c=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(i);const h=function D4(t){const e=Li(t);if(!e)return null;const n=new jf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone}}}(r.component);if(h)for(const{templateName:g}of h.inputs)i.activatedComponentRef.setInput(g,c[g]);else this.unsubscribeFromRouteData(i)});this.outletDataSubscriptions.set(i,o)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();function Ng(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function _8(t,e,n){return e.children.map(i=>{for(const r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Ng(t,i,r);return Ng(t,i)})}(t,e,n);return new id(i,r)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Ng(t,h)),c}}const i=function y8(t){return new Eh(new Pn(t.url),new Pn(t.params),new Pn(t.queryParams),new Pn(t.fragment),new Pn(t.data),t.outlet,t.component,t)}(e.value),r=e.children.map(o=>Ng(t,o));return new id(i,r)}}const Y1="ngNavigationCancelingError";function f2(t,e){const{redirectTo:n,navigationBehaviorOptions:i}=Dh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=g2(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function g2(t,e,n){const i=new Error("NavigationCancelingError: "+(t||""));return i[Y1]=!0,i.cancellationCode=e,n&&(i.url=n),i}function _2(t){return y2(t)&&Dh(t.url)}function y2(t){return t&&t[Y1]}let v2=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Mt({type:e,selectors:[["ng-component"]],standalone:!0,features:[gM],decls:1,vars:0,template:function(r,o){1&r&&Ot(0,"router-outlet")},dependencies:[Z1],encapsulation:2}),t})();function X1(t){const e=t.children&&t.children.map(X1),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==bi&&(n.component=v2),n}function yl(t){return t.outlet||bi}function Bg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class E8{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),q1(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){const r=Jm(n);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,r[c],i),delete r[c]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){const r=e.value,o=n?n.value:null;if(r===o)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(e,n,c.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Jm(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);if(i&&i.outlet){const c=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Jm(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){const r=Jm(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new u8(o.value.snapshot))}),e.children.length&&this.forwardEvent(new c8(e.value.snapshot))}activateRoutes(e,n,i){const r=e.value,o=n?n.value:null;if(q1(r),r===o)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,c.children)}else this.activateChildRoutes(e,n,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),q1(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Bg(r.snapshot);c.attachRef=null,c.route=r,c.injector=h,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,i)}}class b2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jv{constructor(e,n){this.component=e,this.route=n}}function S8(t,e,n){const i=t._root;return zg(i,e?e._root:null,n,[i.value])}function ep(t,e){const n=Symbol(),i=e.get(t,n);return i===n?"function"!=typeof t||function Dp(t){return null!==bd(t)}(t)?e.get(t):t:i}function zg(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Jm(e);return t.children.forEach(c=>{(function k8(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,c=e?e.value:null,h=n?n.getContext(t.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const g=function T8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ch(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ch(t.url,e.url)||!ac(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!W1(t,e)||!ac(t.queryParams,e.queryParams);default:return!W1(t,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new b2(i)):(o.data=c.data,o._resolvedData=c._resolvedData),zg(t,e,o.component?h?h.children:null:n,i,r),g&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new jv(h.outlet.component,c))}else c&&Vg(e,h,r),r.canActivateChecks.push(new b2(i)),zg(t,null,o.component?h?h.children:null:n,i,r)})(c,o[c.value.outlet],n,i.concat([c.value]),r),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,h])=>Vg(h,n.getContext(c),r)),r}function Vg(t,e,n){const i=Jm(t),r=t.value;Object.entries(i).forEach(([o,c])=>{Vg(c,r.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new jv(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Ug(t){return"function"==typeof t}function x2(t){return t instanceof Iv||"EmptyError"===t?.name}const Hv=Symbol("INITIAL_VALUE");function tp(){return Sr(t=>Tv(t.map(e=>e.pipe(Dr(1),_s(Hv)))).pipe(Gt(e=>{for(const n of e)if(!0!==n){if(n===Hv)return Hv;if(!1===n||n instanceof Qm)return n}return!0}),dr(e=>e!==Hv),Dr(1)))}function w2(t){return function $s(...t){return No(t)}(jr(e=>{if(Dh(e))throw f2(0,e)}),Gt(e=>!0===e))}class $v{constructor(e){this.segmentGroup=e||null}}class C2{constructor(e){this.urlTree=e}}function ip(t){return xh(new $v(t))}function D2(t){return xh(new C2(t))}class Y8{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new Ie(4002,!1)}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return bt(i);if(r.numberOfChildren>1||!r.children[bi])return xh(new Ie(4e3,!1));r=r.children[bi]}}applyRedirectCommands(e,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i)}applyRedirectCreateUrlTree(e,n,i,r){const o=this.createSegmentGroup(e,n.root,i,r);return new Qm(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);i[r]=n[h]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){const o=this.createSegments(e,n.segments,i,r);let c={};return Object.entries(n.children).forEach(([h,g])=>{c[h]=this.createSegmentGroup(e,g,i,r)}),new bn(o,c)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){const r=i[n.path.substring(1)];if(!r)throw new Ie(4001,!1);return r}findOrReturn(e,n){let i=0;for(const r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}}const K1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function X8(t,e,n,i,r){const o=Q1(t,e,n);return o.matched?(i=function v8(t,e){return t.providers&&!t._injector&&(t._injector=kx(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,i),function q8(t,e,n,i){const r=e.canMatch;return r&&0!==r.length?bt(r.map(c=>{const h=ep(c,t);return nu(function F8(t){return t&&Ug(t.canMatch)}(h)?h.canMatch(e,n):t.runInContext(()=>h(e,n)))})).pipe(tp(),w2()):bt(!0)}(i,e,n).pipe(Gt(c=>!0===c?o:{...K1}))):bt(o)}function Q1(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...K1}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Mj)(n,t,e);if(!r)return{...K1};const o={};Object.entries(r.posParams??{}).forEach(([h,g])=>{o[h]=g.path});const c=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function E2(t,e,n,i){return n.length>0&&function J8(t,e,n){return n.some(i=>Gv(t,e,i)&&yl(i)!==bi)}(t,n,i)?{segmentGroup:new bn(e,Q8(i,new bn(n,t.children))),slicedSegments:[]}:0===n.length&&function eH(t,e,n){return n.some(i=>Gv(t,e,i))}(t,n,i)?{segmentGroup:new bn(t.segments,K8(t,0,n,i,t.children)),slicedSegments:n}:{segmentGroup:new bn(t.segments,t.children),slicedSegments:n}}function K8(t,e,n,i,r){const o={};for(const c of i)if(Gv(t,n,c)&&!r[yl(c)]){const h=new bn([],{});o[yl(c)]=h}return{...r,...o}}function Q8(t,e){const n={};n[bi]=e;for(const i of t)if(""===i.path&&yl(i)!==bi){const r=new bn([],{});n[yl(i)]=r}return n}function Gv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class rH{constructor(e,n,i,r,o,c,h){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new Y8(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ie(4002,!1)}recognize(){const e=E2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,bi).pipe(td(n=>{if(n instanceof C2)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof $v?this.noMatchError(n):n}),Gt(n=>{const i=new Vv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bi,this.rootComponentType,null,{}),r=new id(i,n),o=new h2("",r),c=function Wj(t,e,n=null,i=null){return e2(JA(t),e,n,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(o._root),{state:o,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,bi).pipe(td(i=>{throw i instanceof $v?this.noMatchError(i):i}))}inheritParamsAndData(e){const n=e.value,i=u2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0)}processChildren(e,n,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return Un(r).pipe(Wm(o=>{const c=i.children[o],h=function C8(t,e){const n=t.filter(i=>yl(i)===e);return n.push(...t.filter(i=>yl(i)!==e)),n}(n,o);return this.processSegmentGroup(e,h,c,o)}),function Dj(t,e){return Ti(function Cj(t,e,n,i,r){return(o,c)=>{let h=n,g=e,C=0;o.subscribe(nn(c,S=>{const I=C++;g=h?t(g,S,I):(h=!0,S),i&&c.next(g)},r&&(()=>{h&&c.next(g),c.complete()})))}}(t,e,arguments.length>=2,!0))}((o,c)=>(o.push(...c),o)),Rv(null),function Ej(t,e){const n=arguments.length>=2;return i=>i.pipe(t?dr((r,o)=>t(r,o,i)):Er,F1(1),n?Rv(e):zA(()=>new Iv))}(),qe(o=>{if(null===o)return ip(i);const c=S2(o);return function oH(t){t.sort((e,n)=>e.value.outlet===bi?-1:n.value.outlet===bi?1:e.value.outlet.localeCompare(n.value.outlet))}(c),bt(c)}))}processSegment(e,n,i,r,o,c){return Un(n).pipe(Wm(h=>this.processSegmentAgainstRoute(h._injector??e,n,h,i,r,o,c).pipe(td(g=>{if(g instanceof $v)return bt(null);throw g}))),wh(h=>!!h),td(h=>{if(x2(h))return function iH(t,e,n){return 0===e.length&&!t.children[n]}(i,r,o)?bt([]):ip(i);throw h}))}processSegmentAgainstRoute(e,n,i,r,o,c,h){return function tH(t,e,n,i){return!!(yl(t)===i||i!==bi&&Gv(e,n,t))&&("**"===t.path||Q1(e,t,n).matched)}(i,r,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,c):ip(r):ip(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?D2(o):this.applyRedirects.lineralizeSegments(i,o).pipe(qe(c=>{const h=new bn(c,{});return this.processSegment(e,n,h,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,o,c){const{matched:h,consumedSegments:g,remainingSegments:C,positionalParamSegments:S}=Q1(n,r,o);if(!h)return ip(n);const I=this.applyRedirects.applyRedirectCommands(g,r.redirectTo,S);return r.redirectTo.startsWith("/")?D2(I):this.applyRedirects.lineralizeSegments(r,I).pipe(qe(U=>this.processSegment(e,i,n,U.concat(C),c,!1)))}matchSegmentAgainstRoute(e,n,i,r,o,c){let h;if("**"===i.path){const g=r.length>0?jA(r).parameters:{};h=bt({snapshot:new Vv(r,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,M2(i),yl(i),i.component??i._loadedComponent??null,i,k2(i)),consumedSegments:[],remainingSegments:[]}),n.children={}}else h=X8(n,i,r,e).pipe(Gt(({matched:g,consumedSegments:C,remainingSegments:S,parameters:I})=>g?{snapshot:new Vv(C,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,M2(i),yl(i),i.component??i._loadedComponent??null,i,k2(i)),consumedSegments:C,remainingSegments:S}:null));return h.pipe(Sr(g=>null===g?ip(n):this.getChildConfig(e=i._injector??e,i,r).pipe(Sr(({routes:C})=>{const S=i._loadedInjector??e,{snapshot:I,consumedSegments:U,remainingSegments:q}=g,{segmentGroup:te,slicedSegments:ce}=E2(n,U,q,C);if(0===ce.length&&te.hasChildren())return this.processChildren(S,C,te).pipe(Gt(Te=>null===Te?null:[new id(I,Te)]));if(0===C.length&&0===ce.length)return bt([new id(I,[])]);const ge=yl(i)===o;return this.processSegment(S,C,te,ce,ge?bi:o,!0).pipe(Gt(Te=>[new id(I,Te)]))}))))}getChildConfig(e,n,i){return n.children?bt({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?bt({routes:n._loadedRoutes,injector:n._loadedInjector}):function G8(t,e,n,i){const r=e.canLoad;return void 0===r||0===r.length?bt(!0):bt(r.map(c=>{const h=ep(c,t);return nu(function A8(t){return t&&Ug(t.canLoad)}(h)?h.canLoad(e,n):t.runInContext(()=>h(e,n)))})).pipe(tp(),w2())}(e,n,i).pipe(qe(r=>r?this.configLoader.loadChildren(e,n).pipe(jr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Z8(t){return xh(g2(!1,3))}())):bt({routes:[],injector:e})}}function sH(t){const e=t.value.routeConfig;return e&&""===e.path}function S2(t){const e=[],n=new Set;for(const i of t){if(!sH(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):e.push(i)}for(const i of n){const r=S2(i.children);e.push(new id(i.value,r))}return e.filter(i=>!n.has(i))}function M2(t){return t.data||{}}function k2(t){return t.resolve||{}}function T2(t){return"string"==typeof t.title||null===t.title}function J1(t){return Sr(e=>{const n=t(e);return n?Un(n).pipe(Gt(()=>e)):bt(e)})}const np=new Le("ROUTES");let eC=(()=>{const e=class{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Je(ok)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return bt(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);const r=nu(i.loadComponent()).pipe(Gt(I2),jr(c=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=c}),Zm(()=>{this.componentLoaders.delete(i)})),o=new O1(r,()=>new Ct).pipe(P1());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return bt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const c=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Gt(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let C,S;return Array.isArray(g)?S=g:(C=g.create(i).injector,S=C.get(np,[],It.Self|It.Optional).flat()),{routes:S.map(X1),injector:C}}),Zm(()=>{this.childrenLoaders.delete(r)})),h=new O1(c,()=>new Ct).pipe(P1());return this.childrenLoaders.set(r,h),h}loadModuleFactoryOrRoutes(i){return nu(i()).pipe(Gt(I2),qe(r=>r instanceof pM||Array.isArray(r)?bt(r):Un(this.compiler.compileModuleAsync(r))))}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function I2(t){return function mH(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let qv=(()=>{const e=class{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ct,this.configLoader=Je(eC),this.environmentInjector=Je(Wl),this.urlSerializer=Je(Ig),this.rootContexts=Je(Lg),this.inputBindingEnabled=null!==Je(Uv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>bt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new a8(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new s8(o))}complete(){this.transitions?.complete()}handleNavigationRequest(i){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...i,id:r})}setupNavigations(i){return this.transitions=new Pn({id:0,currentUrlTree:i.currentUrlTree,currentRawUrl:i.currentUrlTree,extractedUrl:i.urlHandlingStrategy.extract(i.currentUrlTree),urlAfterRedirects:i.urlHandlingStrategy.extract(i.currentUrlTree),rawUrl:i.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Og,restoredState:null,currentSnapshot:i.routerState.snapshot,targetSnapshot:null,currentRouterState:i.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dr(r=>0!==r.id),Gt(r=>({...r,extractedUrl:i.urlHandlingStrategy.extract(r.rawUrl)})),Sr(r=>{let o=!1,c=!1;return bt(r).pipe(jr(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sr(h=>{const g=i.browserUrlTree.toString(),C=!i.navigated||h.extractedUrl.toString()!==g||g!==i.currentUrlTree.toString();if(!C&&"reload"!==(h.extras.onSameUrlNavigation??i.onSameUrlNavigation)){const I="";return this.events.next(new Fg(h.id,i.serializeUrl(r.rawUrl),I,0)),i.rawUrlTree=h.rawUrl,h.resolve(null),vt}if(i.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return A2(h.source)&&(i.browserUrlTree=h.extractedUrl),bt(h).pipe(Sr(I=>{const U=this.transitions?.getValue();return this.events.next(new U1(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),U!==this.transitions?.getValue()?vt:Promise.resolve(I)}),function aH(t,e,n,i,r,o){return qe(c=>function nH(t,e,n,i,r,o,c="emptyOnly"){return new rH(t,e,n,i,r,c,o).recognize()}(t,e,n,i,c.extractedUrl,r,o).pipe(Gt(({state:h,tree:g})=>({...c,targetSnapshot:h,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,i.paramsInheritanceStrategy),jr(I=>{if(r.targetSnapshot=I.targetSnapshot,r.urlAfterRedirects=I.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},"eager"===i.urlUpdateStrategy){if(!I.extras.skipLocationChange){const q=i.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);i.setBrowserUrl(q,I)}i.browserUrlTree=I.urlAfterRedirects}const U=new e8(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(U)}));if(C&&i.urlHandlingStrategy.shouldProcessUrl(i.rawUrlTree)){const{id:I,extractedUrl:U,source:q,restoredState:te,extras:ce}=h,ge=new U1(I,this.urlSerializer.serialize(U),q,te);this.events.next(ge);const Te=d2(0,this.rootComponentType).snapshot;return bt(r={...h,targetSnapshot:Te,urlAfterRedirects:U,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}{const I="";return this.events.next(new Fg(h.id,i.serializeUrl(r.extractedUrl),I,1)),i.rawUrlTree=h.rawUrl,h.resolve(null),vt}}),jr(h=>{const g=new t8(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Gt(h=>r={...h,guards:S8(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function N8(t,e){return qe(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:c}}=n;return 0===c.length&&0===o.length?bt({...n,guardsResult:!0}):function B8(t,e,n,i){return Un(t).pipe(qe(r=>function $8(t,e,n,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?bt(o.map(h=>{const g=Bg(e)??r,C=ep(h,g);return nu(function O8(t){return t&&Ug(t.canDeactivate)}(C)?C.canDeactivate(t,e,n,i):g.runInContext(()=>C(t,e,n,i))).pipe(wh())})).pipe(tp()):bt(!0)}(r.component,r.route,n,e,i)),wh(r=>!0!==r,!0))}(c,i,r,t).pipe(qe(h=>h&&function I8(t){return"boolean"==typeof t}(h)?function z8(t,e,n,i){return Un(e).pipe(Wm(r=>Mg(function U8(t,e){return null!==t&&e&&e(new l8(t)),bt(!0)}(r.route.parent,i),function V8(t,e){return null!==t&&e&&e(new d8(t)),bt(!0)}(r.route,i),function H8(t,e,n){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function M8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Av(()=>bt(c.guards.map(g=>{const C=Bg(c.node)??n,S=ep(g,C);return nu(function P8(t){return t&&Ug(t.canActivateChild)}(S)?S.canActivateChild(i,t):C.runInContext(()=>S(i,t))).pipe(wh())})).pipe(tp())));return bt(o).pipe(tp())}(t,r.path,n),function j8(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return bt(!0);const r=i.map(o=>Av(()=>{const c=Bg(e)??n,h=ep(o,c);return nu(function R8(t){return t&&Ug(t.canActivate)}(h)?h.canActivate(e,t):c.runInContext(()=>h(e,t))).pipe(wh())}));return bt(r).pipe(tp())}(t,r.route,n))),wh(r=>!0!==r,!0))}(i,o,t,e):bt(h)),Gt(h=>({...n,guardsResult:h})))})}(this.environmentInjector,h=>this.events.next(h)),jr(h=>{if(r.guardsResult=h.guardsResult,Dh(h.guardsResult))throw f2(0,h.guardsResult);const g=new n8(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(g)}),dr(h=>!!h.guardsResult||(i.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),J1(h=>{if(h.guards.canActivateChecks.length)return bt(h).pipe(jr(g=>{const C=new r8(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(C)}),Sr(g=>{let C=!1;return bt(g).pipe(function lH(t,e){return qe(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return bt(n);let o=0;return Un(r).pipe(Wm(c=>function cH(t,e,n,i){const r=t.routeConfig,o=t._resolve;return void 0!==r?.title&&!T2(r)&&(o[kg]=r.title),function dH(t,e,n,i){const r=function uH(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return bt({});const o={};return Un(r).pipe(qe(c=>function hH(t,e,n,i){const r=Bg(e)??i,o=ep(t,r);return nu(o.resolve?o.resolve(e,n):r.runInContext(()=>o(e,n)))}(t[c],e,n,i).pipe(wh(),jr(h=>{o[c]=h}))),F1(1),VA(o),td(c=>x2(c)?vt:xh(c)))}(o,t,e,i).pipe(Gt(c=>(t._resolvedData=c,t.data=u2(t,n).resolve,r&&T2(r)&&(t.data[kg]=r.title),null)))}(c.route,i,t,e)),jr(()=>o++),F1(1),qe(c=>o===r.length?bt(n):vt))})}(i.paramsInheritanceStrategy,this.environmentInjector),jr({next:()=>C=!0,complete:()=>{C||(i.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),jr(g=>{const C=new o8(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(C)}))}),J1(h=>{const g=C=>{const S=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(C.routeConfig).pipe(jr(I=>{C.component=I}),Gt(()=>{})));for(const I of C.children)S.push(...g(I));return S};return Tv(g(h.targetSnapshot.root)).pipe(Rv(),Dr(1))}),J1(()=>this.afterPreactivation()),Gt(h=>{const g=function g8(t,e,n){const i=Ng(t,e._root,n?n._root:void 0);return new c2(i,e)}(i.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return r={...h,targetRouterState:g}}),jr(h=>{i.currentUrlTree=h.urlAfterRedirects,i.rawUrlTree=i.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),i.routerState=h.targetRouterState,"deferred"===i.urlUpdateStrategy&&(h.extras.skipLocationChange||i.setBrowserUrl(i.rawUrlTree,h),i.browserUrlTree=h.urlAfterRedirects)}),((t,e,n,i)=>Gt(r=>(new E8(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)))(this.rootContexts,i.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),Dr(1),jr({next:h=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,i.navigated=!0,this.events.next(new ru(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(i.currentUrlTree))),i.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{o=!0}}),Zm(()=>{o||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),td(h=>{if(c=!0,y2(h)){_2(h)||(i.navigated=!0,i.restoreHistory(r,!0));const g=new zv(r.id,this.urlSerializer.serialize(r.extractedUrl),h.message,h.cancellationCode);if(this.events.next(g),_2(h)){const C=i.urlHandlingStrategy.merge(h.url,i.rawUrlTree),S={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===i.urlUpdateStrategy||A2(r.source)};i.scheduleNavigation(C,Og,null,S,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{i.restoreHistory(r,!0);const g=new j1(r.id,this.urlSerializer.serialize(r.extractedUrl),h,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(i.errorHandler(h))}catch(C){r.reject(C)}}return vt}))}))}cancelNavigationTransition(i,r,o){const c=new zv(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(c),i.resolve(!1)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function A2(t){return t!==Og}let R2=(()=>{const e=class{buildTitle(i){let r,o=i.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(c=>c.outlet===bi);return r}getResolvedTitleForRoute(i){return i.data[kg]}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return Je(pH)},providedIn:"root"}),t})(),pH=(()=>{const e=class extends R2{constructor(i){super(),this.title=i}updateTitle(i){const r=this.buildTitle(i);void 0!==r&&this.title.setTitle(r)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(IT))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),fH=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return Je(_H)},providedIn:"root"}),t})();class gH{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let _H=(()=>{const e=class extends gH{};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const Wv=new Le("",{providedIn:"root",factory:()=>({})});let yH=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:function(){return Je(vH)},providedIn:"root"}),t})(),vH=(()=>{const e=class{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();var ca=(()=>((ca=ca||{})[ca.COMPLETE=0]="COMPLETE",ca[ca.FAILED=1]="FAILED",ca[ca.REDIRECTING=2]="REDIRECTING",ca))();function P2(t,e){t.events.pipe(dr(n=>n instanceof ru||n instanceof zv||n instanceof j1||n instanceof Fg),Gt(n=>n instanceof ru||n instanceof Fg?ca.COMPLETE:n instanceof zv&&(0===n.code||1===n.code)?ca.REDIRECTING:ca.FAILED),dr(n=>n!==ca.REDIRECTING),Dr(1)).subscribe(()=>{e()})}function bH(t){throw t}function xH(t,e,n){return e.parse("/")}const wH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gn=(()=>{const e=class{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Je(rk),this.isNgZoneEnabled=!1,this.options=Je(Wv,{optional:!0})||{},this.pendingTasks=Je(Ay),this.errorHandler=this.options.errorHandler||bH,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xH,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Je(yH),this.routeReuseStrategy=Je(fH),this.titleStrategy=Je(R2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Je(np,{optional:!0})?.flat()??[],this.navigationTransitions=Je(qv),this.urlSerializer=Je(Ig),this.location=Je(og),this.componentInputBindingEnabled=!!Je(Uv,{optional:!0}),this.isNgZoneEnabled=Je(Rt)instanceof Rt&&Rt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Qm,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=d2(0,null),this.navigationTransitions.setupNavigations(this).subscribe(i=>{this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId??0},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const i=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Og,i)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const r="popstate"===i.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(i.url,r,i.state)},0)}))}navigateToSyncWithBrowser(i,r,o){const c={replaceUrl:!0},h=o?.navigationId?o:null;if(o){const C={...o};delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(c.state=C)}const g=this.parseUrl(i);this.scheduleNavigation(g,r,h,c)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(X1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,r={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:g,preserveFragment:C}=r,S=C?this.currentUrlTree.fragment:h;let U,I=null;switch(g){case"merge":I={...this.currentUrlTree.queryParams,...c};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=c||null}null!==I&&(I=this.removeEmptyProps(I));try{U=JA(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof i[0]||!i[0].startsWith("/"))&&(i=[]),U=this.currentUrlTree.root}return e2(U,i,I,S??null)}navigateByUrl(i,r={skipLocationChange:!1}){const o=Dh(i)?i:this.parseUrl(i),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,Og,null,r)}navigate(i,r={skipLocationChange:!1}){return function DH(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new Ie(4008,!1)}(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let r;try{r=this.urlSerializer.parse(i)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,i)}return r}isActive(i,r){let o;if(o=!0===r?{...wH}:!1===r?{...CH}:r,Dh(i))return $A(this.currentUrlTree,i,o);const c=this.parseUrl(i);return $A(this.currentUrlTree,c,o)}removeEmptyProps(i){return Object.keys(i).reduce((r,o)=>{const c=i[o];return null!=c&&(r[o]=c),r},{})}scheduleNavigation(i,r,o,c,h){if(this.disposed)return Promise.resolve(!1);let g,C,S;h?(g=h.resolve,C=h.reject,S=h.promise):S=new Promise((U,q)=>{g=U,C=q});const I=this.pendingTasks.add();return P2(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:c,resolve:g,reject:C,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(U=>Promise.reject(U))}setBrowserUrl(i,r){const o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const h={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",h)}else{const c={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",c)}}restoreHistory(i,r=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-(this.browserPageId??this.currentPageId);0!==c?this.location.historyGo(c):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===c&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),ou=(()=>{const e=class{constructor(i,r,o,c,h,g){this.router=i,this.route=r,this.tabIndexAttribute=o,this.renderer=c,this.el=h,this.locationStrategy=g,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ct;const C=h.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===C||"area"===C,this.isAnchorElement?this.subscription=i.events.subscribe(S=>{S instanceof ru&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(i){this._preserveFragment=Um(i)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(i){this._skipLocationChange=Um(i)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(i){this._replaceUrl=Um(i)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(i){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){null!=i?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,o,c,h){return!!(null===this.urlTree||this.isAnchorElement&&(0!==i||r||o||c||h||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const i=null===this.href?null:function RD(t,e,n){return function yO(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?AD:vm}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){const o=this.renderer,c=this.el.nativeElement;null!==r?o.setAttribute(c,i,r):o.removeAttribute(c,i)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Gn),G(Eh),Oa("tabindex"),G(Gc),G(St),G(uh))},e.\u0275dir=Fe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){1&r&&Ue("click",function(h){return o.onClick(h.button,h.ctrlKey,h.shiftKey,h.altKey,h.metaKey)}),2&r&&vi("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Zn]}),t})();class O2{}let MH=(()=>{const e=class{constructor(i,r,o,c,h){this.router=i,this.injector=o,this.preloadingStrategy=c,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(dr(i=>i instanceof ru),Wm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){const o=[];for(const c of r){c.providers&&!c._injector&&(c._injector=kx(c.providers,i,`Route: ${c.path}`));const h=c._injector??i,g=c._loadedInjector??h;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&o.push(this.preloadConfig(h,c)),(c.children||c._loadedRoutes)&&o.push(this.processRoutes(g,c.children??c._loadedRoutes))}return Un(o).pipe(xt())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(i,r):bt(null);const c=o.pipe(qe(h=>null===h?bt(void 0):(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,this.processRoutes(h.injector??i,h.routes))));return r.loadComponent&&!r._loadedComponent?Un([c,this.loader.loadComponent(r)]).pipe(xt()):c})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Gn),we(ok),we(Wl),we(O2),we(eC))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const tC=new Le("");let F2=(()=>{const e=class{constructor(i,r,o,c,h={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=c,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof U1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof ru?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Fg&&0===i.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof a2&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new a2(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};let t=e;return e.\u0275fac=function(r){Bf()},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();function nd(t,e){return{\u0275kind:t,\u0275providers:e}}function N2(){const t=Je(Ao);return e=>{const n=t.get(Yd);if(e!==n.components[0])return;const i=t.get(Gn),r=t.get(B2);1===t.get(iC)&&i.initialNavigation(),t.get(z2,null,It.Optional)?.setUpPreloading(),t.get(tC,null,It.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const B2=new Le("",{factory:()=>new Ct}),iC=new Le("",{providedIn:"root",factory:()=>1}),z2=new Le("");function AH(t){return nd(0,[{provide:z2,useExisting:MH},{provide:O2,useExisting:t}])}const V2=new Le("ROUTER_FORROOT_GUARD"),PH=[og,{provide:Ig,useClass:L1},Gn,Lg,{provide:Eh,useFactory:function L2(t){return t.routerState.root},deps:[Gn]},eC,[]];function OH(){return new gk("Router",Gn)}let FH=(()=>{const e=class{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[PH,[],{provide:np,multi:!0,useValue:i},{provide:V2,useFactory:zH,deps:[[Gn,new Jr,new cl]]},{provide:Wv,useValue:r||{}},r?.useHash?{provide:uh,useClass:T4}:{provide:uh,useClass:$k},{provide:tC,useFactory:()=>{const t=Je(q3),e=Je(Rt),n=Je(Wv),i=Je(qv),r=Je(Ig);return n.scrollOffset&&t.setOffset(n.scrollOffset),new F2(r,i,t,e,n)}},r?.preloadingStrategy?AH(r.preloadingStrategy).\u0275providers:[],{provide:gk,multi:!0,useFactory:OH},r?.initialNavigation?VH(r):[],r?.bindToComponentInputs?nd(8,[p2,{provide:Uv,useExisting:p2}]).\u0275providers:[],[{provide:U2,useFactory:N2},{provide:ew,multi:!0,useExisting:U2}]]}}static forChild(i){return{ngModule:e,providers:[{provide:np,multi:!0,useValue:i}]}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(V2,8))},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})();function zH(t){return"guarded"}function VH(t){return["disabled"===t.initialNavigation?nd(3,[{provide:Gx,multi:!0,useFactory:()=>{const e=Je(Gn);return()=>{e.setUpLocationChangeListener()}}},{provide:iC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?nd(2,[{provide:iC,useValue:0},{provide:Gx,multi:!0,deps:[Ao],useFactory:e=>{const n=e.get(M4,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const r=e.get(Gn),o=e.get(B2);P2(r,()=>{i(!0)}),e.get(qv).afterPreactivation=()=>(i(!0),o.closed?bt(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const U2=new Le("");let nC,zs=(()=>{const e=class{constructor(i){this.http=i,this.baseUrl=window&&window.location&&"localhost"===window.location.hostname?"http://localhost:8080/api":"http://back:8080/api"}list(i){return this.http.get(`${this.baseUrl}/${i}`)}get(i,r){return this.http.get(`${this.baseUrl}/${i}/${r}`)}create(i,r){return this.http.post(`${this.baseUrl}/${i}`,r)}update(i,r,o){return this.http.put(`${this.baseUrl}/${i}/${r}`,o)}delete(i,r){return this.http.delete(`${this.baseUrl}/${i}/${r}`)}uploadFile(i,r,o){const c=new FormData;return c.append("file",i,i.name),r&&c.append("nomMedia",r),o&&c.append("description",o),this.http.post(`${this.baseUrl}/medias/upload`,c)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Mv))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),j2=(()=>{const e=class{constructor(){this.key="eb-theme";const i=localStorage.getItem(this.key);"dark"===i?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"),document.body.classList.add("dark-theme")):"light"===i?(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"),document.body.classList.remove("dark-theme")):(document.documentElement.classList.add("light"),document.body.classList.remove("dark-theme"))}toggle(){const i=document.documentElement.classList.toggle("dark");i?document.documentElement.classList.remove("light"):document.documentElement.classList.add("light"),document.body.classList.toggle("dark-theme",i),localStorage.setItem(this.key,i?"dark":"light")}setDark(i){document.documentElement.classList.toggle("dark",i),document.documentElement.classList.toggle("light",!i),document.body.classList.toggle("dark-theme",i),localStorage.setItem(this.key,i?"dark":"light")}isDark(){return document.documentElement.classList.contains("dark")||document.body.classList.contains("dark-theme")}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),rd=(()=>{const e=class{get token(){return localStorage.getItem("token")}isLogged(){return!!this.token}getPseudoFromToken(){const i=this.token;if(!i)return null;const r=i.split(".");if(r.length<2)return null;try{return JSON.parse(atob(r[1].replace(/-/g,"+").replace(/_/g,"/"))).sub||null}catch{return null}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();try{nC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nC=!1}let rp,ur=(()=>{const e=class{constructor(i){this._platformId=i,this.isBrowser=this._platformId?function G3(t){return t===cT}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Gd))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const H2=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function $2(){if(rp)return rp;if("object"!=typeof document||!document)return rp=new Set(H2),rp;let t=document.createElement("input");return rp=new Set(H2.filter(e=>(t.setAttribute("type",e),t.type===e))),rp}let jg,Mh,rC;function Sh(t){return function jH(){if(null==jg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jg=!0}))}finally{jg=jg||!1}return jg}()?t:!!t.capture}function HH(){if(null==Mh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Mh=!1,Mh;if("scrollBehavior"in document.documentElement.style)Mh=!0;else{const t=Element.prototype.scrollTo;Mh=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Mh}function Hg(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function su(t){return t.composedPath?t.composedPath()[0]:t.target}function oC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function au(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class o$ extends zi{constructor(e,n){super()}schedule(e,n=0){return this}}const Yv={setInterval(t,e,...n){const{delegate:i}=Yv;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Yv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class uC extends o${constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Yv.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&Yv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,v(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Z2={now:()=>(Z2.delegate||Date).now(),delegate:void 0};class Gg{constructor(e,n=Gg.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}Gg.now=Z2.now;class hC extends Gg{constructor(e,n=Gg.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const Xv=new hC(uC),s$=Xv;function mC(t,e=Xv){return Ti((n,i)=>{let r=null,o=null,c=null;const h=()=>{if(r){r.unsubscribe(),r=null;const C=o;o=null,i.next(C)}};function g(){const C=c+t,S=e.now();if(S<C)return r=this.schedule(void 0,C-S),void i.add(r);h()}n.subscribe(nn(i,C=>{o=C,c=e.now(),r||(r=e.schedule(g,t),i.add(r))},()=>{h(),i.complete()},void 0,()=>{o=r=null}))})}function Y2(t){return dr((e,n)=>t<=n)}function un(t){return Ti((e,n)=>{re(t).subscribe(nn(n,()=>n.complete(),hn)),!n.closed&&e.subscribe(n)})}function Di(t){return null!=t&&"false"!=`${t}`}function op(t,e=0){return function a$(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Kv(t){return Array.isArray(t)?t:[t]}function Hr(t){return null==t?"":"string"==typeof t?t:`${t}px`}function od(t){return t instanceof St?t.nativeElement:t}let X2=(()=>{const e=class{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),l$=(()=>{const e=class{constructor(i){this._mutationObserverFactory=i,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((i,r)=>this._cleanupObserver(r))}observe(i){const r=od(i);return new Si(o=>{const h=this._observeElement(r).subscribe(o);return()=>{h.unsubscribe(),this._unobserveElement(r)}})}_observeElement(i){if(this._observedElements.has(i))this._observedElements.get(i).count++;else{const r=new Ct,o=this._mutationObserverFactory.create(c=>r.next(c));o&&o.observe(i,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(i,{observer:o,stream:r,count:1})}return this._observedElements.get(i).stream}_unobserveElement(i){this._observedElements.has(i)&&(this._observedElements.get(i).count--,this._observedElements.get(i).count||this._cleanupObserver(i))}_cleanupObserver(i){if(this._observedElements.has(i)){const{observer:r,stream:o}=this._observedElements.get(i);r&&r.disconnect(),o.complete(),this._observedElements.delete(i)}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(X2))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),K2=(()=>{const e=class{get disabled(){return this._disabled}set disabled(i){this._disabled=Di(i),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(i){this._debounce=op(i),this._subscribe()}constructor(i,r,o){this._contentObserver=i,this._elementRef=r,this._ngZone=o,this.event=new fi,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const i=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?i.pipe(mC(this.debounce)):i).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(l$),G(St),G(Rt))},e.\u0275dir=Fe({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),pC=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[X2]}),t})();const Q2=new Set;let Th,c$=(()=>{const e=class{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):u$}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&function d$(t,e){if(!Q2.has(t))try{Th||(Th=document.createElement("style"),e&&(Th.nonce=e),Th.setAttribute("type","text/css"),document.head.appendChild(Th)),Th.sheet&&(Th.sheet.insertRule(`@media ${t} {body{ }}`,0),Q2.add(t))}catch(n){console.error(n)}}(i,this._nonce),this._matchMedia(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ur),we(P0,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function u$(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let h$=(()=>{const e=class{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Ct}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return J2(Kv(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let c=Tv(J2(Kv(i)).map(h=>this._registerQuery(h).observable));return c=Mg(c.pipe(Dr(1)),c.pipe(Y2(1),mC(0))),c.pipe(Gt(h=>{const g={matches:!1,breakpoints:{}};return h.forEach(({matches:C,query:S})=>{g.matches=g.matches||C,g.breakpoints[S]=C}),g}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);const r=this._mediaMatcher.matchMedia(i),c={observable:new Si(h=>{const g=C=>this._zone.run(()=>h.next(C));return r.addListener(g),()=>{r.removeListener(g)}}).pipe(_s(r),Gt(({matches:h})=>({query:i,matches:h})),un(this._destroySubject)),mql:r};return this._queries.set(i,c),c}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(c$),we(Rt))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function J2(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}class f${constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ct,this._typeaheadSubscription=zi.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new Ct,this.change=new Ct,e instanceof Jl&&(this._itemChangesSubscription=e.changes.subscribe(n=>{if(this._activeItem){const r=n.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(jr(n=>this._pressedLetters.push(n)),mC(e),dr(()=>this._pressedLetters.length>0),Gt(()=>this._pressedLetters.join(""))).subscribe(n=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const o=(this._activeItemIndex+r)%i.length,c=i[o];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(n)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){const n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){const n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex+this._pageUpAndDown.delta,c=this._getItemsArray().length;this._setActiveItemByIndex(o<c?o:c-1,-1);break}return;default:return void((r||au(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const n=this._getItemsArray(),i="number"==typeof e?e:n.indexOf(e);this._activeItem=n[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const n=this._getItemsArray();for(let i=1;i<=n.length;i++){const r=(this._activeItemIndex+e*i+n.length)%n.length;if(!this._skipPredicateFn(n[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=n])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Jl?this._items.toArray():this._items}}class Qv extends f${constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let Jv=(()=>{const e=class{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function _$(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function g$(t){try{return t.frameElement}catch{return null}}(function E$(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===nR(r)||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),c=nR(i);return i.hasAttribute("contenteditable")?-1!==c:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function C$(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===o?!!i.hasAttribute("controls")&&-1!==c:"video"===o?-1!==c&&(null!==c||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function D$(t){return!function v$(t){return function x$(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function y$(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function b$(t){return function w$(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||iR(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ur))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function iR(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function nR(t){if(!iR(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class S${get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Dr(1)).subscribe(e)}}let fC=(()=>{const e=class{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new S$(i,this._checker,this._ngZone,this._document,r)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Jv),we(Rt),we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function gC(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function _C(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const M$=new Le("cdk-input-modality-detector-options"),k$={ignoreKeys:[18,17,224,91,16]},sp=Sh({passive:!0,capture:!0});let T$=(()=>{const e=class{get mostRecentModality(){return this._modality.value}constructor(i,r,o,c){this._platform=i,this._mostRecentTarget=null,this._modality=new Pn(null),this._lastTouchMs=0,this._onKeydown=h=>{this._options?.ignoreKeys?.some(g=>g===h.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=su(h))},this._onMousedown=h=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gC(h)?"keyboard":"mouse"),this._mostRecentTarget=su(h))},this._onTouchstart=h=>{_C(h)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=su(h))},this._options={...k$,...c},this.modalityDetected=this._modality.pipe(Y2(1)),this.modalityChanged=this.modalityDetected.pipe(Ks()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,sp),o.addEventListener("mousedown",this._onMousedown,sp),o.addEventListener("touchstart",this._onTouchstart,sp)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,sp),document.removeEventListener("mousedown",this._onMousedown,sp),document.removeEventListener("touchstart",this._onTouchstart,sp))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ur),we(Rt),we(ci),we(M$,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const A$=new Le("cdk-focus-monitor-default-options"),eb=Sh({passive:!0,capture:!0});let sd=(()=>{const e=class{constructor(i,r,o,c,h){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ct,this._rootNodeFocusAndBlurListener=g=>{for(let S=su(g);S;S=S.parentElement)"focus"===g.type?this._onFocus(g,S):this._onBlur(g,S)},this._document=c,this._detectionMode=h?.detectionMode||0}monitor(i,r=!1){const o=od(i);if(!this._platform.isBrowser||1!==o.nodeType)return bt(null);const c=function GH(t){if(function $H(){if(null==rC){const t=typeof document<"u"?document.head:null;rC=!(!t||!t.createShadowRoot&&!t.attachShadow)}return rC}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),h=this._elementInfo.get(o);if(h)return r&&(h.checkChildren=!0),h.subject;const g={checkChildren:r,subject:new Ct,rootNode:c};return this._elementInfo.set(o,g),this._registerGlobalListeners(g),g.subject}stopMonitoring(i){const r=od(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){const c=od(i);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([g,C])=>this._originChanged(g,r,C)):(this._setOrigin(r),"function"==typeof c.focus&&c.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const o=this._elementInfo.get(r),c=su(i);!o||!o.checkChildren&&r!==c||this._originChanged(r,this._getFocusOrigin(c),o)}_onBlur(i,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,eb),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,eb)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(un(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,eb),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,eb),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((o,c)=>{(c===i||o.checkChildren&&c.contains(i))&&r.push([c,o])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const c=i.labels;if(c)for(let h=0;h<c.length;h++)if(c[h].contains(r))return!0;return!1}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Rt),we(ur),we(T$),we(ci,8),we(A$,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const oR="cdk-high-contrast-black-on-white",sR="cdk-high-contrast-white-on-black",yC="cdk-high-contrast-active";let aR=(()=>{const e=class{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=Je(h$).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,c=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),c){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const i=this._document.body.classList;i.remove(yC,oR,sR),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?i.add(yC,oR):2===r&&i.add(yC,sR)}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ur),we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),vC=(()=>{const e=class{constructor(i){i._applyBodyHighContrastModeCssClasses()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(aR))},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[pC]}),t})();const R$=new Le("cdk-dir-doc",{providedIn:"root",factory:function P$(){return Je(ci)}}),O$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let cc=(()=>{const e=class{constructor(i){this.value="ltr",this.change=new fi,i&&(this.value=function F$(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?O$.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(R$,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),ap=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})();const z$=new Le("mat-sanity-checks",{providedIn:"root",factory:function B$(){return!0}});let Ei=(()=>{const e=class{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return!oC()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[i])}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(aR),we(z$,8),we(ci))},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[ap,ap]}),t})();function bC(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=Di(e)}constructor(...e){super(...e),this._disabled=!1}}}function qg(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function xC(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Di(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function dR(t){return class extends t{updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let lp=(()=>{const e=class{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class U${constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const uR=Sh({passive:!0,capture:!0});class j${constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=su(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){const o=this._events.get(n);if(o){const c=o.get(i);c?c.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,uR)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const o=r.get(n);o&&(o.delete(i),0===o.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,uR)))}}const hR={enterDuration:225,exitDuration:150},mR=Sh({passive:!0,capture:!0}),pR=["mousedown","touchstart"],fR=["mouseup","mouseleave","touchend","touchcancel"],n_=class{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=od(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...hR,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const c=i.radius||function $$(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),h=e-r.left,g=n-r.top,C=o.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=h-c+"px",S.style.top=g-c+"px",S.style.height=2*c+"px",S.style.width=2*c+"px",null!=i.color&&(S.style.backgroundColor=i.color),S.style.transitionDuration=`${C}ms`,this._containerElement.appendChild(S);const I=window.getComputedStyle(S),q=I.transitionDuration,te="none"===I.transitionProperty||"0s"===q||"0s, 0s"===q||0===r.width&&0===r.height,ce=new U$(this,S,i,te);S.style.transform="scale3d(1, 1, 1)",ce.state=0,i.persistent||(this._mostRecentTransientRipple=ce);let ge=null;return!te&&(C||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Te=()=>this._finishRippleTransition(ce),Ee=()=>this._destroyRipple(ce);S.addEventListener("transitionend",Te),S.addEventListener("transitioncancel",Ee),ge={onTransitionEnd:Te,onTransitionCancel:Ee}}),this._activeRipples.set(ce,ge),(te||!C)&&this._finishRippleTransition(ce),ce}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...hR,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=od(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,pR.forEach(i=>{n_._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{fR.forEach(n=>{this._triggerElement.addEventListener(n,this,mR)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=gC(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_C(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(pR.forEach(n=>n_._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&fR.forEach(n=>e.removeEventListener(n,this,mR)))}};let Zg=n_;n_._eventManager=new j$;const cp=new Le("mat-ripple-global-options");let Ih=(()=>{const e=class{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,c,h){this._elementRef=i,this._animationMode=h,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new Zg(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return"number"==typeof i?this._rippleRenderer.fadeInRipple(i,r,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...i})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Rt),G(ur),G(cp,8),G(hs,8))},e.\u0275dir=Fe({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){2&r&&pi("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),t})(),dp=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,Ei]}),t})(),gR=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei]}),t})(),_R=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[dp,fs,Ei,gR]}),t})();const yR=["mat-button",""],vR=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],bR=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],xR=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",q$=["mat-icon-button",""],W$=["*"],wR={capture:!0},CR=["focus","click","mouseenter","touchstart"],Yg="mat-button-ripple-uninitialized";let Z$=(()=>{const e=class{constructor(){this._document=Je(ci,{optional:!0}),this._animationMode=Je(hs,{optional:!0}),this._globalRippleOptions=Je(cp,{optional:!0}),this._platform=Je(ur),this._ngZone=Je(Rt),this._onInteraction=i=>{if(i.target===this._document)return;const o=i.target.closest(`[${Yg}]`);o&&(o.removeAttribute(Yg),this._appendRipple(o))},this._ngZone.runOutsideAngular(()=>{for(const i of CR)this._document?.addEventListener(i,this._onInteraction,wR)})}ngOnDestroy(){for(const i of CR)this._document?.removeEventListener(i,this._onInteraction,wR)}_appendRipple(i){if(!this._document)return;const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new Y$(i,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);o.rippleConfig.centered=i.hasAttribute("mat-icon-button"),new Zg(o,this._ngZone,r,this._platform).setupTriggerEvents(i),i.append(r)}_createMatRipple(i){if(!this._document)return;i.querySelector(".mat-mdc-button-ripple")?.remove(),i.removeAttribute(Yg);const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new Ih(new St(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,i.append(r),o}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class Y${constructor(e,n,i){this._button=e,this._globalRippleOptions=n,this._setRippleConfig(n,i)}_setRippleConfig(e,n){this.rippleConfig=e||{},"NoopAnimations"===n&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const X$=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],K$=qg(bC(xC(class{constructor(t){this._elementRef=t}})));let CC=(()=>{const e=class extends K${get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(i){this._ripple=i}constructor(i,r,o,c){super(i),this._platform=r,this._ngZone=o,this._animationMode=c,this._focusMonitor=Je(sd),this._rippleLoader=Je(Z$),this._isFab=!1;const h=i.nativeElement.classList;for(const g of X$)this._hasHostAttributes(g.selector)&&g.mdcClasses.forEach(C=>{h.add(C)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...i){return i.some(r=>this._elementRef.nativeElement.hasAttribute(r))}};let t=e;return e.\u0275fac=function(r){Bf()},e.\u0275dir=Fe({type:e,features:[ot,Zn]}),t})(),J$=(()=>{const e=class extends CC{constructor(i,r,o,c){super(i,r,o,c),this._haltDisabledEvents=h=>{this.disabled&&(h.preventDefault(),h.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}};let t=e;return e.\u0275fac=function(r){Bf()},e.\u0275dir=Fe({type:e,features:[ot]}),t})(),tb=(()=>{const e=class extends CC{constructor(i,r,o,c){super(i,r,o,c)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(ur),G(Rt),G(hs,8))},e.\u0275cmp=Mt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(r,o){2&r&&(vi("disabled",o.disabled||null),pi("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ot],attrs:yR,ngContentSelectors:bR,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){1&r&&(Bn(vR),Ot(0,"span",0),Lt(1),Y(2,"span",1),Lt(3,1),X(),Lt(4,2),Ot(5,"span",2)(6,"span",3)),2&r&&pi("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),DC=(()=>{const e=class extends J${constructor(i,r,o,c){super(i,r,o,c)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(ur),G(Rt),G(hs,8))},e.\u0275cmp=Mt({type:e,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:9,hostBindings:function(r,o){2&r&&(vi("disabled",o.disabled||null)("tabindex",o.disabled?-1:o.tabIndex)("aria-disabled",o.disabled.toString()),pi("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[ot],attrs:yR,ngContentSelectors:bR,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){1&r&&(Bn(vR),Ot(0,"span",0),Lt(1),Y(2,"span",1),Lt(3,1),X(),Lt(4,2),Ot(5,"span",2)(6,"span",3)),2&r&&pi("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',xR],encapsulation:2,changeDetection:0}),t})(),tG=(()=>{const e=class extends CC{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement),this._ripple.centered=!0),this._ripple}constructor(i,r,o,c){super(i,r,o,c)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(ur),G(Rt),G(hs,8))},e.\u0275cmp=Mt({type:e,selectors:[["button","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(r,o){2&r&&(vi("disabled",o.disabled||null),pi("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ot],attrs:q$,ngContentSelectors:W$,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){1&r&&(Bn(),Ot(0,"span",0),Lt(1),Ot(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',xR],encapsulation:2,changeDetection:0}),t})(),EC=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,dp,Ei]}),t})();const iG=["*"];let ib;function Xg(t){return function nG(){if(void 0===ib&&(ib=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(ib=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ib}()?.createHTML(t)||t}function DR(t){return Error(`Unable to find icon with the name "${t}"`)}function ER(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function SR(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Ah{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let nb=(()=>{const e=class{constructor(i,r,o,c){this._httpClient=i,this._sanitizer=r,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(i,r,o){return this.addSvgIconInNamespace("",i,r,o)}addSvgIconLiteral(i,r,o){return this.addSvgIconLiteralInNamespace("",i,r,o)}addSvgIconInNamespace(i,r,o,c){return this._addSvgIconConfig(i,r,new Ah(o,null,c))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,o,c){const h=this._sanitizer.sanitize(dn.HTML,o);if(!h)throw SR(o);const g=Xg(h);return this._addSvgIconConfig(i,r,new Ah("",g,c))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,o){return this._addSvgIconSetConfig(i,new Ah(r,null,o))}addSvgIconSetLiteralInNamespace(i,r,o){const c=this._sanitizer.sanitize(dn.HTML,r);if(!c)throw SR(r);const h=Xg(c);return this._addSvgIconSetConfig(i,new Ah("",h,o))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(dn.RESOURCE_URL,i);if(!r)throw ER(i);const o=this._cachedIconsByUrl.get(r);return o?bt(rb(o)):this._loadSvgIconFromConfig(new Ah(i,null)).pipe(jr(c=>this._cachedIconsByUrl.set(r,c)),Gt(c=>rb(c)))}getNamedSvgIcon(i,r=""){const o=MR(r,i);let c=this._svgIconConfigs.get(o);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(r,i),c)return this._svgIconConfigs.set(o,c),this._getSvgFromConfig(c);const h=this._iconSetConfigs.get(r);return h?this._getSvgFromIconSetConfigs(i,h):xh(DR(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?bt(rb(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(Gt(r=>rb(r)))}_getSvgFromIconSetConfigs(i,r){const o=this._extractIconWithNameFromAnySet(i,r);return o?bt(o):xI(r.filter(h=>!h.svgText).map(h=>this._loadSvgIconSetFromConfig(h).pipe(td(g=>{const S=`Loading icon set URL: ${this._sanitizer.sanitize(dn.RESOURCE_URL,h.url)} failed: ${g.message}`;return this._errorHandler.handleError(new Error(S)),bt(null)})))).pipe(Gt(()=>{const h=this._extractIconWithNameFromAnySet(i,r);if(!h)throw DR(i);return h}))}_extractIconWithNameFromAnySet(i,r){for(let o=r.length-1;o>=0;o--){const c=r[o];if(c.svgText&&c.svgText.toString().indexOf(i)>-1){const h=this._svgElementFromConfig(c),g=this._extractSvgIconFromSet(h,i,c.options);if(g)return g}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(jr(r=>i.svgText=r),Gt(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?bt(null):this._fetchIcon(i).pipe(jr(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,o){const c=i.querySelector(`[id="${r}"]`);if(!c)return null;const h=c.cloneNode(!0);if(h.removeAttribute("id"),"svg"===h.nodeName.toLowerCase())return this._setSvgAttributes(h,o);if("symbol"===h.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(h),o);const g=this._svgElementFromString(Xg("<svg></svg>"));return g.appendChild(h),this._setSvgAttributes(g,o)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(i){const r=this._svgElementFromString(Xg("<svg></svg>")),o=i.attributes;for(let c=0;c<o.length;c++){const{name:h,value:g}=o[c];"id"!==h&&r.setAttribute(h,g)}for(let c=0;c<i.childNodes.length;c++)i.childNodes[c].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[c].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:o}=i,c=o?.withCredentials??!1;if(!this._httpClient)throw function rG(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const h=this._sanitizer.sanitize(dn.RESOURCE_URL,r);if(!h)throw ER(r);const g=this._inProgressUrlFetches.get(h);if(g)return g;const C=this._httpClient.get(h,{responseType:"text",withCredentials:c}).pipe(Gt(S=>Xg(S)),Zm(()=>this._inProgressUrlFetches.delete(h)),gd());return this._inProgressUrlFetches.set(h,C),C}_addSvgIconConfig(i,r,o){return this._svgIconConfigs.set(MR(i,r),o),this}_addSvgIconSetConfig(i,r){const o=this._iconSetConfigs.get(i);return o?o.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let o=0;o<this._resolvers.length;o++){const c=this._resolvers[o](r,i);if(c)return sG(c)?new Ah(c.url,null,c.options):new Ah(c,null)}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Mv,8),we(Lw),we(ci,8),we(Zl))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function rb(t){return t.cloneNode(!0)}function MR(t,e){return t+":"+e}function sG(t){return!(!t.url||!t.options)}const aG=qg(class{constructor(t){this._elementRef=t}}),lG=new Le("MAT_ICON_DEFAULT_OPTIONS"),cG=new Le("mat-icon-location",{providedIn:"root",factory:function dG(){const t=Je(ci),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),kR=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],uG=kR.map(t=>`[${t}]`).join(", "),hG=/^url\(['"]?#(.*?)['"]?\)$/;let SC=(()=>{const e=class extends aG{get inline(){return this._inline}set inline(i){this._inline=Di(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,o,c,h,g){super(i),this._iconRegistry=r,this._location=c,this._errorHandler=h,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=zi.EMPTY,g&&(g.color&&(this.color=this.defaultColor=g.color),g.fontSet&&(this.fontSet=g.fontSet)),o||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=i.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>i.classList.remove(o)),r.forEach(o=>i.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((o,c)=>{o.forEach(h=>{c.setAttribute(h.name,`url('${i}#${h.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(uG),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<r.length;c++)kR.forEach(h=>{const g=r[c],C=g.getAttribute(h),S=C?C.match(hG):null;if(S){let I=o.get(g);I||(I=[],o.set(g,I)),I.push({name:h,value:S[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,o]=this._splitIconName(i);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Dr(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${c.message}`))})}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(nb),Oa("aria-hidden"),G(cG),G(Zl),G(lG,8))},e.\u0275cmp=Mt({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(r,o){2&r&&(vi("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),pi("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ot],ngContentSelectors:iG,decls:1,vars:0,template:function(r,o){1&r&&(Bn(),Lt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),t})(),TR=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,Ei]}),t})();const mG=["*",[["mat-toolbar-row"]]],pG=["*","mat-toolbar-row"],fG=qg(class{constructor(t){this._elementRef=t}});let MC,gG=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),_G=(()=>{const e=class extends fG{constructor(i,r,o){super(i),this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(ur),G(ci))},e.\u0275cmp=Mt({type:e,selectors:[["mat-toolbar"]],contentQueries:function(r,o,c){if(1&r&&gi(c,gG,5),2&r){let h;Dt(h=Et())&&(o._toolbarRows=h)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(r,o){2&r&&pi("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",0===o._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ot],ngContentSelectors:pG,decls:2,vars:0,template:function(r,o){1&r&&(Bn(mG),Lt(0),Lt(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),t})(),yG=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,Ei]}),t})(),vG=1;const ob={};function IR(t){return t in ob&&(delete ob[t],!0)}const bG={setImmediate(t){const e=vG++;return ob[e]=!0,MC||(MC=Promise.resolve()),MC.then(()=>IR(e)&&t()),e},clearImmediate(t){IR(t)}},{setImmediate:xG,clearImmediate:wG}=bG,sb={setImmediate(...t){const{delegate:e}=sb;return(e?.setImmediate||xG)(...t)},clearImmediate(t){const{delegate:e}=sb;return(e?.clearImmediate||wG)(t)},delegate:void 0},kC=new class DG extends hC{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class CG extends uC{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=sb.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(sb.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function AR(t,e){return e?n=>Mg(e.pipe(Dr(1),function EG(){return Ti((t,e)=>{t.subscribe(nn(e,hn))})}()),n.pipe(AR(t))):qe((n,i)=>re(t(n,i)).pipe(Dr(1),VA(n)))}function RR(t=0,e,n=s$){let i=-1;return null!=e&&(ti(e)?n=e:i=e),new Si(r=>{let o=function SG(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let c=0;return n.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function PR(t,e=Xv){const n=RR(t,e);return AR(()=>n)}class TC{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class IC extends TC{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class ab extends TC{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class MG extends TC{constructor(e){super(),this.element=e instanceof St?e.nativeElement:e}}class AC{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof IC?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof ab?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof MG?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class kG extends AC{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const h=c.element,g=this._document.createComment("dom-portal");h.parentNode.insertBefore(g,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(h,g)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ao.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let lb=(()=>{const e=class extends AC{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new fi,this.attachDomPortal=c=>{const h=c.element,g=this._document.createComment("dom-portal");c.setAttachedHost(this),h.parentNode.insertBefore(g,h),this._getRootNode().appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(h,g)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,c=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),h=r.createComponent(c,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(h.hostView.rootNodes[0]),super.setDisposeFn(()=>h.destroy()),this._attachedPortal=i,this._attachedRef=h,this.attached.emit(h),h}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(xm),G(no),G(ci))},e.\u0275dir=Fe({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ot]}),t})(),up=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})();const TG=["addListener","removeListener"],IG=["addEventListener","removeEventListener"],AG=["on","off"];function RC(t,e,n,i){if(Pi(n)&&(i=n,n=void 0),i)return RC(t,e,n).pipe(l1(i));const[r,o]=function OG(t){return Pi(t.addEventListener)&&Pi(t.removeEventListener)}(t)?IG.map(c=>h=>t[c](e,h,n)):function RG(t){return Pi(t.addListener)&&Pi(t.removeListener)}(t)?TG.map(OR(t,e)):function PG(t){return Pi(t.on)&&Pi(t.off)}(t)?AG.map(OR(t,e)):[];if(!r&&Bo(t))return qe(c=>RC(c,e,n))(re(t));if(!r)throw new TypeError("Invalid event target");return new Si(c=>{const h=(...g)=>c.next(1<g.length?g:g[0]);return r(h),()=>o(h)})}function OR(t,e){return n=>i=>t[n](e,i)}const Kg={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=Kg;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(o=>{n=void 0,t(o)});return new zi(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=Kg;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=Kg;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class LG extends hC{flush(e){let n;this._active=!0,e?n=e.id:(n=this._scheduled,this._scheduled=void 0);const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class FG extends uC{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Kg.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&n===e._scheduled&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(Kg.cancelAnimationFrame(n),e._scheduled=void 0)}});function FR(t,e=Xv){return function BG(t){return Ti((e,n)=>{let i=!1,r=null,o=null,c=!1;const h=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const C=r;r=null,n.next(C)}c&&n.complete()},g=()=>{o=null,c&&n.complete()};e.subscribe(nn(n,C=>{i=!0,r=C,o||re(t(C)).subscribe(o=nn(n,h,g))},()=>{c=!0,(!i||!o||o.closed)&&n.complete()}))})}(()=>RR(t,e))}let VG=(()=>{const e=class{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ct,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new Si(r=>{this._globalSubscription||this._addGlobalListener();const o=i>0?this._scrolled.pipe(FR(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):bt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(dr(c=>!c||o.indexOf(c)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((o,c)=>{this._scrollableContainsElement(c,i)&&r.push(c)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=od(r),c=i.getElementRef().nativeElement;do{if(o==c)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>RC(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Rt),we(ur),we(ci,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),PC=(()=>{const e=class{constructor(i,r,o){this._platform=i,this._change=new Ct,this._changeListener=c=>{this._change.next(c)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),o=i.documentElement,c=o.getBoundingClientRect();return{top:-c.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,left:-c.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(FR(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ur),we(Rt),we(ci,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),Rh=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})(),OC=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[ap,Rh,ap,Rh]}),t})();const LR=HH();class jG{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Hr(-this._previousScrollPosition.left),e.style.top=Hr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),LR&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),LR&&(i.scrollBehavior=o,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class HG{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(dr(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class NR{enable(){}disable(){}attach(){}}function FC(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function BR(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class $G{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();FC(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let GG=(()=>{const e=class{constructor(i,r,o,c){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new NR,this.close=h=>new HG(this._scrollDispatcher,this._ngZone,this._viewportRuler,h),this.block=()=>new jG(this._viewportRuler,this._document),this.reposition=h=>new $G(this._scrollDispatcher,this._viewportRuler,this._ngZone,h),this._document=c}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(VG),we(PC),we(Rt),we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class LC{constructor(e){if(this.scrollStrategy=new NR,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class qG{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let zR=(()=>{const e=class{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),WG=(()=>{const e=class extends zR{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{const c=this._attachedOverlays;for(let h=c.length-1;h>-1;h--)if(c[h]._keydownEvents.observers.length>0){const g=c[h]._keydownEvents;this._ngZone?this._ngZone.run(()=>g.next(o)):g.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci),we(Rt,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),ZG=(()=>{const e=class extends zR{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=c=>{this._pointerDownEventTarget=su(c)},this._clickListener=c=>{const h=su(c),g="click"===c.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:h;this._pointerDownEventTarget=null;const C=this._attachedOverlays.slice();for(let S=C.length-1;S>-1;S--){const I=C[S];if(I._outsidePointerEvents.observers.length<1||!I.hasAttached())continue;if(I.overlayElement.contains(h)||I.overlayElement.contains(g))break;const U=I._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>U.next(c)):U.next(c)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci),we(ur),we(Rt,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),cb=(()=>{const e=class{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||oC()){const o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let c=0;c<o.length;c++)o[c].remove()}const r=this._document.createElement("div");r.classList.add(i),oC()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ci),we(ur))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class Qg{constructor(e,n,i,r,o,c,h,g,C,S=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=c,this._document=h,this._location=g,this._outsideClickDispatcher=C,this._animationsDisabled=S,this._backdropElement=null,this._backdropClick=new Ct,this._attachments=new Ct,this._detachments=new Ct,this._locationChanges=zi.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new Ct,this._outsidePointerEvents=new Ct,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Dr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Hr(this._config.width),e.height=Hr(this._config.height),e.minWidth=Hr(this._config.minWidth),e.minHeight=Hr(this._config.minHeight),e.maxWidth=Hr(this._config.maxWidth),e.maxHeight=Hr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=Kv(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(un(ao(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const VR="cdk-overlay-connected-position-bounding-box",YG=/([A-Za-z%]+)$/;class XG{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ct,this._resizeSubscription=zi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(VR),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let c;for(let h of this._preferredPositions){let g=this._getOriginPoint(e,r,h),C=this._getOverlayPoint(g,n,h),S=this._getOverlayFit(C,n,i,h);if(S.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,g);this._canFitWithFlexibleDimensions(S,C,i)?o.push({position:h,origin:g,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(g,h)}):(!c||c.overlayFit.visibleArea<S.visibleArea)&&(c={overlayFit:S,overlayPoint:C,originPoint:g,position:h,overlayRect:n})}if(o.length){let h=null,g=-1;for(const C of o){const S=C.boundingBoxRect.width*C.boundingBoxRect.height*(C.position.weight||1);S>g&&(g=S,h=C)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ph(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(VR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;r="start"==i.originX?c:h}return n.left<0&&(r-=n.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r,o;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,o="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){const o=jR(n);let{x:c,y:h}=e,g=this._getOffset(r,"x"),C=this._getOffset(r,"y");g&&(c+=g),C&&(h+=C);let U=0-h,q=h+o.height-i.height,te=this._subtractOverflows(o.width,0-c,c+o.width-i.width),ce=this._subtractOverflows(o.height,U,q),ge=te*ce;return{visibleArea:ge,isCompletelyWithinViewport:o.width*o.height===ge,fitsInViewportVertically:ce===o.height,fitsInViewportHorizontally:te==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,o=i.right-n.x,c=UR(this._overlayRef.getConfig().minHeight),h=UR(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=c&&c<=r)&&(e.fitsInViewportHorizontally||null!=h&&h<=o)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=jR(n),o=this._viewportRect,c=Math.max(e.x+r.width-o.width,0),h=Math.max(e.y+r.height-o.height,0),g=Math.max(o.top-i.top-e.y,0),C=Math.max(o.left-i.left-e.x,0);let S=0,I=0;return S=r.width<=o.width?C||-c:e.x<this._viewportMargin?o.left-i.left-e.x:0,I=r.height<=o.height?g||-h:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:S,y:I},{x:e.x+S,y:e.y+I}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new qG(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let o,c,h,S,I,U;if("top"===n.overlayY)c=e.y,o=i.height-c+this._viewportMargin;else if("bottom"===n.overlayY)h=i.height-e.y+2*this._viewportMargin,o=i.height-h+this._viewportMargin;else{const q=Math.min(i.bottom-e.y+i.top,e.y),te=this._lastBoundingBoxSize.height;o=2*q,c=e.y-q,o>te&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-te/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)U=i.width-e.x+this._viewportMargin,S=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)I=e.x,S=i.right-e.x;else{const q=Math.min(i.right-e.x+i.left,e.x),te=this._lastBoundingBoxSize.width;S=2*q,I=e.x-q,S>te&&!this._isInitialRender&&!this._growAfterOpen&&(I=e.x-te/2)}return{top:c,left:I,bottom:h,right:U,width:S,height:o}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=Hr(i.height),r.top=Hr(i.top),r.bottom=Hr(i.bottom),r.width=Hr(i.width),r.left=Hr(i.left),r.right=Hr(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Hr(o)),c&&(r.maxWidth=Hr(c))}this._lastBoundingBoxSize=i,Ph(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ph(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ph(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const S=this._viewportRuler.getViewportScrollPosition();Ph(i,this._getExactOverlayY(n,e,S)),Ph(i,this._getExactOverlayX(n,e,S))}else i.position="static";let h="",g=this._getOffset(n,"x"),C=this._getOffset(n,"y");g&&(h+=`translateX(${g}px) `),C&&(h+=`translateY(${C}px)`),i.transform=h.trim(),c.maxHeight&&(r?i.maxHeight=Hr(c.maxHeight):o&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=Hr(c.maxWidth):o&&(i.maxWidth="")),Ph(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Hr(o.y),r}_getExactOverlayX(e,n,i){let c,r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Hr(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BR(e,i),isOriginOutsideView:FC(e,i),isOverlayClipped:BR(n,i),isOverlayOutsideView:FC(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Kv(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof St)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function Ph(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function UR(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(YG);return n&&"px"!==n?null:parseFloat(e)}return t||null}function jR(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const HR="cdk-global-overlay-wrapper";class KG{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(HR),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:c,maxHeight:h}=i,g=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),C=!("100%"!==o&&"100vh"!==o||h&&"100%"!==h&&"100vh"!==h),S=this._xPosition,I=this._xOffset,U="rtl"===this._overlayRef.getConfig().direction;let q="",te="",ce="";g?ce="flex-start":"center"===S?(ce="center",U?te=I:q=I):U?"left"===S||"end"===S?(ce="flex-end",q=I):("right"===S||"start"===S)&&(ce="flex-start",te=I):"left"===S||"start"===S?(ce="flex-start",q=I):("right"===S||"end"===S)&&(ce="flex-end",te=I),e.position=this._cssPosition,e.marginLeft=g?"0":q,e.marginTop=C?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=g?"0":te,n.justifyContent=ce,n.alignItems=C?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(HR),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let QG=(()=>{const e=class{constructor(i,r,o,c){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=c}global(){return new KG}flexibleConnectedTo(i){return new XG(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(PC),we(ci),we(ur),we(cb))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),JG=0,dc=(()=>{const e=class{constructor(i,r,o,c,h,g,C,S,I,U,q,te){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=c,this._keyboardDispatcher=h,this._injector=g,this._ngZone=C,this._document=S,this._directionality=I,this._location=U,this._outsideClickDispatcher=q,this._animationsModuleType=te}create(i){const r=this._createHostElement(),o=this._createPaneElement(r),c=this._createPortalOutlet(o),h=new LC(i);return h.direction=h.direction||this._directionality.value,new Qg(c,r,o,h,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+JG++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Yd)),new kG(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(GG),we(cb),we(xm),we(QG),we(WG),we(Ao),we(Rt),we(ci),we(cc),we(og),we(ZG),we(hs,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const i9={provide:new Le("cdk-connected-overlay-scroll-strategy"),deps:[dc],useFactory:function t9(t){return()=>t.scrollStrategies.reposition()}};let hp=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[dc,i9],imports:[ap,up,OC,OC]}),t})();const n9=["mat-menu-item",""];function r9(t,e){1&t&&(ll(),Y(0,"svg",3),Ot(1,"polygon",4),X())}const o9=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],s9=["mat-icon, [matMenuItemIcon]","*"];function a9(t,e){if(1&t){const n=Br();Y(0,"div",0),Ue("keydown",function(r){return Wt(n),Zt(Ge()._handleKeydown(r))})("click",function(){return Wt(n),Zt(Ge().closed.emit("click"))})("@transformMenu.start",function(r){return Wt(n),Zt(Ge()._onAnimationStart(r))})("@transformMenu.done",function(r){return Wt(n),Zt(Ge()._onAnimationDone(r))}),Y(1,"div",1),Lt(2),X()()}if(2&t){const n=Ge();ue("id",n.panelId)("ngClass",n._classList)("@transformMenu",n._panelAnimationState),vi("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby||null)("aria-describedby",n.ariaDescribedby||null)}}const l9=["*"],NC=new Le("MAT_MENU_PANEL"),c9=xC(bC(class{}));let db=(()=>{const e=class extends c9{constructor(i,r,o,c,h){super(),this._elementRef=i,this._document=r,this._focusMonitor=o,this._parentMenu=c,this._changeDetectorRef=h,this.role="menuitem",this._hovered=new Ct,this._focused=new Ct,this._highlighted=!1,this._triggersSubmenu=!1,c?.addItem?.(this)}focus(i,r){this._focusMonitor&&i?this._focusMonitor.focusVia(this._getHostElement(),i,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(i){this.disabled&&(i.preventDefault(),i.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<r.length;o++)r[o].remove();return i.textContent?.trim()||""}_setHighlighted(i){this._highlighted=i,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(i){this._triggersSubmenu=i,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(ci),G(sd),G(NC,8),G(bo))},e.\u0275cmp=Mt({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(r,o){1&r&&Ue("click",function(h){return o._checkDisabled(h)})("mouseenter",function(){return o._handleMouseEnter()}),2&r&&(vi("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled)("disabled",o.disabled||null),pi("mat-mdc-menu-item-highlighted",o._highlighted)("mat-mdc-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ot],attrs:n9,ngContentSelectors:s9,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,o){1&r&&(Bn(o9),Lt(0),Y(1,"span",0),Lt(2,1),X(),Ot(3,"div",1),ze(4,r9,2,0,"svg",2)),2&r&&(se(3),ue("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),se(1),ue("ngIf",o._triggersSubmenu))},dependencies:[oo,Ih],encapsulation:2,changeDetection:0}),t})();const d9=new Le("MatMenuContent"),ub={transformMenu:Po("transformMenu",[fn("void",Jt({opacity:0,transform:"scale(0.8)"})),Sn("void => enter",zn("120ms cubic-bezier(0, 0, 0.2, 1)",Jt({opacity:1,transform:"scale(1)"}))),Sn("* => void",zn("100ms 25ms linear",Jt({opacity:0})))]),fadeInItems:Po("fadeInItems",[fn("showing",Jt({opacity:1})),Sn("void => *",[Jt({opacity:0}),zn("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let u9=0;const $R=new Le("mat-menu-default-options",{providedIn:"root",factory:function h9(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Jg=(()=>{const e=class{get xPosition(){return this._xPosition}set xPosition(i){this._xPosition=i,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(i){this._yPosition=i,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(i){this._overlapTrigger=Di(i)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(i){this._hasBackdrop=Di(i)}set panelClass(i){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(o=>{this._classList[o]=!1}),this._previousPanelClass=i,i&&i.length&&(i.split(" ").forEach(o=>{this._classList[o]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(i){this.panelClass=i}constructor(i,r,o,c){this._elementRef=i,this._ngZone=r,this._changeDetectorRef=c,this._directDescendantItems=new Jl,this._classList={},this._panelAnimationState="void",this._animationDone=new Ct,this.closed=new fi,this.close=this.closed,this.panelId="mat-menu-panel-"+u9++,this.overlayPanelClass=o.overlayPanelClass||"",this._xPosition=o.xPosition,this._yPosition=o.yPosition,this.backdropClass=o.backdropClass,this._overlapTrigger=o.overlapTrigger,this._hasBackdrop=o.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Qv(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(_s(this._directDescendantItems),Sr(i=>ao(...i.map(r=>r._focused)))).subscribe(i=>this._keyManager.updateActiveItem(i)),this._directDescendantItems.changes.subscribe(i=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const o=i.toArray(),c=Math.max(0,Math.min(o.length-1,r.activeItemIndex||0));o[c]&&!o[c].disabled?r.setActiveItem(c):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(_s(this._directDescendantItems),Sr(r=>ao(...r.map(o=>o._hovered))))}addItem(i){}removeItem(i){}_handleKeydown(i){const r=i.keyCode,o=this._keyManager;switch(r){case 27:au(i)||(i.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&o.setFocusOrigin("keyboard"),void o.onKeydown(i)}i.stopPropagation()}focusFirstItem(i="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Dr(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const o=this._keyManager;o.setFocusOrigin(i).setFirstItemActive(),!o.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(i){const r=Math.min(this._baseElevation+i,24),o=`${this._elevationPrefix}${r}`,c=Object.keys(this._classList).find(h=>h.startsWith(this._elevationPrefix));(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[o]=!0,this._previousElevation=o)}setPositionClasses(i=this.xPosition,r=this.yPosition){const o=this._classList;o["mat-menu-before"]="before"===i,o["mat-menu-after"]="after"===i,o["mat-menu-above"]="above"===r,o["mat-menu-below"]="below"===r,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(i){this._animationDone.next(i),this._isAnimating=!1}_onAnimationStart(i){this._isAnimating=!0,"enter"===i.toState&&0===this._keyManager.activeItemIndex&&(i.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(_s(this._allItems)).subscribe(i=>{this._directDescendantItems.reset(i.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Rt),G($R),G(bo))},e.\u0275dir=Fe({type:e,contentQueries:function(r,o,c){if(1&r&&(gi(c,d9,5),gi(c,db,5),gi(c,db,4)),2&r){let h;Dt(h=Et())&&(o.lazyContent=h.first),Dt(h=Et())&&(o._allItems=h),Dt(h=Et())&&(o.items=h)}},viewQuery:function(r,o){if(1&r&&cr(Kn,5),2&r){let c;Dt(c=Et())&&(o.templateRef=c.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),t})(),m9=(()=>{const e=class extends Jg{constructor(i,r,o,c){super(i,r,o,c),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Rt),G($R),G(bo))},e.\u0275cmp=Mt({type:e,selectors:[["mat-menu"]],hostAttrs:["ngSkipHydration",""],hostVars:3,hostBindings:function(r,o){2&r&&vi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Ft([{provide:NC,useExisting:e}]),ot],ngContentSelectors:l9,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(r,o){1&r&&(Bn(),ze(0,a9,3,6,"ng-template"))},dependencies:[lg],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mdc-menu-surface{max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));z-index:8;border-radius:var(--mdc-shape-medium, 4px)}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[ub.transformMenu,ub.fadeInItems]},changeDetection:0}),t})();const GR=new Le("mat-menu-scroll-strategy"),f9={provide:GR,deps:[dc],useFactory:function p9(t){return()=>t.scrollStrategies.reposition()}},qR=Sh({passive:!0});let g9=(()=>{const e=class{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(i){this.menu=i}get menu(){return this._menu}set menu(i){i!==this._menu&&(this._menu=i,this._menuCloseSubscription.unsubscribe(),i&&(this._menuCloseSubscription=i.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(i,r,o,c,h,g,C,S,I){this._overlay=i,this._element=r,this._viewContainerRef=o,this._menuItemInstance=g,this._dir=C,this._focusMonitor=S,this._ngZone=I,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=zi.EMPTY,this._hoverSubscription=zi.EMPTY,this._menuCloseSubscription=zi.EMPTY,this._changeDetectorRef=Je(bo),this._handleTouchStart=U=>{_C(U)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new fi,this.onMenuOpen=this.menuOpened,this.menuClosed=new fi,this.onMenuClose=this.menuClosed,this._scrollStrategy=c,this._parentMaterialMenu=h instanceof Jg?h:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,qR)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,qR),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const i=this.menu;if(this._menuOpen||!i)return;const r=this._createOverlay(i),o=r.getConfig(),c=o.positionStrategy;this._setPosition(i,c),o.hasBackdrop=null==i.hasBackdrop?!this.triggersSubmenu():i.hasBackdrop,r.attach(this._getPortal(i)),i.lazyContent&&i.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(i),i instanceof Jg&&(i._startAnimation(),i._directDescendantItems.changes.pipe(un(i.close)).subscribe(()=>{c.withLockedPosition(!1).reapplyLastPosition(),c.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(i,r){this._focusMonitor&&i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(i){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===i||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof Jg?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(dr(o=>"void"===o.toState),Dr(1),un(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(i){i.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,this._setMenuElevation(i),i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(i){if(i.setElevation){let r=0,o=i.parentMenu;for(;o;)r++,o=o.parentMenu;i.setElevation(r)}}_setIsMenuOpen(i){i!==this._menuOpen&&(this._menuOpen=i,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(i),this._changeDetectorRef.markForCheck())}_createOverlay(i){if(!this._overlayRef){const r=this._getOverlayConfig(i);this._subscribeToPositions(i,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(i){return new LC({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:i.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:i.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(i,r){i.setPositionClasses&&r.positionChanges.subscribe(o=>{const c="start"===o.connectionPair.overlayX?"after":"before",h="top"===o.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>i.setPositionClasses(c,h)):i.setPositionClasses(c,h)})}_setPosition(i,r){let[o,c]="before"===i.xPosition?["end","start"]:["start","end"],[h,g]="above"===i.yPosition?["bottom","top"]:["top","bottom"],[C,S]=[h,g],[I,U]=[o,c],q=0;if(this.triggersSubmenu()){if(U=o="before"===i.xPosition?"start":"end",c=I="end"===o?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const te=this._parentMaterialMenu.items.first;this._parentInnerPadding=te?te._getHostElement().offsetTop:0}q="bottom"===h?this._parentInnerPadding:-this._parentInnerPadding}}else i.overlapTrigger||(C="top"===h?"bottom":"top",S="top"===g?"bottom":"top");r.withPositions([{originX:o,originY:C,overlayX:I,overlayY:h,offsetY:q},{originX:c,originY:C,overlayX:U,overlayY:h,offsetY:q},{originX:o,originY:S,overlayX:I,overlayY:g,offsetY:-q},{originX:c,originY:S,overlayX:U,overlayY:g,offsetY:-q}])}_menuClosingActions(){const i=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return ao(i,this._parentMaterialMenu?this._parentMaterialMenu.closed:bt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(dr(h=>h!==this._menuItemInstance),dr(()=>this._menuOpen)):bt(),r)}_handleMousedown(i){gC(i)||(this._openedBy=0===i.button?"mouse":void 0,this.triggersSubmenu()&&i.preventDefault())}_handleKeydown(i){const r=i.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(i){this.triggersSubmenu()?(i.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(dr(i=>i===this._menuItemInstance&&!i.disabled),PR(0,kC)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Jg&&this.menu._isAnimating?this.menu._animationDone.pipe(Dr(1),PR(0,kC),un(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(i){return(!this._portal||this._portal.templateRef!==i.templateRef)&&(this._portal=new ab(i.templateRef,this._viewContainerRef)),this._portal}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(dc),G(St),G(no),G(GR),G(NC,8),G(db,10),G(cc,8),G(sd),G(Rt))},e.\u0275dir=Fe({type:e,hostVars:3,hostBindings:function(r,o){1&r&&Ue("click",function(h){return o._handleClick(h)})("mousedown",function(h){return o._handleMousedown(h)})("keydown",function(h){return o._handleKeydown(h)}),2&r&&vi("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),t})(),_9=(()=>{const e=class extends g9{};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[ot]}),t})(),y9=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[f9],imports:[fs,dp,Ei,hp,Rh,Ei]}),t})();function v9(t,e){1&t&&(Y(0,"nav",9)(1,"a",10),ye(2,"Dashboard"),X(),Y(3,"a",11),ye(4,"Lieux"),X(),Y(5,"a",12),ye(6,"Bornes"),X(),Y(7,"a",13),ye(8,"Carte"),X(),Y(9,"a",14),ye(10,"R\xe9servations"),X()())}function b9(t,e){1&t&&(Y(0,"nav",9)(1,"a",15),ye(2,"Inscription"),X(),Y(3,"a",16),ye(4,"Connexion"),X()())}function x9(t,e){if(1&t){const n=Br();Wo(0),Y(1,"button",17)(2,"mat-icon",18),ye(3,"account_circle"),X(),ye(4),X(),Y(5,"mat-menu",null,19)(7,"button",20)(8,"mat-icon"),ye(9,"settings"),X(),Y(10,"span"),ye(11,"Profil"),X()(),Y(12,"button",21),Ue("click",function(){return Wt(n),Zt(Ge().logout())}),Y(13,"mat-icon"),ye(14,"logout"),X(),Y(15,"span"),ye(16,"D\xe9connexion"),X()()(),Zo()}if(2&t){const n=Nr(6),i=Ge();se(1),ue("matMenuTriggerFor",n),se(3),Ro(" ",i.auth.getPseudoFromToken()||"Utilisateur"," ")}}function w9(t,e){1&t&&(Y(0,"a",22),ye(1,"S'inscrire"),X())}let C9=(()=>{const e=class{constructor(i,r,o){this.theme=i,this.auth=r,this.router=o}toggleSidebar(){document.body.classList.toggle("sidebar-open")}logout(){localStorage.removeItem("token"),this.router.navigateByUrl("/connexion")}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(j2),G(rd),G(Gn))},e.\u0275cmp=Mt({type:e,selectors:[["eb-header"]],decls:16,vars:4,consts:[["color","primary",1,"!bg-[#071021]/70","backdrop-blur-xl","border-b","border-white/10","relative","z-20"],[1,"flex","items-center","gap-4","flex-1"],["mat-icon-button","",1,"md:hidden",3,"click"],["routerLink","/",1,"text-2xl","font-poppins","font-bold","tracking-wide","glow-text"],["class","hidden md:flex items-center gap-2 text-sm",4,"ngIf"],[1,"flex","items-center","gap-2"],["mat-icon-button","","matTooltip","Basculer th\xe8me",3,"click"],[4,"ngIf","ngIfElse"],["guest",""],[1,"hidden","md:flex","items-center","gap-2","text-sm"],["routerLink","/","mat-button",""],["routerLink","/lieux","mat-button",""],["routerLink","/bornes","mat-button",""],["routerLink","/carte","mat-button",""],["routerLink","/reservations","mat-button",""],["routerLink","/inscription","mat-button",""],["routerLink","/connexion","mat-stroked-button",""],["mat-button","",1,"font-medium",3,"matMenuTriggerFor"],[1,"mr-1"],["userMenu","matMenu"],["mat-menu-item","","routerLink","/profil"],["mat-menu-item","",3,"click"],["mat-raised-button","","color","primary","routerLink","/inscription",1,"hero-cta"]],template:function(r,o){if(1&r&&(Y(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),Ue("click",function(){return o.toggleSidebar()}),Y(3,"mat-icon"),ye(4,"menu"),X()(),Y(5,"a",3),ye(6,"EVCharge"),X(),ze(7,v9,11,0,"nav",4),ze(8,b9,5,0,"nav",4),X(),Y(9,"div",5)(10,"button",6),Ue("click",function(){return o.theme.toggle()}),Y(11,"mat-icon"),ye(12,"brightness_6"),X()(),ze(13,x9,17,2,"ng-container",7),ze(14,w9,2,0,"ng-template",null,8,ec),X()()),2&r){const c=Nr(15);se(7),ue("ngIf",o.auth.isLogged()),se(1),ue("ngIf",!o.auth.isLogged()),se(5),ue("ngIf",o.auth.isLogged())("ngIfElse",c)}},dependencies:[oo,DC,tb,tG,SC,_G,m9,db,_9,ou],styles:["[_nghost-%COMP%]{display:block}"]}),t})(),D9=(()=>{const e=class{constructor(i,r,o){this.api=i,this.router=r,this.theme=o,this.router.events.pipe(dr(c=>c instanceof ru)).subscribe(c=>{const h=c.urlAfterRedirects||c.url||"",g=document.body;g.classList.remove("home-bg","login-bg","dashboard-bg","map-bg","management-bg","reservations-bg"),h.startsWith("/connexion")||h.startsWith("/inscription")?g.classList.add("login-bg"):"/"===h||h.startsWith("/tableau-de-bord")?g.classList.add("dashboard-bg"):h.startsWith("/carte")?g.classList.add("map-bg"):h.startsWith("/gestion")||h.startsWith("/bornes")||h.startsWith("/lieux")?g.classList.add("management-bg"):h.startsWith("/reservations")?g.classList.add("reservations-bg"):g.classList.add("home-bg")})}isLogged(){return!!localStorage.getItem("token")}demoLogin(){this.api.create("auth/login",{pseudo:"alice",motDePasse:"secret"}).subscribe(r=>{r&&r.token&&(localStorage.setItem("token",r.token),this.router.navigateByUrl("/"))})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(Gn),G(j2))},e.\u0275cmp=Mt({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"app-shell","min-h-screen","flex"],[1,"flex-1","flex","flex-col"],[1,"main-wrap","p-6"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1),Ot(2,"eb-header"),Y(3,"main",2),Ot(4,"router-outlet"),X()()())},dependencies:[Z1,C9],encapsulation:2}),t})();const WR=Sh({passive:!0});let E9=(()=>{const e=class{constructor(i,r){this._platform=i,this._ngZone=r,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return vt;const r=od(i),o=this._monitoredElements.get(r);if(o)return o.subject;const c=new Ct,h="cdk-text-field-autofilled",g=C=>{"cdk-text-field-autofill-start"!==C.animationName||r.classList.contains(h)?"cdk-text-field-autofill-end"===C.animationName&&r.classList.contains(h)&&(r.classList.remove(h),this._ngZone.run(()=>c.next({target:C.target,isAutofilled:!1}))):(r.classList.add(h),this._ngZone.run(()=>c.next({target:C.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",g,WR),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:c,unlisten:()=>{r.removeEventListener("animationstart",g,WR)}}),c}stopMonitoring(i){const r=od(i),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((i,r)=>this.stopMonitoring(r))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(ur),we(Rt))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),S9=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({}),t})();const M9=["matFormFieldNotchedOutline",""],k9=["*"],T9=["textField"],I9=["iconPrefixContainer"],A9=["textPrefixContainer"];function R9(t,e){1&t&&Ot(0,"span",19)}function P9(t,e){if(1&t){const n=Br();Y(0,"label",17),Ue("cdkObserveContent",function(){return Wt(n),Zt(Ge(2)._refreshOutlineNotchWidth())}),Lt(1,1),ze(2,R9,1,0,"span",18),X()}if(2&t){const n=Ge(2);ue("floating",n._shouldLabelFloat())("cdkObserveContentDisabled",!n._hasOutline())("id",n._labelId),vi("for",n._control.id)("aria-owns",n._control.id),se(2),ue("ngIf",!n.hideRequiredMarker&&n._control.required)}}function O9(t,e){1&t&&ze(0,P9,3,6,"label",16),2&t&&ue("ngIf",Ge()._hasFloatingLabel())}function F9(t,e){1&t&&Ot(0,"div",20)}function L9(t,e){}function N9(t,e){1&t&&ze(0,L9,0,0,"ng-template",22),2&t&&(Ge(2),ue("ngTemplateOutlet",Nr(1)))}function B9(t,e){if(1&t&&(Y(0,"div",21),ze(1,N9,1,1,"ng-template",9),X()),2&t){const n=Ge();ue("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",n._labelWidth),se(1),ue("ngIf",!n._forceDisplayInfixLabel())}}function z9(t,e){1&t&&(Y(0,"div",23,24),Lt(2,2),X())}function V9(t,e){1&t&&(Y(0,"div",25,26),Lt(2,3),X())}function U9(t,e){}function j9(t,e){1&t&&ze(0,U9,0,0,"ng-template",22),2&t&&(Ge(),ue("ngTemplateOutlet",Nr(1)))}function H9(t,e){1&t&&(Y(0,"div",27),Lt(1,4),X())}function $9(t,e){1&t&&(Y(0,"div",28),Lt(1,5),X())}function G9(t,e){1&t&&Ot(0,"div",29)}function q9(t,e){1&t&&(Y(0,"div",30),Lt(1,6),X()),2&t&&ue("@transitionMessages",Ge()._subscriptAnimationState)}function W9(t,e){if(1&t&&(Y(0,"mat-hint",34),ye(1),X()),2&t){const n=Ge(2);ue("id",n._hintLabelId),se(1),Bi(n.hintLabel)}}function Z9(t,e){if(1&t&&(Y(0,"div",31),ze(1,W9,2,2,"mat-hint",32),Lt(2,7),Ot(3,"div",33),Lt(4,8),X()),2&t){const n=Ge();ue("@transitionMessages",n._subscriptAnimationState),se(1),ue("ngIf",n.hintLabel)}}const Y9=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],X9=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let hb=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["mat-label"]]}),t})(),K9=0;const ZR=new Le("MatError");let Q9=(()=>{const e=class{constructor(i,r){this.id="mat-mdc-error-"+K9++,i||r.nativeElement.setAttribute("aria-live","polite")}};let t=e;return e.\u0275fac=function(r){return new(r||e)(Oa("aria-live"),G(St))},e.\u0275dir=Fe({type:e,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(r,o){2&r&&Ba("id",o.id)},inputs:{id:"id"},features:[Ft([{provide:ZR,useExisting:e}])]}),t})(),J9=0,YR=(()=>{const e=class{constructor(){this.align="start",this.id="mat-mdc-hint-"+J9++}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,o){2&r&&(Ba("id",o.id),vi("align",null),pi("mat-mdc-form-field-hint-end","end"===o.align))},inputs:{align:"align",id:"id"}}),t})();const eq=new Le("MatPrefix"),XR=new Le("MatSuffix");let tq=(()=>{const e=class{constructor(){this._isText=!1}set _isTextSelector(i){this._isText=!0}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[Ft([{provide:XR,useExisting:e}])]}),t})(),KR=(()=>{const e=class{constructor(i){this._elementRef=i,this.floating=!1}getWidth(){return function iq(t){if(null!==t.offsetParent)return t.scrollWidth;const n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);const i=n.scrollWidth;return n.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St))},e.\u0275dir=Fe({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,o){2&r&&pi("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating"}}),t})();const QR="mdc-line-ripple--active",mb="mdc-line-ripple--deactivating";let JR=(()=>{const e=class{constructor(i,r){this._elementRef=i,this._handleTransitionEnd=o=>{const c=this._elementRef.nativeElement.classList,h=c.contains(mb);"opacity"===o.propertyName&&h&&c.remove(QR,mb)},r.runOutsideAngular(()=>{i.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const i=this._elementRef.nativeElement.classList;i.remove(mb),i.add(QR)}deactivate(){this._elementRef.nativeElement.classList.add(mb)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Rt))},e.\u0275dir=Fe({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),t})(),eP=(()=>{const e=class{constructor(i,r){this._elementRef=i,this._ngZone=r,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const i=this._elementRef.nativeElement.querySelector(".mdc-floating-label");i?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(Rt))},e.\u0275cmp=Mt({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,o){2&r&&pi("mdc-notched-outline--notched",o.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:M9,ngContentSelectors:k9,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(r,o){1&r&&(Bn(),Ot(0,"div",0),Y(1,"div",1),Lt(2),X(),Ot(3,"div",2)),2&r&&(se(1),Wd("width",o._getNotchWidth()))},encapsulation:2,changeDetection:0}),t})();const nq={transitionMessages:Po("transitionMessages",[fn("enter",Jt({opacity:1,transform:"translateY(0%)"})),Sn("void => enter",[Jt({opacity:0,transform:"translateY(-5px)"}),zn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let BC=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e}),t})();const zC=new Le("MatFormField"),rq=new Le("MAT_FORM_FIELD_DEFAULT_OPTIONS");let tP=0,rP=(()=>{const e=class{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(i){this._hideRequiredMarker=Di(i)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(i){i!==this._floatLabel&&(this._floatLabel=i,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(i){const r=this._appearance;this._appearance=i||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(i){this._subscriptSizing=i||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(i){this._hintLabel=i,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(i){this._explicitFormFieldControl=i}constructor(i,r,o,c,h,g,C,S){this._elementRef=i,this._changeDetectorRef=r,this._ngZone=o,this._dir=c,this._platform=h,this._defaults=g,this._animationMode=C,this._document=S,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+tP++,this._hintLabelId="mat-mdc-hint-"+tP++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Ct,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,g&&(g.appearance&&(this.appearance=g.appearance),this._hideRequiredMarker=!!g?.hideRequiredMarker,g.color&&(this.color=g.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const i=this._control;i.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${i.controlType}`),i.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),i.ngControl&&i.ngControl.valueChanges&&i.ngControl.valueChanges.pipe(un(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(i=>!i._isText),this._hasTextPrefix=!!this._prefixChildren.find(i=>i._isText),this._hasIconSuffix=!!this._suffixChildren.find(i=>!i._isText),this._hasTextSuffix=!!this._suffixChildren.find(i=>i._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),ao(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(un(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(un(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(i){const r=this._control?this._control.ngControl:null;return r&&r[i]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let i=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&i.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(c=>"start"===c.align):null,o=this._hintChildren?this._hintChildren.find(c=>"end"===c.align):null;r?i.push(r.id):this._hintLabel&&i.push(this._hintLabelId),o&&i.push(o.id)}else this._errorChildren&&i.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(i)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const i=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(i.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,c=r?.getBoundingClientRect().width??0,h=o?.getBoundingClientRect().width??0;i.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${c+h}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const i=this._elementRef.nativeElement;if(i.getRootNode){const r=i.getRootNode();return r&&r!==i}return document.documentElement.contains(i)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(bo),G(Rt),G(cc),G(ur),G(rq,8),G(hs,8),G(ci))},e.\u0275cmp=Mt({type:e,selectors:[["mat-form-field"]],contentQueries:function(r,o,c){if(1&r&&(gi(c,hb,5),gi(c,hb,7),gi(c,BC,5),gi(c,eq,5),gi(c,XR,5),gi(c,ZR,5),gi(c,YR,5)),2&r){let h;Dt(h=Et())&&(o._labelChildNonStatic=h.first),Dt(h=Et())&&(o._labelChildStatic=h.first),Dt(h=Et())&&(o._formFieldControl=h.first),Dt(h=Et())&&(o._prefixChildren=h),Dt(h=Et())&&(o._suffixChildren=h),Dt(h=Et())&&(o._errorChildren=h),Dt(h=Et())&&(o._hintChildren=h)}},viewQuery:function(r,o){if(1&r&&(cr(T9,5),cr(I9,5),cr(A9,5),cr(KR,5),cr(eP,5),cr(JR,5)),2&r){let c;Dt(c=Et())&&(o._textField=c.first),Dt(c=Et())&&(o._iconPrefixContainer=c.first),Dt(c=Et())&&(o._textPrefixContainer=c.first),Dt(c=Et())&&(o._floatingLabel=c.first),Dt(c=Et())&&(o._notchedOutline=c.first),Dt(c=Et())&&(o._lineRipple=c.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,o){2&r&&pi("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===o._animationMode)("mat-form-field-appearance-fill","fill"==o.appearance)("mat-form-field-appearance-outline","outline"==o.appearance)("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary","accent"!==o.color&&"warn"!==o.color)("mat-accent","accent"===o.color)("mat-warn","warn"===o.color)("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ft([{provide:zC,useExisting:e}])],ngContentSelectors:X9,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(r,o){1&r&&(Bn(Y9),ze(0,O9,1,1,"ng-template",null,0,ec),Y(2,"div",1,2),Ue("click",function(h){return o._control.onContainerClick(h)}),ze(4,F9,1,0,"div",3),Y(5,"div",4),ze(6,B9,2,3,"div",5),ze(7,z9,3,0,"div",6),ze(8,V9,3,0,"div",7),Y(9,"div",8),ze(10,j9,1,1,"ng-template",9),Lt(11),X(),ze(12,H9,2,0,"div",10),ze(13,$9,2,0,"div",11),X(),ze(14,G9,1,0,"div",12),X(),Y(15,"div",13),ze(16,q9,2,1,"div",14),ze(17,Z9,5,2,"div",15),X()),2&r&&(se(2),pi("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),se(2),ue("ngIf",!o._hasOutline()&&!o._control.disabled),se(2),ue("ngIf",o._hasOutline()),se(1),ue("ngIf",o._hasIconPrefix),se(1),ue("ngIf",o._hasTextPrefix),se(2),ue("ngIf",!o._hasOutline()||o._forceDisplayInfixLabel()),se(2),ue("ngIf",o._hasTextSuffix),se(1),ue("ngIf",o._hasIconSuffix),se(1),ue("ngIf",!o._hasOutline()),se(1),pi("mat-mdc-form-field-subscript-dynamic-size","dynamic"===o.subscriptSizing),ue("ngSwitch",o._getDisplayedMessages()),se(1),ue("ngSwitchCase","error"),se(1),ue("ngSwitchCase","hint"))},dependencies:[oo,dg,hh,cg,K2,YR,KR,eP,JR],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[nq.transitionMessages]},changeDetection:0}),t})(),pb=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,fs,pC,Ei]}),t})();const aq=new Le("MAT_INPUT_VALUE_ACCESSOR"),lq=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let cq=0;const dq=dR(class{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i,this.stateChanges=new Ct}});let oP=(()=>{const e=class extends dq{get disabled(){return this._disabled}set disabled(i){this._disabled=Di(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator($a.required)??!1}set required(i){this._required=Di(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&$2().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=Di(i)}constructor(i,r,o,c,h,g,C,S,I,U){super(g,c,h,o),this._elementRef=i,this._platform=r,this._autofillMonitor=S,this._formField=U,this._uid="mat-input-"+cq++,this.focused=!1,this.stateChanges=new Ct,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ce=>$2().has(ce)),this._iOSKeyupListener=ce=>{const ge=ce.target;!ge.value&&0===ge.selectionStart&&0===ge.selectionEnd&&(ge.setSelectionRange(1,1),ge.setSelectionRange(0,0))};const q=this._elementRef.nativeElement,te=q.nodeName.toLowerCase();this._inputValueAccessor=C||q,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&I.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===te,this._isTextarea="textarea"===te,this._isInFormField=!!U,this._isNativeSelect&&(this.controlType=q.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_dirtyCheckPlaceholder(){const i=this._getPlaceholder();if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){lq.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const i=this._elementRef.nativeElement,r=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(ur),G(rc,10),G(oc,8),G($m,8),G(lp),G(aq,10),G(E9),G(Rt),G(zC,8))},e.\u0275dir=Fe({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,o){1&r&&Ue("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),2&r&&(Ba("id",o.id)("disabled",o.disabled)("required",o.required),vi("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),pi("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Ft([{provide:BC,useExisting:e}]),ot,Zn]}),t})(),uq=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,pb,pb,S9,Ei]}),t})();const hq=["*"],_q=new Le("MAT_CARD_CONFIG");let fb=(()=>{const e=class{constructor(i){this.appearance=i?.appearance||"raised"}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(_q,8))},e.\u0275cmp=Mt({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,o){2&r&&pi("mat-mdc-card-outlined","outlined"===o.appearance)("mdc-card--outlined","outlined"===o.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:hq,decls:1,vars:0,template:function(r,o){1&r&&(Bn(),Lt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),t})(),sP=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),t})(),gb=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Fe({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),t})(),vq=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,fs,Ei]}),t})();function bq(t,e){1&t&&Lt(0)}const xq=["*"];let aP=(()=>{const e=class{constructor(i){this._elementRef=i}focus(){this._elementRef.nativeElement.focus()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St))},e.\u0275dir=Fe({type:e,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]}),t})(),lP=(()=>{const e=class{constructor(i){this.template=i}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Kn))},e.\u0275dir=Fe({type:e,selectors:[["","cdkStepLabel",""]]}),t})(),wq=0;const cP=new Le("STEPPER_GLOBAL_OPTIONS");let VC=(()=>{const e=class{get editable(){return this._editable}set editable(i){this._editable=Di(i)}get optional(){return this._optional}set optional(i){this._optional=Di(i)}get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(i){this._completedOverride=Di(i)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(i){this._customError=Di(i)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(i,r){this._stepper=i,this.interacted=!1,this.interactedStream=new fi,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=r||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??null!=this._customError}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Vi(()=>UC)),G(cP,8))},e.\u0275cmp=Mt({type:e,selectors:[["cdk-step"]],contentQueries:function(r,o,c){if(1&r&&gi(c,lP,5),2&r){let h;Dt(h=Et())&&(o.stepLabel=h.first)}},viewQuery:function(r,o){if(1&r&&cr(Kn,7),2&r){let c;Dt(c=Et())&&(o.content=c.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],state:"state",editable:"editable",optional:"optional",completed:"completed",hasError:"hasError"},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[Zn],ngContentSelectors:xq,decls:1,vars:0,template:function(r,o){1&r&&(Bn(),ze(0,bq,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),t})(),UC=(()=>{const e=class{get linear(){return this._linear}set linear(i){this._linear=Di(i)}get selectedIndex(){return this._selectedIndex}set selectedIndex(i){const r=op(i);this.steps&&this._steps?(this._isValidIndex(r),this.selected?._markAsInteracted(),this._selectedIndex!==r&&!this._anyControlsInvalidOrPending(r)&&(r>=this._selectedIndex||this.steps.toArray()[r].editable)&&this._updateSelectedItemIndex(r)):this._selectedIndex=r}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(i){this.selectedIndex=i&&this.steps?this.steps.toArray().indexOf(i):-1}get orientation(){return this._orientation}set orientation(i){this._orientation=i,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===i)}constructor(i,r,o){this._dir=i,this._changeDetectorRef=r,this._elementRef=o,this._destroyed=new Ct,this.steps=new Jl,this._sortedHeaders=new Jl,this._linear=!1,this._selectedIndex=0,this.selectionChange=new fi,this._orientation="horizontal",this._groupId=wq++}ngAfterContentInit(){this._steps.changes.pipe(_s(this._steps),un(this._destroyed)).subscribe(i=>{this.steps.reset(i.filter(r=>r._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(_s(this._stepHeader),un(this._destroyed)).subscribe(i=>{this._sortedHeaders.reset(i.toArray().sort((r,o)=>r._elementRef.nativeElement.compareDocumentPosition(o._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new Qv(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:bt()).pipe(_s(this._layoutDirection()),un(this._destroyed)).subscribe(i=>this._keyManager.withHorizontalOrientation(i)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(i=>i.reset()),this._stateChanged()}_getStepLabelId(i){return`cdk-step-label-${this._groupId}-${i}`}_getStepContentId(i){return`cdk-step-content-${this._groupId}-${i}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(i){const r=i-this._selectedIndex;return r<0?"rtl"===this._layoutDirection()?"next":"previous":r>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(i,r="number"){const o=this.steps.toArray()[i],c=this._isCurrentStep(i);return o._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(o,c):this._getGuidelineLogic(o,c,r)}_getDefaultIndicatorLogic(i,r){return i._showError()&&i.hasError&&!r?"error":!i.completed||r?"number":i.editable?"edit":"done"}_getGuidelineLogic(i,r,o="number"){return i._showError()&&i.hasError&&!r?"error":i.completed&&!r?"done":i.completed&&r?o:i.editable&&r?"edit":o}_isCurrentStep(i){return this._selectedIndex===i}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(i){const r=this.steps.toArray();this.selectionChange.emit({selectedIndex:i,previouslySelectedIndex:this._selectedIndex,selectedStep:r[i],previouslySelectedStep:r[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(i):this._keyManager.updateActiveItem(i),this._selectedIndex=i,this._stateChanged()}_onKeydown(i){const r=au(i),o=i.keyCode,c=this._keyManager;null==c.activeItemIndex||r||32!==o&&13!==o?c.setFocusOrigin("keyboard").onKeydown(i):(this.selectedIndex=c.activeItemIndex,i.preventDefault())}_anyControlsInvalidOrPending(i){return!!(this._linear&&i>=0)&&this.steps.toArray().slice(0,i).some(r=>{const o=r.stepControl;return(o?o.invalid||o.pending||!r.interacted:!r.completed)&&!r.optional&&!r._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const i=this._elementRef.nativeElement,r=Hg();return i===r||i.contains(r)}_isValidIndex(i){return i>-1&&(!this.steps||i<this.steps.length)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(cc,8),G(bo),G(St))},e.\u0275dir=Fe({type:e,selectors:[["","cdkStepper",""]],contentQueries:function(r,o,c){if(1&r&&(gi(c,VC,5),gi(c,aP,5)),2&r){let h;Dt(h=Et())&&(o._steps=h),Dt(h=Et())&&(o._stepHeader=h)}},inputs:{linear:"linear",selectedIndex:"selectedIndex",selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange"},exportAs:["cdkStepper"]}),t})(),Cq=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[ap]}),t})();function Dq(t,e){if(1&t&&Yo(0,8),2&t){const n=Ge();ue("ngTemplateOutlet",n.iconOverrides[n.state])("ngTemplateOutletContext",n._getIconContext())}}function Eq(t,e){if(1&t&&(Y(0,"span",13),ye(1),X()),2&t){const n=Ge(2);se(1),Bi(n._getDefaultTextForState(n.state))}}function Sq(t,e){if(1&t&&(Y(0,"span",14),ye(1),X()),2&t){const n=Ge(2);se(1),Bi(n._intl.completedLabel)}}function Mq(t,e){if(1&t&&(Y(0,"span",14),ye(1),X()),2&t){const n=Ge(2);se(1),Bi(n._intl.editableLabel)}}function kq(t,e){if(1&t&&(Y(0,"mat-icon",13),ye(1),X()),2&t){const n=Ge(2);se(1),Bi(n._getDefaultTextForState(n.state))}}function Tq(t,e){if(1&t&&(Wo(0,9),ze(1,Eq,2,1,"span",10),ze(2,Sq,2,1,"span",11),ze(3,Mq,2,1,"span",11),ze(4,kq,2,1,"mat-icon",12),Zo()),2&t){const n=Ge();ue("ngSwitch",n.state),se(1),ue("ngSwitchCase","number"),se(1),ue("ngIf","done"===n.state),se(1),ue("ngIf","edit"===n.state)}}function Iq(t,e){if(1&t&&(Y(0,"div",15),Yo(1,16),X()),2&t){const n=Ge();se(1),ue("ngTemplateOutlet",n._templateLabel().template)}}function Aq(t,e){if(1&t&&(Y(0,"div",15),ye(1),X()),2&t){const n=Ge();se(1),Bi(n.label)}}function Rq(t,e){if(1&t&&(Y(0,"div",17),ye(1),X()),2&t){const n=Ge();se(1),Bi(n._intl.optionalLabel)}}function Pq(t,e){if(1&t&&(Y(0,"div",18),ye(1),X()),2&t){const n=Ge();se(1),Bi(n.errorMessage)}}function Oq(t,e){}function Fq(t,e){if(1&t&&(Lt(0),ze(1,Oq,0,0,"ng-template",0)),2&t){const n=Ge();se(1),ue("cdkPortalOutlet",n._portal)}}const Lq=["*"];function Nq(t,e){1&t&&Ot(0,"div",11)}const dP=function(t,e){return{step:t,i:e}};function Bq(t,e){if(1&t&&(Wo(0),Yo(1,9),ze(2,Nq,1,0,"div",10),Zo()),2&t){const n=e.$implicit,i=e.index,r=e.last;Ge(2);const o=Nr(4);se(1),ue("ngTemplateOutlet",o)("ngTemplateOutletContext",ch(3,dP,n,i)),se(1),ue("ngIf",!r)}}const uP=function(t){return{animationDuration:t}},hP=function(t,e){return{value:t,params:e}};function zq(t,e){if(1&t){const n=Br();Y(0,"div",12),Ue("@horizontalStepTransition.done",function(r){return Wt(n),Zt(Ge(2)._animationDone.next(r))}),Yo(1,13),X()}if(2&t){const n=e.$implicit,i=e.index,r=Ge(2);pi("mat-horizontal-stepper-content-inactive",r.selectedIndex!==i),ue("@horizontalStepTransition",ch(8,hP,r._getAnimationDirection(i),Ix(6,uP,r._getAnimationDuration())))("id",r._getStepContentId(i)),vi("aria-labelledby",r._getStepLabelId(i)),se(1),ue("ngTemplateOutlet",n.content)}}function Vq(t,e){if(1&t&&(Y(0,"div",4)(1,"div",5),ze(2,Bq,3,6,"ng-container",6),X(),Y(3,"div",7),ze(4,zq,2,11,"div",8),X()()),2&t){const n=Ge();se(2),ue("ngForOf",n.steps),se(2),ue("ngForOf",n.steps)}}function Uq(t,e){if(1&t){const n=Br();Y(0,"div",15),Yo(1,9),Y(2,"div",16)(3,"div",17),Ue("@verticalStepTransition.done",function(r){return Wt(n),Zt(Ge(2)._animationDone.next(r))}),Y(4,"div",18),Yo(5,13),X()()()()}if(2&t){const n=e.$implicit,i=e.index,r=e.last,o=Ge(2),c=Nr(4);se(1),ue("ngTemplateOutlet",c)("ngTemplateOutletContext",ch(10,dP,n,i)),se(1),pi("mat-stepper-vertical-line",!r),se(1),pi("mat-vertical-stepper-content-inactive",o.selectedIndex!==i),ue("@verticalStepTransition",ch(15,hP,o._getAnimationDirection(i),Ix(13,uP,o._getAnimationDuration())))("id",o._getStepContentId(i)),vi("aria-labelledby",o._getStepLabelId(i)),se(2),ue("ngTemplateOutlet",n.content)}}function jq(t,e){if(1&t&&(Wo(0),ze(1,Uq,6,18,"div",14),Zo()),2&t){const n=Ge();se(1),ue("ngForOf",n.steps)}}function Hq(t,e){if(1&t){const n=Br();Y(0,"mat-step-header",19),Ue("click",function(){return Zt(Wt(n).step.select())})("keydown",function(r){return Wt(n),Zt(Ge()._onKeydown(r))}),X()}if(2&t){const n=e.step,i=e.i,r=Ge();pi("mat-horizontal-stepper-header","horizontal"===r.orientation)("mat-vertical-stepper-header","vertical"===r.orientation),ue("tabIndex",r._getFocusIndex()===i?0:-1)("id",r._getStepLabelId(i))("index",i)("state",r._getIndicatorType(i,n.state))("label",n.stepLabel||n.label)("selected",r.selectedIndex===i)("active",r._stepIsNavigable(i,n))("optional",n.optional)("errorMessage",n.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple||!r._stepIsNavigable(i,n))("color",n.color||r.color),vi("aria-posinset",i+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(i))("aria-selected",r.selectedIndex==i)("aria-label",n.ariaLabel||null)("aria-labelledby",!n.ariaLabel&&n.ariaLabelledby?n.ariaLabelledby:null)("aria-disabled",!r._stepIsNavigable(i,n)||null)}}let jC=(()=>{const e=class extends lP{};let t=e;return e.\u0275fac=function(){let i;return function(o){return(i||(i=li(e)))(o||e)}}(),e.\u0275dir=Fe({type:e,selectors:[["","matStepLabel",""]],features:[ot]}),t})(),_b=(()=>{const e=class{constructor(){this.changes=new Ct,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const Gq={provide:_b,deps:[[new Jr,new cl,_b]],useFactory:function $q(t){return t||new _b}},qq=qg(class extends aP{constructor(e){super(e)}},"primary");let mP=(()=>{const e=class extends qq{constructor(i,r,o,c){super(o),this._intl=i,this._focusMonitor=r,this._intlSubscription=i.changes.subscribe(()=>c.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(i,r){i?this._focusMonitor.focusVia(this._elementRef,i,r):this._elementRef.nativeElement.focus(r)}_stringLabel(){return this.label instanceof jC?null:this.label}_templateLabel(){return this.label instanceof jC?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(i){return"number"==i?`${this.index+1}`:"edit"==i?"create":"error"==i?"warning":i}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(_b),G(sd),G(St),G(bo))},e.\u0275cmp=Mt({type:e,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],inputs:{color:"color",state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple"},features:[ot],decls:10,vars:19,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"mat-step-label"],["class","mat-step-text-label",4,"ngIf"],["class","mat-step-optional",4,"ngIf"],["class","mat-step-sub-label-error",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],["aria-hidden","true",4,"ngSwitchCase"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true",4,"ngSwitchDefault"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[1,"mat-step-text-label"],[3,"ngTemplateOutlet"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(r,o){1&r&&(Ot(0,"div",0),Y(1,"div")(2,"div",1),ze(3,Dq,1,2,"ng-container",2),ze(4,Tq,5,4,"ng-container",3),X()(),Y(5,"div",4),ze(6,Iq,2,1,"div",5),ze(7,Aq,2,1,"div",5),ze(8,Rq,2,1,"div",6),ze(9,Pq,2,1,"div",7),X()),2&r&&(ue("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disableRipple),se(1),function TS(t,e,n){ml(go,Ql,Sm(He(),t,e,n),!0)}("mat-step-icon-state-",o.state," mat-step-icon"),pi("mat-step-icon-selected",o.selected),se(1),ue("ngSwitch",!(!o.iconOverrides||!o.iconOverrides[o.state])),se(1),ue("ngSwitchCase",!0),se(2),pi("mat-step-label-active",o.active)("mat-step-label-selected",o.selected)("mat-step-label-error","error"==o.state),se(1),ue("ngIf",o._templateLabel()),se(1),ue("ngIf",o._stringLabel()),se(1),ue("ngIf",o.optional&&"error"!=o.state),se(1),ue("ngIf","error"==o.state))},dependencies:[oo,dg,hh,cg,oT,SC,Ih],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,changeDetection:0}),t})();const gP={horizontalStepTransition:Po("horizontalStepTransition",[fn("previous",Jt({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),fn("current",Jt({transform:"none",visibility:"inherit"})),fn("next",Jt({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),Sn("* => *",zn("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),{params:{animationDuration:"500ms"}})]),verticalStepTransition:Po("verticalStepTransition",[fn("previous",Jt({height:"0px",visibility:"hidden"})),fn("next",Jt({height:"0px",visibility:"hidden"})),fn("current",Jt({height:"*",visibility:"inherit"})),Sn("* <=> current",zn("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),{params:{animationDuration:"225ms"}})])};let Wq=(()=>{const e=class{constructor(i){this.templateRef=i}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Kn))},e.\u0275dir=Fe({type:e,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:["matStepperIcon","name"]}}),t})(),Zq=(()=>{const e=class{constructor(i){this._template=i}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Kn))},e.\u0275dir=Fe({type:e,selectors:[["ng-template","matStepContent",""]]}),t})(),_P=(()=>{const e=class extends VC{constructor(i,r,o,c){super(i,c),this._errorStateMatcher=r,this._viewContainerRef=o,this._isSelected=zi.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(Sr(()=>this._stepper.selectionChange.pipe(Gt(i=>i.selectedStep===this),_s(this._stepper.selected===this)))).subscribe(i=>{i&&this._lazyContent&&!this._portal&&(this._portal=new ab(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(i,r){return this._errorStateMatcher.isErrorState(i,r)||!!(i&&i.invalid&&this.interacted)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Vi(()=>yP)),G(lp,4),G(no),G(cP,8))},e.\u0275cmp=Mt({type:e,selectors:[["mat-step"]],contentQueries:function(r,o,c){if(1&r&&(gi(c,jC,5),gi(c,Zq,5)),2&r){let h;Dt(h=Et())&&(o.stepLabel=h.first),Dt(h=Et())&&(o._lazyContent=h.first)}},inputs:{color:"color"},exportAs:["matStep"],features:[Ft([{provide:lp,useExisting:e},{provide:VC,useExisting:e}]),ot],ngContentSelectors:Lq,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(r,o){1&r&&(Bn(),ze(0,Fq,2,1,"ng-template"))},dependencies:[lb],encapsulation:2,changeDetection:0}),t})(),yP=(()=>{const e=class extends UC{get animationDuration(){return this._animationDuration}set animationDuration(i){this._animationDuration=/^\d+$/.test(i)?i+"ms":i}constructor(i,r,o){super(i,r,o),this._stepHeader=void 0,this._steps=void 0,this.steps=new Jl,this.animationDone=new fi,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new Ct,this._animationDuration="";const c=o.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===c?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:i,templateRef:r})=>this._iconOverrides[i]=r),this.steps.changes.pipe(un(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(Ks((i,r)=>i.fromState===r.fromState&&i.toState===r.toState),un(this._destroyed)).subscribe(i=>{"current"===i.toState&&this.animationDone.emit()})}_stepIsNavigable(i,r){return r.completed||this.selectedIndex===i||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:"horizontal"===this.orientation?"500ms":"225ms"}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(cc,8),G(bo),G(St))},e.\u0275cmp=Mt({type:e,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(r,o,c){if(1&r&&(gi(c,_P,5),gi(c,Wq,5)),2&r){let h;Dt(h=Et())&&(o._steps=h),Dt(h=Et())&&(o._icons=h)}},viewQuery:function(r,o){if(1&r&&cr(mP,5),2&r){let c;Dt(c=Et())&&(o._stepHeader=c)}},hostAttrs:["role","tablist","ngSkipHydration",""],hostVars:11,hostBindings:function(r,o){2&r&&(vi("aria-orientation",o.orientation),pi("mat-stepper-horizontal","horizontal"===o.orientation)("mat-stepper-vertical","vertical"===o.orientation)("mat-stepper-label-position-end","horizontal"===o.orientation&&"end"==o.labelPosition)("mat-stepper-label-position-bottom","horizontal"===o.orientation&&"bottom"==o.labelPosition)("mat-stepper-header-position-bottom","bottom"===o.headerPosition))},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[Ft([{provide:UC,useExisting:e}]),ot],decls:5,vars:3,consts:[[3,"ngSwitch"],["class","mat-horizontal-stepper-wrapper",4,"ngSwitchCase"],[4,"ngSwitchCase"],["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[4,"ngFor","ngForOf"],[1,"mat-horizontal-content-container"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id","mat-horizontal-stepper-content-inactive",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mat-stepper-horizontal-line",4,"ngIf"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],["class","mat-step",4,"ngFor","ngForOf"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color","click","keydown"]],template:function(r,o){1&r&&(Wo(0,0),ze(1,Vq,5,2,"div",1),ze(2,jq,2,1,"ng-container",2),Zo(),ze(3,Hq,1,23,"ng-template",null,3,ec)),2&r&&(ue("ngSwitch",o.orientation),se(1),ue("ngSwitchCase","horizontal"),se(1),ue("ngSwitchCase","vertical"))},dependencies:[gl,oo,dg,hh,cg,mP],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[gP.horizontalStepTransition,gP.verticalStepTransition]},changeDetection:0}),t})(),Yq=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[Gq,lp],imports:[Ei,fs,up,Cq,TR,dp,Ei]}),t})(),HC=(()=>{const e=class{constructor(i){this.el=i,this.parallaxRatio=.4,this.initialY=0,this.initialY=this.el.nativeElement.offsetTop,this.apply()}onScroll(){this.apply()}apply(){const i=window.scrollY,r=Math.round(i*this.parallaxRatio);this.el.nativeElement.style.transform=`translate3d(0, ${r}px, 0)`}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St))},e.\u0275dir=Fe({type:e,selectors:[["","ebParallax",""]],hostBindings:function(r,o){1&r&&Ue("scroll",function(){return o.onScroll()},0,QD)},inputs:{parallaxRatio:"parallaxRatio"}}),t})();function Xq(t,e){1&t&&(Y(0,"mat-error"),ye(1,"Nom requis"),X())}function Kq(t,e){1&t&&(Y(0,"mat-error"),ye(1,"Pr\xe9nom requis"),X())}function Qq(t,e){1&t&&(Y(0,"mat-error"),ye(1,"Pseudo requis"),X())}function Jq(t,e){1&t&&(Y(0,"mat-error"),ye(1,"Email valide requis"),X())}function e7(t,e){1&t&&(Y(0,"mat-error"),ye(1,"6 caract\xe8res minimum"),X())}function t7(t,e){if(1&t&&(Y(0,"div",32),ye(1),X()),2&t){const n=Ge();se(1),Bi(n.error)}}let n7=(()=>{const e=class{constructor(i,r,o){this.api=i,this.router=r,this.fb=o,this.submitting=!1,this.error=null}ngOnInit(){this.step1=this.fb.group({nom:["",[$a.required,$a.minLength(2)]],prenom:["",[$a.required,$a.minLength(2)]],dateNaissance:[null]}),this.step2=this.fb.group({pseudo:["",[$a.required,$a.minLength(3)]],adresseMail:["",[$a.required,$a.email]],motDePasse:["",[$a.required,$a.minLength(6)]]}),this.step3=this.fb.group({vehicule:[""],iban:[""]})}register(){this.step1.invalid||this.step2.invalid||this.step3.invalid?this.error="Veuillez compl\xe9ter les champs requis.":(this.submitting=!0,this.error=null,this.api.create("auth/register",{adresseMail:this.step2.value.adresseMail,motDePasse:this.step2.value.motDePasse,nomUtilisateur:this.step1.value.nom,prenom:this.step1.value.prenom,pseudo:this.step2.value.pseudo,dateNaissance:this.step1.value.dateNaissance,vehicule:this.step3.value.vehicule,iban:this.step3.value.iban}).subscribe({next:()=>{this.submitting=!1,this.router.navigateByUrl("/connexion")},error:r=>{console.error("inscription error",r),this.submitting=!1,this.error="Erreur lors de l'inscription"}}))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(Gn),G($U))},e.\u0275cmp=Mt({type:e,selectors:[["inscription"]],decls:71,vars:16,consts:[[1,"min-h-screen","flex","flex-col","md:flex-row","bg-[#0B0F18]"],[1,"relative","md:w-1/2","h-72","md:h-auto","overflow-hidden"],["ebParallax","",1,"absolute","inset-0","hero-bg",2,"background-image","url('https://images.unsplash.com/photo-1535223289827-42f1e9919769?auto=format&fit=crop&w=1600&q=80')"],[1,"hero-overlay"],[1,"absolute","inset-0","flex","flex-col","justify-center","px-8","text-center","md:text-left"],[1,"text-4xl","md:text-5xl","font-poppins","font-bold","mb-6","glow-text"],[1,"text-white/70","text-lg","max-w-md"],[1,"flex-1","flex","items-center","justify-center","py-14","px-6"],[1,"w-full","max-w-2xl","glass-card"],["stepper",""],["label","Identit\xe9",3,"stepControl"],[1,"grid","md:grid-cols-2","gap-4","mt-4",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","nom","required",""],[4,"ngIf"],["matInput","","formControlName","prenom","required",""],["appearance","outline",1,"md:col-span-2"],["matInput","","type","date","formControlName","dateNaissance"],[1,"md:col-span-2","flex","justify-end"],["mat-raised-button","","color","primary",3,"disabled","click"],["label","Compte",3,"stepControl"],["matInput","","formControlName","pseudo","required",""],["matInput","","formControlName","adresseMail","required","","type","email"],["matInput","","formControlName","motDePasse","required","","type","password"],[1,"md:col-span-2","flex","justify-between"],["mat-stroked-button","",3,"click"],["label","Finalisation",3,"stepControl"],["matInput","","formControlName","vehicule"],["matInput","","formControlName","iban"],[1,"md:col-span-2","flex","justify-between","items-center"],["mat-raised-button","","color","primary",1,"hero-cta",3,"disabled","click"],["class","text-red-400 text-sm md:col-span-2",4,"ngIf"],[1,"text-red-400","text-sm","md:col-span-2"]],template:function(r,o){if(1&r){const c=Br();Y(0,"div",0)(1,"div",1),Ot(2,"div",2)(3,"div",3),Y(4,"div",4)(5,"h1",5),ye(6,"Cr\xe9ez votre compte"),X(),Y(7,"p",6),ye(8,"G\xe9rez bornes, r\xe9servations et m\xe9dias dans une interface futuriste."),X()()(),Y(9,"div",7)(10,"mat-card",8)(11,"mat-card-content")(12,"mat-horizontal-stepper",null,9)(14,"mat-step",10)(15,"form",11)(16,"mat-form-field",12)(17,"mat-label"),ye(18,"Nom"),X(),Ot(19,"input",13),ze(20,Xq,2,0,"mat-error",14),X(),Y(21,"mat-form-field",12)(22,"mat-label"),ye(23,"Pr\xe9nom"),X(),Ot(24,"input",15),ze(25,Kq,2,0,"mat-error",14),X(),Y(26,"mat-form-field",16)(27,"mat-label"),ye(28,"Date de naissance"),X(),Ot(29,"input",17),X(),Y(30,"div",18)(31,"button",19),Ue("click",function(){return Wt(c),Zt(Nr(13).next())}),ye(32,"Suivant"),X()()()(),Y(33,"mat-step",20)(34,"form",11)(35,"mat-form-field",12)(36,"mat-label"),ye(37,"Pseudo"),X(),Ot(38,"input",21),ze(39,Qq,2,0,"mat-error",14),X(),Y(40,"mat-form-field",12)(41,"mat-label"),ye(42,"Email"),X(),Ot(43,"input",22),ze(44,Jq,2,0,"mat-error",14),X(),Y(45,"mat-form-field",16)(46,"mat-label"),ye(47,"Mot de passe"),X(),Ot(48,"input",23),ze(49,e7,2,0,"mat-error",14),X(),Y(50,"div",24)(51,"button",25),Ue("click",function(){return Wt(c),Zt(Nr(13).previous())}),ye(52,"Retour"),X(),Y(53,"button",19),Ue("click",function(){return Wt(c),Zt(Nr(13).next())}),ye(54,"Suivant"),X()()()(),Y(55,"mat-step",26)(56,"form",11)(57,"mat-form-field",12)(58,"mat-label"),ye(59,"V\xe9hicule"),X(),Ot(60,"input",27),X(),Y(61,"mat-form-field",12)(62,"mat-label"),ye(63,"IBAN"),X(),Ot(64,"input",28),X(),Y(65,"div",29)(66,"button",25),Ue("click",function(){return Wt(c),Zt(Nr(13).previous())}),ye(67,"Retour"),X(),Y(68,"button",30),Ue("click",function(){return o.register()}),ye(69),X()(),ze(70,t7,2,1,"div",31),X()()()()()()()}if(2&r){let c,h,g,C,S;se(14),ue("stepControl",o.step1),se(1),ue("formGroup",o.step1),se(5),ue("ngIf",null==(c=o.step1.get("nom"))?null:c.invalid),se(5),ue("ngIf",null==(h=o.step1.get("prenom"))?null:h.invalid),se(6),ue("disabled",o.step1.invalid),se(2),ue("stepControl",o.step2),se(1),ue("formGroup",o.step2),se(5),ue("ngIf",null==(g=o.step2.get("pseudo"))?null:g.invalid),se(5),ue("ngIf",null==(C=o.step2.get("adresseMail"))?null:C.invalid),se(5),ue("ngIf",null==(S=o.step2.get("motDePasse"))?null:S.invalid),se(4),ue("disabled",o.step2.invalid),se(2),ue("stepControl",o.step3),se(1),ue("formGroup",o.step3),se(12),ue("disabled",o.submitting||o.step3.invalid),se(1),Bi(o.submitting?"Cr\xe9ation\u2026":"Cr\xe9er le compte"),se(1),ue("ngIf",o.error)}},dependencies:[oo,vh,nc,Jc,_h,qm,$m,S1,tb,oP,rP,hb,Q9,fb,gb,_P,yP,HC],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function r7(t,e){if(1&t&&(Y(0,"div",16),ye(1),X()),2&t){const n=Ge();se(1),Bi(n.error)}}let o7=(()=>{const e=class{constructor(i,r){this.api=i,this.router=r,this.model={},this.error=null}login(){this.api.create("auth/login",{pseudo:this.model.pseudo||this.model.adresseMail||"",motDePasse:this.model.motDePasse}).subscribe(o=>{o&&o.token?(localStorage.setItem("token",o.token),this.error=null,this.router.navigateByUrl("/")):this.error="R\xe9ponse inattendue du serveur"},o=>{this.error="Identifiants invalides",console.error("login error",o)})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(Gn))},e.\u0275cmp=Mt({type:e,selectors:[["connexion"]],decls:28,vars:3,consts:[[1,"min-h-screen","flex","flex-col","md:flex-row"],[1,"relative","md:w-1/2","h-64","md:h-auto","overflow-hidden"],["ebParallax","",1,"absolute","inset-0","hero-bg",2,"background-image","url('https://images.unsplash.com/photo-1617814076391-41429c3a2600?auto=format&fit=crop&w=1600&q=80')"],[1,"hero-overlay"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","text-center","px-6"],[1,"text-4xl","md:text-5xl","font-bold","font-poppins","glow-text","mb-4"],[1,"text-white/80","max-w-md","text-sm","md:text-base"],[1,"flex-1","flex","items-center","justify-center","py-10","px-6","bg-[#0B0F18]","bg-grid-overlay","relative"],[1,"w-full","max-w-md","glass-card","animate-float"],[1,"space-y-4",3,"ngSubmit"],["appearance","outline",1,"w-full"],["matInput","","name","pseudo","required","","autocomplete","username",3,"ngModel","ngModelChange"],["matSuffix",""],["matInput","","name","motDePasse","required","","type","password","autocomplete","current-password",3,"ngModel","ngModelChange"],["class","text-red-400 text-xs",4,"ngIf"],["mat-raised-button","","color","primary",1,"w-full","hero-cta"],[1,"text-red-400","text-xs"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1),Ot(2,"div",2)(3,"div",3),Y(4,"div",4)(5,"h1",5),ye(6,"Connexion"),X(),Y(7,"p",6),ye(8,"Acc\xe9dez \xe0 votre espace de gestion des bornes et r\xe9servations."),X()()(),Y(9,"div",7)(10,"mat-card",8)(11,"mat-card-content")(12,"form",9),Ue("ngSubmit",function(){return o.login()}),Y(13,"mat-form-field",10)(14,"mat-label"),ye(15,"Pseudo ou Email"),X(),Y(16,"input",11),Ue("ngModelChange",function(h){return o.model.pseudo=h}),X(),Y(17,"mat-icon",12),ye(18,"person"),X()(),Y(19,"mat-form-field",10)(20,"mat-label"),ye(21,"Mot de passe"),X(),Y(22,"input",13),Ue("ngModelChange",function(h){return o.model.motDePasse=h}),X(),Y(23,"mat-icon",12),ye(24,"lock"),X()(),ze(25,r7,2,1,"div",14),Y(26,"button",15),ye(27,"Se connecter"),X()()()()()()),2&r&&(se(16),ue("ngModel",o.model.pseudo),se(6),ue("ngModel",o.model.motDePasse),se(3),ue("ngIf",o.error))},dependencies:[oo,vh,nc,Jc,_h,qm,ed,oc,tb,oP,rP,hb,tq,fb,gb,SC,HC],styles:["[_nghost-%COMP%]{display:block}"]}),t})(),s7=(()=>{const e=class{constructor(i){this.router=i}ngOnInit(){localStorage.removeItem("token"),this.router.navigateByUrl("/")}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(Gn))},e.\u0275cmp=Mt({type:e,selectors:[["deconnexion"]],decls:2,vars:0,template:function(r,o){1&r&&(Y(0,"p"),ye(1,"deconnexion works!"),X())},styles:["[_nghost-%COMP%]{display:block}"]}),t})();function a7(t,e){1&t&&Ot(0,"div",7),2&t&&Wd("background-image","url("+Ge().background+")")}function l7(t,e){if(1&t&&(Y(0,"a",11),ye(1),X()),2&t){const n=Ge(2);ue("routerLink",n.ctaRouterLink),se(1),Bi(n.ctaLabel)}}function c7(t,e){if(1&t&&(Y(0,"button",12),ye(1),X()),2&t){const n=Ge(2);se(1),Bi(n.ctaLabel)}}function d7(t,e){if(1&t&&(Y(0,"div",8),ze(1,l7,2,2,"a",9),ze(2,c7,2,1,"button",10),X()),2&t){const n=Ge();se(1),ue("ngIf",n.ctaRouterLink),se(1),ue("ngIf",!n.ctaRouterLink)}}let u7=(()=>{const e=class{constructor(){this.title="",this.subtitle="",this.background="",this.height="md",this.overlayStrength="normal"}get heroClasses(){return{"hero-base":!0,"min-h-[40vh]":"sm"===this.height,"min-h-[60vh]":"md"===this.height,"min-h-[80vh]":"lg"===this.height}}get overlayClass(){switch(this.overlayStrength){case"light":return"hero-overlay opacity-60";case"strong":return"hero-overlay opacity-95";default:return"hero-overlay opacity-80"}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Mt({type:e,selectors:[["eb-hero"]],inputs:{title:"title",subtitle:"subtitle",background:"background",height:"height",ctaLabel:"ctaLabel",ctaRouterLink:"ctaRouterLink",overlayStrength:"overlayStrength"},decls:8,vars:7,consts:[[1,"relative","parallax-container",3,"ngClass"],["ebParallax","","class","hero-bg",3,"background-image",4,"ngIf"],[1,"hero-content"],[1,"text-4xl","md:text-6xl","font-poppins","font-extrabold","mb-6","glow-text",3,"innerHTML"],[1,"text-white/70","text-lg","md:text-xl","max-w-3xl","mx-auto","mb-8",3,"innerHTML"],["class","flex justify-center",4,"ngIf"],["aria-hidden","true",1,"absolute","inset-0","pointer-events-none","select-none"],["ebParallax","",1,"hero-bg"],[1,"flex","justify-center"],["mat-raised-button","","color","primary","class","hero-cta neon-btn",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","primary","class","hero-cta neon-btn",4,"ngIf"],["mat-raised-button","","color","primary",1,"hero-cta","neon-btn",3,"routerLink"],["mat-raised-button","","color","primary",1,"hero-cta","neon-btn"]],template:function(r,o){1&r&&(Y(0,"section",0),ze(1,a7,1,2,"div",1),Ot(2,"div"),Y(3,"div",2),Ot(4,"h1",3)(5,"p",4),ze(6,d7,3,2,"div",5),X(),Ot(7,"div",6),X()),2&r&&(ue("ngClass",o.heroClasses),se(1),ue("ngIf",o.background),se(1),function gS(t){ml(JL,Ql,t,!0)}(o.overlayClass),se(2),ue("innerHTML",o.title,C0),se(1),ue("innerHTML",o.subtitle,C0),se(1),ue("ngIf",o.ctaLabel))},dependencies:[lg,oo,DC,tb,ou,HC],styles:["[_nghost-%COMP%]{display:block}h1[_ngcontent-%COMP%]{line-height:1.05}section[_ngcontent-%COMP%]{position:relative}"],changeDetection:0}),t})(),h7=(()=>{const e=class{constructor(i){this.el=i,this.revealAnimation="fade-up",this.revealDelay=0,this.threshold=.2}ngOnInit(){const i=this.el.nativeElement;switch(i.style.opacity="0",i.style.transition="all .9s cubic-bezier(.25,.8,.25,1)",this.revealAnimation){case"slide-left":i.style.transform="translateX(40px)";break;case"slide-right":i.style.transform="translateX(-40px)";break;case"fade-up":i.style.transform="translateY(40px)";break;default:i.style.transform="translateY(12px)"}this.observer=new IntersectionObserver(r=>{r.forEach(o=>{o.isIntersecting&&(setTimeout(()=>{i.style.opacity="1",i.style.transform="translateX(0) translateY(0)"},this.revealDelay),this.observer?.disconnect())})},{threshold:this.threshold}),this.observer.observe(i)}ngOnDestroy(){this.observer?.disconnect()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St))},e.\u0275dir=Fe({type:e,selectors:[["","ebReveal",""]],inputs:{revealAnimation:"revealAnimation",revealDelay:"revealDelay",threshold:"threshold"}}),t})();const m7=function(t,e){return{"bg-green-500/20 text-green-300":t,"bg-red-500/20 text-red-300":e}};function p7(t,e){if(1&t&&(Y(0,"div",24)(1,"div")(2,"div",25),ye(3),X(),Y(4,"div",26),ye(5),X()(),Y(6,"div",27),ye(7),X()()),2&t){const n=e.$implicit;se(3),Bi(n.nomBorne||n.nom),se(2),Bi((null==n.lieu?null:n.lieu.instructions)||"\u2014"),se(1),ue("ngClass",ch(4,m7,!n.occupee,n.occupee||!1)),se(1),Bi(n.etat||(n.occupee?"Occup\xe9e":"Libre"))}}function f7(t,e){1&t&&(Y(0,"div",28),ye(1,"Aucune borne trouv\xe9e."),X())}function g7(t,e){if(1&t&&(Y(0,"div",29)(1,"div")(2,"div",25),ye(3),X(),Y(4,"div",26),ye(5),Bm(6,"date"),Bm(7,"date"),X()(),Y(8,"div",30),ye(9),X()()),2&t){const n=e.$implicit;se(3),Bi((null==n.borne?null:n.borne.nomBorne)||(null==n.borne?null:n.borne.nom)||"Borne #"+((null==n.borne?null:n.borne.id)||n.idBorne)),se(2),Yf("",ky(6,4,n.dateDebut,"short")," \u2192 ",ky(7,7,n.dateFin,"short"),""),se(4),Bi(n.etat||"\u2014")}}function _7(t,e){1&t&&(Y(0,"div",28),ye(1,"Aucune r\xe9servation."),X())}const y7=function(){return[]};let v7=(()=>{const e=class{constructor(i,r){this.api=i,this.auth=r,this.bornes=[],this.reservations=[],this.pseudo=null,this.bornesByUser=[],this.activeReservationsCount=0,this.userCount=0,this.loading=!0}ngOnInit(){this.pseudo=this.auth.getPseudoFromToken(),this.api.list("bornes/mine").subscribe(i=>{this.bornes=i||[],this.bornesByUser=this.bornes},()=>{this.bornes=[],this.bornesByUser=[]}),this.api.list("reservations/mine").subscribe(i=>{this.reservations=i||[];const r=(new Date).getTime();this.activeReservationsCount=(this.reservations||[]).filter(c=>{try{const h=(c.etat||"").toLowerCase();if("active"===h||"en_cours"===h||h.includes("confirm"))return!0;const g=c.dateDebut?new Date(c.dateDebut).getTime():null,C=c.dateFin?new Date(c.dateFin).getTime():null;return!!(g&&C&&(r>=g&&r<=C||g>r&&g-r<=18e5))}catch{return!1}}).length,this.loading=!1},()=>{this.reservations=[],this.activeReservationsCount=0,this.loading=!1})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(rd))},e.\u0275cmp=Mt({type:e,selectors:[["tableau-de-bord"]],decls:55,vars:18,consts:[[1,"min-h-screen","flex","flex-col","bg-[#0B0F18]"],["title","<span>Tableau de bord</span>","subtitle","Vue d'ensemble dynamique de vos bornes & r\xe9servations.","background","https://images.unsplash.com/photo-1616769366215-8bd0ae79f5d4?auto=format&fit=crop&w=1600&q=80","ctaLabel","Ajouter une borne","ctaRouterLink","/bornes/new","height","sm"],[1,"-mt-24","px-6","pb-20","relative","z-10"],[1,"grid","gap-6","md:grid-cols-3","mb-10"],["ebReveal","","revealAnimation","fade-up",1,"glass-card"],[1,"text-4xl","font-poppins","font-bold","text-cyan-300"],[1,"text-xs","text-white/60","mt-1"],["ebReveal","","revealAnimation","fade-up",1,"glass-card",3,"revealDelay"],[1,"text-lg","text-white/80"],[1,"text-xs","text-white/50","mt-1"],["ebReveal","","revealAnimation","slide-left",1,"mb-12"],[1,"text-xl","font-semibold","mb-4","font-poppins"],[1,"flex","flex-wrap","gap-3"],["mat-stroked-button","","color","primary","routerLink","/lieux"],["mat-stroked-button","","color","primary","routerLink","/bornes"],["mat-stroked-button","","color","primary","routerLink","/reservations"],[1,"grid","gap-8","md:grid-cols-2"],["ebReveal","","revealAnimation","fade-in",1,"glass-card"],[1,"!mb-2"],[1,"max-h-64","overflow-auto","thin-scroll","pr-2"],["class","flex justify-between items-center py-2 border-b border-white/5 last:border-none",4,"ngFor","ngForOf"],["class","text-white/50 text-sm py-4",4,"ngIf"],["ebReveal","","revealAnimation","fade-in",1,"glass-card",3,"revealDelay"],["class","py-2 border-b border-white/5 last:border-none flex justify-between gap-3",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","py-2","border-b","border-white/5","last:border-none"],[1,"text-sm"],[1,"text-[11px]","text-white/50"],[1,"text-xs","px-2","py-1","rounded-full",3,"ngClass"],[1,"text-white/50","text-sm","py-4"],[1,"py-2","border-b","border-white/5","last:border-none","flex","justify-between","gap-3"],[1,"text-xs","px-2","py-1","rounded-full","bg-cyan-500/20","text-cyan-300"]],template:function(r,o){1&r&&(Y(0,"div",0),Ot(1,"eb-hero",1),Y(2,"main",2)(3,"div",3)(4,"mat-card",4)(5,"mat-card-title"),ye(6,"Bornes cr\xe9\xe9es"),X(),Y(7,"mat-card-content")(8,"div",5),ye(9),X(),Y(10,"div",6),ye(11,"Associ\xe9es \xe0 votre compte"),X()()(),Y(12,"mat-card",7)(13,"mat-card-title"),ye(14,"R\xe9servations actives"),X(),Y(15,"mat-card-content")(16,"div",5),ye(17),X(),Y(18,"div",6),ye(19,"En cours ou imminentes"),X()()(),Y(20,"mat-card",7)(21,"mat-card-title"),ye(22,"Derni\xe8re mise \xe0 jour"),X(),Y(23,"mat-card-content")(24,"div",8),ye(25),Bm(26,"date"),X(),Y(27,"div",9),ye(28,"Horodatage r\xe9cent"),X()()()(),Y(29,"section",10)(30,"h2",11),ye(31,"Raccourcis"),X(),Y(32,"div",12)(33,"a",13),ye(34,"Lieux"),X(),Y(35,"a",14),ye(36,"Bornes"),X(),Y(37,"a",15),ye(38,"R\xe9servations"),X()()(),Y(39,"div",16)(40,"mat-card",17)(41,"mat-card-title",18),ye(42,"Bornes associ\xe9es"),X(),Y(43,"mat-card-content")(44,"div",19),ze(45,p7,8,7,"div",20),ze(46,f7,2,0,"div",21),X()()(),Y(47,"mat-card",22)(48,"mat-card-title",18),ye(49,"R\xe9servations r\xe9centes"),X(),Y(50,"mat-card-content")(51,"div",19),ze(52,g7,10,10,"div",23),Bm(53,"slice"),ze(54,_7,2,0,"div",21),X()()()()()()),2&r&&(se(9),Bi(o.bornesByUser.length),se(3),ue("revealDelay",120),se(5),Bi(o.activeReservationsCount),se(3),ue("revealDelay",240),se(5),Bi(ky(26,10,(null==o.reservations[0]?null:o.reservations[0].dateDebut)||(null==o.bornesByUser[0]?null:o.bornesByUser[0].dateCreation),"short")),se(20),ue("ngForOf",o.bornesByUser),se(1),ue("ngIf",0===o.bornesByUser.length),se(1),ue("revealDelay",120),se(5),ue("ngForOf",Ax(53,13,o.reservations,0,6)),se(2),ue("ngIf",0===(o.reservations||function CM(t,e,n){const i=Eo()+t,r=He();return r[i]===hi?Xl(r,i,n?e.call(n):e()):function Hf(t,e){return t[e]}(r,i)}(17,y7)).length))},dependencies:[lg,gl,oo,DC,fb,gb,sP,ou,u7,h7,Dw,aT],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function b7(t,e){if(1&t){const n=Br();Y(0,"div",12)(1,"form",13),Ue("ngSubmit",function(){return Wt(n),Zt(Ge().save())}),Y(2,"h3",14),ye(3),X(),Y(4,"div")(5,"label",15),ye(6,"Instructions"),X(),Y(7,"textarea",16),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.instructions=r)}),X()(),Y(8,"h5",17),ye(9,"Adresse"),X(),Y(10,"div",18)(11,"input",19),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.nomAdresse=r)}),X(),Y(12,"input",20),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.numeroEtRue=r)}),X(),Y(13,"div",21)(14,"input",22),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.codePostal=r)}),X(),Y(15,"input",23),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.ville=r)}),X(),Y(16,"input",24),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.region=r)}),X()(),Y(17,"div",25)(18,"input",26),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.pays=r)}),X(),Y(19,"input",27),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.complement=r)}),X()(),Y(20,"input",28),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.adresse.etage=r)}),X()(),Y(21,"div",29)(22,"button",30),ye(23,"Enregistrer"),X(),Y(24,"button",31),Ue("click",function(){return Wt(n),Zt(Ge().showForm=!1)}),ye(25,"Annuler"),X()()()()}if(2&t){const n=Ge();se(3),Bi(n.model&&n.model.id?"Modifier un lieu":"Cr\xe9er un nouveau lieu"),se(4),ue("ngModel",n.model.instructions),se(4),ue("ngModel",n.model.adresse.nomAdresse),se(1),ue("ngModel",n.model.adresse.numeroEtRue),se(2),ue("ngModel",n.model.adresse.codePostal),se(1),ue("ngModel",n.model.adresse.ville),se(1),ue("ngModel",n.model.adresse.region),se(2),ue("ngModel",n.model.adresse.pays),se(1),ue("ngModel",n.model.adresse.complement),se(1),ue("ngModel",n.model.adresse.etage)}}function x7(t,e){if(1&t){const n=Br();Y(0,"button",37),Ue("click",function(){Wt(n);const r=Ge().$implicit;return Zt(Ge().edit(r))}),ye(1,"Edit"),X()}}function w7(t,e){if(1&t){const n=Br();Y(0,"button",38),Ue("click",function(){Wt(n);const r=Ge().$implicit;return Zt(Ge().remove(r))}),ye(1,"Supprimer"),X()}}function C7(t,e){if(1&t&&(Y(0,"tr",32)(1,"td",9),ye(2),Y(3,"div",33),ye(4),X()(),Y(5,"td",9),ye(6),X(),Y(7,"td",34),ze(8,x7,2,0,"button",35),ze(9,w7,2,0,"button",36),X()()),2&t){const n=e.$implicit,i=Ge();se(2),Ro(" ",i.formatAddress(n)," "),se(2),Yf("",null==n.adresse?null:n.adresse.nomAdresse,"",null!=n.adresse&&n.adresse.ville?", "+n.adresse.ville:"",""),se(2),Bi(n.instructions||"\u2014"),se(2),ue("ngIf",i.isOwnedByCurrentUser(n)),se(1),ue("ngIf",i.isOwnedByCurrentUser(n))}}function D7(t,e){1&t&&(Y(0,"p",39),ye(1,"Aucun lieu trouv\xe9."),X())}let E7=(()=>{const e=class{constructor(i,r,o){this.api=i,this.auth=r,this.router=o,this.lieux=[],this.model={},this.showForm=!1,this.currentUserId=null}ngOnInit(){this.load(),this.resolveCurrentUser()}load(){this.api.list("lieux/mine").subscribe(i=>{this.lieux=i||[],(this.lieux||[]).forEach(r=>{this.api.list(`adresses?lieuId=${r.id}`).subscribe(o=>{o&&o.length&&(r.adresse=o[0])},o=>{})})})}resolveCurrentUser(){const i=this.auth.getPseudoFromToken();i&&this.api.list("utilisateurs").subscribe(r=>{const o=(r||[]).find(c=>c.pseudo===i||c.adresseMail===i);o&&(this.currentUserId=o.id)})}save(){const i={...this.model};!this.model.id&&this.currentUserId&&(i.utilisateur={id:this.currentUserId}),this.model.id?this.api.update("lieux",this.model.id,i).subscribe(()=>this.load()):this.api.create("lieux",i).subscribe(()=>this.load()),this.model={},this.showForm=!1}edit(i){this.model={...i},this.model.adresse?(this.model.adresse||(this.model.adresse={}),this.showForm=!0):this.api.list(`adresses?lieuId=${i.id}`).subscribe(r=>{this.model.adresse=r&&r.length?r[0]:{},this.showForm=!0},r=>{this.model.adresse={},this.showForm=!0})}remove(i){this.api.delete("lieux",i.id).subscribe(()=>this.load())}addNew(){this.model={},this.model.adresse||(this.model.adresse={}),this.showForm=!0}isOwnedByCurrentUser(i){try{const r=this.auth.getPseudoFromToken();return r&&i&&i.utilisateur&&i.utilisateur.pseudo?i.utilisateur.pseudo===r:!!(this.currentUserId&&i&&i.utilisateur&&i.utilisateur.id)&&i.utilisateur.id===this.currentUserId}catch{return!1}}formatAddress(i){if(!i)return"";const r=i.adresse||i.address||null;if(!r)return i.id?"Lieu #"+i.id:"\u2014";const o=[];r.numeroEtRue&&o.push(r.numeroEtRue),r.nomAdresse&&o.push(r.nomAdresse);const c=[];return r.codePostal&&c.push(r.codePostal),r.ville&&c.push(r.ville),c.length&&o.push(c.join(" ")),r.pays&&o.push(r.pays),o.join(", ")}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(rd),G(Gn))},e.\u0275cmp=Mt({type:e,selectors:[["gestion-lieux"]],decls:23,vars:3,consts:[[1,"max-w-4xl","mx-auto","p-4","card","bg-surface"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","mb-0","text-foreground"],["aria-label","Ajouter",1,"fab-neon","p-3","rounded-full","text-sm",3,"click"],["routerLink","/lieux/new",1,"ml-2","p-2","border","rounded","hidden"],["class","mb-4",4,"ngIf"],[1,"table-wrap","overflow-auto","bg-surface-weak","rounded-lg","p-2"],[1,"min-w-full"],[1,"text-left","text-sm","muted"],[1,"px-4","py-3","text-white"],["class","border-t border-surface-weak hover:bg-surface-weak transition",4,"ngFor","ngForOf"],["class","mt-4 text-gray-600",4,"ngIf"],[1,"mb-4"],[1,"space-y-4",3,"ngSubmit"],[1,"text-lg","font-semibold","text-white"],[1,"block","mb-1","text-white"],["name","instructions",1,"p-2","border","rounded","w-full","text-white","bg-transparent",3,"ngModel","ngModelChange"],[1,"font-semibold","text-white"],[1,"p-2","border","rounded","bg-surface-weak"],["name","adrNom","placeholder","Nom adresse",1,"p-2","border","rounded","w-full","mt-1","text-white","bg-transparent",3,"ngModel","ngModelChange"],["name","adrNumeroRue","placeholder","Num\xe9ro et rue",1,"p-2","border","rounded","w-full","mt-1","text-white","bg-transparent",3,"ngModel","ngModelChange"],[1,"grid","grid-cols-3","gap-2","mt-1"],["name","adrCp","placeholder","Code postal",1,"p-2","border","rounded","text-white","bg-transparent",3,"ngModel","ngModelChange"],["name","adrVille","placeholder","Ville",1,"p-2","border","rounded","text-white","bg-transparent",3,"ngModel","ngModelChange"],["name","adrRegion","placeholder","R\xe9gion",1,"p-2","border","rounded","text-white","bg-transparent",3,"ngModel","ngModelChange"],[1,"grid","grid-cols-2","gap-2","mt-1"],["name","adrPays","placeholder","Pays",1,"p-2","border","rounded","text-white","bg-transparent",3,"ngModel","ngModelChange"],["name","adrCompl","placeholder","Compl\xe9ment",1,"p-2","border","rounded","text-white","bg-transparent",3,"ngModel","ngModelChange"],["name","adrEtage","placeholder","\xc9tage",1,"p-2","border","rounded","w-full","mt-1","text-white","bg-transparent",3,"ngModel","ngModelChange"],[1,"flex","space-x-2","mt-4"],["type","submit",1,"px-4","py-2","btn-cyan"],["type","button",1,"px-4","py-2","btn-danger",3,"click"],[1,"border-t","border-surface-weak","hover:bg-surface-weak","transition"],[1,"text-sm","text-white"],[1,"px-4","py-3"],["class","px-2 py-1 rounded bg-surface-weak text-foreground mr-2",3,"click",4,"ngIf"],["class","px-2 py-1 rounded bg-red-600 text-inverse",3,"click",4,"ngIf"],[1,"px-2","py-1","rounded","bg-surface-weak","text-foreground","mr-2",3,"click"],[1,"px-2","py-1","rounded","bg-red-600","text-inverse",3,"click"],[1,"mt-4","text-gray-600"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1)(2,"h2",2),ye(3,"Gestion des lieux"),X(),Y(4,"div")(5,"button",3),Ue("click",function(){return o.addNew()}),ye(6,"\uff0b"),X(),Y(7,"button",4),ye(8,"(dev new)"),X()()(),ze(9,b7,26,10,"div",5),Y(10,"div",6)(11,"table",7)(12,"thead")(13,"tr",8)(14,"th",9),ye(15,"Adresse"),X(),Y(16,"th",9),ye(17,"Instructions"),X(),Y(18,"th",9),ye(19,"Actions"),X()()(),Y(20,"tbody"),ze(21,C7,10,6,"tr",10),X()()(),ze(22,D7,2,0,"p",11),X()),2&r&&(se(9),ue("ngIf",o.showForm),se(12),ue("ngForOf",o.lieux),se(1),ue("ngIf",!o.lieux||0===o.lieux.length))},dependencies:[gl,oo,vh,nc,Jc,_h,ed,oc,ou],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function S7(t,e){if(1&t){const n=Br();Y(0,"li",17)(1,"div")(2,"div",18),ye(3),X(),Y(4,"div",19),ye(5),X()(),Y(6,"div",20)(7,"button",15),Ue("click",function(){const o=Wt(n).$implicit;return Zt(Ge().edit(o))}),ye(8,"Edit"),X(),Y(9,"button",21),Ue("click",function(){const o=Wt(n).$implicit;return Zt(Ge().remove(o))}),ye(10,"Supprimer"),X()()()}if(2&t){const n=e.$implicit;se(3),Bi(n.nomAdresse),se(2),vx("",n.numeroRue,", ",n.codePostal," ",n.ville," - ",n.pays," ")}}let M7=(()=>{const e=class{constructor(i){this.api=i,this.adresses=[],this.model={},this.page=1,this.pageSize=10}ngOnInit(){this.load()}load(){this.api.list("adresses").subscribe(i=>this.adresses=i||[])}save(){this.model.id?this.api.update("adresses",this.model.id,this.model).subscribe(()=>{this.load(),this.model={}}):this.api.create("adresses",this.model).subscribe(()=>{this.load(),this.model={}})}edit(i){this.model={...i}}remove(i){confirm("Supprimer cette adresse ?")&&this.api.delete("adresses",i.id).subscribe(()=>this.load())}get paged(){const i=(this.page-1)*this.pageSize;return this.adresses.slice(i,i+this.pageSize)}prev(){this.page>1&&this.page--}next(){this.page*this.pageSize<this.adresses.length&&this.page++}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs))},e.\u0275cmp=Mt({type:e,selectors:[["gestion-adresses"]],decls:22,vars:9,consts:[[1,"max-w-3xl","mx-auto","p-4","bg-surface","rounded","shadow"],[1,"text-xl","mb-4","text-foreground"],[1,"space-y-2","mb-4",3,"ngSubmit"],["name","nomAdresse","placeholder","Nom adresse","required","",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","numeroRue","placeholder","Num\xe9ro et rue",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","codePostal","placeholder","Code postal",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","ville","placeholder","Ville",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","region","placeholder","R\xe9gion",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","pays","placeholder","Pays",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","complement","placeholder","Compl\xe9ment",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["name","etage","placeholder","\xc9tage",1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],[1,"flex","justify-end"],["type","submit",1,"bg-green-600","text-inverse","px-4","py-2","rounded"],[1,"mb-2"],[1,"px-2","py-1","border","rounded","mr-2",3,"click"],[1,"px-2","py-1","border","rounded",3,"click"],["class","p-2 border-b flex justify-between items-center",4,"ngFor","ngForOf"],[1,"p-2","border-b","flex","justify-between","items-center"],[1,"font-semibold"],[1,"text-sm","text-gray-600"],[1,"space-x-2"],[1,"px-2","py-1","bg-red-600","text-inverse","rounded",3,"click"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"h2",1),ye(2,"Adresses"),X(),Y(3,"form",2),Ue("ngSubmit",function(){return o.save()}),Y(4,"input",3),Ue("ngModelChange",function(h){return o.model.nomAdresse=h}),X(),Y(5,"input",4),Ue("ngModelChange",function(h){return o.model.numeroRue=h}),X(),Y(6,"input",5),Ue("ngModelChange",function(h){return o.model.codePostal=h}),X(),Y(7,"input",6),Ue("ngModelChange",function(h){return o.model.ville=h}),X(),Y(8,"input",7),Ue("ngModelChange",function(h){return o.model.region=h}),X(),Y(9,"input",8),Ue("ngModelChange",function(h){return o.model.pays=h}),X(),Y(10,"input",9),Ue("ngModelChange",function(h){return o.model.complement=h}),X(),Y(11,"input",10),Ue("ngModelChange",function(h){return o.model.etage=h}),X(),Y(12,"div",11)(13,"button",12),ye(14,"Enregistrer"),X()()(),Y(15,"div",13)(16,"button",14),Ue("click",function(){return o.prev()}),ye(17,"Pr\xe9c"),X(),Y(18,"button",15),Ue("click",function(){return o.next()}),ye(19,"Suiv"),X()(),Y(20,"ul"),ze(21,S7,11,5,"li",16),X()()),2&r&&(se(4),ue("ngModel",o.model.nomAdresse),se(1),ue("ngModel",o.model.numeroRue),se(1),ue("ngModel",o.model.codePostal),se(1),ue("ngModel",o.model.ville),se(1),ue("ngModel",o.model.region),se(1),ue("ngModel",o.model.pays),se(1),ue("ngModel",o.model.complement),se(1),ue("ngModel",o.model.etage),se(10),ue("ngForOf",o.paged))},dependencies:[gl,vh,nc,Jc,_h,qm,ed,oc],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function vP(t,e,n,i,r,o,c){try{var h=t[o](c),g=h.value}catch(C){return void n(C)}h.done?e(g):Promise.resolve(g).then(i,r)}function bP(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function c(g){vP(o,i,r,c,h,"next",g)}function h(g){vP(o,i,r,c,h,"throw",g)}c(void 0)})}}function k7(t,e){if(1&t){const n=Br();Wo(0),Y(1,"button",21),Ue("click",function(){Wt(n);const r=Ge().$implicit;return Zt(Ge(3).openLightbox(r))}),Ot(2,"img",22),X(),Zo()}if(2&t){const n=Ge().$implicit,i=Ge(3);se(1),hx("title",n.nomMedia||n.filename||n.nom),se(1),ue("src",i.getMediaFullUrl(n),vm)}}function T7(t,e){if(1&t&&(Y(0,"a",23),ll(),Y(1,"svg",24),Ot(2,"path",25),X(),ye(3),X()),2&t){const n=Ge().$implicit;ue("href",Ge(3).getMediaFullUrl(n),vm),se(3),Ro(" ",n.nomMedia||n.filename||"file","")}}function I7(t,e){if(1&t&&(Wo(0),ze(1,k7,3,2,"ng-container",14),ze(2,T7,4,2,"ng-template",null,20,ec),Zo()),2&t){const n=e.$implicit,i=Nr(3),r=Ge(3);se(1),ue("ngIf",r.shouldRenderImage(n))("ngIfElse",i)}}function A7(t,e){if(1&t&&(Y(0,"span",26),ye(1),X()),2&t){const n=Ge(2).$implicit;se(1),Ro("+",n.medias.length-4,"")}}function R7(t,e){if(1&t&&(Wo(0),ze(1,I7,4,2,"ng-container",18),Bm(2,"slice"),ze(3,A7,2,1,"span",19),Zo()),2&t){const n=Ge().$implicit;se(1),ue("ngForOf",Ax(2,2,n.medias,0,4)),se(2),ue("ngIf",n.medias.length>4)}}function P7(t,e){1&t&&(Y(0,"span",26),ye(1,"\u2014"),X())}function O7(t,e){if(1&t){const n=Br();Y(0,"button",27),Ue("click",function(){Wt(n);const r=Ge().$implicit;return Zt(Ge().edit(r))}),ye(1,"Edit"),X()}}function F7(t,e){if(1&t){const n=Br();Y(0,"button",28),Ue("click",function(){Wt(n);const r=Ge().$implicit;return Zt(Ge().remove(r))}),ye(1,"Supprimer"),X()}}function L7(t,e){if(1&t&&(Y(0,"tr",11)(1,"td",12),ye(2),X(),Y(3,"td",12),ye(4),X(),Y(5,"td",12),ye(6),X(),Y(7,"td",12),ye(8),X(),Y(9,"td",12),ye(10),X(),Y(11,"td",12)(12,"div",13),ze(13,R7,4,6,"ng-container",14),ze(14,P7,2,0,"ng-template",null,15,ec),X()(),Y(16,"td",7),ze(17,O7,2,0,"button",16),ze(18,F7,2,0,"button",17),X()()),2&t){const n=e.$implicit,i=Nr(15);se(2),Bi(n.nomBorne||n.nom),se(2),Bi(n.coordGPS),se(2),Ro("",n.tarif," \u20ac/min"),se(2),Ro("",n.puissance," kW"),se(2),Bi((null==n.lieu?null:n.lieu.nom)||(null==n.lieu?null:n.lieu.instructions)||"\u2014"),se(3),ue("ngIf",n.medias&&n.medias.length>0)("ngIfElse",i),se(4),ue("ngIf",n._isOwner),se(1),ue("ngIf",n._isOwner)}}function N7(t,e){1&t&&(Y(0,"p",29),ye(1,"Aucune borne trouv\xe9e."),X())}function B7(t,e){if(1&t){const n=Br();Y(0,"div",30),Ue("click",function(){return Wt(n),Zt(Ge().closeLightbox())}),Y(1,"div",31),Ue("click",function(r){return r.stopPropagation()}),Y(2,"div",32)(3,"div",33)(4,"button",34),Ue("click",function(){return Wt(n),Zt(Ge().closeLightbox())}),ye(5,"Fermer"),X()(),Y(6,"div",35),Ot(7,"img",36),X(),Y(8,"div",37),ye(9),X()()()()}if(2&t){const n=Ge();se(7),ue("src",n.getMediaFullUrl(n.selectedMedia),vm),se(2),Bi((null==n.selectedMedia?null:n.selectedMedia.nomMedia)||(null==n.selectedMedia?null:n.selectedMedia.filename)||(null==n.selectedMedia?null:n.selectedMedia.nom))}}let z7=(()=>{const e=class{constructor(i,r){this.api=i,this.auth=r,this.bornes=[],this.model={},this.lieux=[],this.medias=[],this.selectedMedia=null,this.creatingLieu=!1,this.newLieu={instructions:"",utilisateur:null,adresse:{}},this.selectedFiles=[],this.filePreviews=[],this.currentUserId=null}ngOnInit(){this.resolveCurrentUser(),this.loadMedias(),this.loadLieux(),this.load()}loadLieux(){this.api.list("lieux/mine").subscribe(i=>this.lieux=i||[])}loadMedias(){this.api.list("medias").subscribe(i=>this.medias=i||[])}load(){this.api.list("bornes/mine").subscribe(i=>{try{const r=localStorage.getItem("token");console.debug("DEBUG: token length:",r?r.length:0)}catch{}console.debug("DEBUG: /api/bornes/mine response:",i),this.bornes=(i||[]).map(r=>({...r,_isOwner:this.isOwnedByCurrentUser(r)})),this.attachMediasToBornes();try{console.debug("DEBUG: bornes mapped _isOwner:",this.bornes.map(r=>({id:r.id,_isOwner:r._isOwner,pseudo:r.lieu?.utilisateur?.pseudo,userId:r.lieu?.utilisateur?.id})))}catch{}},i=>{console.error("DEBUG: /api/bornes/mine error",i)})}attachMediasToBornes(){!this.bornes||!this.medias||(this.bornes=this.bornes.map(i=>{const r=(this.medias||[]).filter(o=>o&&o.borne&&Number(o.borne.id)===Number(i.id));return{...i,medias:r}}))}getMediaFullUrl(i){if(!i||!i.url)return"";try{if(i.url.startsWith("http"))return i.url;try{return`${this.api&&this.api.baseUrl?this.api.baseUrl.replace(/\/api\/?$/,""):window.location.origin}${i.url}`}catch{return`${window.location.origin}${i.url}`}}catch{return i.url}}isImage(i){return i&&i.type&&i.type.startsWith&&i.type.startsWith("image/")}shouldRenderImage(i){return!!i&&(!!this.isImage(i)||!(!i.url||"string"!=typeof i.url)&&/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i.test(i.url))}openLightbox(i){this.selectedMedia=i}closeLightbox(){this.selectedMedia=null}resolveCurrentUser(){const i=this.auth.getPseudoFromToken();i&&this.api.list("utilisateurs").subscribe(r=>{const o=(r||[]).find(c=>c.pseudo===i||c.adresseMail===i);o&&(this.currentUserId=o.id),this.bornes=this.bornes.map(c=>({...c,_isOwner:this.isOwnedByCurrentUser(c)}))})}isOwnedByCurrentUser(i){try{const r=this.auth.getPseudoFromToken();return r&&i&&i.lieu&&i.lieu.utilisateur&&i.lieu.utilisateur.pseudo?i.lieu.utilisateur.pseudo===r:!!(this.currentUserId&&i&&i.lieu&&i.lieu.utilisateur&&i.lieu.utilisateur.id)&&i.lieu.utilisateur.id===this.currentUserId}catch{return!1}}save(){var i=this;const o={borne:{nomBorne:this.model.nomBorne,coordGPS:this.model.coordGPS,tarif:Number(this.model.tarif)||0,puissance:Number(this.model.puissance)||0,instruction:this.model.instruction,surPied:!!this.model.surPied,etat:this.model.etat,occupee:!!this.model.occupee}};!this.creatingLieu&&this.model.lieuId?o.lieu={id:this.model.lieuId}:this.creatingLieu&&(o.lieu={instructions:this.newLieu.instructions,utilisateur:{id:this.newLieu.utilisateur?.id||this.newLieu.utilisateur}},this.newLieu.adresse&&(this.newLieu.adresse.nomAdresse||this.newLieu.adresse.numeroEtRue)&&(o.lieu.adresse={...this.newLieu.adresse})),function(){var h=bP(function*(){try{const g=[];for(let C=0;C<i.selectedFiles.length;C++){const S=i.selectedFiles[C],I=yield i.api.uploadFile(S).toPromise();I&&I.id&&g.push({id:I.id})}g.length&&(o.medias=g),i.model.id?i.api.update("bornes",i.model.id,o.borne).subscribe(()=>i.load(),()=>alert("Erreur update")):i.api.create("bornes",o).subscribe(C=>{i.load()},()=>alert("Erreur cr\xe9ation borne"))}catch(g){console.error(g),alert("Erreur upload m\xe9dia")}});return function(){return h.apply(this,arguments)}}()(),this.resetForm()}edit(i){this.model={...i}}resetForm(){this.model={},this.creatingLieu=!1,this.newLieu={instructions:"",utilisateur:null,adresse:{}},this.filePreviews=[]}onFilesSelected(i){const r=i.target.files;for(let o=0;o<r.length;o++){const c=r.item(o),h=URL.createObjectURL(c);this.selectedFiles.push(c),this.filePreviews.push({name:c.name,size:c.size,url:h,type:c.type})}}removePreview(i){const r=this.filePreviews.splice(i,1)[0];try{URL.revokeObjectURL(r.url)}catch{}}remove(i){confirm("Supprimer cette borne ?")&&this.api.list("reservations/mine").subscribe(r=>{(r||[]).find(c=>Number(c.idBorne)===Number(i.id)&&c.etat&&"CANCELLED"!==c.etat)?alert("Impossible: cette borne a des r\xe9servations actives."):this.api.delete("bornes",i.id).subscribe(()=>this.load(),()=>alert("Erreur suppression"))},()=>{confirm("Impossible de v\xe9rifier les r\xe9servations. Supprimer quand m\xeame ?")&&this.api.delete("bornes",i.id).subscribe(()=>this.load())})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(rd))},e.\u0275cmp=Mt({type:e,selectors:[["gestion-bornes"]],decls:28,vars:3,consts:[[1,"max-w-4xl","mx-auto","p-4","card","bg-surface"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","mb-0","text-foreground"],["routerLink","/bornes/new","aria-label","Ajouter",1,"fab-neon","p-3","rounded-full","text-sm"],[1,"table-wrap","overflow-auto","bg-surface-weak","rounded-lg","p-2"],[1,"min-w-full"],[1,"text-left","text-sm","muted"],[1,"px-4","py-3"],["class","border-t border-surface-weak hover:bg-surface-weak transition",4,"ngFor","ngForOf"],["class","mt-4 text-gray-600",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",3,"click",4,"ngIf"],[1,"border-t","border-surface-weak","hover:bg-surface-weak","transition"],[1,"px-4","py-3","text-black"],[1,"flex","items-center","space-x-2"],[4,"ngIf","ngIfElse"],["noMedias",""],["class","px-2 py-1 rounded bg-surface-weak text-foreground mr-2",3,"click",4,"ngIf"],["class","px-2 py-1 rounded bg-red-600 text-inverse",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","text-sm muted",4,"ngIf"],["nonImage",""],[1,"p-0","border-0","bg-transparent",3,"title","click"],["alt","media",1,"w-12","h-8","object-cover","rounded",3,"src"],["target","_blank","rel","noopener",1,"inline-flex","items-center","px-2","py-1","border","rounded","text-sm",3,"href"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","mr-1"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"text-sm","muted"],[1,"px-2","py-1","rounded","bg-surface-weak","text-foreground","mr-2",3,"click"],[1,"px-2","py-1","rounded","bg-red-600","text-inverse",3,"click"],[1,"mt-4","text-gray-600"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black","bg-opacity-75",3,"click"],[1,"max-w-3xl","w-full","p-4",3,"click"],[1,"bg-white","rounded","overflow-hidden"],[1,"p-2","flex","justify-end"],[1,"px-2","py-1",3,"click"],[1,"p-4","flex","justify-center"],["alt","preview",1,"max-h-[70vh]","object-contain",3,"src"],[1,"p-2","text-sm","muted"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1)(2,"h2",2),ye(3,"Gestion des bornes"),X(),Y(4,"button",3),ye(5,"\uff0b"),X()(),Y(6,"div",4)(7,"table",5)(8,"thead")(9,"tr",6)(10,"th",7),ye(11,"Nom"),X(),Y(12,"th",7),ye(13,"CoordGPS"),X(),Y(14,"th",7),ye(15,"Tarif"),X(),Y(16,"th",7),ye(17,"Puissance"),X(),Y(18,"th",7),ye(19,"Lieu"),X(),Y(20,"th",7),ye(21,"Medias"),X(),Y(22,"th",7),ye(23,"Actions"),X()()(),Y(24,"tbody"),ze(25,L7,19,9,"tr",8),X()()(),ze(26,N7,2,0,"p",9),ze(27,B7,10,2,"div",10),X()),2&r&&(se(25),ue("ngForOf",o.bornes),se(1),ue("ngIf",!o.bornes||0===o.bornes.length),se(1),ue("ngIf",o.selectedMedia))},dependencies:[gl,oo,ou,Dw],styles:["[_nghost-%COMP%]{display:block}.table-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:inherit}.table-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;display:inline-block}.gest-bornes-lightbox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:70vh}.media-file-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center}"]}),t})();function V7(t,e){if(1&t&&(Y(0,"option",27),ye(1),X()),2&t){const n=e.$implicit;ue("value",n.id),se(1),Bi(n.instructions||"Lieu #"+n.id)}}function U7(t,e){if(1&t){const n=Br();Y(0,"div")(1,"select",24),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().model.lieuId=r)}),Y(2,"option",25),ye(3,"-- choisir --"),X(),ze(4,V7,2,2,"option",26),X()()}if(2&t){const n=Ge();se(1),ue("ngModel",n.model.lieuId),se(3),ue("ngForOf",n.lieux)}}function j7(t,e){if(1&t){const n=Br();Y(0,"div",28)(1,"input",29),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.instructions=r)}),X(),Y(2,"input",29),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.instructions=r)}),X(),Y(3,"h5",30),ye(4,"Adresse (optionnel)"),X(),Y(5,"input",31),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.nomAdresse=r)}),X(),Y(6,"input",32),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.numeroEtRue=r)}),X(),Y(7,"div",33)(8,"input",34),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.codePostal=r)}),X(),Y(9,"input",35),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.ville=r)}),X(),Y(10,"input",36),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.region=r)}),X()(),Y(11,"div",37)(12,"input",38),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.pays=r)}),X(),Y(13,"input",39),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.complement=r)}),X()(),Y(14,"input",40),Ue("ngModelChange",function(r){return Wt(n),Zt(Ge().newLieu.adresse.etage=r)}),X()()}if(2&t){const n=Ge();se(1),ue("ngModel",n.newLieu.instructions),se(1),ue("ngModel",n.newLieu.instructions),se(3),ue("ngModel",n.newLieu.adresse.nomAdresse),se(1),ue("ngModel",n.newLieu.adresse.numeroEtRue),se(2),ue("ngModel",n.newLieu.adresse.codePostal),se(1),ue("ngModel",n.newLieu.adresse.ville),se(1),ue("ngModel",n.newLieu.adresse.region),se(2),ue("ngModel",n.newLieu.adresse.pays),se(1),ue("ngModel",n.newLieu.adresse.complement),se(1),ue("ngModel",n.newLieu.adresse.etage)}}function H7(t,e){if(1&t&&(Y(0,"div"),Ot(1,"img",45),X()),2&t){const n=Ge().$implicit;se(1),ue("src",n.url,vm)}}function $7(t,e){if(1&t){const n=Br();Y(0,"div",41)(1,"div",13),ye(2),X(),Y(3,"div",42),ye(4),X(),ze(5,H7,2,1,"div",16),Y(6,"div",43)(7,"button",44),Ue("click",function(){const o=Wt(n).index;return Zt(Ge().removePreview(o))}),ye(8,"Supprimer"),X()()()}if(2&t){const n=e.$implicit;se(2),Bi(n.name),se(2),Ro("",n.size," bytes"),se(1),ue("ngIf",n.type.startsWith("image"))}}let G7=(()=>{const e=class{constructor(i,r,o){this.api=i,this.router=r,this.auth=o,this.model={},this.lieux=[],this.creatingLieu=!1,this.newLieu={instructions:"",utilisateur:null,adresse:{}},this.selectedFiles=[],this.filePreviews=[]}ngOnInit(){this.loadLieux()}loadLieux(){this.api.list("lieux/mine").subscribe(i=>this.lieux=i||[])}onFilesSelected(i){const r=i.target.files;for(let o=0;o<r.length;o++){const c=r.item(o),h=URL.createObjectURL(c);this.selectedFiles.push(c),this.filePreviews.push({name:c.name,size:c.size,url:h,type:c.type})}}removePreview(i){const r=this.filePreviews.splice(i,1)[0];this.selectedFiles.splice(i,1);try{URL.revokeObjectURL(r.url)}catch{}}cancel(){this.router.navigate(["/bornes"])}save(){var i=this;return bP(function*(){const o={borne:{nomBorne:i.model.nomBorne,coordGPS:i.model.coordGPS,tarif:Number(i.model.tarif)||0,puissance:Number(i.model.puissance)||0,instruction:i.model.instruction,surPied:!!i.model.surPied,etat:i.model.etat,occupee:!!i.model.occupee}};if(!i.creatingLieu&&i.model.lieuId)o.lieu={id:i.model.lieuId};else if(i.creatingLieu){const c=i.auth.getPseudoFromToken();o.lieu={instructions:i.newLieu.instructions},c&&(o.lieu.utilisateur={pseudo:c}),i.newLieu.adresse&&(i.newLieu.adresse.nomAdresse||i.newLieu.adresse.numeroEtRue)&&(o.lieu.adresse={...i.newLieu.adresse})}try{const c=[];for(let h=0;h<i.selectedFiles.length;h++){const g=i.selectedFiles[h],C=yield i.api.uploadFile(g).toPromise();C&&C.id&&c.push({id:C.id})}c.length&&(o.medias=c),i.api.create("bornes",o).subscribe(()=>{i.router.navigate(["/bornes"])},()=>alert("Erreur cr\xe9ation borne"))}catch(c){console.error(c),alert("Erreur upload m\xe9dia")}})()}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(Gn),G(rd))},e.\u0275cmp=Mt({type:e,selectors:[["nouvelle-borne"]],decls:53,vars:15,consts:[[1,"max-w-3xl","mx-auto","p-4","card","bg-surface"],[1,"text-xl","mb-4"],[1,"space-y-4",3,"ngSubmit"],[1,"block","mb-1"],["name","nomBorne",1,"p-2","border","rounded","w-full","text-black",3,"ngModel","ngModelChange"],["name","coordGPS",1,"p-2","border","rounded","w-full","text-black",3,"ngModel","ngModelChange"],[1,"grid","grid-cols-2","gap-2"],["name","tarif","type","number","placeholder","Tarif",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],["name","puissance","type","number","placeholder","Puissance",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],["name","instruction",1,"p-2","border","rounded","w-full","text-black",3,"ngModel","ngModelChange"],["type","checkbox","name","surPied",3,"ngModel","ngModelChange"],["type","checkbox","name","occupee",3,"ngModel","ngModelChange"],["name","etat",1,"p-2","border","rounded","w-full","text-black",3,"ngModel","ngModelChange"],[1,"font-semibold"],[1,"flex","items-center","space-x-2"],["type","radio","name","lieuMode",3,"ngModel","value","ngModelChange"],[4,"ngIf"],["class","p-2 border rounded bg-surface-weak",4,"ngIf"],["type","file","multiple","",1,"text-black",3,"change"],[1,"grid","grid-cols-3","gap-2","mt-2"],["class","p-2 border rounded",4,"ngFor","ngForOf"],[1,"flex","space-x-2","mt-4"],["type","submit",1,"px-4","py-2","btn-cyan"],["type","button",1,"px-4","py-2","btn-danger",3,"click"],["name","lieuId",1,"p-2","border","rounded","w-full","text-black",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"p-2","border","rounded","bg-surface-weak"],["name","newLieuInstructions","placeholder","Instructions",1,"p-2","border","rounded","w-full","text-black",3,"ngModel","ngModelChange"],[1,"font-semibold","mt-2"],["name","adrNom","placeholder","Nom adresse",1,"p-2","border","rounded","w-full","mt-1","text-black",3,"ngModel","ngModelChange"],["name","adrNumeroRue","placeholder","Num\xe9ro et rue",1,"p-2","border","rounded","w-full","mt-1","text-black",3,"ngModel","ngModelChange"],[1,"grid","grid-cols-3","gap-2","mt-1"],["name","adrCp","placeholder","Code postal",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],["name","adrVille","placeholder","Ville",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],["name","adrRegion","placeholder","R\xe9gion",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],[1,"grid","grid-cols-2","gap-2","mt-1"],["name","adrPays","placeholder","Pays",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],["name","adrCompl","placeholder","Compl\xe9ment",1,"p-2","border","rounded","text-black",3,"ngModel","ngModelChange"],["name","adrEtage","placeholder","\xc9tage",1,"p-2","border","rounded","w-full","mt-1","text-black",3,"ngModel","ngModelChange"],[1,"p-2","border","rounded"],[1,"text-sm","text-gray-600"],[1,"mt-2"],[1,"px-2","py-1","btn-danger",3,"click"],[1,"w-full","h-24","object-cover","mt-2",3,"src"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"h2",1),ye(2,"Nouvelle Borne"),X(),Y(3,"form",2),Ue("ngSubmit",function(){return o.save()}),Y(4,"div")(5,"label",3),ye(6,"Nom de la borne"),X(),Y(7,"input",4),Ue("ngModelChange",function(h){return o.model.nomBorne=h}),X()(),Y(8,"div")(9,"label",3),ye(10,"Coordonn\xe9es GPS"),X(),Y(11,"input",5),Ue("ngModelChange",function(h){return o.model.coordGPS=h}),X()(),Y(12,"div",6)(13,"input",7),Ue("ngModelChange",function(h){return o.model.tarif=h}),X(),Y(14,"input",8),Ue("ngModelChange",function(h){return o.model.puissance=h}),X()(),Y(15,"div")(16,"label",3),ye(17,"Instructions"),X(),Y(18,"textarea",9),Ue("ngModelChange",function(h){return o.model.instruction=h}),X()(),Y(19,"div",6)(20,"label")(21,"input",10),Ue("ngModelChange",function(h){return o.model.surPied=h}),X(),ye(22," Sur pied"),X(),Y(23,"label")(24,"input",11),Ue("ngModelChange",function(h){return o.model.occupee=h}),X(),ye(25," Occup\xe9e"),X()(),Y(26,"div")(27,"label",3),ye(28,"Etat"),X(),Y(29,"input",12),Ue("ngModelChange",function(h){return o.model.etat=h}),X()(),Ot(30,"hr"),Y(31,"h3",13),ye(32,"Lieu"),X(),Y(33,"div",14)(34,"label")(35,"input",15),Ue("ngModelChange",function(h){return o.creatingLieu=h}),X(),ye(36," Choisir existant"),X(),Y(37,"label")(38,"input",15),Ue("ngModelChange",function(h){return o.creatingLieu=h}),X(),ye(39," Cr\xe9er nouveau"),X()(),ze(40,U7,5,2,"div",16),ze(41,j7,15,10,"div",17),Ot(42,"hr"),Y(43,"h3",13),ye(44,"M\xe9dias"),X(),Y(45,"input",18),Ue("change",function(h){return o.onFilesSelected(h)}),X(),Y(46,"div",19),ze(47,$7,9,3,"div",20),X(),Y(48,"div",21)(49,"button",22),ye(50,"Enregistrer"),X(),Y(51,"button",23),Ue("click",function(){return o.cancel()}),ye(52,"Annuler"),X()()()()),2&r&&(se(7),ue("ngModel",o.model.nomBorne),se(4),ue("ngModel",o.model.coordGPS),se(2),ue("ngModel",o.model.tarif),se(1),ue("ngModel",o.model.puissance),se(4),ue("ngModel",o.model.instruction),se(3),ue("ngModel",o.model.surPied),se(3),ue("ngModel",o.model.occupee),se(5),ue("ngModel",o.model.etat),se(6),ue("ngModel",o.creatingLieu)("value",!1),se(3),ue("ngModel",o.creatingLieu)("value",!0),se(2),ue("ngIf",!o.creatingLieu),se(1),ue("ngIf",o.creatingLieu),se(6),ue("ngForOf",o.filePreviews))},dependencies:[gl,oo,vh,Cv,Dv,nc,x1,c1,Gm,w1,Jc,_h,ed,oc],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 1px 3px #0000000f}.btn-cyan[_ngcontent-%COMP%]{background:linear-gradient(90deg,#06b6d4,#0ea5b3);color:#fff;border-radius:6px}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border-radius:6px}"]}),t})();var yb=pd(943);let q7=(()=>{const e=class{constructor(i,r){this.api=i,this.router=r}ngAfterViewInit(){try{this.map=new yb.Map({container:"map",style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"\xa9 OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"raster-tiles"}]},center:[2.3522,48.8566],zoom:13}),this.map.addControl(new yb.NavigationControl)}catch(i){return void console.error("Map init error",i)}this.api.list("bornes").subscribe(i=>{i.forEach(r=>{const c=String(r.coordGPS||r.coord||"").split(",").map(h=>h.trim());if(2===c.length){const h=parseFloat(c[0]),g=parseFloat(c[1]);if(!isNaN(h)&&!isNaN(g)){const C=document.createElement("div");C.className="marker-neon";const S=document.createElement("div");S.className="popup-glass p-3 rounded-lg text-sm",S.style.background="rgba(255,255,255,0.06)",S.style.backdropFilter="blur(8px)",S.style.color="#000",S.innerHTML=`<div class="font-semibold">${r.nomBorne||r.nom}</div>\n                            <div class="text-xs">Tarif: ${r.tarif} \u20ac/min</div>\n                            <div class="text-xs">Puissance: ${r.puissance||"-"} kW</div>\n                            <div class="mt-2"><button id="reserve-${r.id}" class="px-3 py-1 rounded bg-cyan-600 text-black">R\xe9server</button></div>`;const I=new yb.Popup({closeButton:!0,closeOnClick:!0}).setDOMContent(S);new yb.Marker(C).setLngLat([g,h]).setPopup(I).addTo(this.map),setTimeout(()=>{const q=S.querySelector(`#reserve-${r.id}`);q&&q.addEventListener("click",te=>{te.stopPropagation(),this.router.navigate(["/reservation"],{queryParams:{borne:r.id}})})},50)}}})})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(Gn))},e.\u0275cmp=Mt({type:e,selectors:[["carte"]],decls:4,vars:0,consts:[[1,"min-h-screen","bg-deep","text-white","p-6"],[1,"max-w-7xl","mx-auto"],[1,"bg-white/10","rounded-xl","overflow-hidden","h-[70vh]"],["id","map",1,"w-full","h-full"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1)(2,"div",2),Ot(3,"div",3),X()()())},styles:["#map[_ngcontent-%COMP%]{width:100%;height:70vh;min-height:400px}[_nghost-%COMP%]{display:block}.marker-neon[_ngcontent-%COMP%]{width:22px;height:22px;box-sizing:border-box;border-radius:50%;background:#00D1FF;border:2px solid rgba(0,210,255,.2);box-shadow:0 0 8px 2px #00d2ffd9;backface-visibility:hidden;transform-origin:center;will-change:transform}.marker-neon[_ngcontent-%COMP%], .marker-neon[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer;pointer-events:auto}.popup-glass[_ngcontent-%COMP%]{color:#000!important}"]}),t})();function W7(t,e){if(1&t&&(Y(0,"option",11),ye(1),X()),2&t){const n=e.$implicit;ue("value",n.id),se(1),Bi(n.nomBorne||n.nom)}}function Z7(t,e){if(1&t&&(Y(0,"div",12),ye(1),X()),2&t){const n=Ge();se(1),Ro("Prix estim\xe9: ",n.estimatedPrice," \u20ac ")}}function Y7(t,e){1&t&&(Y(0,"div",13),ye(1,"Date de fin doit \xeatre apr\xe8s la date de d\xe9but"),X())}let X7=(()=>{const e=class{constructor(i,r,o){this.api=i,this.route=r,this.router=o,this.model={},this.bornes=[],this.selectedBorne=null,this.estimatedPrice=0}ngOnInit(){this.api.list("bornes").subscribe(i=>{this.bornes=i||[];const r=Number(this.route.snapshot.queryParamMap.get("borne"));r&&this.selectBorneById(r)})}selectBorneById(i){this.selectedBorne=this.bornes.find(r=>r.id===i)||null,this.model.borneId=i,this.calculatePrice()}calculatePrice(){if(!this.selectedBorne||!this.model.debut||!this.model.fin)return void(this.estimatedPrice=0);const i=new Date(this.model.debut),r=new Date(this.model.fin);if(r.getTime()<=i.getTime())return void(this.estimatedPrice=0);const o=Math.max(0,(r.getTime()-i.getTime())/6e4),c=Number(this.selectedBorne.tarif)||0;this.estimatedPrice=+(o*c).toFixed(2)}reserve(){const i=new Date(this.model.debut||0);if(new Date(this.model.fin||0).getTime()<=i.getTime())return void alert("La date de fin doit \xeatre apr\xe8s la date de d\xe9but");const o={idBorne:Number(this.model.borneId),idUtilisateur:this.model.utilisateurId||null,dateDebut:this.model.debut,dateFin:this.model.fin,prixMinuteHisto:Number(this.selectedBorne?.tarif)||0,etat:"CONFIRMED"};this.api.create("reservations",o).subscribe(()=>{alert("R\xe9serv\xe9"),this.router.navigate(["/reservations"])},c=>alert("Erreur"))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(Eh),G(Gn))},e.\u0275cmp=Mt({type:e,selectors:[["reservation"]],decls:20,vars:7,consts:[[1,"max-w-md","mx-auto","p-4","bg-surface"],[1,"text-xl","mb-4","text-foreground"],[1,"space-y-3",3,"ngSubmit"],["name","borneId",1,"w-full","p-2","border","rounded",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","debut",1,"w-full","p-2","border","rounded",3,"ngModel","ngModelChange","change"],["type","datetime-local","name","fin",1,"w-full","p-2","border","rounded",3,"ngModel","ngModelChange","change"],["class","text-lg font-semibold","style","color: white;",4,"ngIf"],["class","text-red-600",4,"ngIf"],["type","submit",1,"bg-blue-600","text-inverse","px-4","py-2","rounded",3,"disabled"],[3,"value"],[1,"text-lg","font-semibold",2,"color","white"],[1,"text-red-600"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"h2",1),ye(2,"Cr\xe9er une r\xe9servation"),X(),Y(3,"form",2),Ue("ngSubmit",function(){return o.reserve()}),Y(4,"label"),ye(5,"Choisir une borne"),X(),Y(6,"select",3),Ue("ngModelChange",function(h){return o.model.borneId=h})("change",function(){return o.selectBorneById(o.model.borneId)}),Y(7,"option",4),ye(8,"-- choisir --"),X(),ze(9,W7,2,2,"option",5),X(),Y(10,"label"),ye(11,"Date d\xe9but"),X(),Y(12,"input",6),Ue("ngModelChange",function(h){return o.model.debut=h})("change",function(){return o.calculatePrice()}),X(),Y(13,"label"),ye(14,"Date fin"),X(),Y(15,"input",7),Ue("ngModelChange",function(h){return o.model.fin=h})("change",function(){return o.calculatePrice()}),X(),ze(16,Z7,2,1,"div",8),ze(17,Y7,2,0,"div",9),Y(18,"button",10),ye(19,"R\xe9server"),X()()()),2&r&&(se(6),ue("ngModel",o.model.borneId),se(3),ue("ngForOf",o.bornes),se(3),ue("ngModel",o.model.debut),se(3),ue("ngModel",o.model.fin),se(1),ue("ngIf",o.estimatedPrice>0),se(1),ue("ngIf",0===o.estimatedPrice&&o.model.debut&&o.model.fin),se(1),ue("disabled",!o.model.borneId||!o.model.debut||!o.model.fin||0===o.estimatedPrice))},dependencies:[gl,oo,vh,Cv,Dv,nc,Gm,Jc,_h,ed,oc],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   select[_ngcontent-%COMP%], [_nghost-%COMP%]   textarea[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-control[_ngcontent-%COMP%]{color:#000}.bg-blue-600.text-inverse[_ngcontent-%COMP%]{color:#000!important}"]}),t})();function K7(t,e){1&t&&(Y(0,"span",11),ye(1,"Libre"),X())}function Q7(t,e){1&t&&(Y(0,"span",12),ye(1,"Occup\xe9e"),X())}function J7(t,e){if(1&t&&(Y(0,"div",5)(1,"div",6)(2,"div")(3,"h4",7),ye(4),X(),Y(5,"p",8),ye(6),X()(),ze(7,K7,2,0,"span",9),ze(8,Q7,2,0,"span",10),X()()),2&t){const n=e.$implicit;se(4),Ro("R\xe9servation #",n.id,""),se(2),Yf("",n.borneName," - ",n.dateDisplay,""),se(1),ue("ngIf","libre"===n.statut),se(1),ue("ngIf","occupee"===n.statut)}}let eW=(()=>{const e=class{constructor(i,r){this.api=i,this.auth=r,this.reservations=[],this.currentUserId=null}ngOnInit(){this.resolveCurrentUser()}resolveCurrentUser(){const i=this.auth.getPseudoFromToken();if(!i)return this.currentUserId=null,void(this.reservations=[]);this.api.list("utilisateurs").subscribe(r=>{const o=(r||[]).find(c=>c.pseudo===i||c.adresseMail===i);o&&(this.currentUserId=o.id),this.load()},()=>{this.currentUserId=null,this.load()})}load(){this.api.list("reservations/mine").subscribe(i=>{const r=["ACTIVE","active","CONFIRMED","confirmed"];let o=(i||[]).filter(h=>!h.etat||r.includes(String(h.etat)));const c=this.auth.getPseudoFromToken();o=o.filter(h=>!!(this.currentUserId&&(h.utilisateur&&(h.utilisateur.id===this.currentUserId||h.utilisateur===this.currentUserId)||h.client&&(h.client.id===this.currentUserId||h.client===this.currentUserId)||h.idUtilisateur&&h.idUtilisateur===this.currentUserId)||c&&(h.utilisateur&&(h.utilisateur.pseudo===c||h.utilisateur.adresseMail===c)||h.client&&(h.client.pseudo===c||h.client.adresseMail===c)))),this.reservations=o.map(h=>{const g=h.borne?.nomBorne||h.borne?.nom||h.nomBorne||(h.idBorne?"Borne #"+h.idBorne:"Borne");let C="-";try{if(h.dateDebut||h.dateFin){const I=h.dateDebut?new Date(h.dateDebut):null,U=h.dateFin?new Date(h.dateFin):null;I&&U?C=I.toLocaleString()+" \u2192 "+U.toLocaleString():I?C=I.toLocaleString():U&&(C=U.toLocaleString())}else h.heureDebut&&(C=h.heureDebut)}catch{C=h.dateDebut||h.heureDebut||"-"}const S=h.client?.nom||h.utilisateur?.nom||h.utilisateur?.pseudo||h.client||"Inconnu";return{...h,borneName:g,dateDisplay:C,clientName:S}})})}cancel(i){this.api.delete("reservations",i.id).subscribe(()=>this.load())}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs),G(rd))},e.\u0275cmp=Mt({type:e,selectors:[["reservations-courantes"]],decls:6,vars:1,consts:[[1,"min-h-screen","bg-deep","text-white","p-6"],[1,"max-w-6xl","mx-auto"],[1,"text-2xl","font-semibold","mb-4"],[1,"flex","gap-4","overflow-x-auto"],["class","min-w-[320px] bg-white/10 backdrop-blur-md p-4 rounded-xl shadow-md",4,"ngFor","ngForOf"],[1,"min-w-[320px]","bg-white/10","backdrop-blur-md","p-4","rounded-xl","shadow-md"],[1,"flex","justify-between","items-start"],[1,"text-white","font-semibold"],[1,"text-gray-300","text-sm"],["class","text-sm bg-green-500 text-black px-2 py-1 rounded-full",4,"ngIf"],["class","text-sm bg-red-500 text-black px-2 py-1 rounded-full",4,"ngIf"],[1,"text-sm","bg-green-500","text-black","px-2","py-1","rounded-full"],[1,"text-sm","bg-red-500","text-black","px-2","py-1","rounded-full"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1)(2,"h2",2),ye(3,"R\xe9servations en cours"),X(),Y(4,"div",3),ze(5,J7,9,5,"div",4),X()()()),2&r&&(se(5),ue("ngForOf",o.reservations))},dependencies:[gl,oo],styles:["[_nghost-%COMP%]{display:block}"]}),t})();const tW=function(t,e){return{"bg-cyan-400":t,"bg-gray-500":e}};function iW(t,e){if(1&t&&(Y(0,"div",8),Ot(1,"div",9),Y(2,"div",10)(3,"div",11),ye(4),X(),Y(5,"div",12),ye(6),X()()()),2&t){const n=e.$implicit;se(1),ue("ngClass",ch(5,tW,"Termin\xe9e"===n.etat,"Annul\xe9e"===n.etat)),se(3),Bi(n.borneName||(n.idBorne?"Borne #"+n.idBorne:"Borne")),se(2),yx("",n.dateDebut," \u2192 ",n.dateFin," \u2014 \xc9tat: ",n.etat,"")}}let nW=(()=>{const e=class{constructor(i){this.api=i,this.reservations=[],this.q="",this.filterBorne="",this.filterEtat="",this.fromDate="",this.toDate=""}ngOnInit(){this.api.list("reservations/mine").subscribe(i=>this.reservations=i||[])}get filtered(){return this.reservations.filter(i=>{if(this.q&&!(i.borneName||"").toLowerCase().includes(this.q.toLowerCase())&&!(i.utilisateurName||"").toLowerCase().includes(this.q.toLowerCase())||this.filterBorne&&String(i.idBorne)!==String(this.filterBorne)||this.filterEtat&&i.etat!==this.filterEtat)return!1;if(this.fromDate){const r=new Date(this.fromDate);if(new Date(i.dateDebut)<r)return!1}if(this.toDate){const r=new Date(this.toDate);if(new Date(i.dateFin)>r)return!1}return!0})}clearFilters(){this.q="",this.filterBorne="",this.filterEtat="",this.fromDate="",this.toDate=""}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs))},e.\u0275cmp=Mt({type:e,selectors:[["reservations-historique"]],decls:11,vars:4,consts:[[1,"max-w-4xl","mx-auto","p-6"],[1,"text-xl","mb-4","font-bold"],[1,"flex","gap-2","mb-4"],["placeholder","Recherche",1,"p-2","border","rounded","flex-1","bg-transparent","text-white",3,"ngModel","ngModelChange"],["type","date",1,"p-2","border","rounded","bg-transparent","text-white",3,"ngModel","ngModelChange"],[1,"px-3","py-2","border","rounded",3,"click"],[1,"space-y-6"],["class","flex items-start gap-4",4,"ngFor","ngForOf"],[1,"flex","items-start","gap-4"],[1,"w-3","h-3","rounded-full","mt-2",3,"ngClass"],[1,"bg-white/5","p-4","rounded-lg","flex-1"],[1,"text-white","font-semibold"],[1,"text-gray-300","text-sm"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"h2",1),ye(2,"Historique des r\xe9servations"),X(),Y(3,"div",2)(4,"input",3),Ue("ngModelChange",function(h){return o.q=h}),X(),Y(5,"input",4),Ue("ngModelChange",function(h){return o.fromDate=h}),X(),Y(6,"input",4),Ue("ngModelChange",function(h){return o.toDate=h}),X(),Y(7,"button",5),Ue("click",function(){return o.clearFilters()}),ye(8,"Nettoyer"),X()(),Y(9,"div",6),ze(10,iW,7,8,"div",7),X()()),2&r&&(se(4),ue("ngModel",o.q),se(1),ue("ngModel",o.fromDate),se(1),ue("ngModel",o.toDate),se(4),ue("ngForOf",o.filtered))},dependencies:[lg,gl,nc,Jc,ed],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function rW(t,e){if(1&t&&(Y(0,"option",9),ye(1),X()),2&t){const n=e.$implicit;ue("value",n.id),se(1),Bi(n.nomBorne||n.nom)}}function oW(t,e){if(1&t){const n=Br();Y(0,"li",10)(1,"div")(2,"div",11),ye(3),X(),Y(4,"div",12),ye(5),X()(),Y(6,"div")(7,"button",13),Ue("click",function(){const o=Wt(n).$implicit;return Zt(Ge().del(o))}),ye(8,"Supprimer"),X()()()}if(2&t){const n=e.$implicit;se(3),Bi(n.filename||n.nom),se(2),Ro("Borne: ",(null==n.borne?null:n.borne.nomBorne)||(null==n.borne?null:n.borne.nom)||"-","")}}let sW=(()=>{const e=class{constructor(i){this.api=i,this.medias=[],this.selectedBorne=null,this.mediasBornes=[]}ngOnInit(){this.load(),this.loadBornes()}load(){this.api.list("medias").subscribe(i=>this.medias=i||[])}loadBornes(){this.api.list("bornes/mine").subscribe(i=>this.mediasBornes=i||[])}onFile(i){if(this.file=i.target.files[0],!this.file)return;const r={filename:this.file.name};this.selectedBorne&&(r.borne={id:this.selectedBorne}),this.api.create("medias",r).subscribe(()=>this.load(),()=>alert("Erreur upload"))}del(i){this.api.delete("medias",i.id).subscribe(()=>this.load())}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(zs))},e.\u0275cmp=Mt({type:e,selectors:[["gestion-medias"]],decls:14,vars:3,consts:[[1,"max-w-3xl","mx-auto","p-4","bg-surface","rounded","shadow"],[1,"text-xl","mb-4","text-foreground"],[1,"mb-3"],[1,"block","mb-1"],[1,"p-2","border","rounded","w-full",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","file",3,"change"],["class","p-2 border-b flex justify-between items-center",4,"ngFor","ngForOf"],[3,"value"],[1,"p-2","border-b","flex","justify-between","items-center"],[1,"font-semibold"],[1,"text-sm","text-gray-600"],[1,"px-2","py-1","bg-red-600","text-inverse","rounded",3,"click"]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"h2",1),ye(2,"M\xe9dias"),X(),Y(3,"div",2)(4,"label",3),ye(5,"Associer \xe0 une borne"),X(),Y(6,"select",4),Ue("ngModelChange",function(h){return o.selectedBorne=h}),Y(7,"option",5),ye(8,"-- choisir --"),X(),ze(9,rW,2,2,"option",6),X()(),Y(10,"div",2)(11,"input",7),Ue("change",function(h){return o.onFile(h)}),X()(),Y(12,"ul"),ze(13,oW,9,2,"li",8),X()()),2&r&&(se(6),ue("ngModel",o.selectedBorne),se(3),ue("ngForOf",o.mediasBornes),se(4),ue("ngForOf",o.medias))},dependencies:[gl,Cv,Dv,Gm,Jc,ed],styles:["[_nghost-%COMP%]{display:block}"]}),t})(),aW=(()=>{const e=class{constructor(i){this.router=i}intercept(i,r){const o=localStorage.getItem("token"),c=o?i.clone({setHeaders:{Authorization:`Bearer ${o}`}}):i;return r.handle(c).pipe(jr(h=>{}),td(h=>((401===h.status||403===h.status)&&(localStorage.removeItem("token"),setTimeout(()=>this.router.navigateByUrl("/connexion"))),xh(()=>h))))}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(Gn))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})(),Ga=(()=>{const e=class{constructor(i,r){this.auth=i,this.router=r}canActivate(){return!!this.auth.isLogged()||(this.router.navigateByUrl("/connexion"),!1)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(rd),we(Gn))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),$C=(()=>{const e=class{constructor(i,r){this.auth=i,this.router=r}canActivate(){return!this.auth.isLogged()||(this.router.navigateByUrl("/"),!1)}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(rd),we(Gn))},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),cW=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[fs,Ei,Rh,Rh,Ei]}),t})(),dW=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,Ei]}),t})(),VW=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[pC,fs,Ei,dp,gR,dW]}),t})();function UW(t,e){}class vb{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let kP=(()=>{const e=class extends AC{constructor(i,r,o,c,h,g,C,S){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=c,this._interactivityChecker=h,this._ngZone=g,this._overlayRef=C,this._focusMonitor=S,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=I=>{this._portalOutlet.hasAttached();const U=this._portalOutlet.attachDomPortal(I);return this._contentAttached(),U},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=o}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const o=Hg(),c=this._elementRef.nativeElement;(!o||o===this._document.body||o===c||c.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=Hg();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Hg())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(fC),G(ci,8),G(vb),G(Jv),G(Rt),G(Qg),G(sd))},e.\u0275cmp=Mt({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(1&r&&cr(lb,7),2&r){let c;Dt(c=Et())&&(o._portalOutlet=c.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){2&r&&vi("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[ot],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){1&r&&ze(0,UW,0,0,"ng-template",0)},dependencies:[lb],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),t})();class WC{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Ct,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!au(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const TP=new Le("DialogScrollStrategy"),jW=new Le("DialogData"),HW=new Le("DefaultDialogConfig"),GW={provide:TP,deps:[dc],useFactory:function $W(t){return()=>t.scrollStrategies.block()}};let qW=0,IP=(()=>{const e=class{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,c,h,g){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=c,this._overlayContainer=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ct,this._afterOpenedAtThisLevel=new Ct,this._ariaHiddenElements=new Map,this.afterAllClosed=Av(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(_s(void 0))),this._scrollStrategy=g}open(i,r){(r={...this._defaultOptions||new vb,...r}).id=r.id||"cdk-dialog-"+qW++,r.id&&this.getDialogById(r.id);const c=this._getOverlayConfig(r),h=this._overlay.create(c),g=new WC(h,r),C=this._attachContainer(h,g,r);return g.containerInstance=C,this._attachDialogContent(i,g,C,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(g),g.closed.subscribe(()=>this._removeOpenDialog(g,!0)),this.afterOpened.next(g),g}closeAll(){ZC(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){ZC(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),ZC(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new LC({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){const c=o.injector||o.viewContainerRef?.injector,h=[{provide:vb,useValue:o},{provide:WC,useValue:r},{provide:Qg,useValue:i}];let g;o.container?"function"==typeof o.container?g=o.container:(g=o.container.type,h.push(...o.container.providers(o))):g=kP;const C=new IC(g,o.viewContainerRef,Ao.create({parent:c||this._injector,providers:h}),o.componentFactoryResolver);return i.attach(C).instance}_attachDialogContent(i,r,o,c){if(i instanceof Kn){const h=this._createInjector(c,r,o,void 0);let g={$implicit:c.data,dialogRef:r};c.templateContext&&(g={...g,..."function"==typeof c.templateContext?c.templateContext():c.templateContext}),o.attachTemplatePortal(new ab(i,null,g,h))}else{const h=this._createInjector(c,r,o,this._injector),g=o.attachComponentPortal(new IC(i,c.viewContainerRef,h,c.componentFactoryResolver));r.componentInstance=g.instance}}_createInjector(i,r,o,c){const h=i.injector||i.viewContainerRef?.injector,g=[{provide:jW,useValue:i.data},{provide:WC,useValue:r}];return i.providers&&("function"==typeof i.providers?g.push(...i.providers(r,i,o)):g.push(...i.providers)),i.direction&&(!h||!h.get(cc,null,{optional:!0}))&&g.push({provide:cc,useValue:{value:i.direction,change:bt()}}),Ao.create({parent:h||c,providers:g})}_removeOpenDialog(i,r){const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((c,h)=>{c?h.setAttribute("aria-hidden",c):h.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){const c=r[o];c!==i&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(dc),we(Ao),we(HW,8),we(e,12),we(cb),we(TP))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})();function ZC(t,e){let n=t.length;for(;n--;)e(t[n])}let WW=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[IP,GW],imports:[hp,up,vC,up]}),t})();function ZW(t,e){}class bb{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const YC="mdc-dialog--open",AP="mdc-dialog--opening",RP="mdc-dialog--closing";let KW=(()=>{const e=class extends kP{constructor(i,r,o,c,h,g,C,S){super(i,r,o,c,h,g,C,S),this._animationStateChanged=new fi}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(fC),G(ci,8),G(bb),G(Jv),G(Rt),G(Qg),G(sd))},e.\u0275cmp=Mt({type:e,selectors:[["ng-component"]],features:[ot],decls:0,vars:0,template:function(r,o){},encapsulation:2}),t})();const PP="--mat-dialog-transition-duration";function OP(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?op(t.substring(0,t.length-2)):t.endsWith("s")?1e3*op(t.substring(0,t.length-1)):"0"===t?0:null}let QW=(()=>{const e=class extends KW{constructor(i,r,o,c,h,g,C,S,I){super(i,r,o,c,h,g,C,I),this._animationMode=S,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?OP(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?OP(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(PP,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(AP,YC)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(YC),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(YC),this._animationsEnabled?(this._hostElement.style.setProperty(PP,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(RP)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(AP,RP)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}};let t=e;return e.\u0275fac=function(r){return new(r||e)(G(St),G(fC),G(ci,8),G(bb),G(Jv),G(Rt),G(Qg),G(hs,8),G(sd))},e.\u0275cmp=Mt({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,o){2&r&&(Ba("id",o._config.id),vi("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),pi("_mat-animation-noopable",!o._animationsEnabled))},features:[ot],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,o){1&r&&(Y(0,"div",0)(1,"div",1),ze(2,ZW,0,0,"ng-template",2),X()())},dependencies:[lb],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),t})();class JW{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ct,this._beforeClosed=new Ct,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(dr(r=>"opened"===r.state),Dr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(dr(r=>"closed"===r.state),Dr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ao(this.backdropClick(),this.keydownEvents().pipe(dr(r=>27===r.keyCode&&!this.disableClose&&!au(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function eZ(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(dr(n=>"closing"===n.state),Dr(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const tZ=new Le("MatMdcDialogData"),iZ=new Le("mat-mdc-dialog-default-options"),FP=new Le("mat-mdc-dialog-scroll-strategy"),rZ={provide:FP,deps:[dc],useFactory:function nZ(t){return()=>t.scrollStrategies.block()}};let oZ=0,sZ=(()=>{const e=class{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,c,h,g,C,S,I,U){this._overlay=i,this._defaultOptions=o,this._parentDialog=c,this._dialogRefConstructor=C,this._dialogContainerType=S,this._dialogDataToken=I,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ct,this._afterOpenedAtThisLevel=new Ct,this._idPrefix="mat-dialog-",this.dialogConfigClass=bb,this.afterAllClosed=Av(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(_s(void 0))),this._scrollStrategy=g,this._dialog=r.get(IP)}open(i,r){let o;(r={...this._defaultOptions||new bb,...r}).id=r.id||`${this._idPrefix}${oZ++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const c=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:vb,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(h,g,C)=>(o=new this._dialogRefConstructor(h,r,C),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:C},{provide:this._dialogDataToken,useValue:g.data},{provide:this._dialogRefConstructor,useValue:o}])});return o.componentInstance=c.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{const h=this.openDialogs.indexOf(o);h>-1&&(this.openDialogs.splice(h,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};let t=e;return e.\u0275fac=function(r){Bf()},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})(),aZ=(()=>{const e=class extends sZ{constructor(i,r,o,c,h,g,C,S){super(i,r,c,g,C,h,JW,QW,tZ,S),this._idPrefix="mat-mdc-dialog-"}};let t=e;return e.\u0275fac=function(r){return new(r||e)(we(dc),we(Ao),we(og,8),we(iZ,8),we(FP),we(e,12),we(cb),we(hs,8))},e.\u0275prov=We({token:e,factory:e.\u0275fac}),t})(),lZ=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[aZ,rZ],imports:[WW,hp,up,Ei,Ei]}),t})(),wZ=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[OC]}),t})(),AZ=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[Ei,wZ,Ei]}),t})(),FZ=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[hp,up,fs,EC,Ei,Ei]}),t})(),zZ=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[fs,Ei]}),t})();const $Z={provide:new Le("mat-select-scroll-strategy"),deps:[dc],useFactory:function HZ(t){return()=>t.scrollStrategies.reposition()}};let WP=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[$Z],imports:[fs,hp,_R,Ei,Rh,pb,_R,Ei]}),t})(),GZ=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[vC,Ei,Ei]}),t})();const Ib=new Le("mat-chips-default-options");let xY=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[lp,{provide:Ib,useValue:{separatorKeyCodes:[13]}}],imports:[Ei,fs,dp,Ei]}),t})();const EY={provide:new Le("mat-tooltip-scroll-strategy"),deps:[dc],useFactory:function DY(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}};let MY=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[EY],imports:[vC,fs,hp,Ei,Ei,Rh]}),t})(),uD=(()=>{const e=class{constructor(){this.changes=new Ct,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(i,r,o)=>{if(0==o||0==r)return`0 of ${o}`;const c=i*r;return`${c+1} \u2013 ${c<(o=Math.max(o,0))?Math.min(c+r,o):c+r} of ${o}`}}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const RY={provide:uD,deps:[[new Jr,new cl,uD]],useFactory:function AY(t){return t||new uD}};let PY=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[RY],imports:[fs,EC,WP,MY]}),t})(),hD=(()=>{const e=class{constructor(){this.changes=new Ct}};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=We({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();const FY={provide:hD,deps:[[new Jr,new cl,hD]],useFactory:function OY(t){return t||new hD}};let LY=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({providers:[FY],imports:[fs,Ei]}),t})(),NY=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e}),e.\u0275inj=zt({imports:[EC,uq,pb,vq,TR,yG,cW,VW,y9,lZ,AZ,FZ,zZ,WP,GZ,xY,Yq,PY,LY]}),t})();const BY=[{path:"",component:v7,canActivate:[Ga]},{path:"inscription",component:n7,canActivate:[$C]},{path:"connexion",component:o7,canActivate:[$C]},{path:"deconnexion",component:s7,canActivate:[Ga]},{path:"lieux",component:E7,canActivate:[Ga]},{path:"adresses",component:M7,canActivate:[Ga]},{path:"bornes",component:z7,canActivate:[Ga]},{path:"bornes/new",component:G7,canActivate:[Ga]},{path:"carte",component:q7,canActivate:[Ga]},{path:"reservation",component:X7,canActivate:[Ga]},{path:"reservations",component:eW,canActivate:[Ga]},{path:"historique",component:nW,canActivate:[Ga]},{path:"medias",component:sW,canActivate:[Ga]}];let zY=(()=>{const e=class{};let t=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Vt({type:e,bootstrap:[D9]}),e.\u0275inj=zt({providers:[zs,rd,Ga,$C,{provide:kA,useClass:aW,multi:!0}],imports:[TT,q6,GU,qU,pj,NY,FH.forRoot(BY)]}),t})();UV().bootstrapModule(zY).catch(t=>console.error(t))},943:function(yp){yp.exports=function(){"use strict";var md,pd,Pi;function du(v,zi){if(md)if(pd){var Vs="var sharedChunk = {}; ("+md+")(sharedChunk); ("+pd+")(sharedChunk);",ys={};md(ys),Pi=zi(ys),typeof window<"u"&&(Pi.workerUrl=window.URL.createObjectURL(new Blob([Vs],{type:"text/javascript"})))}else pd=zi;else md=zi}return du(0,function(v){var zi=Vs;function Vs(l,s,d,m){this.cx=3*l,this.bx=3*(d-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=d,this.p2y=m}function ys(l,s,d,m){const _=new zi(l,s,d,m);return function(b){return _.solve(b)}}Vs.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(void 0===s&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var d=l,m=0;m<8;m++){var _=this.sampleCurveX(d)-l;if(Math.abs(_)<s)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=_/b}var w=0,E=1;for(d=l,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-l)<s));m++)l>_?w=d:E=d,d=.5*(E-w)+w;return d},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};const Oi=ys(.25,.1,.25,1);function Ae(l,s,d){return Math.min(d,Math.max(s,l))}function Us(l,s,d){const m=d-s,_=((l-s)%m+m)%m+s;return _===s?d:_}function Oo(l,...s){for(const d of s)for(const m in d)l[m]=d[m];return l}let hn=1;function fd(l,s){l.forEach(d=>{s[d]&&(s[d]=s[d].bind(s))})}function hc(l,s,d){const m={};for(const _ in l)m[_]=s.call(d||this,l[_],_,l);return m}function js(l,s,d){const m={};for(const _ in l)s.call(d||this,l[_],_,l)&&(m[_]=l[_]);return m}function Gr(l){return Array.isArray(l)?l.map(Gr):"object"==typeof l&&l?hc(l,Gr):l}const Qo={};function xn(l){Qo[l]||(typeof console<"u"&&console.warn(l),Qo[l]=!0)}function vs(l,s,d){return(d.y-l.y)*(s.x-l.x)>(s.y-l.y)*(d.x-l.x)}function bs(l){let s=0;for(let d,m,_=0,b=l.length,w=b-1;_<b;w=_++)d=l[_],m=l[w],s+=(m.x-d.x)*(d.y+m.y);return s}function Fo(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vl(l){const s={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,m,_,b)=>{const w=_||b;return s[m]=!w||w.toLowerCase(),""}),s["max-age"]){const d=parseInt(s["max-age"],10);isNaN(d)?delete s["max-age"]:s["max-age"]=d}return s}let Hs,Jo,Lo=null;function bl(l){if(null==Lo){const s=l.navigator?l.navigator.userAgent:null;Lo=!!l.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Lo}function xs(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const ua={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(l){const s=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(l,s=0){const d=window.document.createElement("canvas"),m=d.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return d.width=l.width,d.height=l.height,m.drawImage(l,0,0,l.width,l.height),m.getImageData(-s,-s,l.width+2*s,l.height+2*s)},resolveURL:l=>(Hs||(Hs=document.createElement("a")),Hs.href=l,Hs.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Jo&&(Jo=matchMedia("(prefers-reduced-motion: reduce)")),Jo.matches)}};var Pt=Er;function Er(l,s){this.x=l,this.y=s}Er.prototype={clone:function(){return new Er(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,s){return this.clone()._rotateAround(l,s)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var s=l.x-this.x,d=l.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,s){return Math.atan2(this.x*s-this.y*l,this.x*l+this.y*s)},_matMult:function(l){var s=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=s,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var s=Math.cos(l),d=Math.sin(l),m=d*this.x+s*this.y;return this.x=s*this.x-d*this.y,this.y=m,this},_rotateAround:function(l,s){var d=Math.cos(l),m=Math.sin(l),_=s.y+m*(this.x-s.x)+d*(this.y-s.y);return this.x=s.x+d*(this.x-s.x)-m*(this.y-s.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Er.convert=function(l){return l instanceof Er?l:Array.isArray(l)?new Er(l[0],l[1]):l};const $s={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},No="mapbox-tiles";let Si,xl=500,wl=50;function Cl(){typeof caches>"u"||Si||(Si=caches.open(No))}let Ct=1/0;const Gs={supported:!1,testSupport:function(l){!Ti&&qs&&(nn?mc(l):Pn=l)}};let Pn,qs,Ti=!1,nn=!1;function mc(l){const s=l.createTexture();l.bindTexture(l.TEXTURE_2D,s);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,qs),l.isContextLost())return;Gs.supported=!0}catch{}l.deleteTexture(s),Ti=!0}typeof document<"u"&&(qs=document.createElement("img"),qs.onload=function(){Pn&&mc(Pn),Pn=null,nn=!0},qs.onerror=function(){Ti=!0,Pn=null},qs.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Gt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Gt);class qr extends Error{constructor(s,d,m,_){super(`AJAXError: ${d} (${s}): ${m}`),this.status=s,this.statusText=d,this.url=m,this.body=_}}const pc=Fo()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function ws(l,s){const d=new AbortController,m=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:pc(),signal:d.signal});let _=!1,b=!1;return"json"===l.type&&m.headers.set("Accept","application/json"),((w,E,M)=>{if(b)return;const R=Date.now();fetch(m).then(F=>{return F.ok?(N=F,null,R,void("arrayBuffer"===l.type?N.arrayBuffer():"json"===l.type?N.json():N.text()).then($=>{b||(_=!0,s(null,$,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch($=>{b||s(new Error($.message))})):F.blob().then(N=>s(new qr(F.status,F.statusText,l.url,N)));var N}).catch(F=>{20!==F.code&&s(new Error(F.message))})})(),{cancel:()=>{b=!0,_||d.abort()}}}const Dl=function(l,s){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){if(Fo()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,s);if(!Fo()){const m=l.url.substring(0,l.url.indexOf("://"));return($s.REGISTERED_PROTOCOLS[m]||ws)(l,s)}}if(!(/^file:/.test(d=l.url)||/^file:/.test(pc())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ws(l,s);if(Fo()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,s,void 0,!0)}var d;return function(m,_){const b=new XMLHttpRequest;b.open(m.method||"GET",m.url,!0),"arrayBuffer"===m.type&&(b.responseType="arraybuffer");for(const w in m.headers)b.setRequestHeader(w,m.headers[w]);return"json"===m.type&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials="include"===m.credentials,b.onerror=()=>{_(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||0===b.status)&&null!==b.response){let w=b.response;if("json"===m.type)try{w=JSON.parse(b.response)}catch(E){return _(E)}_(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else{const w=new Blob([b.response],{type:b.getResponseHeader("Content-Type")});_(new qr(b.status,b.statusText,m.url,w))}},b.send(m.body),{cancel:()=>b.abort()}}(l,s)},El=function(l,s){return Dl(Oo(l,{type:"arrayBuffer"}),s)};function fc(l){const s=window.document.createElement("a");return s.href=l,s.protocol===window.document.location.protocol&&s.host===window.document.location.host}const Mi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Cs,ma;Cs=[],ma=0;const pa=function(l,s){if(Gs.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),ma>=$s.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:l,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Cs.push(b),b}ma++;let d=!1;const m=()=>{if(!d)for(d=!0,ma--;Cs.length&&ma<$s.MAX_PARALLEL_IMAGE_REQUESTS;){const b=Cs.shift(),{requestParameters:w,callback:E,cancelled:M}=b;M||(b.cancel=pa(w,E).cancel)}},_=El(l,(b,w,E,M)=>{var R,F;m(),b?s(b):w&&(R=w,F=(R,F)=>{null!=R?s(R):null!=F&&s(null,F,{cacheControl:E,expires:M})},"function"==typeof createImageBitmap?function(N,V){const j=new Blob([new Uint8Array(N)],{type:"image/png"});createImageBitmap(j).then($=>{V(null,$)}).catch($=>{V(new Error(`Could not load image because of ${$.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(R,F):function(N,V){const j=new Image;j.onload=()=>{V(null,j),URL.revokeObjectURL(j.src),j.onload=null,window.requestAnimationFrame(()=>{j.src=Mi})},j.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const $=new Blob([new Uint8Array(N)],{type:"image/png"});j.src=N.byteLength?URL.createObjectURL($):Mi}(R,F))});return{cancel:()=>{_.cancel(),m()}}};function gc(l,s,d){d[l]&&-1!==d[l].indexOf(s)||(d[l]=d[l]||[],d[l].push(s))}function Ds(l,s,d){if(d&&d[l]){const m=d[l].indexOf(s);-1!==m&&d[l].splice(m,1)}}class Ws{constructor(s,d={}){Oo(this,d),this.type=s}}class fa extends Ws{constructor(s,d={}){super("error",Oo({error:s},d))}}class Zs{on(s,d){return this._listeners=this._listeners||{},gc(s,d,this._listeners),this}off(s,d){return Ds(s,d,this._listeners),Ds(s,d,this._oneTimeListeners),this}once(s,d){return this._oneTimeListeners=this._oneTimeListeners||{},gc(s,d,this._oneTimeListeners),this}fire(s,d){"string"==typeof s&&(s=new Ws(s,d||{}));const m=s.type;if(this.listens(m)){s.target=this;const _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const E of _)E.call(this,s);const b=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const E of b)Ds(m,E,this._oneTimeListeners),E.call(this,s);const w=this._eventedParent;w&&(Oo(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(s))}else s instanceof fa&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,d){return this._eventedParent=s,this._eventedParentData=d,this}}var Re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class et{constructor(s,d,m,_){this.message=(s?`${s}: `:"")+m,_&&(this.identifier=_),null!=d&&d.__line__&&(this.line=d.__line__)}}function Wa(l){const s=l.value;return s?[new et(l.key,s,"constants have been deprecated as of v8")]:[]}function es(l,...s){for(const d of s)for(const m in d)l[m]=d[m];return l}function ki(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Wn(l){if(Array.isArray(l))return l.map(Wn);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const s={};for(const d in l)s[d]=Wn(l[d]);return s}return ki(l)}class so extends Error{constructor(s,d){super(d),this.message=d,this.key=s}}class wo{constructor(s,d=[]){this.parent=s,this.bindings={};for(const[m,_]of d)this.bindings[m]=_}concat(s){return new wo(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Ys={kind:"null"},Qe={kind:"number"},ri={kind:"string"},jt={kind:"boolean"},hr={kind:"color"},ga={kind:"object"},Ht={kind:"value"},Xs={kind:"collator"},er={kind:"formatted"},Sl={kind:"padding"},Vn={kind:"resolvedImage"};function Wr(l,s){return{kind:"array",itemType:l,N:s}}function Xi(l){if("array"===l.kind){const s=Xi(l.itemType);return"number"==typeof l.N?`array<${s}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${s}>`}return l.kind}const _c=[Ys,Qe,ri,jt,hr,er,ga,Wr(Ht),Sl,Vn];function Bo(l,s){if("error"===s.kind)return null;if("array"===l.kind){if("array"===s.kind&&(0===s.N&&"value"===s.itemType.kind||!Bo(l.itemType,s.itemType))&&("number"!=typeof l.N||l.N===s.N))return null}else{if(l.kind===s.kind)return null;if("value"===l.kind)for(const d of _c)if(!Bo(d,s))return null}return`Expected ${Xi(l)} but found ${Xi(s)} instead.`}function _a(l,s){return s.some(d=>d.kind===l.kind)}function ya(l,s){return s.some(d=>"null"===d?null===l:"array"===d?Array.isArray(l):"object"===d?l&&!Array.isArray(l)&&"object"==typeof l:d===typeof l)}var Za,va={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function K(l){return(l=Math.round(l))<0?0:l>255?255:l}function O(l){return K("%"===l[l.length-1]?parseFloat(l)/100*255:parseInt(l))}function B(l){return(s="%"===l[l.length-1]?parseFloat(l)/100:parseFloat(l))<0?0:s>1?1:s;var s}function W(l,s,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?l+(s-l)*d*6:2*d<1?s:3*d<2?l+(s-l)*(2/3-d)*6:l}try{Za={}.parseCSSColor=function(l){var s,d=l.replace(/ /g,"").toLowerCase();if(d in va)return va[d].slice();if("#"===d[0])return 4===d.length?(s=parseInt(d.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:7===d.length&&(s=parseInt(d.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var m=d.indexOf("("),_=d.indexOf(")");if(-1!==m&&_+1===d.length){var b=d.substr(0,m),w=d.substr(m+1,_-(m+1)).split(","),E=1;switch(b){case"rgba":if(4!==w.length)return null;E=B(w.pop());case"rgb":return 3!==w.length?null:[O(w[0]),O(w[1]),O(w[2]),E];case"hsla":if(4!==w.length)return null;E=B(w.pop());case"hsl":if(3!==w.length)return null;var M=(parseFloat(w[0])%360+360)%360/360,R=B(w[1]),F=B(w[2]),N=F<=.5?F*(R+1):F+R-F*R,V=2*F-N;return[K(255*W(V,N,M+1/3)),K(255*W(V,N,M)),K(255*W(V,N,M-1/3)),E];default:return null}}return null}}catch{}class Z{constructor(s,d,m,_=1){this.r=s,this.g=d,this.b=m,this.a=_}static parse(s){if(!s)return;if(s instanceof Z)return s;if("string"!=typeof s)return;const d=Za(s);return d?new Z(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[s,d,m,_]=this.toArray();return`rgba(${Math.round(s)},${Math.round(d)},${Math.round(m)},${_})`}toArray(){const{r:s,g:d,b:m,a:_}=this;return 0===_?[0,0,0,0]:[255*s/_,255*d/_,255*m/_,_]}}Z.black=new Z(0,0,0,1),Z.white=new Z(1,1,1,1),Z.transparent=new Z(0,0,0,0),Z.red=new Z(1,0,0,1);class re{constructor(s,d,m){this.sensitivity=s?d?"variant":"case":d?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,d){return this.collator.compare(s,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class he{constructor(s,d,m,_,b){this.text=s,this.image=d,this.scale=m,this.fontStack=_,this.textColor=b}}class le{constructor(s){this.sections=s}static fromString(s){return new le([new he(s,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(s=>0!==s.text.length||s.image&&0!==s.image.name.length)}static factory(s){return s instanceof le?s:le.fromString(s)}toString(){return 0===this.sections.length?"":this.sections.map(s=>s.text).join("")}}class ae{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof ae)return s;if("number"==typeof s)return new ae([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const d of s)if("number"!=typeof d)return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new ae(s)}}toString(){return JSON.stringify(this.values)}}class me{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new me({name:s,available:!1}):null}}function Me(l,s,d,m){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof s&&s>=0&&s<=255&&"number"==typeof d&&d>=0&&d<=255?void 0===m||"number"==typeof m&&m>=0&&m<=1?null:`Invalid rgba value [${[l,s,d,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof m?[l,s,d,m]:[l,s,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ve(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof Z||l instanceof re||l instanceof le||l instanceof ae||l instanceof me)return!0;if(Array.isArray(l)){for(const s of l)if(!Ve(s))return!1;return!0}if("object"==typeof l){for(const s in l)if(!Ve(l[s]))return!1;return!0}return!1}function Se(l){if(null===l)return Ys;if("string"==typeof l)return ri;if("boolean"==typeof l)return jt;if("number"==typeof l)return Qe;if(l instanceof Z)return hr;if(l instanceof re)return Xs;if(l instanceof le)return er;if(l instanceof ae)return Sl;if(l instanceof me)return Vn;if(Array.isArray(l)){const s=l.length;let d;for(const m of l){const _=Se(m);if(d){if(d===_)continue;d=Ht;break}d=_}return Wr(d||Ht,s)}return ga}function st(l){const s=typeof l;return null===l?"":"string"===s||"number"===s||"boolean"===s?String(l):l instanceof Z||l instanceof le||l instanceof ae||l instanceof me?l.toString():JSON.stringify(l)}class gt{constructor(s,d){this.type=s,this.value=d}static parse(s,d){if(2!==s.length)return d.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Ve(s[1]))return d.error("invalid value");const m=s[1];let _=Se(m);const b=d.expectedType;return"array"!==_.kind||0!==_.N||!b||"array"!==b.kind||"number"==typeof b.N&&0!==b.N||(_=b),new gt(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class qe{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const xt={string:ri,number:Qe,boolean:jt,object:ga};class vt{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");let m,_=1;const b=s[0];if("array"===b){let E,M;if(s.length>2){const R=s[1];if("string"!=typeof R||!(R in xt)||"object"===R)return d.error('The item type argument of "array" must be one of string, number, boolean',1);E=xt[R],_++}else E=Ht;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return d.error('The length argument to "array" must be a positive integer literal',2);M=s[2],_++}m=Wr(E,M)}else{if(!xt[b])throw new Error(`Types doesn't contain name = ${b}`);m=xt[b]}const w=[];for(;_<s.length;_++){const E=d.parse(s[_],_,Ht);if(!E)return null;w.push(E)}return new vt(m,w)}evaluate(s){for(let d=0;d<this.args.length;d++){const m=this.args[d].evaluate(s);if(!Bo(this.type,Se(m)))return m;if(d===this.args.length-1)throw new qe(`Expected value to be of type ${Xi(this.type)}, but found ${Xi(Se(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Ii={"to-boolean":jt,"to-color":hr,"to-number":Qe,"to-string":ri};class Nt{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");const m=s[0];if(!Ii[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if(("to-boolean"===m||"to-string"===m)&&2!==s.length)return d.error("Expected one argument.");const _=Ii[m],b=[];for(let w=1;w<s.length;w++){const E=d.parse(s[w],w,Ht);if(!E)return null;b.push(E)}return new Nt(_,b)}evaluate(s){if("boolean"===this.type.kind)return!!this.args[0].evaluate(s);if("color"===this.type.kind){let d,m;for(const _ of this.args){if(d=_.evaluate(s),m=null,d instanceof Z)return d;if("string"==typeof d){const b=s.parseColor(d);if(b)return b}else if(Array.isArray(d)&&(m=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:Me(d[0],d[1],d[2],d[3]),!m))return new Z(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new qe(m||`Could not parse color from value '${"string"==typeof d?d:JSON.stringify(d)}'`)}if("padding"===this.type.kind){let d;for(const m of this.args){d=m.evaluate(s);const _=ae.parse(d);if(_)return _}throw new qe(`Could not parse padding from value '${"string"==typeof d?d:JSON.stringify(d)}'`)}if("number"===this.type.kind){let d=null;for(const m of this.args){if(d=m.evaluate(s),null===d)return 0;const _=Number(d);if(!isNaN(_))return _}throw new qe(`Could not convert ${JSON.stringify(d)} to number.`)}return"formatted"===this.type.kind?le.fromString(st(this.args[0].evaluate(s))):"resolvedImage"===this.type.kind?me.fromString(st(this.args[0].evaluate(s))):st(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const ti=["Unknown","Point","LineString","Polygon"];class _i{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ti[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let d=this._parseColorCache[s];return d||(d=this._parseColorCache[s]=Z.parse(s)),d}}class Ki{constructor(s,d,m,_){this.name=s,this.type=d,this._evaluate=m,this.args=_}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,d){const m=s[0],_=Ki.definitions[m];if(!_)return d.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(_)?_[0]:_.type,w=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,E=w.filter(([R])=>!Array.isArray(R)||R.length===s.length-1);let M=null;for(const[R,F]of E){M=new ba(d.registry,d.path,null,d.scope);const N=[];let V=!1;for(let j=1;j<s.length;j++){const $=s[j],oe=Array.isArray(R)?R[j-1]:R.type,ie=M.parse($,1+N.length,oe);if(!ie){V=!0;break}N.push(ie)}if(!V)if(Array.isArray(R)&&R.length!==N.length)M.error(`Expected ${R.length} arguments, but found ${N.length} instead.`);else{for(let j=0;j<N.length;j++){const $=Array.isArray(R)?R[j]:R.type,oe=N[j];M.concat(j+1).checkSubtype($,oe.type)}if(0===M.errors.length)return new Ki(m,b,F,N)}}if(1===E.length)d.errors.push(...M.errors);else{const R=(E.length?E:w).map(([N])=>{return V=N,Array.isArray(V)?`(${V.map(Xi).join(", ")})`:`(${Xi(V.type)}...)`;var V}).join(" | "),F=[];for(let N=1;N<s.length;N++){const V=d.parse(s[N],1+F.length);if(!V)return null;F.push(Xi(V.type))}d.error(`Expected arguments of type ${R}, but found (${F.join(", ")}) instead.`)}return null}static register(s,d){Ki.definitions=d;for(const m in d)s[m]=Ki}}class Mn{constructor(s,d,m){this.type=Xs,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=d}static parse(s,d){if(2!==s.length)return d.error("Expected one argument.");const m=s[1];if("object"!=typeof m||Array.isArray(m))return d.error("Collator options argument must be an object.");const _=d.parse(void 0!==m["case-sensitive"]&&m["case-sensitive"],1,jt);if(!_)return null;const b=d.parse(void 0!==m["diacritic-sensitive"]&&m["diacritic-sensitive"],1,jt);if(!b)return null;let w=null;return m.locale&&(w=d.parse(m.locale,1,ri),!w)?null:new Mn(_,b,w)}evaluate(s){return new re(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const gn=8192;function mr(l,s){l[0]=Math.min(l[0],s[0]),l[1]=Math.min(l[1],s[1]),l[2]=Math.max(l[2],s[0]),l[3]=Math.max(l[3],s[1])}function Ya(l,s){return!(l[0]<=s[0]||l[2]>=s[2]||l[1]<=s[1]||l[3]>=s[3])}function yc(l,s){const d=(180+l[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,_=Math.pow(2,s.z);return[Math.round(d*_*gn),Math.round(m*_*gn)]}function rn(l,s,d){const m=l[0]-s[0],_=l[1]-s[1],b=l[0]-d[0],w=l[1]-d[1];return m*w-b*_==0&&m*b<=0&&_*w<=0}function uu(l,s){let d=!1;for(let w=0,E=s.length;w<E;w++){const M=s[w];for(let R=0,F=M.length;R<F-1;R++){if(rn(l,M[R],M[R+1]))return!1;(_=M[R])[1]>(m=l)[1]!=(b=M[R+1])[1]>m[1]&&m[0]<(b[0]-_[0])*(m[1]-_[1])/(b[1]-_[1])+_[0]&&(d=!d)}}var m,_,b;return d}function hu(l,s){for(let d=0;d<s.length;d++)if(uu(l,s[d]))return!0;return!1}function mu(l,s,d,m){const _=m[0]-d[0],b=m[1]-d[1],w=(l[0]-d[0])*b-_*(l[1]-d[1]),E=(s[0]-d[0])*b-_*(s[1]-d[1]);return w>0&&E<0||w<0&&E>0}function Lh(l,s,d){for(const R of d)for(let F=0;F<R.length-1;++F)if((E=[(w=R[F+1])[0]-(b=R[F])[0],w[1]-b[1]])[0]*(M=[(_=s)[0]-(m=l)[0],_[1]-m[1]])[1]-E[1]*M[0]!=0&&mu(m,_,b,w)&&mu(b,w,m,_))return!0;var m,_,b,w,E,M;return!1}function pu(l,s){for(let d=0;d<l.length;++d)if(!uu(l[d],s))return!1;for(let d=0;d<l.length-1;++d)if(Lh(l[d],l[d+1],s))return!1;return!0}function Un(l,s){for(let d=0;d<s.length;d++)if(pu(l,s[d]))return!0;return!1}function ao(l,s,d){const m=[];for(let _=0;_<l.length;_++){const b=[];for(let w=0;w<l[_].length;w++){const E=yc(l[_][w],d);mr(s,E),b.push(E)}m.push(b)}return m}function bt(l,s,d){const m=[];for(let _=0;_<l.length;_++){const b=ao(l[_],s,d);m.push(b)}return m}function gd(l,s,d,m){if(l[0]<d[0]||l[0]>d[2]){const _=.5*m;let b=l[0]-d[0]>_?-m:d[0]-l[0]>_?m:0;0===b&&(b=l[0]-d[2]>_?-m:d[2]-l[0]>_?m:0),l[0]+=b}mr(s,l)}function _d(l,s,d,m){const _=Math.pow(2,m.z)*gn,b=[m.x*gn,m.y*gn],w=[];for(const E of l)for(const M of E){const R=[M.x+b[0],M.y+b[1]];gd(R,s,d,_),w.push(R)}return w}function Sr(l,s,d,m){const _=Math.pow(2,m.z)*gn,b=[m.x*gn,m.y*gn],w=[];for(const M of l){const R=[];for(const F of M){const N=[F.x+b[0],F.y+b[1]];mr(s,N),R.push(N)}w.push(R)}if(s[2]-s[0]<=_/2){(E=s)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const M of w)for(const R of M)gd(R,s,d,_)}var E;return w}class Ks{constructor(s,d){this.type=jt,this.geojson=s,this.geometries=d}static parse(s,d){if(2!==s.length)return d.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Ve(s[1])){const m=s[1];if("FeatureCollection"===m.type)for(let _=0;_<m.features.length;++_){const b=m.features[_].geometry.type;if("Polygon"===b||"MultiPolygon"===b)return new Ks(m,m.features[_].geometry)}else if("Feature"===m.type){const _=m.geometry.type;if("Polygon"===_||"MultiPolygon"===_)return new Ks(m,m.geometry)}else if("Polygon"===m.type||"MultiPolygon"===m.type)return new Ks(m,m)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(d,m){const _=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if("Polygon"===m.type){const E=ao(m.coordinates,b,w),M=_d(d.geometry(),_,b,w);if(!Ya(_,b))return!1;for(const R of M)if(!uu(R,E))return!1}if("MultiPolygon"===m.type){const E=bt(m.coordinates,b,w),M=_d(d.geometry(),_,b,w);if(!Ya(_,b))return!1;for(const R of M)if(!hu(R,E))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(d,m){const _=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if("Polygon"===m.type){const E=ao(m.coordinates,b,w),M=Sr(d.geometry(),_,b,w);if(!Ya(_,b))return!1;for(const R of M)if(!pu(R,E))return!1}if("MultiPolygon"===m.type){const E=bt(m.coordinates,b,w),M=Sr(d.geometry(),_,b,w);if(!Ya(_,b))return!1;for(const R of M)if(!Un(R,E))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function vc(l){if(l instanceof Ki&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof Ks)return!1;let s=!0;return l.eachChild(d=>{s&&!vc(d)&&(s=!1)}),s}function Fi(l){if(l instanceof Ki&&"feature-state"===l.name)return!1;let s=!0;return l.eachChild(d=>{s&&!Fi(d)&&(s=!1)}),s}function Ml(l,s){if(l instanceof Ki&&s.indexOf(l.name)>=0)return!1;let d=!0;return l.eachChild(m=>{d&&!Ml(m,s)&&(d=!1)}),d}class kn{constructor(s,d){this.type=d.type,this.name=s,this.boundExpression=d}static parse(s,d){if(2!==s.length||"string"!=typeof s[1])return d.error("'var' expression requires exactly one string literal argument.");const m=s[1];return d.scope.has(m)?new kn(m,d.scope.get(m)):d.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class ba{constructor(s,d=[],m,_=new wo,b=[]){this.registry=s,this.path=d,this.key=d.map(w=>`[${w}]`).join(""),this.scope=_,this.errors=b,this.expectedType=m}parse(s,d,m,_,b={}){return d?this.concat(d,m,_)._parse(s,b):this._parse(s,b)}_parse(s,d){function m(_,b,w){return"assert"===w?new vt(b,[_]):"coerce"===w?new Nt(b,[_]):_}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=s[0];if("string"!=typeof _)return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[_];if(b){let w=b.parse(s,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,M=w.type;if("string"!==E.kind&&"number"!==E.kind&&"boolean"!==E.kind&&"object"!==E.kind&&"array"!==E.kind||"value"!==M.kind)if("color"!==E.kind&&"formatted"!==E.kind&&"resolvedImage"!==E.kind||"value"!==M.kind&&"string"!==M.kind)if("padding"!==E.kind||"value"!==M.kind&&"number"!==M.kind&&"array"!==M.kind){if(this.checkSubtype(E,M))return null}else w=m(w,E,d.typeAnnotation||"coerce");else w=m(w,E,d.typeAnnotation||"coerce");else w=m(w,E,d.typeAnnotation||"assert")}if(!(w instanceof gt)&&"resolvedImage"!==w.type.kind&&fu(w)){const E=new _i;try{w=new gt(w.type,w.evaluate(E))}catch(M){return this.error(M.message),null}}return w}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,d,m){const _="number"==typeof s?this.path.concat(s):this.path,b=m?this.scope.concat(m):this.scope;return new ba(this.registry,_,d||null,b,this.errors)}error(s,...d){const m=`${this.key}${d.map(_=>`[${_}]`).join("")}`;this.errors.push(new so(m,s))}checkSubtype(s,d){const m=Bo(s,d);return m&&this.error(m),m}}function fu(l){if(l instanceof kn)return fu(l.boundExpression);if(l instanceof Ki&&"error"===l.name||l instanceof Mn||l instanceof Ks)return!1;const s=l instanceof Nt||l instanceof vt;let d=!0;return l.eachChild(m=>{d=s?d&&fu(m):d&&m instanceof gt}),!!d&&vc(l)&&Ml(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Vi(l,s){const d=l.length-1;let m,_,b=0,w=d,E=0;for(;b<=w;)if(E=Math.floor((b+w)/2),m=l[E],_=l[E+1],m<=s){if(E===d||s<_)return E;b=E+1}else{if(!(m>s))throw new qe("Input is not a number.");w=E-1}return 0}class Bt{constructor(s,d,m){this.type=s,this.input=d,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static parse(s,d){if(s.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return d.error("Expected an even number of arguments.");const m=d.parse(s[1],1,Qe);if(!m)return null;const _=[];let b=null;d.expectedType&&"value"!==d.expectedType.kind&&(b=d.expectedType);for(let w=1;w<s.length;w+=2){const E=1===w?-1/0:s[w],M=s[w+1],R=w,F=w+1;if("number"!=typeof E)return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(_.length&&_[_.length-1][0]>=E)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const N=d.parse(M,F,b);if(!N)return null;b=b||N.type,_.push([E,N])}return new Bt(b,m,_)}evaluate(s){const d=this.labels,m=this.outputs;if(1===d.length)return m[0].evaluate(s);const _=this.input.evaluate(s);if(_<=d[0])return m[0].evaluate(s);const b=d.length;return _>=d[b-1]?m[b-1].evaluate(s):m[Vi(d,_)].evaluate(s)}eachChild(s){s(this.input);for(const d of this.outputs)s(d)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function ln(l,s,d){return l*(1-d)+s*d}var Xa=Object.freeze({__proto__:null,number:ln,color:function(l,s,d){return new Z(ln(l.r,s.r,d),ln(l.g,s.g,d),ln(l.b,s.b,d),ln(l.a,s.a,d))},array:function(l,s,d){return l.map((m,_)=>ln(m,s[_],d))},padding:function(l,s,d){const m=l.values,_=s.values;return new ae([ln(m[0],_[0],d),ln(m[1],_[1],d),ln(m[2],_[2],d),ln(m[3],_[3],d)])}});const Ie=4/29,Ka=6/29,Xt=3*Ka*Ka,Qi=Math.PI/180,xp=180/Math.PI;function Nh(l){return l>.008856451679035631?Math.pow(l,1/3):l/Xt+Ie}function _u(l){return l>Ka?l*l*l:Xt*(l-Ie)}function kl(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function Zr(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function ji(l){const s=Zr(l.r),d=Zr(l.g),m=Zr(l.b),_=Nh((.4124564*s+.3575761*d+.1804375*m)/.95047),b=Nh((.2126729*s+.7151522*d+.072175*m)/1);return{l:116*b-16,a:500*(_-b),b:200*(b-Nh((.0193339*s+.119192*d+.9503041*m)/1.08883)),alpha:l.a}}function Bh(l){let s=(l.l+16)/116,d=isNaN(l.a)?s:s+l.a/500,m=isNaN(l.b)?s:s-l.b/200;return s=1*_u(s),d=.95047*_u(d),m=1.08883*_u(m),new Z(kl(3.2404542*d-1.5371385*s-.4985314*m),kl(-.969266*d+1.8760108*s+.041556*m),kl(.0556434*d-.2040259*s+1.0572252*m),l.alpha)}function o_(l,s,d){const m=s-l;return l+d*(m>180||m<-180?m-360*Math.round(m/360):m)}const zo={forward:ji,reverse:Bh,interpolate:function(l,s,d){return{l:ln(l.l,s.l,d),a:ln(l.a,s.a,d),b:ln(l.b,s.b,d),alpha:ln(l.alpha,s.alpha,d)}}},yd={forward:function(l){const{l:s,a:d,b:m}=ji(l),_=Math.atan2(m,d)*xp;return{h:_<0?_+360:_,c:Math.sqrt(d*d+m*m),l:s,alpha:l.a}},reverse:function(l){const s=l.h*Qi,d=l.c;return Bh({l:l.l,a:Math.cos(s)*d,b:Math.sin(s)*d,alpha:l.alpha})},interpolate:function(l,s,d){return{h:o_(l.h,s.h,d),c:ln(l.c,s.c,d),l:ln(l.l,s.l,d),alpha:ln(l.alpha,s.alpha,d)}}};var wp=Object.freeze({__proto__:null,lab:zo,hcl:yd});class Vo{constructor(s,d,m,_,b){this.type=s,this.operator=d,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(const[w,E]of b)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(s,d,m,_){let b=0;if("exponential"===s.name)b=zh(d,s.base,m,_);else if("linear"===s.name)b=zh(d,1,m,_);else if("cubic-bezier"===s.name){const w=s.controlPoints;b=new zi(w[0],w[1],w[2],w[3]).solve(zh(d,1,m,_))}return b}static parse(s,d){let[m,_,b,...w]=s;if(!Array.isArray(_)||0===_.length)return d.error("Expected an interpolation type expression.",1);if("linear"===_[0])_={name:"linear"};else if("exponential"===_[0]){const R=_[1];if("number"!=typeof R)return d.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:R}}else{if("cubic-bezier"!==_[0])return d.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const R=_.slice(1);if(4!==R.length||R.some(F=>"number"!=typeof F||F<0||F>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:R}}}if(s.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(b=d.parse(b,2,Qe),!b)return null;const E=[];let M=null;"interpolate-hcl"===m||"interpolate-lab"===m?M=hr:d.expectedType&&"value"!==d.expectedType.kind&&(M=d.expectedType);for(let R=0;R<w.length;R+=2){const F=w[R],N=w[R+1],V=R+3,j=R+4;if("number"!=typeof F)return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(E.length&&E[E.length-1][0]>=F)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const $=d.parse(N,j,M);if(!$)return null;M=M||$.type,E.push([F,$])}return"number"===M.kind||"color"===M.kind||"padding"===M.kind||"array"===M.kind&&"number"===M.itemType.kind&&"number"==typeof M.N?new Vo(M,m,_,b,E):d.error(`Type ${Xi(M)} is not interpolatable.`)}evaluate(s){const d=this.labels,m=this.outputs;if(1===d.length)return m[0].evaluate(s);const _=this.input.evaluate(s);if(_<=d[0])return m[0].evaluate(s);const b=d.length;if(_>=d[b-1])return m[b-1].evaluate(s);const w=Vi(d,_),E=Vo.interpolationFactor(this.interpolation,_,d[w],d[w+1]),M=m[w].evaluate(s),R=m[w+1].evaluate(s);return"interpolate"===this.operator?Xa[this.type.kind.toLowerCase()](M,R,E):"interpolate-hcl"===this.operator?yd.reverse(yd.interpolate(yd.forward(M),yd.forward(R),E)):zo.reverse(zo.interpolate(zo.forward(M),zo.forward(R),E))}eachChild(s){s(this.input);for(const d of this.outputs)s(d)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function zh(l,s,d,m){const _=m-d,b=l-d;return 0===_?0:1===s?b/_:(Math.pow(s,b)-1)/(Math.pow(s,_)-1)}class vd{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expectected at least one argument.");let m=null;const _=d.expectedType;_&&"value"!==_.kind&&(m=_);const b=[];for(const E of s.slice(1)){const M=d.parse(E,1+b.length,m,void 0,{typeAnnotation:"omit"});if(!M)return null;m=m||M.type,b.push(M)}if(!m)throw new Error("No output type");const w=_&&b.some(E=>Bo(_,E.type));return new vd(w?Ht:m,b)}evaluate(s){let d,m=null,_=0;for(const b of this.args)if(_++,m=b.evaluate(s),m&&m instanceof me&&!m.available&&(d||(d=m.name),m=null,_===this.args.length&&(m=d)),null!==m)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class yu{constructor(s,d){this.type=d.type,this.bindings=[].concat(s),this.result=d}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const d of this.bindings)s(d[1]);s(this.result)}static parse(s,d){if(s.length<4)return d.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let b=1;b<s.length-1;b+=2){const w=s[b];if("string"!=typeof w)return d.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return d.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=d.parse(s[b+1],b+1);if(!E)return null;m.push([w,E])}const _=d.parse(s[s.length-1],s.length-1,d.expectedType,m);return _?new yu(m,_):null}outputDefined(){return this.result.outputDefined()}}class vu{constructor(s,d,m){this.type=s,this.index=d,this.input=m}static parse(s,d){if(3!==s.length)return d.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=d.parse(s[1],1,Qe),_=d.parse(s[2],2,Wr(d.expectedType||Ht));return m&&_?new vu(_.type.itemType,m,_):null}evaluate(s){const d=this.index.evaluate(s),m=this.input.evaluate(s);if(d<0)throw new qe(`Array index out of bounds: ${d} < 0.`);if(d>=m.length)throw new qe(`Array index out of bounds: ${d} > ${m.length-1}.`);if(d!==Math.floor(d))throw new qe(`Array index must be an integer, but found ${d} instead.`);return m[d]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Vh{constructor(s,d){this.type=jt,this.needle=s,this.haystack=d}static parse(s,d){if(3!==s.length)return d.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=d.parse(s[1],1,Ht),_=d.parse(s[2],2,Ht);return m&&_?_a(m.type,[jt,ri,Qe,Ys,Ht])?new Vh(m,_):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xi(m.type)} instead`):null}evaluate(s){const d=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!ya(d,["boolean","string","number","null"]))throw new qe(`Expected first argument to be of type boolean, string, number or null, but found ${Xi(Se(d))} instead.`);if(!ya(m,["string","array"]))throw new qe(`Expected second argument to be of type array or string, but found ${Xi(Se(m))} instead.`);return m.indexOf(d)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class Yr{constructor(s,d,m){this.type=Qe,this.needle=s,this.haystack=d,this.fromIndex=m}static parse(s,d){if(s.length<=2||s.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=d.parse(s[1],1,Ht),_=d.parse(s[2],2,Ht);if(!m||!_)return null;if(!_a(m.type,[jt,ri,Qe,Ys,Ht]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xi(m.type)} instead`);if(4===s.length){const b=d.parse(s[3],3,Qe);return b?new Yr(m,_,b):null}return new Yr(m,_)}evaluate(s){const d=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!ya(d,["boolean","string","number","null"]))throw new qe(`Expected first argument to be of type boolean, string, number or null, but found ${Xi(Se(d))} instead.`);if(!ya(m,["string","array"]))throw new qe(`Expected second argument to be of type array or string, but found ${Xi(Se(m))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(s);return m.indexOf(d,_)}return m.indexOf(d)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Hi{constructor(s,d,m,_,b,w){this.inputType=s,this.type=d,this.input=m,this.cases=_,this.outputs=b,this.otherwise=w}static parse(s,d){if(s.length<5)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return d.error("Expected an even number of arguments.");let m,_;d.expectedType&&"value"!==d.expectedType.kind&&(_=d.expectedType);const b={},w=[];for(let R=2;R<s.length-1;R+=2){let F=s[R];const N=s[R+1];Array.isArray(F)||(F=[F]);const V=d.concat(R);if(0===F.length)return V.error("Expected at least one branch label.");for(const $ of F){if("number"!=typeof $&&"string"!=typeof $)return V.error("Branch labels must be numbers or strings.");if("number"==typeof $&&Math.abs($)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof $&&Math.floor($)!==$)return V.error("Numeric branch labels must be integer values.");if(m){if(V.checkSubtype(m,Se($)))return null}else m=Se($);if(void 0!==b[String($)])return V.error("Branch labels must be unique.");b[String($)]=w.length}const j=d.parse(N,R,_);if(!j)return null;_=_||j.type,w.push(j)}const E=d.parse(s[1],1,Ht);if(!E)return null;const M=d.parse(s[s.length-1],s.length-1,_);return M?"value"!==E.type.kind&&d.concat(1).checkSubtype(m,E.type)?null:new Hi(m,_,E,b,w,M):null}evaluate(s){const d=this.input.evaluate(s);return(Se(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class Uh{constructor(s,d,m){this.type=s,this.branches=d,this.otherwise=m}static parse(s,d){if(s.length<4)return d.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return d.error("Expected an odd number of arguments.");let m;d.expectedType&&"value"!==d.expectedType.kind&&(m=d.expectedType);const _=[];for(let w=1;w<s.length-1;w+=2){const E=d.parse(s[w],w,jt);if(!E)return null;const M=d.parse(s[w+1],w+1,m);if(!M)return null;_.push([E,M]),m=m||M.type}const b=d.parse(s[s.length-1],s.length-1,m);if(!b)return null;if(!m)throw new Error("Can't infer output type");return new Uh(m,_,b)}evaluate(s){for(const[d,m]of this.branches)if(d.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[d,m]of this.branches)s(d),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class bu{constructor(s,d,m,_){this.type=s,this.input=d,this.beginIndex=m,this.endIndex=_}static parse(s,d){if(s.length<=2||s.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=d.parse(s[1],1,Ht),_=d.parse(s[2],2,Qe);if(!m||!_)return null;if(!_a(m.type,[Wr(Ht),ri,Ht]))return d.error(`Expected first argument to be of type array or string, but found ${Xi(m.type)} instead`);if(4===s.length){const b=d.parse(s[3],3,Qe);return b?new bu(m.type,m,_,b):null}return new bu(m.type,m,_)}evaluate(s){const d=this.input.evaluate(s),m=this.beginIndex.evaluate(s);if(!ya(d,["string","array"]))throw new qe(`Expected first argument to be of type array or string, but found ${Xi(Se(d))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(s);return d.slice(m,_)}return d.slice(m)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Cp(l,s){return"=="===l||"!="===l?"boolean"===s.kind||"string"===s.kind||"number"===s.kind||"null"===s.kind||"value"===s.kind:"string"===s.kind||"number"===s.kind||"value"===s.kind}function We(l,s,d,m){return 0===m.compare(s,d)}function bc(l,s,d){const m="=="!==l&&"!="!==l;return class oO{constructor(b,w,E){this.type=jt,this.lhs=b,this.rhs=w,this.collator=E,this.hasUntypedArgument="value"===b.type.kind||"value"===w.type.kind}static parse(b,w){if(3!==b.length&&4!==b.length)return w.error("Expected two or three arguments.");const E=b[0];let M=w.parse(b[1],1,Ht);if(!M)return null;if(!Cp(E,M.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${Xi(M.type)}'.`);let R=w.parse(b[2],2,Ht);if(!R)return null;if(!Cp(E,R.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${Xi(R.type)}'.`);if(M.type.kind!==R.type.kind&&"value"!==M.type.kind&&"value"!==R.type.kind)return w.error(`Cannot compare types '${Xi(M.type)}' and '${Xi(R.type)}'.`);m&&("value"===M.type.kind&&"value"!==R.type.kind?M=new vt(R.type,[M]):"value"!==M.type.kind&&"value"===R.type.kind&&(R=new vt(M.type,[R])));let F=null;if(4===b.length){if("string"!==M.type.kind&&"string"!==R.type.kind&&"value"!==M.type.kind&&"value"!==R.type.kind)return w.error("Cannot use collator to compare non-string types.");if(F=w.parse(b[3],3,Xs),!F)return null}return new oO(M,R,F)}evaluate(b){const w=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(m&&this.hasUntypedArgument){const M=Se(w),R=Se(E);if(M.kind!==R.kind||"string"!==M.kind&&"number"!==M.kind)throw new qe(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${M.kind}, ${R.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const M=Se(w),R=Se(E);if("string"!==M.kind||"string"!==R.kind)return s(b,w,E)}return this.collator?d(b,w,E,this.collator.evaluate(b)):s(b,w,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const zt=bc("==",function(l,s,d){return s===d},We),bd=bc("!=",function(l,s,d){return s!==d},function(l,s,d,m){return!We(0,s,d,m)}),Dp=bc("<",function(l,s,d){return s<d},function(l,s,d,m){return m.compare(s,d)<0}),jh=bc(">",function(l,s,d){return s>d},function(l,s,d,m){return m.compare(s,d)>0}),Ep=bc("<=",function(l,s,d){return s<=d},function(l,s,d,m){return m.compare(s,d)<=0}),Hh=bc(">=",function(l,s,d){return s>=d},function(l,s,d,m){return m.compare(s,d)>=0});class Tl{constructor(s,d,m,_,b){this.type=ri,this.number=s,this.locale=d,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=b}static parse(s,d){if(3!==s.length)return d.error("Expected two arguments.");const m=d.parse(s[1],1,Qe);if(!m)return null;const _=s[2];if("object"!=typeof _||Array.isArray(_))return d.error("NumberFormat options argument must be an object.");let b=null;if(_.locale&&(b=d.parse(_.locale,1,ri),!b))return null;let w=null;if(_.currency&&(w=d.parse(_.currency,1,ri),!w))return null;let E=null;if(_["min-fraction-digits"]&&(E=d.parse(_["min-fraction-digits"],1,Qe),!E))return null;let M=null;return _["max-fraction-digits"]&&(M=d.parse(_["max-fraction-digits"],1,Qe),!M)?null:new Tl(m,b,w,E,M)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Il{constructor(s){this.type=er,this.sections=s}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&"object"==typeof m)return d.error("First argument must be an image or text section.");const _=[];let b=!1;for(let w=1;w<=s.length-1;++w){const E=s[w];if(b&&"object"==typeof E&&!Array.isArray(E)){b=!1;let M=null;if(E["font-scale"]&&(M=d.parse(E["font-scale"],1,Qe),!M))return null;let R=null;if(E["text-font"]&&(R=d.parse(E["text-font"],1,Wr(ri)),!R))return null;let F=null;if(E["text-color"]&&(F=d.parse(E["text-color"],1,hr),!F))return null;const N=_[_.length-1];N.scale=M,N.font=R,N.textColor=F}else{const M=d.parse(s[w],1,Ht);if(!M)return null;const R=M.type.kind;if("string"!==R&&"value"!==R&&"null"!==R&&"resolvedImage"!==R)return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,_.push({content:M,scale:null,font:null,textColor:null})}}return new Il(_)}evaluate(s){return new le(this.sections.map(d=>{const m=d.content.evaluate(s);return Se(m)===Vn?new he("",m,null,null,null):new he(st(m),null,d.scale?d.scale.evaluate(s):null,d.font?d.font.evaluate(s).join(","):null,d.textColor?d.textColor.evaluate(s):null)}))}eachChild(s){for(const d of this.sections)s(d.content),d.scale&&s(d.scale),d.font&&s(d.font),d.textColor&&s(d.textColor)}outputDefined(){return!1}}class xd{constructor(s){this.type=Vn,this.input=s}static parse(s,d){if(2!==s.length)return d.error("Expected two arguments.");const m=d.parse(s[1],1,ri);return m?new xd(m):d.error("No image name provided.")}evaluate(s){const d=this.input.evaluate(s),m=me.fromString(d);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(d)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class xu{constructor(s){this.type=Qe,this.input=s}static parse(s,d){if(2!==s.length)return d.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=d.parse(s[1],1);return m?"array"!==m.type.kind&&"string"!==m.type.kind&&"value"!==m.type.kind?d.error(`Expected argument of type string or array, but found ${Xi(m.type)} instead.`):new xu(m):null}evaluate(s){const d=this.input.evaluate(s);if("string"==typeof d||Array.isArray(d))return d.length;throw new qe(`Expected value to be of type string or array, but found ${Xi(Se(d))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const It={"==":zt,"!=":bd,">":jh,"<":Dp,">=":Hh,"<=":Ep,array:vt,at:vu,boolean:vt,case:Uh,coalesce:vd,collator:Mn,format:Il,image:xd,in:Vh,"index-of":Yr,interpolate:Vo,"interpolate-hcl":Vo,"interpolate-lab":Vo,length:xu,let:yu,literal:gt,match:Hi,number:vt,"number-format":Tl,object:vt,slice:bu,step:Bt,string:vt,"to-boolean":Nt,"to-color":Nt,"to-number":Nt,"to-string":Nt,var:kn,within:Ks};function wd(l,[s,d,m,_]){s=s.evaluate(l),d=d.evaluate(l),m=m.evaluate(l);const b=_?_.evaluate(l):1,w=Me(s,d,m,b);if(w)throw new qe(w);return new Z(s/255*b,d/255*b,m/255*b,b)}function wu(l,s){return l in s}function pr(l,s){const d=s[l];return void 0===d?null:d}function xa(l){return{type:l}}function Sp(l){return{result:"success",value:l}}function qi(l){return{result:"error",value:l}}function _n(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function Mp(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function yi(l){return!!l.expression&&l.expression.interpolated}function xi(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function on(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function an(l){return l}function xc(l,s){const d="color"===s.type,m=l.stops&&"object"==typeof l.stops[0][0],_=m||!(m||void 0!==l.property),b=l.type||(yi(s)?"exponential":"interval");if(d||"padding"===s.type){const R=d?Z.parse:ae.parse;(l=es({},l)).stops&&(l.stops=l.stops.map(F=>[F[0],R(F[1])])),l.default=R(l.default?l.default:s.default)}if(l.colorSpace&&"rgb"!==l.colorSpace&&!wp[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let w,E,M;if("exponential"===b)w=Qa;else if("interval"===b)w=$h;else if("categorical"===b){w=kp,E=Object.create(null);for(const R of l.stops)E[R[0]]=R[1];M=typeof l.stops[0][0]}else{if("identity"!==b)throw new Error(`Unknown function type "${b}"`);w=Tp}if(m){const R={},F=[];for(let j=0;j<l.stops.length;j++){const $=l.stops[j],oe=$[0].zoom;void 0===R[oe]&&(R[oe]={zoom:oe,type:l.type,property:l.property,default:l.default,stops:[]},F.push(oe)),R[oe].stops.push([$[0].value,$[1]])}const N=[];for(const j of F)N.push([R[j].zoom,xc(R[j],s)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:Vo.interpolationFactor.bind(void 0,V),zoomStops:N.map(j=>j[0]),evaluate:({zoom:j},$)=>Qa({stops:N,base:l.base},s,j).evaluate(j,$)}}if(_){const R="exponential"===b?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Vo.interpolationFactor.bind(void 0,R),zoomStops:l.stops.map(F=>F[0]),evaluate:({zoom:F})=>w(l,s,F,E,M)}}return{kind:"source",evaluate(R,F){const N=F&&F.properties?F.properties[l.property]:void 0;return void 0===N?Al(l.default,s.default):w(l,s,N,E,M)}}}function Al(l,s,d){return void 0!==l?l:void 0!==s?s:void 0!==d?d:void 0}function kp(l,s,d,m,_){return Al(typeof d===_?m[d]:void 0,l.default,s.default)}function $h(l,s,d){if("number"!==xi(d))return Al(l.default,s.default);const m=l.stops.length;if(1===m||d<=l.stops[0][0])return l.stops[0][1];if(d>=l.stops[m-1][0])return l.stops[m-1][1];const _=Vi(l.stops.map(b=>b[0]),d);return l.stops[_][1]}function Qa(l,s,d){const m=void 0!==l.base?l.base:1;if("number"!==xi(d))return Al(l.default,s.default);const _=l.stops.length;if(1===_||d<=l.stops[0][0])return l.stops[0][1];if(d>=l.stops[_-1][0])return l.stops[_-1][1];const b=Vi(l.stops.map(F=>F[0]),d),w=function(F,N,V,j){const $=j-V,oe=F-V;return 0===$?0:1===N?oe/$:(Math.pow(N,oe)-1)/(Math.pow(N,$)-1)}(d,m,l.stops[b][0],l.stops[b+1][0]),E=l.stops[b][1],M=l.stops[b+1][1];let R=Xa[s.type]||an;if(l.colorSpace&&"rgb"!==l.colorSpace){const F=wp[l.colorSpace];R=(N,V)=>F.reverse(F.interpolate(F.forward(N),F.forward(V),w))}return"function"==typeof E.evaluate?{evaluate(...F){const N=E.evaluate.apply(void 0,F),V=M.evaluate.apply(void 0,F);if(void 0!==N&&void 0!==V)return R(N,V,w)}}:R(E,M,w)}function Tp(l,s,d){switch(s.type){case"color":d=Z.parse(d);break;case"formatted":d=le.fromString(d.toString());break;case"resolvedImage":d=me.fromString(d.toString());break;case"padding":d=ae.parse(d);break;default:xi(d)===s.type||"enum"===s.type&&s.values[d]||(d=void 0)}return Al(d,l.default,s.default)}Ki.register(It,{error:[{kind:"error"},[ri],(l,[s])=>{throw new qe(s.evaluate(l))}],typeof:[ri,[Ht],(l,[s])=>Xi(Se(s.evaluate(l)))],"to-rgba":[Wr(Qe,4),[hr],(l,[s])=>s.evaluate(l).toArray()],rgb:[hr,[Qe,Qe,Qe],wd],rgba:[hr,[Qe,Qe,Qe,Qe],wd],has:{type:jt,overloads:[[[ri],(l,[s])=>wu(s.evaluate(l),l.properties())],[[ri,ga],(l,[s,d])=>wu(s.evaluate(l),d.evaluate(l))]]},get:{type:Ht,overloads:[[[ri],(l,[s])=>pr(s.evaluate(l),l.properties())],[[ri,ga],(l,[s,d])=>pr(s.evaluate(l),d.evaluate(l))]]},"feature-state":[Ht,[ri],(l,[s])=>pr(s.evaluate(l),l.featureState||{})],properties:[ga,[],l=>l.properties()],"geometry-type":[ri,[],l=>l.geometryType()],id:[Ht,[],l=>l.id()],zoom:[Qe,[],l=>l.globals.zoom],"heatmap-density":[Qe,[],l=>l.globals.heatmapDensity||0],"line-progress":[Qe,[],l=>l.globals.lineProgress||0],accumulated:[Ht,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[Qe,xa(Qe),(l,s)=>{let d=0;for(const m of s)d+=m.evaluate(l);return d}],"*":[Qe,xa(Qe),(l,s)=>{let d=1;for(const m of s)d*=m.evaluate(l);return d}],"-":{type:Qe,overloads:[[[Qe,Qe],(l,[s,d])=>s.evaluate(l)-d.evaluate(l)],[[Qe],(l,[s])=>-s.evaluate(l)]]},"/":[Qe,[Qe,Qe],(l,[s,d])=>s.evaluate(l)/d.evaluate(l)],"%":[Qe,[Qe,Qe],(l,[s,d])=>s.evaluate(l)%d.evaluate(l)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(l,[s,d])=>Math.pow(s.evaluate(l),d.evaluate(l))],sqrt:[Qe,[Qe],(l,[s])=>Math.sqrt(s.evaluate(l))],log10:[Qe,[Qe],(l,[s])=>Math.log(s.evaluate(l))/Math.LN10],ln:[Qe,[Qe],(l,[s])=>Math.log(s.evaluate(l))],log2:[Qe,[Qe],(l,[s])=>Math.log(s.evaluate(l))/Math.LN2],sin:[Qe,[Qe],(l,[s])=>Math.sin(s.evaluate(l))],cos:[Qe,[Qe],(l,[s])=>Math.cos(s.evaluate(l))],tan:[Qe,[Qe],(l,[s])=>Math.tan(s.evaluate(l))],asin:[Qe,[Qe],(l,[s])=>Math.asin(s.evaluate(l))],acos:[Qe,[Qe],(l,[s])=>Math.acos(s.evaluate(l))],atan:[Qe,[Qe],(l,[s])=>Math.atan(s.evaluate(l))],min:[Qe,xa(Qe),(l,s)=>Math.min(...s.map(d=>d.evaluate(l)))],max:[Qe,xa(Qe),(l,s)=>Math.max(...s.map(d=>d.evaluate(l)))],abs:[Qe,[Qe],(l,[s])=>Math.abs(s.evaluate(l))],round:[Qe,[Qe],(l,[s])=>{const d=s.evaluate(l);return d<0?-Math.round(-d):Math.round(d)}],floor:[Qe,[Qe],(l,[s])=>Math.floor(s.evaluate(l))],ceil:[Qe,[Qe],(l,[s])=>Math.ceil(s.evaluate(l))],"filter-==":[jt,[ri,Ht],(l,[s,d])=>l.properties()[s.value]===d.value],"filter-id-==":[jt,[Ht],(l,[s])=>l.id()===s.value],"filter-type-==":[jt,[ri],(l,[s])=>l.geometryType()===s.value],"filter-<":[jt,[ri,Ht],(l,[s,d])=>{const m=l.properties()[s.value],_=d.value;return typeof m==typeof _&&m<_}],"filter-id-<":[jt,[Ht],(l,[s])=>{const d=l.id(),m=s.value;return typeof d==typeof m&&d<m}],"filter->":[jt,[ri,Ht],(l,[s,d])=>{const m=l.properties()[s.value],_=d.value;return typeof m==typeof _&&m>_}],"filter-id->":[jt,[Ht],(l,[s])=>{const d=l.id(),m=s.value;return typeof d==typeof m&&d>m}],"filter-<=":[jt,[ri,Ht],(l,[s,d])=>{const m=l.properties()[s.value],_=d.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[jt,[Ht],(l,[s])=>{const d=l.id(),m=s.value;return typeof d==typeof m&&d<=m}],"filter->=":[jt,[ri,Ht],(l,[s,d])=>{const m=l.properties()[s.value],_=d.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[jt,[Ht],(l,[s])=>{const d=l.id(),m=s.value;return typeof d==typeof m&&d>=m}],"filter-has":[jt,[Ht],(l,[s])=>s.value in l.properties()],"filter-has-id":[jt,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[jt,[Wr(ri)],(l,[s])=>s.value.indexOf(l.geometryType())>=0],"filter-id-in":[jt,[Wr(Ht)],(l,[s])=>s.value.indexOf(l.id())>=0],"filter-in-small":[jt,[ri,Wr(Ht)],(l,[s,d])=>d.value.indexOf(l.properties()[s.value])>=0],"filter-in-large":[jt,[ri,Wr(Ht)],(l,[s,d])=>function(m,_,b,w){for(;b<=w;){const E=b+w>>1;if(_[E]===m)return!0;_[E]>m?w=E-1:b=E+1}return!1}(l.properties()[s.value],d.value,0,d.value.length-1)],all:{type:jt,overloads:[[[jt,jt],(l,[s,d])=>s.evaluate(l)&&d.evaluate(l)],[xa(jt),(l,s)=>{for(const d of s)if(!d.evaluate(l))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],(l,[s,d])=>s.evaluate(l)||d.evaluate(l)],[xa(jt),(l,s)=>{for(const d of s)if(d.evaluate(l))return!0;return!1}]]},"!":[jt,[jt],(l,[s])=>!s.evaluate(l)],"is-supported-script":[jt,[ri],(l,[s])=>{const d=l.globals&&l.globals.isSupportedScript;return!d||d(s.evaluate(l))}],upcase:[ri,[ri],(l,[s])=>s.evaluate(l).toUpperCase()],downcase:[ri,[ri],(l,[s])=>s.evaluate(l).toLowerCase()],concat:[ri,xa(Ht),(l,s)=>s.map(d=>st(d.evaluate(l))).join("")],"resolved-locale":[ri,[Xs],(l,[s])=>s.evaluate(l).resolvedLocale()]});class ts{constructor(s,d){var m;this.expression=s,this._warningHistory={},this._evaluator=new _i,this._defaultValue=d?"color"===(m=d).type&&on(m.default)?new Z(0,0,0,0):"color"===m.type?Z.parse(m.default)||null:"padding"===m.type?ae.parse(m.default)||null:void 0===m.default?null:m.default:null,this._enumValues=d&&"enum"===d.type?d.values:null}evaluateWithoutErrorHandling(s,d,m,_,b,w){return this._evaluator.globals=s,this._evaluator.feature=d,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(s,d,m,_,b,w){this._evaluator.globals=s,this._evaluator.feature=d||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null;try{const E=this.expression.evaluate(this._evaluator);if(null==E||"number"==typeof E&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new qe(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function wc(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in It}function we(l,s){const d=new ba(It,[],s?function(_){const b={color:hr,string:ri,number:Qe,enum:ri,boolean:jt,formatted:er,padding:Sl,resolvedImage:Vn};return"array"===_.type?Wr(b[_.value]||Ht,_.length):b[_.type]}(s):void 0),m=d.parse(l,void 0,void 0,void 0,s&&"string"===s.type?{typeAnnotation:"coerce"}:void 0);return m?Sp(new ts(m,s)):qi(d.errors)}class Rl{constructor(s,d){this.kind=s,this._styleExpression=d,this.isStateDependent="constant"!==s&&!Fi(d.expression)}evaluateWithoutErrorHandling(s,d,m,_,b,w){return this._styleExpression.evaluateWithoutErrorHandling(s,d,m,_,b,w)}evaluate(s,d,m,_,b,w){return this._styleExpression.evaluate(s,d,m,_,b,w)}}class Je{constructor(s,d,m,_){this.kind=s,this.zoomStops=m,this._styleExpression=d,this.isStateDependent="camera"!==s&&!Fi(d.expression),this.interpolationType=_}evaluateWithoutErrorHandling(s,d,m,_,b,w){return this._styleExpression.evaluateWithoutErrorHandling(s,d,m,_,b,w)}evaluate(s,d,m,_,b,w){return this._styleExpression.evaluate(s,d,m,_,b,w)}interpolationFactor(s,d,m){return this.interpolationType?Vo.interpolationFactor(this.interpolationType,s,d,m):0}}function Cc(l,s){const d=we(l,s);if("error"===d.result)return d;const m=d.value.expression,_=vc(m);if(!_&&!_n(s))return qi([new so("","data expressions not supported")]);const b=Ml(m,["zoom"]);if(!b&&!Mp(s))return qi([new so("","zoom expressions not supported")]);const w=wa(m);return w||b?w instanceof so?qi([w]):w instanceof Vo&&!yi(s)?qi([new so("",'"interpolate" expressions cannot be used with this property')]):Sp(w?new Je(_?"camera":"composite",d.value,w.labels,w instanceof Vo?w.interpolation:void 0):new Rl(_?"constant":"source",d.value)):qi([new so("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pl{constructor(s,d){this._parameters=s,this._specification=d,es(this,xc(this._parameters,this._specification))}static deserialize(s){return new Pl(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function wa(l){let s=null;if(l instanceof yu)s=wa(l.result);else if(l instanceof vd){for(const d of l.args)if(s=wa(d),s)break}else(l instanceof Bt||l instanceof Vo)&&l.input instanceof Ki&&"zoom"===l.input.name&&(s=l);return s instanceof so||l.eachChild(d=>{const m=wa(d);m instanceof so?s=m:!s&&m?s=new so("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new so("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function is(l){const s=l.key,d=l.value,m=l.valueSpec||{},_=l.objectElementValidators||{},b=l.style,w=l.styleSpec;let E=[];const M=xi(d);if("object"!==M)return[new et(s,d,`object expected, ${M} found`)];for(const R in d){const F=R.split(".")[0],N=m[F]||m["*"];let V;if(_[F])V=_[F];else if(m[F])V=co;else if(_["*"])V=_["*"];else{if(!m["*"]){E.push(new et(s,d[R],`unknown property "${R}"`));continue}V=co}E=E.concat(V({key:(s&&`${s}.`)+R,value:d[R],valueSpec:N,style:b,styleSpec:w,object:d,objectKey:R},d))}for(const R in m)_[R]||m[R].required&&void 0===m[R].default&&void 0===d[R]&&E.push(new et(s,d,`missing required property "${R}"`));return E}function Gh(l){const s=l.value,d=l.valueSpec,m=l.style,_=l.styleSpec,b=l.key,w=l.arrayElementValidator||co;if("array"!==xi(s))return[new et(b,s,`array expected, ${xi(s)} found`)];if(d.length&&s.length!==d.length)return[new et(b,s,`array length ${d.length} expected, length ${s.length} found`)];if(d["min-length"]&&s.length<d["min-length"])return[new et(b,s,`array length at least ${d["min-length"]} expected, length ${s.length} found`)];let E={type:d.value,values:d.values};_.$version<7&&(E.function=d.function),"object"===xi(d.value)&&(E=d.value);let M=[];for(let R=0;R<s.length;R++)M=M.concat(w({array:s,arrayIndex:R,value:s[R],valueSpec:E,style:m,styleSpec:_,key:`${b}[${R}]`}));return M}function Cu(l){const s=l.key,d=l.value,m=l.valueSpec;let _=xi(d);return"number"===_&&d!=d&&(_="NaN"),"number"!==_?[new et(s,d,`number expected, ${_} found`)]:"minimum"in m&&d<m.minimum?[new et(s,d,`${d} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&d>m.maximum?[new et(s,d,`${d} is greater than the maximum value ${m.maximum}`)]:[]}function Es(l){const s=l.valueSpec,d=ki(l.value.type);let m,_,b,w={};const E="categorical"!==d&&void 0===l.value.property,M=!E,R="array"===xi(l.value.stops)&&"array"===xi(l.value.stops[0])&&"object"===xi(l.value.stops[0][0]),F=is({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(j){if("identity"===d)return[new et(j.key,j.value,'identity function may not have a "stops" property')];let $=[];const oe=j.value;return $=$.concat(Gh({key:j.key,value:oe,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:N})),"array"===xi(oe)&&0===oe.length&&$.push(new et(j.key,oe,"array must have at least one stop")),$},default:function(j){return co({key:j.key,value:j.value,valueSpec:s,style:j.style,styleSpec:j.styleSpec})}}});return"identity"===d&&E&&F.push(new et(l.key,l.value,'missing required property "property"')),"identity"===d||l.value.stops||F.push(new et(l.key,l.value,'missing required property "stops"')),"exponential"===d&&l.valueSpec.expression&&!yi(l.valueSpec)&&F.push(new et(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(M&&!_n(l.valueSpec)?F.push(new et(l.key,l.value,"property functions not supported")):E&&!Mp(l.valueSpec)&&F.push(new et(l.key,l.value,"zoom functions not supported"))),"categorical"!==d&&!R||void 0!==l.value.property||F.push(new et(l.key,l.value,'"property" property is required')),F;function N(j){let $=[];const oe=j.value,ie=j.key;if("array"!==xi(oe))return[new et(ie,oe,`array expected, ${xi(oe)} found`)];if(2!==oe.length)return[new et(ie,oe,`array length 2 expected, length ${oe.length} found`)];if(R){if("object"!==xi(oe[0]))return[new et(ie,oe,`object expected, ${xi(oe[0])} found`)];if(void 0===oe[0].zoom)return[new et(ie,oe,"object stop key must have zoom")];if(void 0===oe[0].value)return[new et(ie,oe,"object stop key must have value")];if(b&&b>ki(oe[0].zoom))return[new et(ie,oe[0].zoom,"stop zoom values must appear in ascending order")];ki(oe[0].zoom)!==b&&(b=ki(oe[0].zoom),_=void 0,w={}),$=$.concat(is({key:`${ie}[0]`,value:oe[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:Cu,value:V}}))}else $=$.concat(V({key:`${ie}[0]`,value:oe[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},oe));return wc(Wn(oe[1]))?$.concat([new et(`${ie}[1]`,oe[1],"expressions are not allowed in function stops.")]):$.concat(co({key:`${ie}[1]`,value:oe[1],valueSpec:s,style:j.style,styleSpec:j.styleSpec}))}function V(j,$){const oe=xi(j.value),ie=ki(j.value),_e=null!==j.value?j.value:$;if(m){if(oe!==m)return[new et(j.key,_e,`${oe} stop domain type must match previous stop domain type ${m}`)]}else m=oe;if("number"!==oe&&"string"!==oe&&"boolean"!==oe)return[new et(j.key,_e,"stop domain value must be a number, string, or boolean")];if("number"!==oe&&"categorical"!==d){let De=`number expected, ${oe} found`;return _n(s)&&void 0===d&&(De+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new et(j.key,_e,De)]}return"categorical"!==d||"number"!==oe||isFinite(ie)&&Math.floor(ie)===ie?"categorical"!==d&&"number"===oe&&void 0!==_&&ie<_?[new et(j.key,_e,"stop domain values must appear in ascending order")]:(_=ie,"categorical"===d&&ie in w?[new et(j.key,_e,"stop domain values must be unique")]:(w[ie]=!0,[])):[new et(j.key,_e,`integer expected, found ${ie}`)]}}function Mr(l){const s=("property"===l.expressionContext?Cc:we)(Wn(l.value),l.valueSpec);if("error"===s.result)return s.value.map(m=>new et(`${l.key}${m.key}`,l.value,m.message));const d=s.value.expression||s.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!d.outputDefined())return[new et(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Fi(d))return[new et(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext&&!Fi(d))return[new et(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!Ml(d,["zoom","feature-state"]))return[new et(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!vc(d))return[new et(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tr(l){const s=l.key,d=l.value,m=l.valueSpec,_=[];return Array.isArray(m.values)?-1===m.values.indexOf(ki(d))&&_.push(new et(s,d,`expected one of [${m.values.join(", ")}], ${JSON.stringify(d)} found`)):-1===Object.keys(m.values).indexOf(ki(d))&&_.push(new et(s,d,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(d)} found`)),_}function lo(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const s of l.slice(1))if(!lo(s)&&"boolean"!=typeof s)return!1;return!0;default:return!0}}const $i={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ja(l){if(null==l)return{filter:()=>!0,needGeometry:!1};lo(l)||(l=Ol(l));const s=we(l,$i);if("error"===s.result)throw new Error(s.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,m,_)=>s.value.evaluate(d,m,{},_),needGeometry:Dd(l)}}function Cd(l,s){return l<s?-1:l>s?1:0}function Dd(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let s=1;s<l.length;s++)if(Dd(l[s]))return!0;return!1}function Ol(l){if(!l)return!0;const s=l[0];return l.length<=1?"any"!==s:"=="===s?ns(l[1],l[2],"=="):"!="===s?el(ns(l[1],l[2],"==")):"<"===s||">"===s||"<="===s||">="===s?ns(l[1],l[2],s):"any"===s?(d=l.slice(1),["any"].concat(d.map(Ol))):"all"===s?["all"].concat(l.slice(1).map(Ol)):"none"===s?["all"].concat(l.slice(1).map(Ol).map(el)):"in"===s?Ca(l[1],l.slice(2)):"!in"===s?el(Ca(l[1],l.slice(2))):"has"===s?Fl(l[1]):"!has"===s?el(Fl(l[1])):"within"!==s||l;var d}function ns(l,s,d){switch(l){case"$type":return[`filter-type-${d}`,s];case"$id":return[`filter-id-${d}`,s];default:return[`filter-${d}`,l,s]}}function Ca(l,s){if(0===s.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(d=>typeof d!=typeof s[0])?["filter-in-large",l,["literal",s.sort(Cd)]]:["filter-in-small",l,["literal",s]]}}function Fl(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function el(l){return["!",l]}function tl(l){return lo(Wn(l.value))?Mr(es({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Du(l)}function Du(l){const s=l.value,d=l.key;if("array"!==xi(s))return[new et(d,s,`array expected, ${xi(s)} found`)];const m=l.styleSpec;let _,b=[];if(s.length<1)return[new et(d,s,"filter array must have at least 1 element")];switch(b=b.concat(tr({key:`${d}[0]`,value:s[0],valueSpec:m.filter_operator,style:l.style,styleSpec:l.styleSpec})),ki(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===ki(s[1])&&b.push(new et(d,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":3!==s.length&&b.push(new et(d,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(_=xi(s[1]),"string"!==_&&b.push(new et(`${d}[1]`,s[1],`string expected, ${_} found`)));for(let w=2;w<s.length;w++)_=xi(s[w]),"$type"===ki(s[1])?b=b.concat(tr({key:`${d}[${w}]`,value:s[w],valueSpec:m.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==_&&"number"!==_&&"boolean"!==_&&b.push(new et(`${d}[${w}]`,s[w],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let w=1;w<s.length;w++)b=b.concat(Du({key:`${d}[${w}]`,value:s[w],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":_=xi(s[1]),2!==s.length?b.push(new et(d,s,`filter array for "${s[0]}" operator must have 2 elements`)):"string"!==_&&b.push(new et(`${d}[1]`,s[1],`string expected, ${_} found`));break;case"within":_=xi(s[1]),2!==s.length?b.push(new et(d,s,`filter array for "${s[0]}" operator must have 2 elements`)):"object"!==_&&b.push(new et(`${d}[1]`,s[1],`object expected, ${_} found`))}return b}function Ll(l,s){const d=l.key,m=l.style,_=l.styleSpec,b=l.value,w=l.objectKey,E=_[`${s}_${l.layerType}`];if(!E)return[];const M=w.match(/^(.*)-transition$/);if("paint"===s&&M&&E[M[1]]&&E[M[1]].transition)return co({key:d,value:b,valueSpec:_.transition,style:m,styleSpec:_});const R=l.valueSpec||E[w];if(!R)return[new et(d,b,`unknown property "${w}"`)];let F;if("string"===xi(b)&&_n(R)&&!R.tokens&&(F=/^{([^}]+)}$/.exec(b)))return[new et(d,b,`"${w}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const N=[];return"symbol"===l.layerType&&("text-field"===w&&m&&!m.glyphs&&N.push(new et(d,b,'use of "text-field" requires a style "glyphs" property')),"text-font"===w&&on(Wn(b))&&"identity"===ki(b.type)&&N.push(new et(d,b,'"text-font" does not support identity functions'))),N.concat(co({key:l.key,value:b,valueSpec:R,style:m,styleSpec:_,expressionContext:"property",propertyType:s,propertyKey:w}))}function Nl(l){return Ll(l,"paint")}function Eu(l){return Ll(l,"layout")}function Su(l){let s=[];const d=l.value,m=l.key,_=l.style,b=l.styleSpec;d.type||d.ref||s.push(new et(m,d,'either "type" or "ref" is required'));let w=ki(d.type);const E=ki(d.ref);if(d.id){const M=ki(d.id);for(let R=0;R<l.arrayIndex;R++){const F=_.layers[R];ki(F.id)===M&&s.push(new et(m,d.id,`duplicate layer id "${d.id}", previously used at line ${F.id.__line__}`))}}if("ref"in d){let M;["type","source","source-layer","filter","layout"].forEach(R=>{R in d&&s.push(new et(m,d[R],`"${R}" is prohibited for ref layers`))}),_.layers.forEach(R=>{ki(R.id)===E&&(M=R)}),M?M.ref?s.push(new et(m,d.ref,"ref cannot reference another ref layer")):w=ki(M.type):s.push(new et(m,d.ref,`ref layer "${E}" not found`))}else if("background"!==w)if(d.source){const M=_.sources&&_.sources[d.source],R=M&&ki(M.type);M?"vector"===R&&"raster"===w?s.push(new et(m,d.source,`layer "${d.id}" requires a raster source`)):"raster"===R&&"raster"!==w?s.push(new et(m,d.source,`layer "${d.id}" requires a vector source`)):"vector"!==R||d["source-layer"]?"raster-dem"===R&&"hillshade"!==w?s.push(new et(m,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!d.paint||!d.paint["line-gradient"]||"geojson"===R&&M.lineMetrics||s.push(new et(m,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new et(m,d,`layer "${d.id}" must specify a "source-layer"`)):s.push(new et(m,d.source,`source "${d.source}" not found`))}else s.push(new et(m,d,'missing required property "source"'));return s=s.concat(is({key:m,value:d,valueSpec:b.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>co({key:`${m}.type`,value:d.type,valueSpec:b.layer.type,style:l.style,styleSpec:l.styleSpec,object:d,objectKey:"type"}),filter:tl,layout:M=>is({layer:d,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":R=>Eu(es({layerType:w},R))}}),paint:M=>is({layer:d,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":R=>Nl(es({layerType:w},R))}})}})),s}function Bl(l){const s=l.value,d=l.key,m=xi(s);return"string"!==m?[new et(d,s,`string expected, ${m} found`)]:[]}const Mu={promoteId:function({key:l,value:s}){if("string"===xi(s))return Bl({key:l,value:s});{const d=[];for(const m in s)d.push(...Bl({key:`${l}.${m}`,value:s[m]}));return d}}};function Dc(l){const s=l.value,d=l.key,m=l.styleSpec,_=l.style;if(!s.type)return[new et(d,s,'"type" is required')];const b=ki(s.type);let w;switch(b){case"vector":case"raster":case"raster-dem":return w=is({key:d,value:s,valueSpec:m[`source_${b.replace("-","_")}`],style:l.style,styleSpec:m,objectElementValidators:Mu}),w;case"geojson":if(w=is({key:d,value:s,valueSpec:m.source_geojson,style:_,styleSpec:m,objectElementValidators:Mu}),s.cluster)for(const E in s.clusterProperties){const[M,R]=s.clusterProperties[E],F="string"==typeof M?[M,["accumulated"],["get",E]]:M;w.push(...Mr({key:`${d}.${E}.map`,value:R,expressionContext:"cluster-map"})),w.push(...Mr({key:`${d}.${E}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return w;case"video":return is({key:d,value:s,valueSpec:m.source_video,style:_,styleSpec:m});case"image":return is({key:d,value:s,valueSpec:m.source_image,style:_,styleSpec:m});case"canvas":return[new et(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tr({key:`${d}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,styleSpec:m})}}function Ec(l){const s=l.value,d=l.styleSpec,m=d.light,_=l.style;let b=[];const w=xi(s);if(void 0===s)return b;if("object"!==w)return b=b.concat([new et("light",s,`object expected, ${w} found`)]),b;for(const E in s){const M=E.match(/^(.*)-transition$/);b=b.concat(M&&m[M[1]]&&m[M[1]].transition?co({key:E,value:s[E],valueSpec:d.transition,style:_,styleSpec:d}):m[E]?co({key:E,value:s[E],valueSpec:m[E],style:_,styleSpec:d}):[new et(E,s[E],`unknown property "${E}"`)])}return b}function wn(l){const s=l.value,d=l.styleSpec,m=d.terrain,_=l.style;let b=[];const w=xi(s);if(void 0===s)return b;if("object"!==w)return b=b.concat([new et("terrain",s,`object expected, ${w} found`)]),b;for(const E in s)b=b.concat(m[E]?co({key:E,value:s[E],valueSpec:m[E],style:_,styleSpec:d}):[new et(E,s[E],`unknown property "${E}"`)]);return b}const Sc={"*":()=>[],array:Gh,boolean:function(l){const s=l.value,d=l.key,m=xi(s);return"boolean"!==m?[new et(d,s,`boolean expected, ${m} found`)]:[]},number:Cu,color:function(l){const s=l.key,d=l.value,m=xi(d);return"string"!==m?[new et(s,d,`color expected, ${m} found`)]:null===Za(d)?[new et(s,d,`color expected, "${d}" found`)]:[]},constants:Wa,enum:tr,filter:tl,function:Es,layer:Su,object:is,source:Dc,light:Ec,terrain:wn,string:Bl,formatted:function(l){return 0===Bl(l).length?[]:Mr(l)},resolvedImage:function(l){return 0===Bl(l).length?[]:Mr(l)},padding:function(l){const s=l.key,d=l.value;if("array"===xi(d)){if(d.length<1||d.length>4)return[new et(s,d,`padding requires 1 to 4 values; ${d.length} values found`)];const m={type:"number"};let _=[];for(let b=0;b<d.length;b++)_=_.concat(co({key:`${s}[${b}]`,value:d[b],valueSpec:m}));return _}return Cu({key:s,value:d,valueSpec:{}})}};function co(l){const s=l.value,d=l.valueSpec,m=l.styleSpec;return d.expression&&on(ki(s))?Es(l):d.expression&&wc(Wn(s))?Mr(l):d.type&&Sc[d.type]?Sc[d.type](l):is(es({},l,{valueSpec:d.type?m[d.type]:d}))}function Ip(l){const s=l.value,d=l.key,m=Bl(l);return m.length||(-1===s.indexOf("{fontstack}")&&m.push(new et(d,s,'"glyphs" url must include a "{fontstack}" token')),-1===s.indexOf("{range}")&&m.push(new et(d,s,'"glyphs" url must include a "{range}" token'))),m}function Da(l,s=Re){let d=[];return d=d.concat(co({key:"",value:l,valueSpec:s.$root,styleSpec:s,style:l,objectElementValidators:{glyphs:Ip,"*":()=>[]}})),l.constants&&(d=d.concat(Wa({key:"constants",value:l.constants,style:l,styleSpec:s}))),qh(d)}function qh(l){return[].concat(l).sort((s,d)=>s.line-d.line)}function Qs(l){return function(...s){return qh(l.apply(this,s))}}Da.source=Qs(Dc),Da.light=Qs(Ec),Da.terrain=Qs(wn),Da.layer=Qs(Su),Da.filter=Qs(tl),Da.paintProperty=Qs(Nl),Da.layoutProperty=Qs(Eu);const zl=Da,ku=zl.light,Ap=zl.paintProperty,Rp=zl.layoutProperty;function Mt(l,s){let d=!1;if(s&&s.length)for(const m of s)l.fire(new fa(new Error(m.message))),d=!0;return d}class Mc{constructor(s,d,m){const _=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const w=new Int32Array(this.arrayBuffer);s=w[0],this.d=(d=w[1])+2*(m=w[2]);for(let M=0;M<this.d*this.d;M++){const R=w[3+M],F=w[3+M+1];_.push(R===F?null:w.subarray(R,F))}const E=w[3+_.length+1];this.keys=w.subarray(w[3+_.length],E),this.bboxes=w.subarray(E),this.insert=this._insertReadonly}else{this.d=d+2*m;for(let w=0;w<this.d*this.d;w++)_.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=s,this.padding=m,this.scale=d/s,this.uid=0;const b=m/d*s;this.min=-b,this.max=s+b}insert(s,d,m,_,b){this._forEachCell(d,m,_,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,d,m,_,b,w){this.cells[b].push(w)}query(s,d,m,_,b){const w=this.min,E=this.max;if(s<=w&&d<=w&&E<=m&&E<=_&&!b)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(s,d,m,_,this._queryCell,M,{},b),M}}_queryCell(s,d,m,_,b,w,E,M){const R=this.cells[b];if(null!==R){const F=this.keys,N=this.bboxes;for(let V=0;V<R.length;V++){const j=R[V];if(void 0===E[j]){const $=4*j;(M?M(N[$+0],N[$+1],N[$+2],N[$+3]):s<=N[$+2]&&d<=N[$+3]&&m>=N[$+0]&&_>=N[$+1])?(E[j]=!0,w.push(F[j])):E[j]=!1}}}}_forEachCell(s,d,m,_,b,w,E,M){const R=this._convertToCellCoord(s),F=this._convertToCellCoord(d),N=this._convertToCellCoord(m),V=this._convertToCellCoord(_);for(let j=R;j<=N;j++)for(let $=F;$<=V;$++){const oe=this.d*$+j;if((!M||M(this._convertFromCellCoord(j),this._convertFromCellCoord($),this._convertFromCellCoord(j+1),this._convertFromCellCoord($+1)))&&b.call(this,s,d,m,_,oe,w,E,M))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,d=3+this.cells.length+1+1;let m=0;for(let w=0;w<this.cells.length;w++)m+=this.cells[w].length;const _=new Int32Array(d+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let b=d;for(let w=0;w<s.length;w++){const E=s[w];_[3+w]=b,_.set(E,b),b+=E.length}return _[3+s.length]=b,_.set(this.keys,b),b+=this.keys.length,_[3+s.length+1]=b,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer}static serialize(s,d){const m=s.toArrayBuffer();return d&&d.push(m),{buffer:m}}static deserialize(s){return new Mc(s.buffer)}}const Js={};function ut(l,s,d={}){if(Js[l])throw new Error(`${l} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:l,writeable:!1}),Js[l]={klass:s,omit:d.omit||[],shallow:d.shallow||[]}}ut("Object",Object),ut("TransferableGridIndex",Mc),ut("Color",Z),ut("Error",Error),ut("AJAXError",qr),ut("ResolvedImage",me),ut("StylePropertyFunction",Pl),ut("StyleExpression",ts,{omit:["_evaluator"]}),ut("ZoomDependentExpression",Je),ut("ZoomConstantExpression",Rl),ut("CompoundExpression",Ki,{omit:["_evaluate"]});for(const l in It)It[l]._classRegistryKey||ut(`Expression_${l}`,It[l]);function Vt(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function il(l,s){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob)return l;if(Vt(l)||xs(l))return s&&s.push(l),l;if(ArrayBuffer.isView(l)){const d=l;return s&&s.push(d.buffer),d}if(l instanceof ImageData)return s&&s.push(l.data.buffer),l;if(Array.isArray(l)){const d=[];for(const m of l)d.push(il(m,s));return d}if("object"==typeof l){const d=l.constructor,m=d._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");if(!Js[m])throw new Error(`${m} is not registered.`);const _=d.serialize?d.serialize(l,s):{};if(d.serialize){if(s&&_===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in l){if(!l.hasOwnProperty(b)||Js[m].omit.indexOf(b)>=0)continue;const w=l[b];_[b]=Js[m].shallow.indexOf(b)>=0?w:il(w,s)}l instanceof Error&&(_.message=l.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==m&&(_.$name=m),_}throw new Error("can't serialize object of type "+typeof l)}function ea(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||Vt(l)||xs(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(ea);if("object"==typeof l){const s=l.$name||"Object";if(!Js[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:d}=Js[s];if(!d)throw new Error(`can't deserialize unregistered class ${s}`);if(d.deserialize)return d.deserialize(l);const m=Object.create(d.prototype);for(const _ of Object.keys(l)){if("$name"===_)continue;const b=l[_];m[_]=Js[s].shallow.indexOf(_)>=0?b:ea(b)}return m}throw new Error("can't deserialize object of type "+typeof l)}class Fe{constructor(){this.first=!0}update(s,d){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=d),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const Ze={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Li(l){for(const s of l)if(Ea(s.charCodeAt(0)))return!0;return!1}function kr(l){for(const s of l)if(!Tr(s.charCodeAt(0)))return!1;return!0}function Tr(l){return!(Ze.Arabic(l)||Ze["Arabic Supplement"](l)||Ze["Arabic Extended-A"](l)||Ze["Arabic Presentation Forms-A"](l)||Ze["Arabic Presentation Forms-B"](l))}function Ea(l){return!(746!==l&&747!==l&&(l<4352||!(Ze["Bopomofo Extended"](l)||Ze.Bopomofo(l)||Ze["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Ze["CJK Compatibility Ideographs"](l)||Ze["CJK Compatibility"](l)||Ze["CJK Radicals Supplement"](l)||Ze["CJK Strokes"](l)||!(!Ze["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||Ze["CJK Unified Ideographs Extension A"](l)||Ze["CJK Unified Ideographs"](l)||Ze["Enclosed CJK Letters and Months"](l)||Ze["Hangul Compatibility Jamo"](l)||Ze["Hangul Jamo Extended-A"](l)||Ze["Hangul Jamo Extended-B"](l)||Ze["Hangul Jamo"](l)||Ze["Hangul Syllables"](l)||Ze.Hiragana(l)||Ze["Ideographic Description Characters"](l)||Ze.Kanbun(l)||Ze["Kangxi Radicals"](l)||Ze["Katakana Phonetic Extensions"](l)||Ze.Katakana(l)&&12540!==l||!(!Ze["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!Ze["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Ze["Unified Canadian Aboriginal Syllabics"](l)||Ze["Unified Canadian Aboriginal Syllabics Extended"](l)||Ze["Vertical Forms"](l)||Ze["Yijing Hexagram Symbols"](l)||Ze["Yi Syllables"](l)||Ze["Yi Radicals"](l))))}function uo(l){return!(Ea(l)||(s=l,Ze["Latin-1 Supplement"](s)&&(167===s||169===s||174===s||177===s||188===s||189===s||190===s||215===s||247===s)||Ze["General Punctuation"](s)&&(8214===s||8224===s||8225===s||8240===s||8241===s||8251===s||8252===s||8258===s||8263===s||8264===s||8265===s||8273===s)||Ze["Letterlike Symbols"](s)||Ze["Number Forms"](s)||Ze["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||9003===s||s>=9085&&s<=9114||s>=9150&&s<=9165||9167===s||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ze["Control Pictures"](s)&&9251!==s||Ze["Optical Character Recognition"](s)||Ze["Enclosed Alphanumerics"](s)||Ze["Geometric Shapes"](s)||Ze["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ze["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ze["CJK Symbols and Punctuation"](s)||Ze.Katakana(s)||Ze["Private Use Area"](s)||Ze["CJK Compatibility Forms"](s)||Ze["Small Form Variants"](s)||Ze["Halfwidth and Fullwidth Forms"](s)||8734===s||8756===s||8757===s||s>=9984&&s<=10087||s>=10102&&s<=10131||65532===s||65533===s));var s}function Tu(l){return l>=1424&&l<=2303||Ze["Arabic Presentation Forms-A"](l)||Ze["Arabic Presentation Forms-B"](l)}function Wh(l,s){return!(!s&&Tu(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Ze.Khmer(l))}function kc(l){for(const s of l)if(Tu(s.charCodeAt(0)))return!0;return!1}const Iu="deferred",Au="loading",On="loaded";let ht=null,At="unavailable",Ji=null;const Uo=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(At="error"),ht&&ht(l)};function jo(){ir.fire(new Ws("pluginStateChange",{pluginStatus:At,pluginURL:Ji}))}const ir=new Zs,Ss=function(){return At},Cn=function(){if(At!==Iu||!Ji)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");At=Au,jo(),Ji&&El({url:Ji},l=>{l?Uo(l):(At=On,jo())})},fr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>At===On||null!=fr.applyArabicShaping,isLoading:()=>At===Au,setState(l){if(!Fo())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");At=l.pluginStatus,Ji=l.pluginURL},isParsed(){if(!Fo())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=fr.applyArabicShaping&&null!=fr.processBidirectionalText&&null!=fr.processStyledBidirectionalText},getPluginURL(){if(!Fo())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ji}};class Wi{constructor(s,d){this.zoom=s,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Fe,this.transition={})}isSupportedScript(s){return function(d,m){for(const _ of d)if(!Wh(_.charCodeAt(0),m))return!1;return!0}(s,fr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,d=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*d}}}class qt{constructor(s,d){this.property=s,this.value=d,this.expression=function(m,_){if(on(m))return new Pl(m,_);if(wc(m)){const b=Cc(m,_);if("error"===b.result)throw new Error(b.value.map(w=>`${w.key}: ${w.message}`).join(", "));return b.value}{let b=m;return"color"===_.type&&"string"==typeof m?b=Z.parse(m):"padding"!==_.type||"number"!=typeof m&&!Array.isArray(m)||(b=ae.parse(m)),{kind:"constant",evaluate:()=>b}}}(void 0===d?s.specification.default:d,s.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(s,d,m){return this.property.possiblyEvaluate(this,s,d,m)}}class Sa{constructor(s){this.property=s,this.value=new qt(s,void 0)}transitioned(s,d){return new nl(this.property,this.value,d,Oo({},s.transition,this.transition),s.now)}untransitioned(){return new nl(this.property,this.value,null,{},0)}}class Ru{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Gr(this._values[s].value.value)}setValue(s,d){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Sa(this._values[s].property)),this._values[s].value=new qt(this._values[s].property,null===d?void 0:Gr(d))}getTransition(s){return Gr(this._values[s].transition)}setTransition(s,d){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Sa(this._values[s].property)),this._values[s].transition=Gr(d)||void 0}serialize(){const s={};for(const d of Object.keys(this._values)){const m=this.getValue(d);void 0!==m&&(s[d]=m);const _=this.getTransition(d);void 0!==_&&(s[`${d}-transition`]=_)}return s}transitioned(s,d){const m=new Fn(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(s,d._values[_]);return m}untransitioned(){const s=new Fn(this._properties);for(const d of Object.keys(this._values))s._values[d]=this._values[d].untransitioned();return s}}class nl{constructor(s,d,m,_,b){this.property=s,this.value=d,this.begin=b+_.delay||0,this.end=this.begin+_.duration||0,s.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(s,d,m){const _=s.now||0,b=this.value.possiblyEvaluate(s,d,m),w=this.prior;if(w){if(_>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(_<this.begin)return w.possiblyEvaluate(s,d,m);{const E=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(s,d,m),b,function(M){if(M<=0)return 0;if(M>=1)return 1;const R=M*M,F=R*M;return 4*(M<.5?F:3*(M-R)+F-.75)}(E))}}return b}}class Fn{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,d,m){const _=new ho(this._properties);for(const b of Object.keys(this._values))_._values[b]=this._values[b].possiblyEvaluate(s,d,m);return _}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Tc{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return Gr(this._values[s].value)}setValue(s,d){this._values[s]=new qt(this._values[s].property,null===d?void 0:Gr(d))}serialize(){const s={};for(const d of Object.keys(this._values)){const m=this.getValue(d);void 0!==m&&(s[d]=m)}return s}possiblyEvaluate(s,d,m){const _=new ho(this._properties);for(const b of Object.keys(this._values))_._values[b]=this._values[b].possiblyEvaluate(s,d,m);return _}}class Xr{constructor(s,d,m){this.property=s,this.value=d,this.parameters=m}isConstant(){return"constant"===this.value.kind}constantOr(s){return"constant"===this.value.kind?this.value.value:s}evaluate(s,d,m,_){return this.property.evaluate(this.value,this.parameters,s,d,m,_)}}class ho{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class pt{constructor(s){this.specification=s}possiblyEvaluate(s,d){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(d)}interpolate(s,d,m){const _=Xa[this.specification.type];return _?_(s,d,m):s}}class kt{constructor(s,d){this.specification=s,this.overrides=d}possiblyEvaluate(s,d,m,_){return new Xr(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(d,null,{},m,_)}:s.expression,d)}interpolate(s,d,m){if("constant"!==s.value.kind||"constant"!==d.value.kind)return s;if(void 0===s.value.value||void 0===d.value.value)return new Xr(this,{kind:"constant",value:void 0},s.parameters);const _=Xa[this.specification.type];return _?new Xr(this,{kind:"constant",value:_(s.value.value,d.value.value,m)},s.parameters):s}evaluate(s,d,m,_,b,w){return"constant"===s.kind?s.value:s.evaluate(d,m,_,b,w)}}class Co extends kt{possiblyEvaluate(s,d,m,_){if(void 0===s.value)return new Xr(this,{kind:"constant",value:void 0},d);if("constant"===s.expression.kind){const b=s.expression.evaluate(d,null,{},m,_),w="resolvedImage"===s.property.specification.type&&"string"!=typeof b?b.name:b,E=this._calculate(w,w,w,d);return new Xr(this,{kind:"constant",value:E},d)}if("camera"===s.expression.kind){const b=this._calculate(s.expression.evaluate({zoom:d.zoom-1}),s.expression.evaluate({zoom:d.zoom}),s.expression.evaluate({zoom:d.zoom+1}),d);return new Xr(this,{kind:"constant",value:b},d)}return new Xr(this,s.expression,d)}evaluate(s,d,m,_,b,w){if("source"===s.kind){const E=s.evaluate(d,m,_,b,w);return this._calculate(E,E,E,d)}return"composite"===s.kind?this._calculate(s.evaluate({zoom:Math.floor(d.zoom)-1},m,_),s.evaluate({zoom:Math.floor(d.zoom)},m,_),s.evaluate({zoom:Math.floor(d.zoom)+1},m,_),d):s.value}_calculate(s,d,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:m,to:d}}interpolate(s){return s}}class rs{constructor(s){this.specification=s}possiblyEvaluate(s,d,m,_){if(void 0!==s.value){if("constant"===s.expression.kind){const b=s.expression.evaluate(d,null,{},m,_);return this._calculate(b,b,b,d)}return this._calculate(s.expression.evaluate(new Wi(Math.floor(d.zoom-1),d)),s.expression.evaluate(new Wi(Math.floor(d.zoom),d)),s.expression.evaluate(new Wi(Math.floor(d.zoom+1),d)),d)}}_calculate(s,d,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:m,to:d}}interpolate(s){return s}}class os{constructor(s){this.specification=s}possiblyEvaluate(s,d,m,_){return!!s.expression.evaluate(d,null,{},m,_)}interpolate(){return!1}}class jn{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in s){const m=s[d];m.specification.overridable&&this.overridableProperties.push(d);const _=this.defaultPropertyValues[d]=new qt(m,void 0),b=this.defaultTransitionablePropertyValues[d]=new Sa(m);this.defaultTransitioningPropertyValues[d]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=_.possiblyEvaluate({})}}}ut("DataDrivenProperty",kt),ut("DataConstantProperty",pt),ut("CrossFadedDataDrivenProperty",Co),ut("CrossFadedProperty",rs),ut("ColorRampProperty",os);const oi="-transition";class ta extends Zs{constructor(s,d){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==s.type&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,"background"!==s.type&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),d.layout&&(this._unevaluatedLayout=new Tc(d.layout)),d.paint)){this._transitionablePaint=new Ru(d.paint);for(const m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(const m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ho(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return"visibility"===s?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,d,m={}){null!=d&&this._validate(Rp,`layers.${this.id}.layout.${s}`,s,d,m)||("visibility"!==s?this._unevaluatedLayout.setValue(s,d):this.visibility=d)}getPaintProperty(s){return s.endsWith(oi)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,d,m={}){if(null!=d&&this._validate(Ap,`layers.${this.id}.paint.${s}`,s,d,m))return!1;if(s.endsWith(oi))return this._transitionablePaint.setTransition(s.slice(0,-11),d||void 0),!1;{const _=this._transitionablePaint._values[s],b="cross-faded-data-driven"===_.property.specification["property-type"],w=_.value.isDataDriven(),E=_.value;this._transitionablePaint.setValue(s,d),this._handleSpecialPaintPropertyUpdate(s);const M=this._transitionablePaint._values[s].value;return M.isDataDriven()||w||b||this._handleOverridablePaintPropertyUpdate(s,E,M)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,d,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||"none"===this.visibility}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,d){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,d)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),js(s,(d,m)=>!(void 0===d||"layout"===m&&!Object.keys(d).length||"paint"===m&&!Object.keys(d).length))}_validate(s,d,m,_,b={}){return(!b||!1!==b.validate)&&Mt(this,s.call(zl,{key:d,layerType:this.type,objectKey:m,value:_,styleSpec:Re,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const d=this.paint.get(s);if(d instanceof Xr&&_n(d.property.specification)&&("source"===d.value.kind||"composite"===d.value.kind)&&d.value.isStateDependent)return!0}return!1}}const Ed={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ia{constructor(s,d){this._structArray=s,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,d){return s._trim(),d&&(s.isTransferred=!0,d.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const d=Object.create(this.prototype);return d.arrayBuffer=s.arrayBuffer,d.length=s.length,d.capacity=s.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Dn(l,s=1){let d=0,m=0;return{members:l.map(_=>{const b=Ed[_.type].BYTES_PER_ELEMENT,w=d=Ma(d,Math.max(s,b)),E=_.components||1;return m=Math.max(m,b),d+=b*E,{name:_.name,type:_.type,components:E,offset:w}}),size:Ma(d,Math.max(m,s)),alignment:s}}function Ma(l,s){return Math.ceil(l/s)*s}class ss extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,d)}emplace(s,d,m){const _=2*s;return this.int16[_+0]=d,this.int16[_+1]=m,s}}ss.prototype.bytesPerElement=4,ut("StructArrayLayout2i4",ss);class f extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,d,m,_)}emplace(s,d,m,_,b){const w=4*s;return this.int16[w+0]=d,this.int16[w+1]=m,this.int16[w+2]=_,this.int16[w+3]=b,s}}f.prototype.bytesPerElement=8,ut("StructArrayLayout4i8",f);class a extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,s,d,m,_,b,w)}emplace(s,d,m,_,b,w,E){const M=6*s;return this.int16[M+0]=d,this.int16[M+1]=m,this.int16[M+2]=_,this.int16[M+3]=b,this.int16[M+4]=w,this.int16[M+5]=E,s}}a.prototype.bytesPerElement=12,ut("StructArrayLayout2i4i12",a);class u extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,s,d,m,_,b,w)}emplace(s,d,m,_,b,w,E){const M=4*s,R=8*s;return this.int16[M+0]=d,this.int16[M+1]=m,this.uint8[R+4]=_,this.uint8[R+5]=b,this.uint8[R+6]=w,this.uint8[R+7]=E,s}}u.prototype.bytesPerElement=8,ut("StructArrayLayout2i4ub8",u);class p extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,d)}emplace(s,d,m){const _=2*s;return this.float32[_+0]=d,this.float32[_+1]=m,s}}p.prototype.bytesPerElement=8,ut("StructArrayLayout2f8",p);class y extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w,E,M,R,F){const N=this.length;return this.resize(N+1),this.emplace(N,s,d,m,_,b,w,E,M,R,F)}emplace(s,d,m,_,b,w,E,M,R,F,N){const V=10*s;return this.uint16[V+0]=d,this.uint16[V+1]=m,this.uint16[V+2]=_,this.uint16[V+3]=b,this.uint16[V+4]=w,this.uint16[V+5]=E,this.uint16[V+6]=M,this.uint16[V+7]=R,this.uint16[V+8]=F,this.uint16[V+9]=N,s}}y.prototype.bytesPerElement=20,ut("StructArrayLayout10ui20",y);class x extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w,E,M,R,F,N,V){const j=this.length;return this.resize(j+1),this.emplace(j,s,d,m,_,b,w,E,M,R,F,N,V)}emplace(s,d,m,_,b,w,E,M,R,F,N,V,j){const $=12*s;return this.int16[$+0]=d,this.int16[$+1]=m,this.int16[$+2]=_,this.int16[$+3]=b,this.uint16[$+4]=w,this.uint16[$+5]=E,this.uint16[$+6]=M,this.uint16[$+7]=R,this.int16[$+8]=F,this.int16[$+9]=N,this.int16[$+10]=V,this.int16[$+11]=j,s}}x.prototype.bytesPerElement=24,ut("StructArrayLayout4i4ui4i24",x);class D extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,d,m)}emplace(s,d,m,_){const b=3*s;return this.float32[b+0]=d,this.float32[b+1]=m,this.float32[b+2]=_,s}}D.prototype.bytesPerElement=12,ut("StructArrayLayout3f12",D);class k extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.uint32[1*s+0]=d,s}}k.prototype.bytesPerElement=4,ut("StructArrayLayout1ul4",k);class T extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w,E,M,R){const F=this.length;return this.resize(F+1),this.emplace(F,s,d,m,_,b,w,E,M,R)}emplace(s,d,m,_,b,w,E,M,R,F){const N=10*s,V=5*s;return this.int16[N+0]=d,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=b,this.int16[N+4]=w,this.int16[N+5]=E,this.uint32[V+3]=M,this.uint16[N+8]=R,this.uint16[N+9]=F,s}}T.prototype.bytesPerElement=20,ut("StructArrayLayout6i1ul2ui20",T);class P extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,s,d,m,_,b,w)}emplace(s,d,m,_,b,w,E){const M=6*s;return this.int16[M+0]=d,this.int16[M+1]=m,this.int16[M+2]=_,this.int16[M+3]=b,this.int16[M+4]=w,this.int16[M+5]=E,s}}P.prototype.bytesPerElement=12,ut("StructArrayLayout2i2i2i12",P);class L extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b){const w=this.length;return this.resize(w+1),this.emplace(w,s,d,m,_,b)}emplace(s,d,m,_,b,w){const E=4*s,M=8*s;return this.float32[E+0]=d,this.float32[E+1]=m,this.float32[E+2]=_,this.int16[M+6]=b,this.int16[M+7]=w,s}}L.prototype.bytesPerElement=16,ut("StructArrayLayout2f1f2i16",L);class z extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,d,m,_)}emplace(s,d,m,_,b){const w=12*s,E=3*s;return this.uint8[w+0]=d,this.uint8[w+1]=m,this.float32[E+1]=_,this.float32[E+2]=b,s}}z.prototype.bytesPerElement=12,ut("StructArrayLayout2ub2f12",z);class H extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,d,m)}emplace(s,d,m,_){const b=3*s;return this.uint16[b+0]=d,this.uint16[b+1]=m,this.uint16[b+2]=_,s}}H.prototype.bytesPerElement=6,ut("StructArrayLayout3ui6",H);class ee extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe,ie,_e){const De=this.length;return this.resize(De+1),this.emplace(De,s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe,ie,_e)}emplace(s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe,ie,_e,De){const fe=24*s,xe=12*s,Be=48*s;return this.int16[fe+0]=d,this.int16[fe+1]=m,this.uint16[fe+2]=_,this.uint16[fe+3]=b,this.uint32[xe+2]=w,this.uint32[xe+3]=E,this.uint32[xe+4]=M,this.uint16[fe+10]=R,this.uint16[fe+11]=F,this.uint16[fe+12]=N,this.float32[xe+7]=V,this.float32[xe+8]=j,this.uint8[Be+36]=$,this.uint8[Be+37]=oe,this.uint8[Be+38]=ie,this.uint32[xe+10]=_e,this.int16[fe+22]=De,s}}ee.prototype.bytesPerElement=48,ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ee);class Q extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe,ie,_e,De,fe,xe,Be,Ne,at,ft,it,Ke,Ye,nt){const tt=this.length;return this.resize(tt+1),this.emplace(tt,s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe,ie,_e,De,fe,xe,Be,Ne,at,ft,it,Ke,Ye,nt)}emplace(s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe,ie,_e,De,fe,xe,Be,Ne,at,ft,it,Ke,Ye,nt,tt){const $e=34*s,wt=17*s;return this.int16[$e+0]=d,this.int16[$e+1]=m,this.int16[$e+2]=_,this.int16[$e+3]=b,this.int16[$e+4]=w,this.int16[$e+5]=E,this.int16[$e+6]=M,this.int16[$e+7]=R,this.uint16[$e+8]=F,this.uint16[$e+9]=N,this.uint16[$e+10]=V,this.uint16[$e+11]=j,this.uint16[$e+12]=$,this.uint16[$e+13]=oe,this.uint16[$e+14]=ie,this.uint16[$e+15]=_e,this.uint16[$e+16]=De,this.uint16[$e+17]=fe,this.uint16[$e+18]=xe,this.uint16[$e+19]=Be,this.uint16[$e+20]=Ne,this.uint16[$e+21]=at,this.uint16[$e+22]=ft,this.uint32[wt+12]=it,this.float32[wt+13]=Ke,this.float32[wt+14]=Ye,this.float32[wt+15]=nt,this.float32[wt+16]=tt,s}}Q.prototype.bytesPerElement=68,ut("StructArrayLayout8i15ui1ul4f68",Q);class J extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.float32[1*s+0]=d,s}}J.prototype.bytesPerElement=4,ut("StructArrayLayout1f4",J);class de extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,d,m)}emplace(s,d,m,_){const b=3*s;return this.int16[b+0]=d,this.int16[b+1]=m,this.int16[b+2]=_,s}}de.prototype.bytesPerElement=6,ut("StructArrayLayout3i6",de);class pe extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,d,m)}emplace(s,d,m,_){const b=4*s;return this.uint32[2*s+0]=d,this.uint16[b+2]=m,this.uint16[b+3]=_,s}}pe.prototype.bytesPerElement=8,ut("StructArrayLayout1ul2ui8",pe);class ve extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,d)}emplace(s,d,m){const _=2*s;return this.uint16[_+0]=d,this.uint16[_+1]=m,s}}ve.prototype.bytesPerElement=4,ut("StructArrayLayout2ui4",ve);class ne extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.uint16[1*s+0]=d,s}}ne.prototype.bytesPerElement=2,ut("StructArrayLayout1ui2",ne);class Ce extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,s,d,m,_)}emplace(s,d,m,_,b){const w=4*s;return this.float32[w+0]=d,this.float32[w+1]=m,this.float32[w+2]=_,this.float32[w+3]=b,s}}Ce.prototype.bytesPerElement=16,ut("StructArrayLayout4f16",Ce);class be extends ia{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Pt(this.anchorPointX,this.anchorPointY)}}be.prototype.size=20;class Pe extends T{get(s){return new be(this,s)}}ut("CollisionBoxArray",Pe);class Oe extends ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Oe.prototype.size=48;class je extends ee{get(s){return new Oe(this,s)}}ut("PlacedSymbolArray",je);class ke extends ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ke.prototype.size=68;class rt extends Q{get(s){return new ke(this,s)}}ut("SymbolInstanceArray",rt);class Xe extends J{getoffsetX(s){return this.float32[1*s+0]}}ut("GlyphOffsetArray",Xe);class ct extends de{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}ut("SymbolLineVertexArray",ct);class Kt extends ia{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Kt.prototype.size=8;class di extends pe{get(s){return new Kt(this,s)}}ut("FeatureIndexArray",di);class yt extends ss{}class Gi extends ss{}class en extends ss{}class mi extends a{}class wi extends u{}class tn extends p{}class nr extends y{}class Ms extends x{}class ks extends D{}class Ts extends k{}class gr extends P{}class Kr extends z{}class Yi extends H{}class Is extends ve{}const Pu=Dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ln}=Pu;class si{constructor(s=[]){this.segments=s}prepareSegment(s,d,m,_){let b=this.segments[this.segments.length-1];return s>si.MAX_VERTEX_ARRAY_LENGTH&&xn(`Max vertices per segment is ${si.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!b||b.vertexLength+s>si.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==_)&&(b={vertexOffset:d.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},void 0!==_&&(b.sortKey=_),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const s of this.segments)for(const d in s.vaos)s.vaos[d].destroy()}static simpleSegment(s,d,m,_){return new si([{vertexOffset:s,primitiveOffset:d,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function Ai(l,s){return 256*(l=Ae(Math.floor(l),0,255))+Ae(Math.floor(s),0,255)}si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ut("SegmentVector",si);const rr=Dn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var _r={exports:{}},rl=function(l,s){var d,m,_,b,w,E,M,R;for(m=l.length-(d=3&l.length),_=s,w=3432918353,E=461845907,R=0;R<m;)M=255&l.charCodeAt(R)|(255&l.charCodeAt(++R))<<8|(255&l.charCodeAt(++R))<<16|(255&l.charCodeAt(++R))<<24,++R,_=27492+(65535&(b=5*(65535&(_=(_^=M=(65535&(M=(M=(65535&M)*w+(((M>>>16)*w&65535)<<16)&4294967295)<<15|M>>>17))*E+(((M>>>16)*E&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(M=0,d){case 3:M^=(255&l.charCodeAt(R+2))<<16;case 2:M^=(255&l.charCodeAt(R+1))<<8;case 1:_^=M=(65535&(M=(M=(65535&(M^=255&l.charCodeAt(R)))*w+(((M>>>16)*w&65535)<<16)&4294967295)<<15|M>>>17))*E+(((M>>>16)*E&65535)<<16)&4294967295}return _^=l.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0},Vl=function(l,s){for(var d,m=l.length,_=s^m,b=0;m>=4;)d=1540483477*(65535&(d=255&l.charCodeAt(b)|(255&l.charCodeAt(++b))<<8|(255&l.charCodeAt(++b))<<16|(255&l.charCodeAt(++b))<<24))+((1540483477*(d>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&l.charCodeAt(b+2))<<16;case 2:_^=(255&l.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&l.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};_r.exports=rl,_r.exports.murmur3=rl,_r.exports.murmur2=Vl;class Ul{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,d,m,_){this.ids.push(Pp(s)),this.positions.push(d,m,_)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Pp(s);let m=0,_=this.ids.length-1;for(;m<_;){const w=m+_>>1;this.ids[w]>=d?_=w:m=w+1}const b=[];for(;this.ids[m]===d;)b.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return b}static serialize(s,d){const m=new Float64Array(s.ids),_=new Uint32Array(s.positions);return Zh(m,_,0,m.length-1),d&&d.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(s){const d=new Ul;return d.ids=s.ids,d.positions=s.positions,d.indexed=!0,d}}function Pp(l){const s=+l;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:_r.exports(String(l))}function Zh(l,s,d,m){for(;d<m;){const _=l[d+m>>1];let b=d-1,w=m+1;for(;;){do{b++}while(l[b]<_);do{w--}while(l[w]>_);if(b>=w)break;na(l,b,w),na(s,3*b,3*w),na(s,3*b+1,3*w+1),na(s,3*b+2,3*w+2)}w-d<m-w?(Zh(l,s,d,w),d=w+1):(Zh(l,s,w+1,m),m=w)}}function na(l,s,d){const m=l[s];l[s]=l[d],l[d]=m}ut("FeaturePositionMap",Ul);class ka{constructor(s,d){this.gl=s.gl,this.location=d}}class ol extends ka{constructor(s,d){super(s,d),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Sd extends ka{constructor(s,d){super(s,d),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Zn extends ka{constructor(s,d){super(s,d),this.current=Z.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const s_=new Float32Array(16);function Op(l){return[Ai(255*l.r,255*l.g),Ai(255*l.b,255*l.a)]}class Ou{constructor(s,d,m){this.value=s,this.uniformNames=d.map(_=>`u_${_}`),this.type=m}setUniform(s,d,m){s.set(m.constantOr(this.value))}getBinding(s,d,m){return"color"===this.type?new Zn(s,d):new ol(s,d)}}class Ic{constructor(s,d){this.uniformNames=d.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=s.tlbr}setUniform(s,d,m,_){const b="u_pattern_to"===_?this.patternTo:"u_pattern_from"===_?this.patternFrom:"u_pixel_ratio_to"===_?this.pixelRatioTo:"u_pixel_ratio_from"===_?this.pixelRatioFrom:null;b&&s.set(b)}getBinding(s,d,m){return"u_pattern"===m.substr(0,9)?new Sd(s,d):new ol(s,d)}}class Ta{constructor(s,d,m,_){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=d.map(b=>({name:`a_${b}`,type:"Float32",components:"color"===m?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,d,m,_,b){const w=this.paintVertexArray.length,E=this.expression.evaluate(new Wi(0),d,{},_,[],b);this.paintVertexArray.resize(s),this._setPaintValue(w,s,E)}updatePaintArray(s,d,m,_){const b=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(s,d,b)}_setPaintValue(s,d,m){if("color"===this.type){const _=Op(m);for(let b=s;b<d;b++)this.paintVertexArray.emplace(b,_[0],_[1])}else{for(let _=s;_<d;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ra{constructor(s,d,m,_,b,w){this.expression=s,this.uniformNames=d.map(E=>`u_${E}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=d.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===m?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(s,d,m,_,b){const w=this.expression.evaluate(new Wi(this.zoom),d,{},_,[],b),E=this.expression.evaluate(new Wi(this.zoom+1),d,{},_,[],b),M=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(M,s,w,E)}updatePaintArray(s,d,m,_){const b=this.expression.evaluate({zoom:this.zoom},m,_),w=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(s,d,b,w)}_setPaintValue(s,d,m,_){if("color"===this.type){const b=Op(m),w=Op(_);for(let E=s;E<d;E++)this.paintVertexArray.emplace(E,b[0],b[1],w[0],w[1])}else{for(let b=s;b<d;b++)this.paintVertexArray.emplace(b,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,d){const m=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,_=Ae(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(_)}getBinding(s,d,m){return new ol(s,d)}}class Ia{constructor(s,d,m,_,b,w){this.expression=s,this.type=d,this.useIntegerZoom=m,this.zoom=_,this.layerId=w,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(s,d,m){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(_,s,d.patterns&&d.patterns[this.layerId],m)}updatePaintArray(s,d,m,_,b){this._setPaintValues(s,d,m.patterns&&m.patterns[this.layerId],b)}_setPaintValues(s,d,m,_){if(!_||!m)return;const{min:b,mid:w,max:E}=m,M=_[b],R=_[w],F=_[E];if(M&&R&&F)for(let N=s;N<d;N++)this.zoomInPaintVertexArray.emplace(N,R.tl[0],R.tl[1],R.br[0],R.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],R.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,R.tl[0],R.tl[1],R.br[0],R.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],R.pixelRatio,F.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,rr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,rr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class a_{constructor(s,d,m){this.binders={},this._buffers=[];const _=[];for(const b in s.paint._values){if(!m(b))continue;const w=s.paint.get(b);if(!(w instanceof Xr&&_n(w.property.specification)))continue;const E=l_(b,s.type),M=w.value,R=w.property.specification.type,F=w.property.useIntegerZoom,N=w.property.specification["property-type"],V="cross-faded"===N||"cross-faded-data-driven"===N;if("constant"===M.kind)this.binders[b]=V?new Ic(M.value,E):new Ou(M.value,E,R),_.push(`/u_${b}`);else if("source"===M.kind||V){const j=Fp(b,R,"source");this.binders[b]=V?new Ia(M,R,F,d,j,s.id):new Ta(M,E,R,j),_.push(`/a_${b}`)}else{const j=Fp(b,R,"composite");this.binders[b]=new ra(M,E,R,F,d,j),_.push(`/z_${b}`)}}this.cacheKey=_.sort().join("")}getMaxValue(s){const d=this.binders[s];return d instanceof Ta||d instanceof ra?d.maxValue:0}populatePaintArrays(s,d,m,_,b){for(const w in this.binders){const E=this.binders[w];(E instanceof Ta||E instanceof ra||E instanceof Ia)&&E.populatePaintArray(s,d,m,_,b)}}setConstantPatternPositions(s,d){for(const m in this.binders){const _=this.binders[m];_ instanceof Ic&&_.setConstantPatternPositions(s,d)}}updatePaintArrays(s,d,m,_,b){let w=!1;for(const E in s){const M=d.getPositions(E);for(const R of M){const F=m.feature(R.index);for(const N in this.binders){const V=this.binders[N];if((V instanceof Ta||V instanceof ra||V instanceof Ia)&&!0===V.expression.isStateDependent){const j=_.paint.get(N);V.expression=j.value,V.updatePaintArray(R.start,R.end,F,s[E],b),w=!0}}}}return w}defines(){const s=[];for(const d in this.binders){const m=this.binders[d];(m instanceof Ou||m instanceof Ic)&&s.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return s}getBinderAttributes(){const s=[];for(const d in this.binders){const m=this.binders[d];if(m instanceof Ta||m instanceof ra)for(let _=0;_<m.paintVertexAttributes.length;_++)s.push(m.paintVertexAttributes[_].name);else if(m instanceof Ia)for(let _=0;_<rr.members.length;_++)s.push(rr.members[_].name)}return s}getBinderUniforms(){const s=[];for(const d in this.binders){const m=this.binders[d];if(m instanceof Ou||m instanceof Ic||m instanceof ra)for(const _ of m.uniformNames)s.push(_)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,d){const m=[];for(const _ in this.binders){const b=this.binders[_];if(b instanceof Ou||b instanceof Ic||b instanceof ra)for(const w of b.uniformNames)if(d[w]){const E=b.getBinding(s,d[w],w);m.push({name:w,property:_,binding:E})}}return m}setUniforms(s,d,m,_){for(const{name:b,property:w,binding:E}of d)this.binders[w].setUniform(E,_,m.get(w),b)}updatePaintBuffers(s){this._buffers=[];for(const d in this.binders){const m=this.binders[d];if(s&&m instanceof Ia){const _=2===s.fromScale?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof Ta||m instanceof ra)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const d in this.binders){const m=this.binders[d];(m instanceof Ta||m instanceof ra||m instanceof Ia)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const d=this.binders[s];(d instanceof Ta||d instanceof ra||d instanceof Ia)&&d.destroy()}}}class po{constructor(s,d,m=(()=>!0)){this.programConfigurations={};for(const _ of s)this.programConfigurations[_.id]=new a_(_,d,m);this.needsUpload=!1,this._featureMap=new Ul,this._bufferOffset=0}populatePaintArrays(s,d,m,_,b,w){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(s,d,_,b,w);void 0!==d.id&&this._featureMap.add(d.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,d,m,_){for(const b of m)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(s,this._featureMap,d,b,_)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function l_(l,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${s}-`,"").replace(/-/g,"_")]}function Fp(l,s,d){const _={"line-pattern":{source:nr,composite:nr},"fill-pattern":{source:nr,composite:nr},"fill-extrusion-pattern":{source:nr,composite:nr}}[l];return _&&_[d]||{color:{source:p,composite:Ce},number:{source:J,composite:p}}[s][d]}ut("ConstantBinder",Ou),ut("CrossFadedConstantBinder",Ic),ut("SourceExpressionBinder",Ta),ut("CrossFadedCompositeBinder",Ia),ut("CompositeExpressionBinder",ra),ut("ProgramConfiguration",a_,{omit:["_buffers"]}),ut("ProgramConfigurationSet",po);var ai=8192;const Lp=Math.pow(2,14)-1,Fu=-Lp-1;function or(l){const s=ai/l.extent,d=l.loadGeometry();for(let m=0;m<d.length;m++){const _=d[m];for(let b=0;b<_.length;b++){const w=_[b],E=Math.round(w.x*s),M=Math.round(w.y*s);w.x=Ae(E,Fu,Lp),w.y=Ae(M,Fu,Lp),(E<w.x||E>w.x+1||M<w.y||M>w.y+1)&&xn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Ac(l,s){return{type:l.type,id:l.id,properties:l.properties,geometry:s?or(l):[]}}function Lu(l,s,d,m,_){l.emplaceBack(2*s+(m+1)/2,2*d+(_+1)/2)}class jl{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(d=>d.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Gi,this.indexArray=new Yi,this.segments=new si,this.programConfigurations=new po(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(s,d,m){const _=this.layers[0],b=[];let w=null,E=!1;"circle"===_.type&&(w=_.layout.get("circle-sort-key"),E=!w.isConstant());for(const{feature:M,id:R,index:F,sourceLayerIndex:N}of s){const V=this.layers[0]._featureFilter.needGeometry,j=Ac(M,V);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom),j,m))continue;const $=E?w.evaluate(j,{},m):void 0,oe={id:R,properties:M.properties,type:M.type,sourceLayerIndex:N,index:F,geometry:V?j.geometry:or(M),patterns:{},sortKey:$};b.push(oe)}E&&b.sort((M,R)=>M.sortKey-R.sortKey);for(const M of b){const{geometry:R,index:F,sourceLayerIndex:N}=M,V=s[F].feature;this.addFeature(M,R,F,m),d.featureIndex.insert(V,R,F,N,this.index)}}update(s,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ln),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,d,m,_){for(const b of d)for(const w of b){const E=w.x,M=w.y;if(E<0||E>=ai||M<0||M>=ai)continue;const R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),F=R.vertexLength;Lu(this.layoutVertexArray,E,M,-1,-1),Lu(this.layoutVertexArray,E,M,1,-1),Lu(this.layoutVertexArray,E,M,1,1),Lu(this.layoutVertexArray,E,M,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),R.vertexLength+=4,R.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{},_)}}function Do(l,s){for(let d=0;d<l.length;d++)if(Rc(s,l[d]))return!0;for(let d=0;d<s.length;d++)if(Rc(l,s[d]))return!0;return!!Aa(l,s)}function Ob(l,s,d){return!!Rc(l,s)||!!Np(s,l,d)}function Nu(l,s){if(1===l.length)return zp(s,l[0]);for(let d=0;d<s.length;d++){const m=s[d];for(let _=0;_<m.length;_++)if(Rc(l,m[_]))return!0}for(let d=0;d<l.length;d++)if(zp(s,l[d]))return!0;for(let d=0;d<s.length;d++)if(Aa(l,s[d]))return!0;return!1}function Fb(l,s,d){if(l.length>1){if(Aa(l,s))return!0;for(let m=0;m<s.length;m++)if(Np(s[m],l,d))return!0}for(let m=0;m<l.length;m++)if(Np(l[m],s,d))return!0;return!1}function Aa(l,s){if(0===l.length||0===s.length)return!1;for(let d=0;d<l.length-1;d++){const m=l[d],_=l[d+1];for(let b=0;b<s.length-1;b++)if(c_(m,_,s[b],s[b+1]))return!0}return!1}function c_(l,s,d,m){return vs(l,d,m)!==vs(s,d,m)&&vs(l,s,d)!==vs(l,s,m)}function Np(l,s,d){const m=d*d;if(1===s.length)return l.distSqr(s[0])<m;for(let _=1;_<s.length;_++)if(Bp(l,s[_-1],s[_])<m)return!0;return!1}function Bp(l,s,d){const m=s.distSqr(d);if(0===m)return l.distSqr(s);const _=((l.x-s.x)*(d.x-s.x)+(l.y-s.y)*(d.y-s.y))/m;return l.distSqr(_<0?s:_>1?d:d.sub(s)._mult(_)._add(s))}function zp(l,s){let d,m,_,b=!1;for(let w=0;w<l.length;w++){d=l[w];for(let E=0,M=d.length-1;E<d.length;M=E++)m=d[E],_=d[M],m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(b=!b)}return b}function Rc(l,s){let d=!1;for(let m=0,_=l.length-1;m<l.length;_=m++){const b=l[m],w=l[_];b.y>s.y!=w.y>s.y&&s.x<(w.x-b.x)*(s.y-b.y)/(w.y-b.y)+b.x&&(d=!d)}return d}function Lb(l,s,d){const m=d[0],_=d[2];if(l.x<m.x&&s.x<m.x||l.x>_.x&&s.x>_.x||l.y<m.y&&s.y<m.y||l.y>_.y&&s.y>_.y)return!1;const b=vs(l,s,d[0]);return b!==vs(l,s,d[1])||b!==vs(l,s,d[2])||b!==vs(l,s,d[3])}function Ut(l,s,d){const m=s.paint.get(l).value;return"constant"===m.kind?m.value:d.programConfigurations.get(s.id).getMaxValue(l)}function Bu(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Vp(l,s,d,m,_){if(!s[0]&&!s[1])return l;const b=Pt.convert(s)._mult(_);"viewport"===d&&b._rotate(-m);const w=[];for(let E=0;E<l.length;E++)w.push(l[E].sub(b));return w}ut("CircleBucket",jl,{omit:["layers"]});const Nb=new jn({"circle-sort-key":new kt(Re.layout_circle["circle-sort-key"])});var Bb={paint:new jn({"circle-radius":new kt(Re.paint_circle["circle-radius"]),"circle-color":new kt(Re.paint_circle["circle-color"]),"circle-blur":new kt(Re.paint_circle["circle-blur"]),"circle-opacity":new kt(Re.paint_circle["circle-opacity"]),"circle-translate":new pt(Re.paint_circle["circle-translate"]),"circle-translate-anchor":new pt(Re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new pt(Re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new pt(Re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(Re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(Re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(Re.paint_circle["circle-stroke-opacity"])}),layout:Nb},fo=1e-6,Qr=typeof Float32Array<"u"?Float32Array:Array;function Pc(){var l=new Qr(9);return Qr!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Up(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function d_(l,s,d){var m=s[0],_=s[1],b=s[2],w=s[3],E=s[4],M=s[5],R=s[6],F=s[7],N=s[8],V=s[9],j=s[10],$=s[11],oe=s[12],ie=s[13],_e=s[14],De=s[15],fe=d[0],xe=d[1],Be=d[2],Ne=d[3];return l[0]=fe*m+xe*E+Be*N+Ne*oe,l[1]=fe*_+xe*M+Be*V+Ne*ie,l[2]=fe*b+xe*R+Be*j+Ne*_e,l[3]=fe*w+xe*F+Be*$+Ne*De,l[4]=(fe=d[4])*m+(xe=d[5])*E+(Be=d[6])*N+(Ne=d[7])*oe,l[5]=fe*_+xe*M+Be*V+Ne*ie,l[6]=fe*b+xe*R+Be*j+Ne*_e,l[7]=fe*w+xe*F+Be*$+Ne*De,l[8]=(fe=d[8])*m+(xe=d[9])*E+(Be=d[10])*N+(Ne=d[11])*oe,l[9]=fe*_+xe*M+Be*V+Ne*ie,l[10]=fe*b+xe*R+Be*j+Ne*_e,l[11]=fe*w+xe*F+Be*$+Ne*De,l[12]=(fe=d[12])*m+(xe=d[13])*E+(Be=d[14])*N+(Ne=d[15])*oe,l[13]=fe*_+xe*M+Be*V+Ne*ie,l[14]=fe*b+xe*R+Be*j+Ne*_e,l[15]=fe*w+xe*F+Be*$+Ne*De,l}Math.hypot||(Math.hypot=function(){for(var l=0,s=arguments.length;s--;)l+=arguments[s]*arguments[s];return Math.sqrt(l)});var zu,l,zb=d_;function u_(){var l=new Qr(3);return Qr!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function He(l,s,d){var m=new Qr(3);return m[0]=l,m[1]=s,m[2]=d,m}function Ri(l,s,d){var m=s[0],_=s[1],b=s[2],w=s[3];return l[0]=d[0]*m+d[4]*_+d[8]*b+d[12]*w,l[1]=d[1]*m+d[5]*_+d[9]*b+d[13]*w,l[2]=d[2]*m+d[6]*_+d[10]*b+d[14]*w,l[3]=d[3]*m+d[7]*_+d[11]*b+d[15]*w,l}function Wt(){var l=new Qr(4);return Qr!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function Zt(l,s){const d=Ri([],[l.x,l.y,0,1],s);return new Pt(d[0]/d[3],d[1]/d[3])}u_(),zu=new Qr(4),Qr!=Float32Array&&(zu[0]=0,zu[1]=0,zu[2]=0,zu[3]=0),u_(),He(1,0,0),He(0,1,0),Wt(),Wt(),Pc(),l=new Qr(2),Qr!=Float32Array&&(l[0]=0,l[1]=0);class Ir extends jl{}ut("HeatmapBucket",Ir,{omit:["layers"]});var h_={paint:new jn({"heatmap-radius":new kt(Re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(Re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new pt(Re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new os(Re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new pt(Re.paint_heatmap["heatmap-opacity"])})};function Oc(l,{width:s,height:d},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==s*d*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${s*d*m}`)}else _=new Uint8Array(s*d*m);return l.width=s,l.height=d,l.data=_,l}function oa(l,{width:s,height:d},m){if(s===l.width&&d===l.height)return;const _=Oc({},{width:s,height:d},m);Vu(l,_,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,s),height:Math.min(l.height,d)},m),l.width=s,l.height=d,l.data=_.data}function Vu(l,s,d,m,_,b){if(0===_.width||0===_.height)return s;if(_.width>l.width||_.height>l.height||d.x>l.width-_.width||d.y>l.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>s.width||_.height>s.height||m.x>s.width-_.width||m.y>s.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const w=l.data,E=s.data;if(w===E)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<_.height;M++){const R=((d.y+M)*l.width+d.x)*b,F=((m.y+M)*s.width+m.x)*b;for(let N=0;N<_.width*b;N++)E[F+N]=w[R+N]}return s}class Fc{constructor(s,d){Oc(this,s,1,d)}resize(s){oa(this,s,1)}clone(){return new Fc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,d,m,_,b){Vu(s,d,m,_,b,1)}}class as{constructor(s,d){Oc(this,s,4,d)}resize(s){oa(this,s,4)}replace(s,d){d?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new as({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,d,m,_,b){Vu(s,d,m,_,b,4)}}function Vb(l){const s={},d=l.resolution||256,m=l.clips?l.clips.length:1,_=l.image||new as({width:d,height:m});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const b=(w,E,M)=>{s[l.evaluationKey]=M;const R=l.expression.evaluate(s);_.data[w+E+0]=Math.floor(255*R.r/R.a),_.data[w+E+1]=Math.floor(255*R.g/R.a),_.data[w+E+2]=Math.floor(255*R.b/R.a),_.data[w+E+3]=Math.floor(255*R.a)};if(l.clips)for(let w=0,E=0;w<m;++w,E+=4*d)for(let M=0,R=0;M<d;M++,R+=4){const F=M/(d-1),{start:N,end:V}=l.clips[w];b(E,R,N*(1-F)+V*F)}else for(let w=0,E=0;w<d;w++,E+=4)b(0,E,w/(d-1));return _}ut("AlphaImage",Fc),ut("RGBAImage",as);var m_={paint:new jn({"hillshade-illumination-direction":new pt(Re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new pt(Re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new pt(Re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new pt(Re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new pt(Re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new pt(Re.paint_hillshade["hillshade-accent-color"])})};const Eo=Dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:sl}=Eo;var Uu={exports:{}};function al(l,s,d){d=d||2;var m,_,b,w,E,M,R,F=s&&s.length,N=F?s[0]*d:l.length,V=Ra(l,0,N,d,!0),j=[];if(!V||V.next===V.prev)return j;if(F&&(V=function(oe,ie,_e,De){var fe,xe,Be,Ne=[];for(fe=0,xe=ie.length;fe<xe;fe++)(Be=Ra(oe,ie[fe]*De,fe<xe-1?ie[fe+1]*De:oe.length,De,!1))===Be.next&&(Be.steiner=!0),Ne.push(Gp(Be));for(Ne.sort(p_),fe=0;fe<Ne.length;fe++)_e=$p(Ne[fe],_e);return _e}(l,s,V,d)),l.length>80*d){m=b=l[0],_=w=l[1];for(var $=d;$<N;$+=d)(E=l[$])<m&&(m=E),(M=l[$+1])<_&&(_=M),E>b&&(b=E),M>w&&(w=M);R=0!==(R=Math.max(b-m,w-_))?32767/R:0}return Md(V,j,d,m,_,R,0),j}function Ra(l,s,d,m,_){var b,w;if(_===Jh(l,s,d,m)>0)for(b=s;b<d;b+=m)w=In(b,l[b],l[b+1],w);else for(b=d-m;b>=s;b-=m)w=In(b,l[b],l[b+1],w);return w&&ju(w,w.next)&&(ll(w),w=w.next),w}function Lc(l,s){if(!l)return l;s||(s=l);var d,m=l;do{if(d=!1,m.steiner||!ju(m,m.next)&&0!==Tn(m.prev,m,m.next))m=m.next;else{if(ll(m),(m=s=m.prev)===m.next)break;d=!0}}while(d||m!==s);return s}function Md(l,s,d,m,_,b,w){if(l){!w&&b&&function(F,N,V,j){var $=F;do{0===$.z&&($.z=Yh($.x,$.y,N,V,j)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next}while($!==F);$.prevZ.nextZ=null,$.prevZ=null,function(oe){var ie,_e,De,fe,xe,Be,Ne,at,ft=1;do{for(_e=oe,oe=null,xe=null,Be=0;_e;){for(Be++,De=_e,Ne=0,ie=0;ie<ft&&(Ne++,De=De.nextZ);ie++);for(at=ft;Ne>0||at>0&&De;)0!==Ne&&(0===at||!De||_e.z<=De.z)?(fe=_e,_e=_e.nextZ,Ne--):(fe=De,De=De.nextZ,at--),xe?xe.nextZ=fe:oe=fe,fe.prevZ=xe,xe=fe;_e=De}xe.nextZ=null,ft*=2}while(Be>1)}($)}(l,m,_,b);for(var E,M,R=l;l.prev!==l.next;)if(E=l.prev,M=l.next,b?jb(l,m,_,b):Ub(l))s.push(E.i/d|0),s.push(l.i/d|0),s.push(M.i/d|0),ll(l),l=M.next,R=M.next;else if((l=M)===R){w?1===w?Md(l=jp(Lc(l),s,d),s,d,m,_,b,2):2===w&&Hp(l,s,d,m,_,b):Md(Lc(l),s,d,m,_,b,1);break}}}function Ub(l){var s=l.prev,d=l,m=l.next;if(Tn(s,d,m)>=0)return!1;for(var _=s.x,b=d.x,w=m.x,E=s.y,M=d.y,R=m.y,F=_<b?_<w?_:w:b<w?b:w,N=E<M?E<R?E:R:M<R?M:R,V=_>b?_>w?_:w:b>w?b:w,j=E>M?E>R?E:R:M>R?M:R,$=m.next;$!==s;){if($.x>=F&&$.x<=V&&$.y>=N&&$.y<=j&&Nc(_,E,b,M,w,R,$.x,$.y)&&Tn($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function jb(l,s,d,m){var _=l.prev,b=l,w=l.next;if(Tn(_,b,w)>=0)return!1;for(var E=_.x,M=b.x,R=w.x,F=_.y,N=b.y,V=w.y,j=E<M?E<R?E:R:M<R?M:R,$=F<N?F<V?F:V:N<V?N:V,oe=E>M?E>R?E:R:M>R?M:R,ie=F>N?F>V?F:V:N>V?N:V,_e=Yh(j,$,s,d,m),De=Yh(oe,ie,s,d,m),fe=l.prevZ,xe=l.nextZ;fe&&fe.z>=_e&&xe&&xe.z<=De;){if(fe.x>=j&&fe.x<=oe&&fe.y>=$&&fe.y<=ie&&fe!==_&&fe!==w&&Nc(E,F,M,N,R,V,fe.x,fe.y)&&Tn(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,xe.x>=j&&xe.x<=oe&&xe.y>=$&&xe.y<=ie&&xe!==_&&xe!==w&&Nc(E,F,M,N,R,V,xe.x,xe.y)&&Tn(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;fe&&fe.z>=_e;){if(fe.x>=j&&fe.x<=oe&&fe.y>=$&&fe.y<=ie&&fe!==_&&fe!==w&&Nc(E,F,M,N,R,V,fe.x,fe.y)&&Tn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;xe&&xe.z<=De;){if(xe.x>=j&&xe.x<=oe&&xe.y>=$&&xe.y<=ie&&xe!==_&&xe!==w&&Nc(E,F,M,N,R,V,xe.x,xe.y)&&Tn(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function jp(l,s,d){var m=l;do{var _=m.prev,b=m.next.next;!ju(_,b)&&Xh(_,m,m.next,b)&&yr(_,b)&&yr(b,_)&&(s.push(_.i/d|0),s.push(m.i/d|0),s.push(b.i/d|0),ll(m),ll(m.next),m=l=b),m=m.next}while(m!==l);return Lc(m)}function Hp(l,s,d,m,_,b){var w=l;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&f_(w,E)){var M=Hl(w,E);return w=Lc(w,w.next),M=Lc(M,M.next),Md(w,s,d,m,_,b,0),void Md(M,s,d,m,_,b,0)}E=E.next}w=w.next}while(w!==l)}function p_(l,s){return l.x-s.x}function $p(l,s){var d=function(_,b){var w,E=b,M=_.x,R=_.y,F=-1/0;do{if(R<=E.y&&R>=E.next.y&&E.next.y!==E.y){var N=E.x+(R-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(N<=M&&N>F&&(F=N,w=E.x<E.next.x?E:E.next,N===M))return w}E=E.next}while(E!==b);if(!w)return null;var V,j=w,$=w.x,oe=w.y,ie=1/0;E=w;do{M>=E.x&&E.x>=$&&M!==E.x&&Nc(R<oe?M:F,R,$,oe,R<oe?F:M,R,E.x,E.y)&&(V=Math.abs(R-E.y)/(M-E.x),yr(E,_)&&(V<ie||V===ie&&(E.x>w.x||E.x===w.x&&Hb(w,E)))&&(w=E,ie=V)),E=E.next}while(E!==j);return w}(l,s);if(!d)return s;var m=Hl(d,l);return Lc(m,m.next),Lc(d,d.next)}function Hb(l,s){return Tn(l.prev,l,s.prev)<0&&Tn(s.next,l,l.next)<0}function Yh(l,s,d,m,_){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-d)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*_|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Gp(l){var s=l,d=l;do{(s.x<d.x||s.x===d.x&&s.y<d.y)&&(d=s),s=s.next}while(s!==l);return d}function Nc(l,s,d,m,_,b,w,E){return(_-w)*(s-E)>=(l-w)*(b-E)&&(l-w)*(m-E)>=(d-w)*(s-E)&&(d-w)*(b-E)>=(_-w)*(m-E)}function f_(l,s){return l.next.i!==s.i&&l.prev.i!==s.i&&!function(d,m){var _=d;do{if(_.i!==d.i&&_.next.i!==d.i&&_.i!==m.i&&_.next.i!==m.i&&Xh(_,_.next,d,m))return!0;_=_.next}while(_!==d);return!1}(l,s)&&(yr(l,s)&&yr(s,l)&&function(d,m){var _=d,b=!1,w=(d.x+m.x)/2,E=(d.y+m.y)/2;do{_.y>E!=_.next.y>E&&_.next.y!==_.y&&w<(_.next.x-_.x)*(E-_.y)/(_.next.y-_.y)+_.x&&(b=!b),_=_.next}while(_!==d);return b}(l,s)&&(Tn(l.prev,l,s.prev)||Tn(l,s.prev,s))||ju(l,s)&&Tn(l.prev,l,l.next)>0&&Tn(s.prev,s,s.next)>0)}function Tn(l,s,d){return(s.y-l.y)*(d.x-s.x)-(s.x-l.x)*(d.y-s.y)}function ju(l,s){return l.x===s.x&&l.y===s.y}function Xh(l,s,d,m){var _=Qh(Tn(l,s,d)),b=Qh(Tn(l,s,m)),w=Qh(Tn(d,m,l)),E=Qh(Tn(d,m,s));return _!==b&&w!==E||!(0!==_||!Kh(l,d,s))||!(0!==b||!Kh(l,m,s))||!(0!==w||!Kh(d,l,m))||!(0!==E||!Kh(d,s,m))}function Kh(l,s,d){return s.x<=Math.max(l.x,d.x)&&s.x>=Math.min(l.x,d.x)&&s.y<=Math.max(l.y,d.y)&&s.y>=Math.min(l.y,d.y)}function Qh(l){return l>0?1:l<0?-1:0}function yr(l,s){return Tn(l.prev,l,l.next)<0?Tn(l,s,l.next)>=0&&Tn(l,l.prev,s)>=0:Tn(l,s,l.prev)<0||Tn(l,l.next,s)<0}function Hl(l,s){var d=new qp(l.i,l.x,l.y),m=new qp(s.i,s.x,s.y),_=l.next,b=s.prev;return l.next=s,s.prev=l,d.next=_,_.prev=d,m.next=d,d.prev=m,b.next=m,m.prev=b,m}function In(l,s,d,m){var _=new qp(l,s,d);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function ll(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function qp(l,s,d){this.i=l,this.x=s,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jh(l,s,d,m){for(var _=0,b=s,w=d-m;b<d;b+=m)_+=(l[w]-l[b])*(l[b+1]+l[w+1]),w=b;return _}function $b(l,s,d,m,_){Wp(l,s,d||0,m||l.length-1,_||em)}function Wp(l,s,d,m,_){for(;m>d;){if(m-d>600){var b=m-d+1,w=s-d+1,E=Math.log(b),M=.5*Math.exp(2*E/3),R=.5*Math.sqrt(E*M*(b-M)/b)*(w-b/2<0?-1:1);Wp(l,s,Math.max(d,Math.floor(s-w*M/b+R)),Math.min(m,Math.floor(s+(b-w)*M/b+R)),_)}var F=l[s],N=d,V=m;for(kd(l,d,s),_(l[m],F)>0&&kd(l,d,m);N<V;){for(kd(l,N,V),N++,V--;_(l[N],F)<0;)N++;for(;_(l[V],F)>0;)V--}0===_(l[d],F)?kd(l,d,V):kd(l,++V,m),V<=s&&(d=V+1),s<=V&&(m=V-1)}}function kd(l,s,d){var m=l[s];l[s]=l[d],l[d]=m}function em(l,s){return l<s?-1:l>s?1:0}function Pa(l,s){const d=l.length;if(d<=1)return[l];const m=[];let _,b;for(let w=0;w<d;w++){const E=bs(l[w]);0!==E&&(l[w].area=Math.abs(E),void 0===b&&(b=E<0),b===E<0?(_&&m.push(_),_=[l[w]]):_.push(l[w]))}if(_&&m.push(_),s>1)for(let w=0;w<m.length;w++)m[w].length<=s||($b(m[w],s,1,m[w].length-1,Gb),m[w]=m[w].slice(0,s));return m}function Gb(l,s){return s.area-l.area}function Td(l,s,d){const m=d.patternDependencies;let _=!1;for(const b of s){const w=b.paint.get(`${l}-pattern`);w.isConstant()||(_=!0);const E=w.constantOr(null);E&&(_=!0,m[E.to]=!0,m[E.from]=!0)}return _}function Id(l,s,d,m,_){const b=_.patternDependencies;for(const w of s){const E=w.paint.get(`${l}-pattern`).value;if("constant"!==E.kind){let M=E.evaluate({zoom:m-1},d,{},_.availableImages),R=E.evaluate({zoom:m},d,{},_.availableImages),F=E.evaluate({zoom:m+1},d,{},_.availableImages);M=M&&M.name?M.name:M,R=R&&R.name?R.name:R,F=F&&F.name?F.name:F,b[M]=!0,b[R]=!0,b[F]=!0,d.patterns[w.id]={min:M,mid:R,max:F}}}return d}Uu.exports=al,Uu.exports.default=al,al.deviation=function(l,s,d,m){var _=s&&s.length,b=Math.abs(Jh(l,0,_?s[0]*d:l.length,d));if(_)for(var w=0,E=s.length;w<E;w++)b-=Math.abs(Jh(l,s[w]*d,w<E-1?s[w+1]*d:l.length,d));var M=0;for(w=0;w<m.length;w+=3){var R=m[w]*d,F=m[w+1]*d,N=m[w+2]*d;M+=Math.abs((l[R]-l[N])*(l[F+1]-l[R+1])-(l[R]-l[F])*(l[N+1]-l[R+1]))}return 0===b&&0===M?0:Math.abs((M-b)/b)},al.flatten=function(l){for(var s=l[0][0].length,d={vertices:[],holes:[],dimensions:s},m=0,_=0;_<l.length;_++){for(var b=0;b<l[_].length;b++)for(var w=0;w<s;w++)d.vertices.push(l[_][b][w]);_>0&&d.holes.push(m+=l[_-1].length)}return d};class Ad{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(d=>d.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new en,this.indexArray=new Yi,this.indexArray2=new Is,this.programConfigurations=new po(s.layers,s.zoom),this.segments=new si,this.segments2=new si,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(s,d,m){this.hasPattern=Td("fill",this.layers,d);const _=this.layers[0].layout.get("fill-sort-key"),b=!_.isConstant(),w=[];for(const{feature:E,id:M,index:R,sourceLayerIndex:F}of s){const N=this.layers[0]._featureFilter.needGeometry,V=Ac(E,N);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom),V,m))continue;const j=b?_.evaluate(V,{},m,d.availableImages):void 0,$={id:M,properties:E.properties,type:E.type,sourceLayerIndex:F,index:R,geometry:N?V.geometry:or(E),patterns:{},sortKey:j};w.push($)}b&&w.sort((E,M)=>E.sortKey-M.sortKey);for(const E of w){const{geometry:M,index:R,sourceLayerIndex:F}=E;if(this.hasPattern){const N=Id("fill",this.layers,E,this.zoom,d);this.patternFeatures.push(N)}else this.addFeature(E,M,R,m,{});d.featureIndex.insert(s[R].feature,M,R,F,this.index)}}update(s,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,m)}addFeatures(s,d,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,d,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,sl),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,d,m,_,b){for(const w of Pa(d,500)){let E=0;for(const j of w)E+=j.length;const M=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),R=M.vertexLength,F=[],N=[];for(const j of w){if(0===j.length)continue;j!==w[0]&&N.push(F.length/2);const $=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),oe=$.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(oe+j.length-1,oe),F.push(j[0].x),F.push(j[0].y);for(let ie=1;ie<j.length;ie++)this.layoutVertexArray.emplaceBack(j[ie].x,j[ie].y),this.indexArray2.emplaceBack(oe+ie-1,oe+ie),F.push(j[ie].x),F.push(j[ie].y);$.vertexLength+=j.length,$.primitiveLength+=j.length}const V=Uu.exports(F,N);for(let j=0;j<V.length;j+=3)this.indexArray.emplaceBack(R+V[j],R+V[j+1],R+V[j+2]);M.vertexLength+=E,M.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,b,_)}}ut("FillBucket",Ad,{omit:["layers","patternFeatures"]});const Zp=new jn({"fill-sort-key":new kt(Re.layout_fill["fill-sort-key"])});var g_={paint:new jn({"fill-antialias":new pt(Re.paint_fill["fill-antialias"]),"fill-opacity":new kt(Re.paint_fill["fill-opacity"]),"fill-color":new kt(Re.paint_fill["fill-color"]),"fill-outline-color":new kt(Re.paint_fill["fill-outline-color"]),"fill-translate":new pt(Re.paint_fill["fill-translate"]),"fill-translate-anchor":new pt(Re.paint_fill["fill-translate-anchor"]),"fill-pattern":new Co(Re.paint_fill["fill-pattern"])}),layout:Zp};const __=Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qb=Dn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Rd}=__;var As={},Wb=Pt,Zb=$l;function $l(l,s,d,m,_){this.properties={},this.extent=d,this.type=0,this._pbf=l,this._geometry=-1,this._keys=m,this._values=_,l.readFields(pD,this,s)}function pD(l,s,d){1==l?s.id=d.readVarint():2==l?function(m,_){for(var b=m.readVarint()+m.pos;m.pos<b;){var w=_._keys[m.readVarint()],E=_._values[m.readVarint()];_.properties[w]=E}}(d,s):3==l?s.type=d.readVarint():4==l&&(s._geometry=d.pos)}function Yb(l){for(var s,d,m=0,_=0,b=l.length,w=b-1;_<b;w=_++)m+=((d=l[w]).x-(s=l[_]).x)*(s.y+d.y);return m}$l.types=["Unknown","Point","LineString","Polygon"],$l.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var s,d=l.readVarint()+l.pos,m=1,_=0,b=0,w=0,E=[];l.pos<d;){if(_<=0){var M=l.readVarint();m=7&M,_=M>>3}if(_--,1===m||2===m)b+=l.readSVarint(),w+=l.readSVarint(),1===m&&(s&&E.push(s),s=[]),s.push(new Wb(b,w));else{if(7!==m)throw new Error("unknown command "+m);s&&s.push(s[0].clone())}}return s&&E.push(s),E},$l.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var s=l.readVarint()+l.pos,d=1,m=0,_=0,b=0,w=1/0,E=-1/0,M=1/0,R=-1/0;l.pos<s;){if(m<=0){var F=l.readVarint();d=7&F,m=F>>3}if(m--,1===d||2===d)(_+=l.readSVarint())<w&&(w=_),_>E&&(E=_),(b+=l.readSVarint())<M&&(M=b),b>R&&(R=b);else if(7!==d)throw new Error("unknown command "+d)}return[w,M,E,R]},$l.prototype.toGeoJSON=function(l,s,d){var m,_,b=this.extent*Math.pow(2,d),w=this.extent*l,E=this.extent*s,M=this.loadGeometry(),R=$l.types[this.type];function F(j){for(var $=0;$<j.length;$++){var oe=j[$];j[$]=[360*(oe.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+E)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(m=0;m<M.length;m++)N[m]=M[m][0];F(M=N);break;case 2:for(m=0;m<M.length;m++)F(M[m]);break;case 3:for(M=function(j){var $=j.length;if($<=1)return[j];for(var oe,ie,_e=[],De=0;De<$;De++){var fe=Yb(j[De]);0!==fe&&(void 0===ie&&(ie=fe<0),ie===fe<0?(oe&&_e.push(oe),oe=[j[De]]):oe.push(j[De]))}return oe&&_e.push(oe),_e}(M),m=0;m<M.length;m++)for(_=0;_<M[m].length;_++)F(M[m][_])}1===M.length?M=M[0]:R="Multi"+R;var V={type:"Feature",geometry:{type:R,coordinates:M},properties:this.properties};return"id"in this&&(V.id=this.id),V};var Xb=Zb,Kb=Qb;function Qb(l,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(y_,this,s),this.length=this._features.length}function y_(l,s,d){15===l?s.version=d.readVarint():1===l?s.name=d.readString():5===l?s.extent=d.readVarint():2===l?s._features.push(d.pos):3===l?s._keys.push(d.readString()):4===l&&s._values.push(function(m){for(var _=null,b=m.readVarint()+m.pos;m.pos<b;){var w=m.readVarint()>>3;_=1===w?m.readString():2===w?m.readFloat():3===w?m.readDouble():4===w?m.readVarint64():5===w?m.readVarint():6===w?m.readSVarint():7===w?m.readBoolean():null}return _}(d))}Qb.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var s=this._pbf.readVarint()+this._pbf.pos;return new Xb(this._pbf,s,this.extent,this._keys,this._values)};var tm=Kb;function Jb(l,s,d){if(3===l){var m=new tm(d,d.readVarint()+d.pos);m.length&&(s[m.name]=m)}}As.VectorTile=function(l,s){this.layers=l.readFields(Jb,{},s)},As.VectorTileFeature=Zb,As.VectorTileLayer=Kb;const im=As.VectorTileFeature.types,Hu=Math.pow(2,13);function Gl(l,s,d,m,_,b,w,E){l.emplaceBack(s,d,2*Math.floor(m*Hu)+w,_*Hu*2,b*Hu*2,Math.round(E))}class v_{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(d=>d.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new mi,this.centroidVertexArray=new yt,this.indexArray=new Yi,this.programConfigurations=new po(s.layers,s.zoom),this.segments=new si,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(s,d,m){this.features=[],this.hasPattern=Td("fill-extrusion",this.layers,d);for(const{feature:_,id:b,index:w,sourceLayerIndex:E}of s){const M=this.layers[0]._featureFilter.needGeometry,R=Ac(_,M);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom),R,m))continue;const F={id:b,sourceLayerIndex:E,index:w,geometry:M?R.geometry:or(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(Id("fill-extrusion",this.layers,F,this.zoom,d)):this.addFeature(F,F.geometry,w,m,{}),d.featureIndex.insert(_,F.geometry,w,E,this.index,!0)}}addFeatures(s,d,m){for(const _ of this.features){const{geometry:b}=_;this.addFeature(_,b,_.index,d,m)}}update(s,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,m)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Rd),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,qb.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,d,m,_,b){const w={x:0,y:0,vertexCount:0};for(const E of Pa(d,500)){let M=0;for(const $ of E)M+=$.length;let R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const $ of E){if(0===$.length||x_($))continue;let oe=0;for(let ie=0;ie<$.length;ie++){const _e=$[ie];if(ie>=1){const De=$[ie-1];if(!b_(_e,De)){R.vertexLength+4>si.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=_e.sub(De)._perp()._unit(),xe=De.dist(_e);oe+xe>32768&&(oe=0),Gl(this.layoutVertexArray,_e.x,_e.y,fe.x,fe.y,0,0,oe),Gl(this.layoutVertexArray,_e.x,_e.y,fe.x,fe.y,0,1,oe),w.x+=2*_e.x,w.y+=2*_e.y,w.vertexCount+=2,oe+=xe,Gl(this.layoutVertexArray,De.x,De.y,fe.x,fe.y,0,0,oe),Gl(this.layoutVertexArray,De.x,De.y,fe.x,fe.y,0,1,oe),w.x+=2*De.x,w.y+=2*De.y,w.vertexCount+=2;const Be=R.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),R.vertexLength+=4,R.primitiveLength+=2}}}}if(R.vertexLength+M>si.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),"Polygon"!==im[s.type])continue;const F=[],N=[],V=R.vertexLength;for(const $ of E)if(0!==$.length){$!==E[0]&&N.push(F.length/2);for(let oe=0;oe<$.length;oe++){const ie=$[oe];Gl(this.layoutVertexArray,ie.x,ie.y,0,0,1,1,0),w.x+=ie.x,w.y+=ie.y,w.vertexCount+=1,F.push(ie.x),F.push(ie.y)}}const j=Uu.exports(F,N);for(let $=0;$<j.length;$+=3)this.indexArray.emplaceBack(V+j[$],V+j[$+2],V+j[$+1]);R.primitiveLength+=j.length/3,R.vertexLength+=M}for(let E=0;E<w.vertexCount;E++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,b,_)}}function b_(l,s){return l.x===s.x&&(l.x<0||l.x>ai)||l.y===s.y&&(l.y<0||l.y>ai)}function x_(l){return l.every(s=>s.x<0)||l.every(s=>s.x>ai)||l.every(s=>s.y<0)||l.every(s=>s.y>ai)}ut("FillExtrusionBucket",v_,{omit:["layers","features"]});var e0={paint:new jn({"fill-extrusion-opacity":new pt(Re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(Re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new pt(Re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new pt(Re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Co(Re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(Re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(Re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new pt(Re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ho(l,s){return l.x*s.x+l.y*s.y}function w_(l,s){if(1===l.length){let d=0;const m=s[d++];let _;for(;!_||m.equals(_);)if(_=s[d++],!_)return 1/0;for(;d<s.length;d++){const b=s[d],w=l[0],E=_.sub(m),M=b.sub(m),R=w.sub(m),F=Ho(E,E),N=Ho(E,M),V=Ho(M,M),j=Ho(R,E),$=Ho(R,M),oe=F*V-N*N,ie=(V*j-N*$)/oe,_e=(F*$-N*j)/oe,De=m.z*(1-ie-_e)+_.z*ie+b.z*_e;if(isFinite(De))return De}return 1/0}{let d=1/0;for(const m of s)d=Math.min(d,m.z);return d}}const nm=Dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Yp}=nm,C_=Dn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Xp}=C_,Kp=As.VectorTileFeature.types,t0=Math.cos(Math.PI/180*37.5),Qp=Math.pow(2,14)/.5;class rm{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(d=>d.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new wi,this.layoutVertexArray2=new tn,this.indexArray=new Yi,this.programConfigurations=new po(s.layers,s.zoom),this.segments=new si,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(s,d,m){this.hasPattern=Td("line",this.layers,d);const _=this.layers[0].layout.get("line-sort-key"),b=!_.isConstant(),w=[];for(const{feature:E,id:M,index:R,sourceLayerIndex:F}of s){const N=this.layers[0]._featureFilter.needGeometry,V=Ac(E,N);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom),V,m))continue;const j=b?_.evaluate(V,{},m):void 0,$={id:M,properties:E.properties,type:E.type,sourceLayerIndex:F,index:R,geometry:N?V.geometry:or(E),patterns:{},sortKey:j};w.push($)}b&&w.sort((E,M)=>E.sortKey-M.sortKey);for(const E of w){const{geometry:M,index:R,sourceLayerIndex:F}=E;if(this.hasPattern){const N=Id("line",this.layers,E,this.zoom,d);this.patternFeatures.push(N)}else this.addFeature(E,M,R,m,{});d.featureIndex.insert(s[R].feature,M,R,F,this.index)}}update(s,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,m)}addFeatures(s,d,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,d,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Xp)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Yp),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,d,m,_,b){const w=this.layers[0].layout,E=w.get("line-join").evaluate(s,{}),M=w.get("line-cap"),R=w.get("line-miter-limit"),F=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const N of d)this.addLine(N,s,E,M,R,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,b,_)}addLine(s,d,m,_,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _e=0;_e<s.length-1;_e++)this.totalDistance+=s[_e].dist(s[_e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E="Polygon"===Kp[d.type];let M=s.length;for(;M>=2&&s[M-1].equals(s[M-2]);)M--;let R=0;for(;R<M-1&&s[R].equals(s[R+1]);)R++;if(M<(E?3:2))return;"bevel"===m&&(b=1.05);const F=this.overscaling<=16?122880/(512*this.overscaling):0,N=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let V,j,$,oe,ie;this.e1=this.e2=-1,E&&(V=s[M-2],ie=s[R].sub(V)._unit()._perp());for(let _e=R;_e<M;_e++){if($=_e===M-1?E?s[R+1]:void 0:s[_e+1],$&&s[_e].equals($))continue;ie&&(oe=ie),V&&(j=V),V=s[_e],ie=$?$.sub(V)._unit()._perp():oe,oe=oe||ie;let De=oe.add(ie);0===De.x&&0===De.y||De._unit();const fe=oe.x*ie.x+oe.y*ie.y,xe=De.x*ie.x+De.y*ie.y,Be=0!==xe?1/xe:1/0,Ne=2*Math.sqrt(2-2*xe),at=xe<t0&&j&&$,ft=oe.x*ie.y-oe.y*ie.x>0;if(at&&_e>R){const Ye=V.dist(j);if(Ye>2*F){const nt=V.sub(V.sub(j)._mult(F/Ye)._round());this.updateDistance(j,nt),this.addCurrentVertex(nt,oe,0,0,N),j=nt}}const it=j&&$;let Ke=it?m:E?"butt":_;if(it&&"round"===Ke&&(Be<w?Ke="miter":Be<=2&&(Ke="fakeround")),"miter"===Ke&&Be>b&&(Ke="bevel"),"bevel"===Ke&&(Be>2&&(Ke="flipbevel"),Be<b&&(Ke="miter")),j&&this.updateDistance(j,V),"miter"===Ke)De._mult(Be),this.addCurrentVertex(V,De,0,0,N);else if("flipbevel"===Ke){if(Be>100)De=ie.mult(-1);else{const Ye=Be*oe.add(ie).mag()/oe.sub(ie).mag();De._perp()._mult(Ye*(ft?-1:1))}this.addCurrentVertex(V,De,0,0,N),this.addCurrentVertex(V,De.mult(-1),0,0,N)}else if("bevel"===Ke||"fakeround"===Ke){const Ye=-Math.sqrt(Be*Be-1),nt=ft?Ye:0,tt=ft?0:Ye;if(j&&this.addCurrentVertex(V,oe,nt,tt,N),"fakeround"===Ke){const $e=Math.round(180*Ne/Math.PI/20);for(let wt=1;wt<$e;wt++){let mt=wt/$e;if(.5!==mt){const cn=mt-.5;mt+=mt*cn*(mt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*cn*cn+(.848013+fe*(.215638*fe-1.06021)))}const ii=ie.sub(oe)._mult(mt)._add(oe)._unit()._mult(ft?-1:1);this.addHalfVertex(V,ii.x,ii.y,!1,ft,0,N)}}$&&this.addCurrentVertex(V,ie,-nt,-tt,N)}else if("butt"===Ke)this.addCurrentVertex(V,De,0,0,N);else if("square"===Ke){const Ye=j?1:-1;this.addCurrentVertex(V,De,Ye,Ye,N)}else"round"===Ke&&(j&&(this.addCurrentVertex(V,oe,0,0,N),this.addCurrentVertex(V,oe,1,1,N,!0)),$&&(this.addCurrentVertex(V,ie,-1,-1,N,!0),this.addCurrentVertex(V,ie,0,0,N)));if(at&&_e<M-1){const Ye=V.dist($);if(Ye>2*F){const nt=V.add($.sub(V)._mult(F/Ye)._round());this.updateDistance(V,nt),this.addCurrentVertex(nt,ie,0,0,N),V=nt}}}}addCurrentVertex(s,d,m,_,b,w=!1){const E=d.y*_-d.x,M=-d.y-d.x*_;this.addHalfVertex(s,d.x+d.y*m,d.y-d.x*m,w,!1,m,b),this.addHalfVertex(s,E,M,w,!0,-_,b),this.distance>Qp/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(s,d,m,_,b,w))}addHalfVertex({x:s,y:d},m,_,b,w,E,M){const R=.5*(this.lineClips?this.scaledDistance*(Qp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(b?1:0),(d<<1)+(w?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(0===E?0:E<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),M.primitiveLength++),w?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,d){this.distance+=s.dist(d),this.updateScaledDistance()}}ut("LineBucket",rm,{omit:["layers","patternFeatures"]});const D_=new jn({"line-cap":new pt(Re.layout_line["line-cap"]),"line-join":new kt(Re.layout_line["line-join"]),"line-miter-limit":new pt(Re.layout_line["line-miter-limit"]),"line-round-limit":new pt(Re.layout_line["line-round-limit"]),"line-sort-key":new kt(Re.layout_line["line-sort-key"])});var Jp={paint:new jn({"line-opacity":new kt(Re.paint_line["line-opacity"]),"line-color":new kt(Re.paint_line["line-color"]),"line-translate":new pt(Re.paint_line["line-translate"]),"line-translate-anchor":new pt(Re.paint_line["line-translate-anchor"]),"line-width":new kt(Re.paint_line["line-width"]),"line-gap-width":new kt(Re.paint_line["line-gap-width"]),"line-offset":new kt(Re.paint_line["line-offset"]),"line-blur":new kt(Re.paint_line["line-blur"]),"line-dasharray":new rs(Re.paint_line["line-dasharray"]),"line-pattern":new Co(Re.paint_line["line-pattern"]),"line-gradient":new os(Re.paint_line["line-gradient"])}),layout:D_};const E_=new class extends kt{possiblyEvaluate(l,s){return s=new Wi(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(l,s)}evaluate(l,s,d,m){return s=Oo({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(l,s,d,m)}}(Jp.paint.properties["line-width"].specification);function $u(l,s){return s>0?s+2*l:l}E_.useIntegerZoom=!0;const Bc=Dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),n0=Dn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const S_=Dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Dn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ef=Dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Pd=Dn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function r0(l,s,d){return l.sections.forEach(m=>{m.text=function(_,b,w){const E=b.layout.get("text-transform").evaluate(w,{});return"uppercase"===E?_=_.toLocaleUpperCase():"lowercase"===E&&(_=_.toLocaleLowerCase()),fr.applyArabicShaping&&(_=fr.applyArabicShaping(_)),_}(m.text,s,d)}),l}Dn([{name:"triangle",components:3,type:"Uint16"}]),Dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Dn([{type:"Float32",name:"offsetX"}]),Dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const li={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Yn=24,tf=Ni,nf=function(l,s,d,m,_){var b,w,E=8*_-m-1,M=(1<<E)-1,R=M>>1,F=-7,N=d?_-1:0,V=d?-1:1,j=l[s+N];for(N+=V,b=j&(1<<-F)-1,j>>=-F,F+=E;F>0;b=256*b+l[s+N],N+=V,F-=8);for(w=b&(1<<-F)-1,b>>=-F,F+=m;F>0;w=256*w+l[s+N],N+=V,F-=8);if(0===b)b=1-R;else{if(b===M)return w?NaN:1/0*(j?-1:1);w+=Math.pow(2,m),b-=R}return(j?-1:1)*w*Math.pow(2,b-m)},Oa=function(l,s,d,m,_,b){var w,E,M,R=8*b-_-1,F=(1<<R)-1,N=F>>1,V=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,j=m?0:b-1,$=m?1:-1,oe=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(E=isNaN(s)?1:0,w=F):(w=Math.floor(Math.log(s)/Math.LN2),s*(M=Math.pow(2,-w))<1&&(w--,M*=2),(s+=w+N>=1?V/M:V*Math.pow(2,1-N))*M>=2&&(w++,M/=2),w+N>=F?(E=0,w=F):w+N>=1?(E=(s*M-1)*Math.pow(2,_),w+=N):(E=s*Math.pow(2,N-1)*Math.pow(2,_),w=0));_>=8;l[d+j]=255&E,j+=$,E/=256,_-=8);for(w=w<<_|E,R+=_;R>0;l[d+j]=255&w,j+=$,w/=256,R-=8);l[d+j-$]|=128*oe};function Ni(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}Ni.Varint=0,Ni.Fixed64=1,Ni.Bytes=2,Ni.Fixed32=5;var ls,ql=4294967296,rf=1/ql,om=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $o(l){return l.type===Ni.Bytes?l.readVarint()+l.pos:l.pos+1}function M_(l,s,d){var m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));d.realloc(m);for(var _=d.pos-1;_>=l;_--)d.buf[_+m]=d.buf[_]}function fD(l,s){for(var d=0;d<l.length;d++)s.writeVarint(l[d])}function gD(l,s){for(var d=0;d<l.length;d++)s.writeSVarint(l[d])}function _D(l,s){for(var d=0;d<l.length;d++)s.writeFloat(l[d])}function yD(l,s){for(var d=0;d<l.length;d++)s.writeDouble(l[d])}function vD(l,s){for(var d=0;d<l.length;d++)s.writeBoolean(l[d])}function bD(l,s){for(var d=0;d<l.length;d++)s.writeFixed32(l[d])}function qu(l,s){for(var d=0;d<l.length;d++)s.writeSFixed32(l[d])}function xD(l,s){for(var d=0;d<l.length;d++)s.writeFixed64(l[d])}function wD(l,s){for(var d=0;d<l.length;d++)s.writeSFixed64(l[d])}function Hn(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+16777216*l[s+3]}function Od(l,s,d){l[d]=s,l[d+1]=s>>>8,l[d+2]=s>>>16,l[d+3]=s>>>24}function Fd(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+(l[s+3]<<24)}function o0(l,s,d){1===l&&d.readMessage(Rs,s)}function Rs(l,s,d){if(3===l){const{id:m,bitmap:_,width:b,height:w,left:E,top:M,advance:R}=d.readMessage(Wu,{});s.push({id:m,bitmap:new Fc({width:b+6,height:w+6},_),metrics:{width:b,height:w,left:E,top:M,advance:R}})}}function Wu(l,s,d){1===l?s.id=d.readVarint():2===l?s.bitmap=d.readBytes():3===l?s.width=d.readVarint():4===l?s.height=d.readVarint():5===l?s.left=d.readSVarint():6===l?s.top=d.readSVarint():7===l&&(s.advance=d.readVarint())}function sf(l){let s=0,d=0;for(const w of l)s+=w.w*w.h,d=Math.max(d,w.w);l.sort((w,E)=>E.h-w.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),d),h:1/0}];let _=0,b=0;for(const w of l)for(let E=m.length-1;E>=0;E--){const M=m[E];if(!(w.w>M.w||w.h>M.h)){if(w.x=M.x,w.y=M.y,b=Math.max(b,w.y+w.h),_=Math.max(_,w.x+w.w),w.w===M.w&&w.h===M.h){const R=m.pop();E<m.length&&(m[E]=R)}else w.h===M.h?(M.x+=w.w,M.w-=w.w):w.w===M.w?(M.y+=w.h,M.h-=w.h):(m.push({x:M.x+w.w,y:M.y,w:M.w-w.w,h:w.h}),M.y+=w.h,M.h-=w.h);break}}return{w:_,h:b,fill:s/(_*b)||0}}Ni.prototype={destroy:function(){this.buf=null},readFields:function(l,s,d){for(d=d||this.length;this.pos<d;){var m=this.readVarint(),_=m>>3,b=this.pos;this.type=7&m,l(_,s,this),this.pos===b&&this.skip(m)}return s},readMessage:function(l,s){return this.readFields(l,s,this.readVarint()+this.pos)},readFixed32:function(){var l=Hn(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Fd(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=Hn(this.buf,this.pos)+Hn(this.buf,this.pos+4)*ql;return this.pos+=8,l},readSFixed64:function(){var l=Hn(this.buf,this.pos)+Fd(this.buf,this.pos+4)*ql;return this.pos+=8,l},readFloat:function(){var l=nf(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=nf(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var s,d,m=this.buf;return s=127&(d=m[this.pos++]),d<128?s:(s|=(127&(d=m[this.pos++]))<<7,d<128?s:(s|=(127&(d=m[this.pos++]))<<14,d<128?s:(s|=(127&(d=m[this.pos++]))<<21,d<128?s:function(_,b,w){var E,M,R=w.buf;if(E=(112&(M=R[w.pos++]))>>4,M<128||(E|=(127&(M=R[w.pos++]))<<3,M<128)||(E|=(127&(M=R[w.pos++]))<<10,M<128)||(E|=(127&(M=R[w.pos++]))<<17,M<128)||(E|=(127&(M=R[w.pos++]))<<24,M<128)||(E|=(1&(M=R[w.pos++]))<<31,M<128))return function Gu(l,s,d){return d?4294967296*s+(l>>>0):4294967296*(s>>>0)+(l>>>0)}(_,E,b);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(d=m[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,s=this.pos;return this.pos=l,l-s>=12&&om?om.decode(this.buf.subarray(s,l)):function(d,m,_){for(var b="",w=m;w<_;){var E,M,R,F=d[w],N=null,V=F>239?4:F>223?3:F>191?2:1;if(w+V>_)break;1===V?F<128&&(N=F):2===V?128==(192&(E=d[w+1]))&&(N=(31&F)<<6|63&E)<=127&&(N=null):3===V?(M=d[w+2],128==(192&(E=d[w+1]))&&128==(192&M)&&((N=(15&F)<<12|(63&E)<<6|63&M)<=2047||N>=55296&&N<=57343)&&(N=null)):4===V&&(M=d[w+2],R=d[w+3],128==(192&(E=d[w+1]))&&128==(192&M)&&128==(192&R)&&((N=(15&F)<<18|(63&E)<<12|(63&M)<<6|63&R)<=65535||N>=1114112)&&(N=null)),null===N?(N=65533,V=1):N>65535&&(N-=65536,b+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),b+=String.fromCharCode(N),w+=V}return b}(this.buf,s,l)},readBytes:function(){var l=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,l);return this.pos=l,s},readPackedVarint:function(l,s){if(this.type!==Ni.Bytes)return l.push(this.readVarint(s));var d=$o(this);for(l=l||[];this.pos<d;)l.push(this.readVarint(s));return l},readPackedSVarint:function(l){if(this.type!==Ni.Bytes)return l.push(this.readSVarint());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==Ni.Bytes)return l.push(this.readBoolean());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==Ni.Bytes)return l.push(this.readFloat());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==Ni.Bytes)return l.push(this.readDouble());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==Ni.Bytes)return l.push(this.readFixed32());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==Ni.Bytes)return l.push(this.readSFixed32());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==Ni.Bytes)return l.push(this.readFixed64());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==Ni.Bytes)return l.push(this.readSFixed64());var s=$o(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed64());return l},skip:function(l){var s=7&l;if(s===Ni.Varint)for(;this.buf[this.pos++]>127;);else if(s===Ni.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Ni.Fixed32)this.pos+=4;else{if(s!==Ni.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(l,s){this.writeVarint(l<<3|s)},realloc:function(l){for(var s=this.length||16;s<this.pos+l;)s*=2;if(s!==this.length){var d=new Uint8Array(s);d.set(this.buf),this.buf=d,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Od(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Od(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Od(this.buf,-1&l,this.pos),Od(this.buf,Math.floor(l*rf),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Od(this.buf,-1&l,this.pos),Od(this.buf,Math.floor(l*rf),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(s,d){var m,_,b,E;if(s>=0?(m=s%4294967296|0,_=s/4294967296|0):(_=~(-s/4294967296),4294967295^(m=~(-s%4294967296))?m=m+1|0:(m=0,_=_+1|0)),s>=0x10000000000000000||s<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),b=m,(E=d).buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,E.buf[E.pos]=127&(b>>>=7),function(b,w){var E=(7&b)<<4;w.buf[w.pos++]|=E|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))}(_,d)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var s=this.pos;this.pos=function(m,_,b){for(var w,E,M=0;M<_.length;M++){if((w=_.charCodeAt(M))>55295&&w<57344){if(!E){w>56319||M+1===_.length?(m[b++]=239,m[b++]=191,m[b++]=189):E=w;continue}if(w<56320){m[b++]=239,m[b++]=191,m[b++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(m[b++]=239,m[b++]=191,m[b++]=189,E=null);w<128?m[b++]=w:(w<2048?m[b++]=w>>6|192:(w<65536?m[b++]=w>>12|224:(m[b++]=w>>18|240,m[b++]=w>>12&63|128),m[b++]=w>>6&63|128),m[b++]=63&w|128)}return b}(this.buf,l,this.pos);var d=this.pos-s;d>=128&&M_(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeFloat:function(l){this.realloc(4),Oa(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),Oa(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var s=l.length;this.writeVarint(s),this.realloc(s);for(var d=0;d<s;d++)this.buf[this.pos++]=l[d]},writeRawMessage:function(l,s){this.pos++;var d=this.pos;l(s,this);var m=this.pos-d;m>=128&&M_(d,m,this),this.pos=d-1,this.writeVarint(m),this.pos+=m},writeMessage:function(l,s,d){this.writeTag(l,Ni.Bytes),this.writeRawMessage(s,d)},writePackedVarint:function(l,s){s.length&&this.writeMessage(l,fD,s)},writePackedSVarint:function(l,s){s.length&&this.writeMessage(l,gD,s)},writePackedBoolean:function(l,s){s.length&&this.writeMessage(l,vD,s)},writePackedFloat:function(l,s){s.length&&this.writeMessage(l,_D,s)},writePackedDouble:function(l,s){s.length&&this.writeMessage(l,yD,s)},writePackedFixed32:function(l,s){s.length&&this.writeMessage(l,bD,s)},writePackedSFixed32:function(l,s){s.length&&this.writeMessage(l,qu,s)},writePackedFixed64:function(l,s){s.length&&this.writeMessage(l,xD,s)},writePackedSFixed64:function(l,s){s.length&&this.writeMessage(l,wD,s)},writeBytesField:function(l,s){this.writeTag(l,Ni.Bytes),this.writeBytes(s)},writeFixed32Field:function(l,s){this.writeTag(l,Ni.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(l,s){this.writeTag(l,Ni.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(l,s){this.writeTag(l,Ni.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(l,s){this.writeTag(l,Ni.Fixed64),this.writeSFixed64(s)},writeVarintField:function(l,s){this.writeTag(l,Ni.Varint),this.writeVarint(s)},writeSVarintField:function(l,s){this.writeTag(l,Ni.Varint),this.writeSVarint(s)},writeStringField:function(l,s){this.writeTag(l,Ni.Bytes),this.writeString(s)},writeFloatField:function(l,s){this.writeTag(l,Ni.Fixed32),this.writeFloat(s)},writeDoubleField:function(l,s){this.writeTag(l,Ni.Fixed64),this.writeDouble(s)},writeBooleanField:function(l,s){this.writeVarintField(l,!!s)}};class Ld{constructor(s,{pixelRatio:d,version:m,stretchX:_,stretchY:b,content:w}){this.paddedRect=s,this.pixelRatio=d,this.stretchX=_,this.stretchY=b,this.content=w,this.version=m}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nd{constructor(s,d){const m={},_={};this.haveRenderCallbacks=[];const b=[];this.addImages(s,m,b),this.addImages(d,_,b);const{w,h:E}=sf(b),M=new as({width:w||1,height:E||1});for(const R in s){const F=s[R],N=m[R].paddedRect;as.copy(F.data,M,{x:0,y:0},{x:N.x+1,y:N.y+1},F.data)}for(const R in d){const F=d[R],N=_[R].paddedRect,V=N.x+1,j=N.y+1,$=F.data.width,oe=F.data.height;as.copy(F.data,M,{x:0,y:0},{x:V,y:j},F.data),as.copy(F.data,M,{x:0,y:oe-1},{x:V,y:j-1},{width:$,height:1}),as.copy(F.data,M,{x:0,y:0},{x:V,y:j+oe},{width:$,height:1}),as.copy(F.data,M,{x:$-1,y:0},{x:V-1,y:j},{width:1,height:oe}),as.copy(F.data,M,{x:0,y:0},{x:V+$,y:j},{width:1,height:oe})}this.image=M,this.iconPositions=m,this.patternPositions=_}addImages(s,d,m){for(const _ in s){const b=s[_],w={x:0,y:0,w:b.data.width+2,h:b.data.height+2};m.push(w),d[_]=new Ld(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(s,d){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),d),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),d)}patchUpdatedImage(s,d,m){if(!s||!d||s.version===d.version)return;s.version=d.version;const[_,b]=s.tl;m.update(d.data,void 0,{x:_,y:b})}}ut("ImagePosition",Ld),ut("ImageAtlas",Nd),v.WritingMode=void 0,(ls=v.WritingMode||(v.WritingMode={}))[ls.none=0]="none",ls[ls.horizontal=1]="horizontal",ls[ls.vertical=2]="vertical",ls[ls.horizontalOnly=3]="horizontalOnly";const sm=-17;class am{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,d){const m=new am;return m.scale=s||1,m.fontStack=d,m}static forImage(s){const d=new am;return d.imageName=s,d}}class Bd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,d){const m=new Bd;for(let _=0;_<s.sections.length;_++){const b=s.sections[_];b.image?m.addImageSection(b):m.addTextSection(b,d)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let d="";for(let m=0;m<s.length;m++){const _=s.charCodeAt(m+1)||null,b=s.charCodeAt(m-1)||null;d+=_&&uo(_)&&!li[s[m+1]]||b&&uo(b)&&!li[s[m-1]]||!li[s[m]]?s[m]:li[s[m]]}return d}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&go[this.text.charCodeAt(m)];m++)s++;let d=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&go[this.text.charCodeAt(m)];m--)d--;this.text=this.text.substring(s,d),this.sectionIndex=this.sectionIndex.slice(s,d)}substring(s,d){const m=new Bd;return m.text=this.text.substring(s,d),m.sectionIndex=this.sectionIndex.slice(s,d),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,d)=>Math.max(s,this.sections[d].scale),0)}addTextSection(s,d){this.text+=s.text,this.sections.push(am.forText(s.scale,s.fontStack||d));const m=this.sections.length-1;for(let _=0;_<s.text.length;++_)this.sectionIndex.push(m)}addImageSection(s){const d=s.image?s.image.name:"";if(0===d.length)return void xn("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(am.forImage(d)),this.sectionIndex.push(this.sections.length-1)):xn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function af(l,s,d,m,_,b,w,E,M,R,F,N,V,j,$,oe){const ie=Bd.fromFeature(l,_);let _e;N===v.WritingMode.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:De,processStyledBidirectionalText:fe}=fr;if(De&&1===ie.sections.length){_e=[];const Ne=De(ie.toString(),cf(ie,R,b,s,m,j,$));for(const at of Ne){const ft=new Bd;ft.text=at,ft.sections=ie.sections;for(let it=0;it<at.length;it++)ft.sectionIndex.push(0);_e.push(ft)}}else if(fe){_e=[];const Ne=fe(ie.text,ie.sectionIndex,cf(ie,R,b,s,m,j,$));for(const at of Ne){const ft=new Bd;ft.text=at[0],ft.sectionIndex=at[1],ft.sections=ie.sections,_e.push(ft)}}else _e=function(Ne,at){const ft=[],it=Ne.text;let Ke=0;for(const Ye of at)ft.push(Ne.substring(Ke,Ye)),Ke=Ye;return Ke<it.length&&ft.push(Ne.substring(Ke,it.length)),ft}(ie,cf(ie,R,b,s,m,j,$));const xe=[],Be={positionedLines:xe,text:ie.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(Ne,at,ft,it,Ke,Ye,nt,tt,$e,wt,mt,ii){let cn=0,vn=sm,sr=0,_o=0;const Ar="right"===tt?1:"left"===tt?0:.5;let Nn=0;for(const En of Ke){En.trim();const $n=En.getMaxScale(),Rr=($n-1)*Yn,Pr={positionedGlyphs:[],lineOffset:0};Ne.positionedLines[Nn]=Pr;const Or=Pr.positionedGlyphs;let vo=0;if(!En.length()){vn+=Ye,++Nn;continue}for(let An=0;An<En.length();An++){const ui=En.getSection(An),ko=En.getSectionIndex(An),Fr=En.getCharCode(An);let to=0,Os=null,Fs=null,Ls=null,Ns=Yn;const Go=!($e===v.WritingMode.horizontal||!mt&&!Ea(Fr)||mt&&(go[Fr]||(Xn=Fr,Ze.Arabic(Xn)||Ze["Arabic Supplement"](Xn)||Ze["Arabic Extended-A"](Xn)||Ze["Arabic Presentation Forms-A"](Xn)||Ze["Arabic Presentation Forms-B"](Xn))));if(ui.imageName){const Lr=it[ui.imageName];if(!Lr)continue;Ls=ui.imageName,Ne.iconsInText=Ne.iconsInText||!0,Fs=Lr.paddedRect;const To=Lr.displaySize;ui.scale=ui.scale*Yn/ii,Os={width:To[0],height:To[1],left:1,top:-3,advance:Go?To[1]:To[0]},to=Rr+(Yn-To[1]*ui.scale),Ns=Os.advance;const ul=Go?To[0]*ui.scale-Yn*$n:To[1]*ui.scale-Yn*$n;ul>0&&ul>vo&&(vo=ul)}else{const Lr=ft[ui.fontStack],To=Lr&&Lr[Fr];if(To&&To.rect)Fs=To.rect,Os=To.metrics;else{const ul=at[ui.fontStack],gm=ul&&ul[Fr];if(!gm)continue;Os=gm.metrics}to=($n-ui.scale)*Yn}Go?(Ne.verticalizable=!0,Or.push({glyph:Fr,imageName:Ls,x:cn,y:vn+to,vertical:Go,scale:ui.scale,fontStack:ui.fontStack,sectionIndex:ko,metrics:Os,rect:Fs}),cn+=Ns*ui.scale+wt):(Or.push({glyph:Fr,imageName:Ls,x:cn,y:vn+to,vertical:Go,scale:ui.scale,fontStack:ui.fontStack,sectionIndex:ko,metrics:Os,rect:Fs}),cn+=Os.advance*ui.scale+wt)}0!==Or.length&&(sr=Math.max(cn-wt,sr),a0(Or,0,Or.length-1,Ar,vo)),cn=0;const pn=Ye*$n+vo;Pr.lineOffset=Math.max(vo,Rr),vn+=pn,_o=Math.max(pn,_o),++Nn}var Xn;const vr=vn-sm,{horizontalAlign:br,verticalAlign:yo}=df(nt);(function(En,$n,Rr,Pr,Or,vo,pn,An,ui){const ko=($n-Rr)*Or;let Fr=0;Fr=vo!==pn?-An*Pr-sm:(-Pr*ui+.5)*pn;for(const to of En)for(const Os of to.positionedGlyphs)Os.x+=ko,Os.y+=Fr})(Ne.positionedLines,Ar,br,yo,sr,_o,Ye,vr,Ke.length),Ne.top+=-yo*vr,Ne.bottom=Ne.top+vr,Ne.left+=-br*sr,Ne.right=Ne.left+sr}(Be,s,d,m,_e,w,E,M,N,R,V,oe),!function(Ne){for(const at of Ne)if(0!==at.positionedGlyphs.length)return!1;return!0}(xe)&&Be}const go={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zc(l,s,d,m,_,b){if(s.imageName){const w=m[s.imageName];return w?w.displaySize[0]*s.scale*Yn/b+_:0}{const w=d[s.fontStack],E=w&&w[l];return E?E.metrics.advance*s.scale+_:0}}function s0(l,s,d,m){const _=Math.pow(l-s,2);return m?l<s?_/2:2*_:_+Math.abs(d)*d}function k_(l,s,d){let m=0;return 10===l&&(m-=1e4),d&&(m+=150),40!==l&&65288!==l||(m+=50),41!==s&&65289!==s||(m+=50),m}function T_(l,s,d,m,_,b){let w=null,E=s0(s,d,_,b);for(const M of m){const R=s0(s-M.x,d,_,b)+M.badness;R<=E&&(w=M,E=R)}return{index:l,x:s,priorBreak:w,badness:E}}function I_(l){return l?I_(l.priorBreak).concat(l.index):[]}function cf(l,s,d,m,_,b,w){if("point"!==b)return[];if(!l)return[];const E=[],M=function(V,j,$,oe,ie,_e){let De=0;for(let fe=0;fe<V.length();fe++){const xe=V.getSection(fe);De+=zc(V.getCharCode(fe),xe,oe,ie,j,_e)}return De/Math.max(1,Math.ceil(De/$))}(l,s,d,m,_,w),R=l.text.indexOf("\u200b")>=0;let F=0;for(let V=0;V<l.length();V++){const j=l.getSection(V),$=l.getCharCode(V);if(go[$]||(F+=zc($,j,m,_,s,w)),V<l.length()-1){const oe=!((N=$)<11904||!(Ze["Bopomofo Extended"](N)||Ze.Bopomofo(N)||Ze["CJK Compatibility Forms"](N)||Ze["CJK Compatibility Ideographs"](N)||Ze["CJK Compatibility"](N)||Ze["CJK Radicals Supplement"](N)||Ze["CJK Strokes"](N)||Ze["CJK Symbols and Punctuation"](N)||Ze["CJK Unified Ideographs Extension A"](N)||Ze["CJK Unified Ideographs"](N)||Ze["Enclosed CJK Letters and Months"](N)||Ze["Halfwidth and Fullwidth Forms"](N)||Ze.Hiragana(N)||Ze["Ideographic Description Characters"](N)||Ze["Kangxi Radicals"](N)||Ze["Katakana Phonetic Extensions"](N)||Ze.Katakana(N)||Ze["Vertical Forms"](N)||Ze["Yi Radicals"](N)||Ze["Yi Syllables"](N)));(lf[$]||oe||j.imageName)&&E.push(T_(V+1,F,M,E,k_($,l.getCharCode(V+1),oe&&R),!1))}}var N;return I_(T_(l.length(),F,M,E,0,!0))}function df(l){let s=.5,d=.5;switch(l){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:s,verticalAlign:d}}function a0(l,s,d,m,_){if(!m&&!_)return;const b=l[d],w=(l[d].x+b.metrics.advance*b.scale)*m;for(let E=s;E<=d;E++)l[E].x-=w,l[E].y+=_}function l0(l,s,d){const{horizontalAlign:m,verticalAlign:_}=df(d),b=s[0]-l.displaySize[0]*m,w=s[1]-l.displaySize[1]*_;return{image:l,top:w,bottom:w+l.displaySize[1],left:b,right:b+l.displaySize[0]}}function lm(l,s,d,m,_,b){const w=l.image;let E;if(w.content){const ie=w.content,_e=w.pixelRatio||1;E=[ie[0]/_e,ie[1]/_e,w.displaySize[0]-ie[2]/_e,w.displaySize[1]-ie[3]/_e]}const M=s.left*b,R=s.right*b;let F,N,V,j;"width"===d||"both"===d?(j=_[0]+M-m[3],N=_[0]+R+m[1]):(j=_[0]+(M+R-w.displaySize[0])/2,N=j+w.displaySize[0]);const $=s.top*b,oe=s.bottom*b;return"height"===d||"both"===d?(F=_[1]+$-m[0],V=_[1]+oe+m[2]):(F=_[1]+($+oe-w.displaySize[1])/2,V=F+w.displaySize[1]),{image:w,top:F,right:N,bottom:V,left:j,collisionPadding:E}}const Ps=128;function A_(l,s){const{expression:d}=s;if("constant"===d.kind)return{kind:"constant",layoutSize:d.evaluate(new Wi(l+1))};if("source"===d.kind)return{kind:"source"};{const{zoomStops:m,interpolationType:_}=d;let b=0;for(;b<m.length&&m[b]<=l;)b++;b=Math.max(0,b-1);let w=b;for(;w<m.length&&m[w]<l+1;)w++;w=Math.min(m.length-1,w);const E=m[b],M=m[w];return"composite"===d.kind?{kind:"composite",minZoom:E,maxZoom:M,interpolationType:_}:{kind:"camera",minZoom:E,maxZoom:M,minSize:d.evaluate(new Wi(E)),maxSize:d.evaluate(new Wi(M)),interpolationType:_}}}class Jr extends Pt{constructor(s,d,m,_){super(s,d),this.angle=m,void 0!==_&&(this.segment=_)}clone(){return new Jr(this.x,this.y,this.angle,this.segment)}}function R_(l,s,d,m,_){if(void 0===s.segment)return!0;let b=s,w=s.segment+1,E=0;for(;E>-d/2;){if(w--,w<0)return!1;E-=l[w].dist(b),b=l[w]}E+=l[w].dist(l[w+1]),w++;const M=[];let R=0;for(;E<d/2;){const F=l[w],N=l[w+1];if(!N)return!1;let V=l[w-1].angleTo(F)-F.angleTo(N);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:E,angleDelta:V}),R+=V;E-M[0].distance>m;)R-=M.shift().angleDelta;if(R>_)return!1;w++,E+=F.dist(N)}return!0}function cl(l){let s=0;for(let d=0;d<l.length-1;d++)s+=l[d].dist(l[d+1]);return s}function P_(l,s,d){return l?.6*s*d:0}function uf(l,s){return Math.max(l?l.right-l.left:0,s?s.right-s.left:0)}function hf(l,s,d,m,_,b){const w=P_(d,_,b),E=uf(d,m)*b;let M=0;const R=cl(l)/2;for(let F=0;F<l.length-1;F++){const N=l[F],V=l[F+1],j=N.dist(V);if(M+j>R){const $=(R-M)/j,oe=ln(N.x,V.x,$),ie=ln(N.y,V.y,$),_e=new Jr(oe,ie,V.angleTo(N),F);return _e._round(),!w||R_(l,_e,E,w,s)?_e:void 0}M+=j}}function cm(l,s,d,m,_,b,w,E,M){const R=P_(m,b,w),F=uf(m,_),N=F*w,V=0===l[0].x||l[0].x===M||0===l[0].y||l[0].y===M;return s-N<s/4&&(s=N+s/4),mf(l,V?s/2*E%s:(F/2+2*b)*w*E%s,s,R,d,N,V,!1,M)}function mf(l,s,d,m,_,b,w,E,M){const R=b/2,F=cl(l);let N=0,V=s-d,j=[];for(let $=0;$<l.length-1;$++){const oe=l[$],ie=l[$+1],_e=oe.dist(ie),De=ie.angleTo(oe);for(;V+d<N+_e;){V+=d;const fe=(V-N)/_e,xe=ln(oe.x,ie.x,fe),Be=ln(oe.y,ie.y,fe);if(xe>=0&&xe<M&&Be>=0&&Be<M&&V-R>=0&&V+R<=F){const Ne=new Jr(xe,Be,De,$);Ne._round(),m&&!R_(l,Ne,b,m,_)||j.push(Ne)}}N+=_e}return E||j.length||w||(j=mf(l,N/2,d,m,_,b,w,!0,M)),j}function O_(l,s,d,m,_){const b=[];for(let w=0;w<l.length;w++){const E=l[w];let M;for(let R=0;R<E.length-1;R++){let F=E[R],N=E[R+1];F.x<s&&N.x<s||(F.x<s?F=new Pt(s,F.y+(s-F.x)/(N.x-F.x)*(N.y-F.y))._round():N.x<s&&(N=new Pt(s,F.y+(s-F.x)/(N.x-F.x)*(N.y-F.y))._round()),F.y<d&&N.y<d||(F.y<d?F=new Pt(F.x+(d-F.y)/(N.y-F.y)*(N.x-F.x),d)._round():N.y<d&&(N=new Pt(F.x+(d-F.y)/(N.y-F.y)*(N.x-F.x),d)._round()),F.x>=m&&N.x>=m||(F.x>=m?F=new Pt(m,F.y+(m-F.x)/(N.x-F.x)*(N.y-F.y))._round():N.x>=m&&(N=new Pt(m,F.y+(m-F.x)/(N.x-F.x)*(N.y-F.y))._round()),F.y>=_&&N.y>=_||(F.y>=_?F=new Pt(F.x+(_-F.y)/(N.y-F.y)*(N.x-F.x),_)._round():N.y>=_&&(N=new Pt(F.x+(_-F.y)/(N.y-F.y)*(N.x-F.x),_)._round()),M&&F.equals(M[M.length-1])||(M=[F],b.push(M)),M.push(N)))))}}return b}function F_(l,s,d,m){const _=[],b=l.image,w=b.pixelRatio,E=b.paddedRect.w-2,M=b.paddedRect.h-2,R=l.right-l.left,F=l.bottom-l.top,N=b.stretchX||[[0,E]],V=b.stretchY||[[0,M]],j=(Ye,nt)=>Ye+nt[1]-nt[0],$=N.reduce(j,0),oe=V.reduce(j,0),ie=E-$,_e=M-oe;let De=0,fe=$,xe=0,Be=oe,Ne=0,at=ie,ft=0,it=_e;if(b.content&&m){const Ye=b.content;De=dl(N,0,Ye[0]),xe=dl(V,0,Ye[1]),fe=dl(N,Ye[0],Ye[2]),Be=dl(V,Ye[1],Ye[3]),Ne=Ye[0]-De,ft=Ye[1]-xe,at=Ye[2]-Ye[0]-fe,it=Ye[3]-Ye[1]-Be}const Ke=(Ye,nt,tt,$e)=>{const wt=dm(Ye.stretch-De,fe,R,l.left),mt=pf(Ye.fixed-Ne,at,Ye.stretch,$),ii=dm(nt.stretch-xe,Be,F,l.top),cn=pf(nt.fixed-ft,it,nt.stretch,oe),vn=dm(tt.stretch-De,fe,R,l.left),sr=pf(tt.fixed-Ne,at,tt.stretch,$),_o=dm($e.stretch-xe,Be,F,l.top),Ar=pf($e.fixed-ft,it,$e.stretch,oe),Nn=new Pt(wt,ii),Xn=new Pt(vn,ii),vr=new Pt(vn,_o),br=new Pt(wt,_o),yo=new Pt(mt/w,cn/w),En=new Pt(sr/w,Ar/w),$n=s*Math.PI/180;if($n){const Or=Math.sin($n),vo=Math.cos($n),pn=[vo,-Or,Or,vo];Nn._matMult(pn),Xn._matMult(pn),br._matMult(pn),vr._matMult(pn)}const Rr=Ye.stretch+Ye.fixed,Pr=nt.stretch+nt.fixed;return{tl:Nn,tr:Xn,bl:br,br:vr,tex:{x:b.paddedRect.x+1+Rr,y:b.paddedRect.y+1+Pr,w:tt.stretch+tt.fixed-Rr,h:$e.stretch+$e.fixed-Pr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yo,pixelOffsetBR:En,minFontScaleX:at/w/R,minFontScaleY:it/w/F,isSDF:d}};if(m&&(b.stretchX||b.stretchY)){const Ye=zd(N,ie,$),nt=zd(V,_e,oe);for(let tt=0;tt<Ye.length-1;tt++){const $e=Ye[tt],wt=Ye[tt+1];for(let mt=0;mt<nt.length-1;mt++)_.push(Ke($e,nt[mt],wt,nt[mt+1]))}}else _.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:M+1}));return _}function dl(l,s,d){let m=0;for(const _ of l)m+=Math.max(s,Math.min(d,_[1]))-Math.max(s,Math.min(d,_[0]));return m}function zd(l,s,d){const m=[{fixed:-1,stretch:0}];for(const[_,b]of l){const w=m[m.length-1];m.push({fixed:_-w.stretch,stretch:w.stretch}),m.push({fixed:_-w.stretch,stretch:w.stretch+(b-_)})}return m.push({fixed:s+1,stretch:d}),m}function dm(l,s,d,m){return l/s*d+m}function pf(l,s,d,m){return l-s*d/m}ut("Anchor",Jr);class Zu{constructor(s,d,m,_,b,w,E,M,R,F){if(this.boxStartIndex=s.length,R){let N=w.top,V=w.bottom;const j=w.collisionPadding;j&&(N-=j[1],V+=j[3]);let $=V-N;$>0&&($=Math.max(10,$),this.circleDiameter=$)}else{let N=w.top*E-M[0],V=w.bottom*E+M[2],j=w.left*E-M[3],$=w.right*E+M[1];const oe=w.collisionPadding;if(oe&&(j-=oe[0]*E,N-=oe[1]*E,$+=oe[2]*E,V+=oe[3]*E),F){const ie=new Pt(j,N),_e=new Pt($,N),De=new Pt(j,V),fe=new Pt($,V),xe=F*Math.PI/180;ie._rotate(xe),_e._rotate(xe),De._rotate(xe),fe._rotate(xe),j=Math.min(ie.x,_e.x,De.x,fe.x),$=Math.max(ie.x,_e.x,De.x,fe.x),N=Math.min(ie.y,_e.y,De.y,fe.y),V=Math.max(ie.y,_e.y,De.y,fe.y)}s.emplaceBack(d.x,d.y,j,N,$,V,m,_,b)}this.boxEndIndex=s.length}}class c0{constructor(s=[],d=CD){if(this.data=s,this.length=this.data.length,this.compare=d,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const s=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:d,compare:m}=this,_=d[s];for(;s>0;){const b=s-1>>1,w=d[b];if(m(_,w)>=0)break;d[s]=w,s=b}d[s]=_}_down(s){const{data:d,compare:m}=this,_=this.length>>1,b=d[s];for(;s<_;){let w=1+(s<<1),E=d[w];const M=w+1;if(M<this.length&&m(d[M],E)<0&&(w=M,E=d[M]),m(E,b)>=0)break;d[s]=E,s=w}d[s]=b}}function CD(l,s){return l<s?-1:l>s?1:0}function d0(l,s=1,d=!1){let m=1/0,_=1/0,b=-1/0,w=-1/0;const E=l[0];for(let j=0;j<E.length;j++){const $=E[j];(!j||$.x<m)&&(m=$.x),(!j||$.y<_)&&(_=$.y),(!j||$.x>b)&&(b=$.x),(!j||$.y>w)&&(w=$.y)}const M=Math.min(b-m,w-_);let R=M/2;const F=new c0([],u0);if(0===M)return new Pt(m,_);for(let j=m;j<b;j+=M)for(let $=_;$<w;$+=M)F.push(new Vd(j+R,$+R,R,l));let N=function(j){let $=0,oe=0,ie=0;const _e=j[0];for(let De=0,fe=_e.length,xe=fe-1;De<fe;xe=De++){const Be=_e[De],Ne=_e[xe],at=Be.x*Ne.y-Ne.x*Be.y;oe+=(Be.x+Ne.x)*at,ie+=(Be.y+Ne.y)*at,$+=3*at}return new Vd(oe/$,ie/$,0,j)}(l),V=F.length;for(;F.length;){const j=F.pop();(j.d>N.d||!N.d)&&(N=j,d&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,V)),j.max-N.d<=s||(R=j.h/2,F.push(new Vd(j.p.x-R,j.p.y-R,R,l)),F.push(new Vd(j.p.x+R,j.p.y-R,R,l)),F.push(new Vd(j.p.x-R,j.p.y+R,R,l)),F.push(new Vd(j.p.x+R,j.p.y+R,R,l)),V+=4)}return d&&(console.log(`num probes: ${V}`),console.log(`best distance: ${N.d}`)),N.p}function u0(l,s){return s.max-l.max}function Vd(l,s,d,m){this.p=new Pt(l,s),this.h=d,this.d=function(_,b){let w=!1,E=1/0;for(let M=0;M<b.length;M++){const R=b[M];for(let F=0,N=R.length,V=N-1;F<N;V=F++){const j=R[F],$=R[V];j.y>_.y!=$.y>_.y&&_.x<($.x-j.x)*(_.y-j.y)/($.y-j.y)+j.x&&(w=!w),E=Math.min(E,Bp(_,j,$))}}return(w?1:-1)*Math.sqrt(E)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}const Ud=Number.POSITIVE_INFINITY;function ff(l,s){return s[1]!==Ud?function(d,m,_){let b=0,w=0;switch(m=Math.abs(m),_=Math.abs(_),d){case"top-right":case"top-left":case"top":w=_-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-_}switch(d){case"top-right":case"bottom-right":case"right":b=-m;break;case"top-left":case"bottom-left":case"left":b=m}return[b,w]}(l,s[0],s[1]):function(d,m){let _=0,b=0;m<0&&(m=0);const w=m/Math.sqrt(2);switch(d){case"top-right":case"top-left":b=w-7;break;case"bottom-right":case"bottom-left":b=7-w;break;case"bottom":b=7-m;break;case"top":b=m-7}switch(d){case"top-right":case"bottom-right":_=-w;break;case"top-left":case"bottom-left":_=w;break;case"left":_=m;break;case"right":_=-m}return[_,b]}(l,s[0])}function gf(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function L_(l,s,d,m,_,b,w,E,M,R,F){let N=b.textMaxSize.evaluate(s,{});void 0===N&&(N=w);const V=l.layers[0].layout,j=V.get("icon-offset").evaluate(s,{},F),$=h0(d.horizontal),oe=w/24,ie=l.tilePixelRatio*oe,_e=l.tilePixelRatio*N/24,De=l.tilePixelRatio*E,fe=l.tilePixelRatio*V.get("symbol-spacing"),xe=V.get("text-padding")*l.tilePixelRatio,Be=function($e,wt,mt,ii=1){const cn=$e.get("icon-padding").evaluate(wt,{},mt),vn=cn&&cn.values;return[vn[0]*ii,vn[1]*ii,vn[2]*ii,vn[3]*ii]}(V,s,F,l.tilePixelRatio),Ne=V.get("text-max-angle")/180*Math.PI,at="viewport"!==V.get("text-rotation-alignment")&&"point"!==V.get("symbol-placement"),ft="map"===V.get("icon-rotation-alignment")&&"point"!==V.get("symbol-placement"),it=V.get("symbol-placement"),Ke=fe/2,Ye=V.get("icon-text-fit");let nt;m&&"none"!==Ye&&(l.allowVerticalPlacement&&d.vertical&&(nt=lm(m,d.vertical,Ye,V.get("icon-text-fit-padding"),j,oe)),$&&(m=lm(m,$,Ye,V.get("icon-text-fit-padding"),j,oe)));const tt=($e,wt)=>{wt.x<0||wt.x>=ai||wt.y<0||wt.y>=ai||function(mt,ii,cn,vn,sr,_o,Ar,Nn,Xn,vr,br,yo,En,$n,Rr,Pr,Or,vo,pn,An,ui,ko,Fr,to,Os){const Fs=mt.addToLineVertexArray(ii,cn);let Ls,Ns,Go,Lr,To=0,ul=0,gm=0,Q_=0,Ju=-1,Mf=-1;const ds={};let eh=_r.exports(""),th=0,_m=0;if(void 0===Nn._unevaluatedLayout.getValue("text-radial-offset")?[th,_m]=Nn.layout.get("text-offset").evaluate(ui,{},to).map(Io=>Io*Yn):(th=Nn.layout.get("text-radial-offset").evaluate(ui,{},to)*Yn,_m=Ud),mt.allowVerticalPlacement&&vn.vertical){const Io=Nn.layout.get("text-rotate").evaluate(ui,{},to)+90;Go=new Zu(Xn,ii,vr,br,yo,vn.vertical,En,$n,Rr,Io),Ar&&(Lr=new Zu(Xn,ii,vr,br,yo,Ar,Or,vo,Rr,Io))}if(sr){const Io=Nn.layout.get("icon-rotate").evaluate(ui,{}),La="none"!==Nn.layout.get("icon-text-fit"),ih=F_(sr,Io,Fr,La),nh=Ar?F_(Ar,Io,Fr,La):void 0;Ns=new Zu(Xn,ii,vr,br,yo,sr,Or,vo,!1,Io),To=4*ih.length;const Tf=mt.iconSizeData;let Hc=null;"source"===Tf.kind?(Hc=[Ps*Nn.layout.get("icon-size").evaluate(ui,{})],Hc[0]>Vc&&xn(`${mt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Tf.kind&&(Hc=[Ps*ko.compositeIconSizes[0].evaluate(ui,{},to),Ps*ko.compositeIconSizes[1].evaluate(ui,{},to)],(Hc[0]>Vc||Hc[1]>Vc)&&xn(`${mt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mt.addSymbols(mt.icon,ih,Hc,An,pn,ui,v.WritingMode.none,ii,Fs.lineStartIndex,Fs.lineLength,-1,to),Ju=mt.icon.placedSymbolArray.length-1,nh&&(ul=4*nh.length,mt.addSymbols(mt.icon,nh,Hc,An,pn,ui,v.WritingMode.vertical,ii,Fs.lineStartIndex,Fs.lineLength,-1,to),Mf=mt.icon.placedSymbolArray.length-1)}const kf=Object.keys(vn.horizontal);for(const Io of kf){const La=vn.horizontal[Io];if(!Ls){eh=_r.exports(La.text);const nh=Nn.layout.get("text-rotate").evaluate(ui,{},to);Ls=new Zu(Xn,ii,vr,br,yo,La,En,$n,Rr,nh)}const ih=1===La.positionedLines.length;if(gm+=_f(mt,ii,La,_o,Nn,Rr,ui,Pr,Fs,vn.vertical?v.WritingMode.horizontal:v.WritingMode.horizontalOnly,ih?kf:[Io],ds,Ju,ko,to),ih)break}vn.vertical&&(Q_+=_f(mt,ii,vn.vertical,_o,Nn,Rr,ui,Pr,Fs,v.WritingMode.vertical,["vertical"],ds,Mf,ko,to));const J_=Ls?Ls.boxStartIndex:mt.collisionBoxArray.length,jc=Ls?Ls.boxEndIndex:mt.collisionBoxArray.length,f0=Go?Go.boxStartIndex:mt.collisionBoxArray.length,g0=Go?Go.boxEndIndex:mt.collisionBoxArray.length,_0=Ns?Ns.boxStartIndex:mt.collisionBoxArray.length,y0=Ns?Ns.boxEndIndex:mt.collisionBoxArray.length,v0=Lr?Lr.boxStartIndex:mt.collisionBoxArray.length,us=Lr?Lr.boxEndIndex:mt.collisionBoxArray.length;let ar=-1;const ym=(Io,La)=>Io&&Io.circleDiameter?Math.max(Io.circleDiameter,La):La;ar=ym(Ls,ar),ar=ym(Go,ar),ar=ym(Ns,ar),ar=ym(Lr,ar);const ey=ar>-1?1:0;ey&&(ar*=Os/Yn),mt.glyphOffsetArray.length>=Yu.MAX_GLYPHS&&xn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ui.sortKey&&mt.addToSortKeyRanges(mt.symbolInstances.length,ui.sortKey),mt.symbolInstances.emplaceBack(ii.x,ii.y,ds.right>=0?ds.right:-1,ds.center>=0?ds.center:-1,ds.left>=0?ds.left:-1,ds.vertical||-1,Ju,Mf,eh,J_,jc,f0,g0,_0,y0,v0,us,vr,gm,Q_,To,ul,ey,0,En,th,_m,ar)}(l,wt,$e,d,m,_,nt,l.layers[0],l.collisionBoxArray,s.index,s.sourceLayerIndex,l.index,ie,[xe,xe,xe,xe],at,M,De,Be,ft,j,s,b,R,F,w)};if("line"===it)for(const $e of O_(s.geometry,0,0,ai,ai)){const wt=cm($e,fe,Ne,d.vertical||$,m,24,_e,l.overscaling,ai);for(const mt of wt)$&&m0(l,$.text,Ke,mt)||tt($e,mt)}else if("line-center"===it){for(const $e of s.geometry)if($e.length>1){const wt=hf($e,Ne,d.vertical||$,m,24,_e);wt&&tt($e,wt)}}else if("Polygon"===s.type)for(const $e of Pa(s.geometry,0)){const wt=d0($e,16);tt($e[0],new Jr(wt.x,wt.y,0))}else if("LineString"===s.type)for(const $e of s.geometry)tt($e,new Jr($e[0].x,$e[0].y,0));else if("Point"===s.type)for(const $e of s.geometry)for(const wt of $e)tt([wt],new Jr(wt.x,wt.y,0))}const Vc=32640;function _f(l,s,d,m,_,b,w,E,M,R,F,N,V,j,$){const oe=function(De,fe,xe,Be,Ne,at,ft,it){const Ke=Be.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,Ye=[];for(const nt of fe.positionedLines)for(const tt of nt.positionedGlyphs){if(!tt.rect)continue;const $e=tt.rect||{};let wt=4,mt=!0,ii=1,cn=0;const vn=(Ne||it)&&tt.vertical,sr=tt.metrics.advance*tt.scale/2;if(it&&fe.verticalizable&&(cn=nt.lineOffset/2-(tt.imageName?-(Yn-tt.metrics.width*tt.scale)/2:(tt.scale-1)*Yn)),tt.imageName){const pn=ft[tt.imageName];mt=pn.sdf,ii=pn.pixelRatio,wt=1/ii}const _o=Ne?[tt.x+sr,tt.y]:[0,0];let Ar=Ne?[0,0]:[tt.x+sr+xe[0],tt.y+xe[1]-cn],Nn=[0,0];vn&&(Nn=Ar,Ar=[0,0]);const Xn=(tt.metrics.left-wt)*tt.scale-sr+Ar[0],vr=(-tt.metrics.top-wt)*tt.scale+Ar[1],br=Xn+$e.w*tt.scale/ii,yo=vr+$e.h*tt.scale/ii,En=new Pt(Xn,vr),$n=new Pt(br,vr),Rr=new Pt(Xn,yo),Pr=new Pt(br,yo);if(vn){const pn=new Pt(-sr,sr-sm),An=-Math.PI/2,ui=12-sr,ko=new Pt(22-ui,-(tt.imageName?ui:0)),Fr=new Pt(...Nn);En._rotateAround(An,pn)._add(ko)._add(Fr),$n._rotateAround(An,pn)._add(ko)._add(Fr),Rr._rotateAround(An,pn)._add(ko)._add(Fr),Pr._rotateAround(An,pn)._add(ko)._add(Fr)}if(Ke){const pn=Math.sin(Ke),An=Math.cos(Ke),ui=[An,-pn,pn,An];En._matMult(ui),$n._matMult(ui),Rr._matMult(ui),Pr._matMult(ui)}const Or=new Pt(0,0),vo=new Pt(0,0);Ye.push({tl:En,tr:$n,bl:Rr,br:Pr,tex:$e,writingMode:fe.writingMode,glyphOffset:_o,sectionIndex:tt.sectionIndex,isSDF:mt,pixelOffsetTL:Or,pixelOffsetBR:vo,minFontScaleX:0,minFontScaleY:0})}return Ye}(0,d,E,_,b,w,m,l.allowVerticalPlacement),ie=l.textSizeData;let _e=null;"source"===ie.kind?(_e=[Ps*_.layout.get("text-size").evaluate(w,{})],_e[0]>Vc&&xn(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===ie.kind&&(_e=[Ps*j.compositeTextSizes[0].evaluate(w,{},$),Ps*j.compositeTextSizes[1].evaluate(w,{},$)],(_e[0]>Vc||_e[1]>Vc)&&xn(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,oe,_e,E,b,w,R,s,M.lineStartIndex,M.lineLength,V,$);for(const De of F)N[De]=l.text.placedSymbolArray.length-1;return 4*oe.length}function h0(l){for(const s in l)return l[s];return null}function m0(l,s,d,m){const _=l.compareText;if(s in _){const b=_[s];for(let w=b.length-1;w>=0;w--)if(m.dist(b[w])<d)return!0}else _[s]=[];return _[s].push(m),!1}const p0=As.VectorTileFeature.types,yf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vf(l,s,d,m,_,b,w,E,M,R,F,N,V){const j=E?Math.min(Vc,Math.round(E[0])):0,$=E?Math.min(Vc,Math.round(E[1])):0;l.emplaceBack(s,d,Math.round(32*m),Math.round(32*_),b,w,(j<<1)+(M?1:0),$,16*R,16*F,256*N,256*V)}function N_(l,s,d){l.emplaceBack(s.x,s.y,d),l.emplaceBack(s.x,s.y,d),l.emplaceBack(s.x,s.y,d),l.emplaceBack(s.x,s.y,d)}function bf(l){for(const s of l.sections)if(kc(s.text))return!0;return!1}class B_{constructor(s){this.layoutVertexArray=new Ms,this.indexArray=new Yi,this.programConfigurations=s,this.segments=new si,this.dynamicLayoutVertexArray=new ks,this.opacityVertexArray=new Ts,this.placedSymbolArray=new je}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(s,d,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Bc.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,n0.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,yf,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ut("SymbolBuffers",B_);class z_{constructor(s,d,m){this.layoutVertexArray=new s,this.layoutAttributes=d,this.indexArray=new m,this.segments=new si,this.collisionVertexArray=new Kr}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,S_.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ut("CollisionBuffers",z_);class Yu{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(w=>w.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Up([]),this.placementViewportMatrix=Up([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=A_(this.zoom,d["text-size"]),this.iconSizeData=A_(this.zoom,d["icon-size"]);const m=this.layers[0].layout,_=m.get("symbol-sort-key"),b=m.get("symbol-z-order");this.canOverlap="never"!==Xu(m,"text-overlap","text-allow-overlap")||"never"!==Xu(m,"icon-overlap","icon-allow-overlap")||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==b&&!_.isConstant(),this.sortFeaturesByY=("viewport-y"===b||"auto"===b&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===m.get("symbol-placement")&&(this.writingModes=m.get("text-writing-mode").map(w=>v.WritingMode[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=s.sourceID}createArrays(){this.text=new B_(new po(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new B_(new po(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Xe,this.lineVertexArray=new ct,this.symbolInstances=new rt}calculateGlyphDependencies(s,d,m,_,b){for(let w=0;w<s.length;w++)if(d[s.charCodeAt(w)]=!0,(m||_)&&b){const E=li[s.charAt(w)];E&&(d[E.charCodeAt(0)]=!0)}}populate(s,d,m){const _=this.layers[0],b=_.layout,w=b.get("text-font"),E=b.get("text-field"),M=b.get("icon-image"),R=("constant"!==E.value.kind||E.value.value instanceof le&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),F="constant"!==M.value.kind||!!M.value.value||Object.keys(M.parameters).length>0,N=b.get("symbol-sort-key");if(this.features=[],!R&&!F)return;const V=d.iconDependencies,j=d.glyphDependencies,$=d.availableImages,oe=new Wi(this.zoom);for(const{feature:ie,id:_e,index:De,sourceLayerIndex:fe}of s){const xe=_._featureFilter.needGeometry,Be=Ac(ie,xe);if(!_._featureFilter.filter(oe,Be,m))continue;let Ne,at;if(xe||(Be.geometry=or(ie)),R){const it=_.getValueAndResolveTokens("text-field",Be,m,$),Ke=le.factory(it);bf(Ke)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ss()||this.hasRTLText&&fr.isParsed())&&(Ne=r0(Ke,_,Be))}if(F){const it=_.getValueAndResolveTokens("icon-image",Be,m,$);at=it instanceof me?it:me.fromString(it)}if(!Ne&&!at)continue;const ft=this.sortFeaturesByKey?N.evaluate(Be,{},m):void 0;if(this.features.push({id:_e,text:Ne,icon:at,index:De,sourceLayerIndex:fe,geometry:Be.geometry,properties:ie.properties,type:p0[ie.type],sortKey:ft}),at&&(V[at.name]=!0),Ne){const it=w.evaluate(Be,{},m).join(","),Ke="viewport"!==b.get("text-rotation-alignment")&&"point"!==b.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.WritingMode.vertical)>=0;for(const Ye of Ne.sections)if(Ye.image)V[Ye.image.name]=!0;else{const nt=Li(Ne.toString()),tt=Ye.fontStack||it,$e=j[tt]=j[tt]||{};this.calculateGlyphDependencies(Ye.text,$e,Ke,this.allowVerticalPlacement,nt)}}}"line"===b.get("symbol-placement")&&(this.features=function(ie){const _e={},De={},fe=[];let xe=0;function Be(it){fe.push(ie[it]),xe++}function Ne(it,Ke,Ye){const nt=De[it];return delete De[it],De[Ke]=nt,fe[nt].geometry[0].pop(),fe[nt].geometry[0]=fe[nt].geometry[0].concat(Ye[0]),nt}function at(it,Ke,Ye){const nt=_e[Ke];return delete _e[Ke],_e[it]=nt,fe[nt].geometry[0].shift(),fe[nt].geometry[0]=Ye[0].concat(fe[nt].geometry[0]),nt}function ft(it,Ke,Ye){const nt=Ye?Ke[0][Ke[0].length-1]:Ke[0][0];return`${it}:${nt.x}:${nt.y}`}for(let it=0;it<ie.length;it++){const Ke=ie[it],Ye=Ke.geometry,nt=Ke.text?Ke.text.toString():null;if(!nt){Be(it);continue}const tt=ft(nt,Ye),$e=ft(nt,Ye,!0);if(tt in De&&$e in _e&&De[tt]!==_e[$e]){const wt=at(tt,$e,Ye),mt=Ne(tt,$e,fe[wt].geometry);delete _e[tt],delete De[$e],De[ft(nt,fe[mt].geometry,!0)]=mt,fe[wt].geometry=null}else tt in De?Ne(tt,$e,Ye):$e in _e?at(tt,$e,Ye):(Be(it),_e[tt]=xe-1,De[$e]=xe-1)}return fe.filter(it=>it.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,_e)=>ie.sortKey-_e.sortKey)}update(s,d,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,d,this.layers,m),this.icon.programConfigurations.updatePaintArrays(s,d,this.layers,m))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,d){const m=this.lineVertexArray.length;if(void 0!==s.segment){let _=s.dist(d[s.segment+1]),b=s.dist(d[s.segment]);const w={};for(let E=s.segment+1;E<d.length;E++)w[E]={x:d[E].x,y:d[E].y,tileUnitDistanceFromAnchor:_},E<d.length-1&&(_+=d[E+1].dist(d[E]));for(let E=s.segment||0;E>=0;E--)w[E]={x:d[E].x,y:d[E].y,tileUnitDistanceFromAnchor:b},E>0&&(b+=d[E-1].dist(d[E]));for(let E=0;E<d.length;E++){const M=w[E];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,d,m,_,b,w,E,M,R,F,N,V){const j=s.indexArray,$=s.layoutVertexArray,oe=s.segments.prepareSegment(4*d.length,$,j,this.canOverlap?w.sortKey:void 0),ie=this.glyphOffsetArray.length,_e=oe.vertexLength,De=this.allowVerticalPlacement&&E===v.WritingMode.vertical?Math.PI/2:0,fe=w.text&&w.text.sections;for(let xe=0;xe<d.length;xe++){const{tl:Be,tr:Ne,bl:at,br:ft,tex:it,pixelOffsetTL:Ke,pixelOffsetBR:Ye,minFontScaleX:nt,minFontScaleY:tt,glyphOffset:$e,isSDF:wt,sectionIndex:mt}=d[xe],ii=oe.vertexLength,cn=$e[1];vf($,M.x,M.y,Be.x,cn+Be.y,it.x,it.y,m,wt,Ke.x,Ke.y,nt,tt),vf($,M.x,M.y,Ne.x,cn+Ne.y,it.x+it.w,it.y,m,wt,Ye.x,Ke.y,nt,tt),vf($,M.x,M.y,at.x,cn+at.y,it.x,it.y+it.h,m,wt,Ke.x,Ye.y,nt,tt),vf($,M.x,M.y,ft.x,cn+ft.y,it.x+it.w,it.y+it.h,m,wt,Ye.x,Ye.y,nt,tt),N_(s.dynamicLayoutVertexArray,M,De),j.emplaceBack(ii,ii+1,ii+2),j.emplaceBack(ii+1,ii+2,ii+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($e[0]),xe!==d.length-1&&mt===d[xe+1].sectionIndex||s.programConfigurations.populatePaintArrays($.length,w,w.index,{},V,fe&&fe[mt])}s.placedSymbolArray.emplaceBack(M.x,M.y,ie,this.glyphOffsetArray.length-ie,_e,R,F,M.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],E,0,!1,0,N)}_addCollisionDebugVertex(s,d,m,_,b,w){return d.emplaceBack(0,0),s.emplaceBack(m.x,m.y,_,b,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(s,d,m,_,b,w,E){const M=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),R=M.vertexLength,F=b.layoutVertexArray,N=b.collisionVertexArray,V=E.anchorX,j=E.anchorY;this._addCollisionDebugVertex(F,N,w,V,j,new Pt(s,d)),this._addCollisionDebugVertex(F,N,w,V,j,new Pt(m,d)),this._addCollisionDebugVertex(F,N,w,V,j,new Pt(m,_)),this._addCollisionDebugVertex(F,N,w,V,j,new Pt(s,_)),M.vertexLength+=4;const $=b.indexArray;$.emplaceBack(R,R+1),$.emplaceBack(R+1,R+2),$.emplaceBack(R+2,R+3),$.emplaceBack(R+3,R),M.primitiveLength+=4}addDebugCollisionBoxes(s,d,m,_){for(let b=s;b<d;b++){const w=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,_?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new z_(gr,ef.members,Is),this.iconCollisionBox=new z_(gr,ef.members,Is);for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(s,d,m,_,b,w,E,M,R){const F={};for(let N=d;N<m;N++){const V=s.get(N);F.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},F.textFeatureIndex=V.featureIndex;break}for(let N=_;N<b;N++){const V=s.get(N);F.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},F.verticalTextFeatureIndex=V.featureIndex;break}for(let N=w;N<E;N++){const V=s.get(N);F.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},F.iconFeatureIndex=V.featureIndex;break}for(let N=M;N<R;N++){const V=s.get(N);F.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},F.verticalIconFeatureIndex=V.featureIndex;break}return F}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,d){const m=s.placedSymbolArray.get(d),_=m.vertexStartIndex+4*m.numGlyphs;for(let b=m.vertexStartIndex;b<_;b+=4)s.indexArray.emplaceBack(b,b+1,b+2),s.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const d=Math.sin(s),m=Math.cos(s),_=[],b=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const M=this.symbolInstances.get(E);_.push(0|Math.round(d*M.anchorX+m*M.anchorY)),b.push(M.featureIndex)}return w.sort((E,M)=>_[E]-_[M]||b[M]-b[E]),w}addToSortKeyRanges(s,d){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===d?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const m=this.symbolInstances.get(d);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,b,w)=>{_>=0&&w.indexOf(_)===b&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ut("SymbolBucket",Yu,{omit:["layers","collisionBoxArray","features","compareText"]}),Yu.MAX_GLYPHS=65535,Yu.addDynamicAttributes=N_;const DD=new jn({"symbol-placement":new pt(Re.layout_symbol["symbol-placement"]),"symbol-spacing":new pt(Re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new pt(Re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(Re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new pt(Re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new pt(Re.layout_symbol["icon-allow-overlap"]),"icon-overlap":new pt(Re.layout_symbol["icon-overlap"]),"icon-ignore-placement":new pt(Re.layout_symbol["icon-ignore-placement"]),"icon-optional":new pt(Re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new pt(Re.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(Re.layout_symbol["icon-size"]),"icon-text-fit":new pt(Re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pt(Re.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(Re.layout_symbol["icon-image"]),"icon-rotate":new kt(Re.layout_symbol["icon-rotate"]),"icon-padding":new kt(Re.layout_symbol["icon-padding"]),"icon-keep-upright":new pt(Re.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(Re.layout_symbol["icon-offset"]),"icon-anchor":new kt(Re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new pt(Re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new pt(Re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new pt(Re.layout_symbol["text-rotation-alignment"]),"text-field":new kt(Re.layout_symbol["text-field"]),"text-font":new kt(Re.layout_symbol["text-font"]),"text-size":new kt(Re.layout_symbol["text-size"]),"text-max-width":new kt(Re.layout_symbol["text-max-width"]),"text-line-height":new pt(Re.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(Re.layout_symbol["text-letter-spacing"]),"text-justify":new kt(Re.layout_symbol["text-justify"]),"text-radial-offset":new kt(Re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new pt(Re.layout_symbol["text-variable-anchor"]),"text-anchor":new kt(Re.layout_symbol["text-anchor"]),"text-max-angle":new pt(Re.layout_symbol["text-max-angle"]),"text-writing-mode":new pt(Re.layout_symbol["text-writing-mode"]),"text-rotate":new kt(Re.layout_symbol["text-rotate"]),"text-padding":new pt(Re.layout_symbol["text-padding"]),"text-keep-upright":new pt(Re.layout_symbol["text-keep-upright"]),"text-transform":new kt(Re.layout_symbol["text-transform"]),"text-offset":new kt(Re.layout_symbol["text-offset"]),"text-allow-overlap":new pt(Re.layout_symbol["text-allow-overlap"]),"text-overlap":new pt(Re.layout_symbol["text-overlap"]),"text-ignore-placement":new pt(Re.layout_symbol["text-ignore-placement"]),"text-optional":new pt(Re.layout_symbol["text-optional"])});var V_={paint:new jn({"icon-opacity":new kt(Re.paint_symbol["icon-opacity"]),"icon-color":new kt(Re.paint_symbol["icon-color"]),"icon-halo-color":new kt(Re.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(Re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(Re.paint_symbol["icon-halo-blur"]),"icon-translate":new pt(Re.paint_symbol["icon-translate"]),"icon-translate-anchor":new pt(Re.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(Re.paint_symbol["text-opacity"]),"text-color":new kt(Re.paint_symbol["text-color"],{runtimeType:hr,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new kt(Re.paint_symbol["text-halo-color"]),"text-halo-width":new kt(Re.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(Re.paint_symbol["text-halo-blur"]),"text-translate":new pt(Re.paint_symbol["text-translate"]),"text-translate-anchor":new pt(Re.paint_symbol["text-translate-anchor"])}),layout:DD};class U_{constructor(s){if(void 0===s.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Ys,this.defaultValue=s}evaluate(s){if(s.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(s.formattedSection))return d.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ut("FormatSectionOverride",U_,{omit:["defaultValue"]});class Uc extends ta{constructor(s){super(s,V_)}recalculate(s,d){if(super.recalculate(s,d),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const m=this.layout.get("text-writing-mode");if(m){const _=[];for(const b of m)_.indexOf(b)<0&&_.push(b);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,d,m,_){const b=this.layout.get(s).evaluate(d,{},m,_),w=this._unevaluatedLayout._values[s];return w.isDataDriven()||wc(w.value)||!b?b:(E=d.properties,b.replace(/{([^{}]+)}/g,(R,F)=>F in E?String(E[F]):""));var E}createBucket(s){return new Yu(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of V_.paint.overridableProperties){if(!Uc.hasPaintOverride(this.layout,s))continue;const d=this.paint.get(s),m=new U_(d),_=new ts(m,d.property.specification);let b=null;b="constant"===d.value.kind||"source"===d.value.kind?new Rl("source",_):new Je("composite",_,d.value.zoomStops),this.paint._values[s]=new Xr(d.property,b,d.parameters)}}_handleOverridablePaintPropertyUpdate(s,d,m){return!(!this.layout||d.isDataDriven()||m.isDataDriven())&&Uc.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,d){const m=s.get("text-field"),_=V_.paint.properties[d];let b=!1;const w=E=>{for(const M of E)if(_.overrides&&_.overrides.hasOverride(M))return void(b=!0)};if("constant"===m.value.kind&&m.value.value instanceof le)w(m.value.value.sections);else if("source"===m.value.kind){const E=R=>{b||(R instanceof gt&&Se(R.value)===er?w(R.value.sections):R instanceof Il?w(R.sections):R.eachChild(E))},M=m.value;M._styleExpression&&E(M._styleExpression.expression)}return b}}function Xu(l,s,d){let m="never";const _=l.get(s);return _?m=_:l.get(d)&&(m="always"),m}var j_={paint:new jn({"background-color":new pt(Re.paint_background["background-color"]),"background-pattern":new rs(Re.paint_background["background-pattern"]),"background-opacity":new pt(Re.paint_background["background-opacity"])})},H_={paint:new jn({"raster-opacity":new pt(Re.paint_raster["raster-opacity"]),"raster-hue-rotate":new pt(Re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new pt(Re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new pt(Re.paint_raster["raster-brightness-max"]),"raster-saturation":new pt(Re.paint_raster["raster-saturation"]),"raster-contrast":new pt(Re.paint_raster["raster-contrast"]),"raster-resampling":new pt(Re.paint_raster["raster-resampling"]),"raster-fade-duration":new pt(Re.paint_raster["raster-fade-duration"])})};class $_ extends ta{constructor(s){super(s,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=s}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const jd={circle:class extends ta{constructor(l){super(l,Bb)}createBucket(l){return new jl(l)}queryRadius(l){const s=l;return Ut("circle-radius",this,s)+Ut("circle-stroke-width",this,s)+Bu(this.paint.get("circle-translate"))}queryIntersectsFeature(l,s,d,m,_,b,w,E){const M=Vp(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,w),R=this.paint.get("circle-radius").evaluate(s,d)+this.paint.get("circle-stroke-width").evaluate(s,d),F="map"===this.paint.get("circle-pitch-alignment"),N=F?M:($=E,M.map(oe=>Zt(oe,$))),V=F?R*w:R;var $;for(const j of m)for(const $ of j){const oe=F?$:Zt($,E);let ie=V;const _e=Ri([],[$.x,$.y,0,1],E);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ie*=_e[3]/b.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ie*=b.cameraToCenterDistance/_e[3]),Ob(N,oe,ie))return!0}return!1}},heatmap:class extends ta{constructor(l){super(l,h_),this._updateColorRamp()}createBucket(l){return new Ir(l)}_handleSpecialPaintPropertyUpdate(l){"heatmap-color"===l&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends ta{constructor(l){super(l,m_)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends ta{constructor(l){super(l,g_)}recalculate(l,s){super.recalculate(l,s);const d=this.paint._values["fill-outline-color"];"constant"===d.value.kind&&void 0===d.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Ad(l)}queryRadius(){return Bu(this.paint.get("fill-translate"))}queryIntersectsFeature(l,s,d,m,_,b,w){return Nu(Vp(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,w),m)}isTileClipped(){return!0}},"fill-extrusion":class extends ta{constructor(l){super(l,e0)}createBucket(l){return new v_(l)}queryRadius(){return Bu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,s,d,m,_,b,w,E){const M=Vp(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,w),R=this.paint.get("fill-extrusion-height").evaluate(s,d),F=this.paint.get("fill-extrusion-base").evaluate(s,d),N=function(j,$,oe,ie){const _e=[];for(const De of j){const fe=[De.x,De.y,0,1];Ri(fe,fe,$),_e.push(new Pt(fe[0]/fe[3],fe[1]/fe[3]))}return _e}(M,E),V=function(j,$,oe,ie){const _e=[],De=[],fe=ie[8]*$,xe=ie[9]*$,Be=ie[10]*$,Ne=ie[11]*$,at=ie[8]*oe,ft=ie[9]*oe,it=ie[10]*oe,Ke=ie[11]*oe;for(const Ye of j){const nt=[],tt=[];for(const $e of Ye){const wt=$e.x,mt=$e.y,ii=ie[0]*wt+ie[4]*mt+ie[12],cn=ie[1]*wt+ie[5]*mt+ie[13],vn=ie[2]*wt+ie[6]*mt+ie[14],sr=ie[3]*wt+ie[7]*mt+ie[15],_o=vn+Be,Ar=sr+Ne,Nn=ii+at,Xn=cn+ft,vr=vn+it,br=sr+Ke,yo=new Pt((ii+fe)/Ar,(cn+xe)/Ar);yo.z=_o/Ar,nt.push(yo);const En=new Pt(Nn/br,Xn/br);En.z=vr/br,tt.push(En)}_e.push(nt),De.push(tt)}return[_e,De]}(m,F,R,E);return function(j,$,oe){let ie=1/0;Nu(oe,$)&&(ie=w_(oe,$[0]));for(let _e=0;_e<$.length;_e++){const De=$[_e],fe=j[_e];for(let xe=0;xe<De.length-1;xe++){const Be=De[xe],Ne=[Be,De[xe+1],fe[xe+1],fe[xe],Be];Do(oe,Ne)&&(ie=Math.min(ie,w_(oe,Ne)))}}return ie!==1/0&&ie}(V[0],V[1],N)}},line:class extends ta{constructor(l){super(l,Jp),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){"line-gradient"===l&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Bt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,s){super.recalculate(l,s),this.paint._values["line-floorwidth"]=E_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new rm(l)}queryRadius(l){const s=l,d=$u(Ut("line-width",this,s),Ut("line-gap-width",this,s)),m=Ut("line-offset",this,s);return d/2+Math.abs(m)+Bu(this.paint.get("line-translate"))}queryIntersectsFeature(l,s,d,m,_,b,w){const E=Vp(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,w),M=w/2*$u(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),R=this.paint.get("line-offset").evaluate(s,d);return R&&(m=function(F,N){const V=[];for(let j=0;j<F.length;j++){const $=F[j],oe=[];for(let ie=0;ie<$.length;ie++){const _e=$[ie-1],De=$[ie],fe=$[ie+1],xe=0===ie?new Pt(0,0):De.sub(_e)._unit()._perp(),Be=ie===$.length-1?new Pt(0,0):fe.sub(De)._unit()._perp(),Ne=xe._add(Be)._unit(),at=Ne.x*Be.x+Ne.y*Be.y;0!==at&&Ne._mult(1/at),oe.push(Ne._mult(N)._add(De))}V.push(oe)}return V}(m,R*w)),function(F,N,V){for(let j=0;j<N.length;j++){const $=N[j];if(F.length>=3)for(let oe=0;oe<$.length;oe++)if(Rc(F,$[oe]))return!0;if(Fb(F,$,V))return!0}return!1}(E,m,M)}isTileClipped(){return!0}},symbol:Uc,background:class extends ta{constructor(l){super(l,j_)}},raster:class extends ta{constructor(l){super(l,H_)}}};class G_{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const xf=6371008.8;class yn{constructor(s,d){if(isNaN(s)||isNaN(d))throw new Error(`Invalid LngLat object: (${s}, ${d})`);if(this.lng=+s,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yn(Us(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const d=Math.PI/180,m=this.lat*d,_=s.lat*d,b=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((s.lng-this.lng)*d);return xf*Math.acos(Math.min(b,1))}toBounds(s=0){const d=360*s/40075017,m=d/Math.cos(Math.PI/180*this.lat);return new Fa(new yn(this.lng-m,this.lat-d),new yn(this.lng+m,this.lat+d))}static convert(s){if(s instanceof yn)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new yn(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new yn(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Fa{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof yn?new yn(s.lng,s.lat):yn.convert(s),this}setSouthWest(s){return this._sw=s instanceof yn?new yn(s.lng,s.lat):yn.convert(s),this}extend(s){const d=this._sw,m=this._ne;let _,b;if(s instanceof yn)_=s,b=s;else{if(!(s instanceof Fa))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Fa.convert(s)):this.extend(yn.convert(s)):this;if(_=s._sw,b=s._ne,!_||!b)return this}return d||m?(d.lng=Math.min(_.lng,d.lng),d.lat=Math.min(_.lat,d.lat),m.lng=Math.max(b.lng,m.lng),m.lat=Math.max(b.lat,m.lat)):(this._sw=new yn(_.lng,_.lat),this._ne=new yn(b.lng,b.lat)),this}getCenter(){return new yn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new yn(this.getWest(),this.getNorth())}getSouthEast(){return new yn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:d,lat:m}=yn.convert(s);let _=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&_}static convert(s){return s instanceof Fa?s:s&&new Fa(s)}}const So=2*Math.PI*xf;function q_(l){return So*Math.cos(l*Math.PI/180)}function W_(l){return(180+l)/360}function Z_(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function wf(l,s){return l/q_(s)}function Ku(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class um{constructor(s,d,m=0){this.x=+s,this.y=+d,this.z=+m}static fromLngLat(s,d=0){const m=yn.convert(s);return new um(W_(m.lng),Z_(m.lat),wf(d,m.lat))}toLngLat(){return new yn(360*this.x-180,Ku(this.y))}toAltitude(){return this.z*q_(Ku(this.y))}meterInMercatorCoordinateUnits(){return 1/So*(s=Ku(this.y),1/Math.cos(s*Math.PI/180));var s}}function Y_(l,s,d){var m=2*Math.PI*6378137/256/Math.pow(2,d);return[l*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class Cf{constructor(s,d,m){if(s<0||s>25||m<0||m>=Math.pow(2,s)||d<0||d>=Math.pow(2,s))throw new Error(`x=${d}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=d,this.y=m,this.key=Qu(0,s,s,d,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,d,m){const _=(w=this.y,E=this.z,M=Y_(256*(b=this.x),256*(w=Math.pow(2,E)-w-1),E),R=Y_(256*(b+1),256*(w+1),E),M[0]+","+M[1]+","+R[0]+","+R[1]);var b,w,E,M,R;const F=function(N,V,j){let $,oe="";for(let ie=N;ie>0;ie--)$=1<<ie-1,oe+=(V&$?1:0)+(j&$?2:0);return oe}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===m?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,_)}isChildOf(s){const d=this.z-s.z;return d>0&&s.x===this.x>>d&&s.y===this.y>>d}getTilePoint(s){const d=Math.pow(2,this.z);return new Pt((s.x*d-this.x)*ai,(s.y*d-this.y)*ai)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Df{constructor(s,d){this.wrap=s,this.canonical=d,this.key=Qu(s,d.z,d.z,d.x,d.y)}}class cs{constructor(s,d,m,_,b){if(s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=d,this.canonical=new Cf(m,+_,+b),this.key=Qu(d,s,m,_,b)}clone(){return new cs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?new cs(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cs(s,this.wrap,s,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(s,d){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?Qu(this.wrap*+d,s,this.canonical.z,this.canonical.x,this.canonical.y):Qu(this.wrap*+d,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const d=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>d&&s.canonical.y===this.canonical.y>>d}children(s){if(this.overscaledZ>=s)return[new cs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new cs(d,this.wrap,d,m,_),new cs(d,this.wrap,d,m+1,_),new cs(d,this.wrap,d,m,_+1),new cs(d,this.wrap,d,m+1,_+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new cs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new cs(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Df(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new um(s.x-this.wrap,s.y))}}function Qu(l,s,d,m,_){(l*=2)<0&&(l=-1*l-1);const b=1<<d;return(b*b*l+b*_+m).toString(36)+d.toString(36)+s.toString(36)}ut("CanonicalTileID",Cf),ut("OverscaledTileID",cs,{omit:["posMatrix"]});class Mo{constructor(s,d,m){if(this.uid=s,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(m&&"mapbox"!==m&&"terrarium"!==m)return void xn(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const _=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=m||"mapbox";for(let b=0;b<_;b++)this.data[this._idx(-1,b)]=this.data[this._idx(0,b)],this.data[this._idx(_,b)]=this.data[this._idx(_-1,b)],this.data[this._idx(b,-1)]=this.data[this._idx(b,0)],this.data[this._idx(b,_)]=this.data[this._idx(b,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let b=0;b<_;b++)for(let w=0;w<_;w++){const E=this.get(b,w);E>this.max&&(this.max=E),E<this.min&&(this.min=E)}}get(s,d){const m=new Uint8Array(this.data.buffer),_=4*this._idx(s,d);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(m[_],m[_+1],m[_+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(s,d){if(s<-1||s>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(s+1)}_unpackMapbox(s,d,m){return(256*s*256+256*d+m)/10-1e4}_unpackTerrarium(s,d,m){return 256*s+d+m/256-32768}getPixels(){return new as({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,d,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let _=d*this.dim,b=d*this.dim+this.dim,w=m*this.dim,E=m*this.dim+this.dim;switch(d){case-1:_=b-1;break;case 1:b=_+1}switch(m){case-1:w=E-1;break;case 1:E=w+1}const M=-d*this.dim,R=-m*this.dim;for(let F=w;F<E;F++)for(let N=_;N<b;N++)this.data[this._idx(N,F)]=s.data[this._idx(N+M,F+R)]}}ut("DEMData",Mo);class hm{constructor(s){this._stringToNumber={},this._numberToString=[];for(let d=0;d<s.length;d++){const m=s[d];this._stringToNumber[m]=d,this._numberToString[d]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class Ef{constructor(s,d,m,_,b){this.type="Feature",this._vectorTileFeature=s,s._z=d,s._x=m,s._y=_,this.properties=s.properties,this.id=b}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const d in this)"_geometry"!==d&&"_vectorTileFeature"!==d&&(s[d]=this[d]);return s}}class mm{constructor(s,d){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Mc(ai,16,0),this.grid3D=new Mc(ai,16,0),this.featureIndexArray=new di,this.promoteId=d}insert(s,d,m,_,b,w){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,b);const M=w?this.grid3D:this.grid;for(let R=0;R<d.length;R++){const F=d[R],N=[1/0,1/0,-1/0,-1/0];for(let V=0;V<F.length;V++){const j=F[V];N[0]=Math.min(N[0],j.x),N[1]=Math.min(N[1],j.y),N[2]=Math.max(N[2],j.x),N[3]=Math.max(N[3],j.y)}N[0]<ai&&N[1]<ai&&N[2]>=0&&N[3]>=0&&M.insert(E,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new As.VectorTile(new tf(this.rawTileData)).layers,this.sourceLayerCoder=new hm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,d,m,_){this.loadVTLayers();const b=s.params||{},w=ai/s.tileSize/s.scale,E=Ja(b.filter),M=s.queryGeometry,R=s.queryPadding*w,F=Hd(M),N=this.grid.query(F.minX-R,F.minY-R,F.maxX+R,F.maxY+R),V=Hd(s.cameraQueryGeometry),j=this.grid3D.query(V.minX-R,V.minY-R,V.maxX+R,V.maxY+R,(ie,_e,De,fe)=>function(xe,Be,Ne,at,ft){for(const Ke of xe)if(Be<=Ke.x&&Ne<=Ke.y&&at>=Ke.x&&ft>=Ke.y)return!0;const it=[new Pt(Be,Ne),new Pt(Be,ft),new Pt(at,ft),new Pt(at,Ne)];if(xe.length>2)for(const Ke of it)if(Rc(xe,Ke))return!0;for(let Ke=0;Ke<xe.length-1;Ke++)if(Lb(xe[Ke],xe[Ke+1],it))return!0;return!1}(s.cameraQueryGeometry,ie-R,_e-R,De+R,fe+R));for(const ie of j)N.push(ie);N.sort(X_);const $={};let oe;for(let ie=0;ie<N.length;ie++){const _e=N[ie];if(_e===oe)continue;oe=_e;const De=this.featureIndexArray.get(_e);let fe=null;this.loadMatchingFeature($,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,E,b.layers,b.availableImages,d,m,_,(xe,Be,Ne)=>(fe||(fe=or(xe)),Be.queryIntersectsFeature(M,xe,Ne,fe,this.z,s.transform,w,s.pixelPosMatrix)))}return $}loadMatchingFeature(s,d,m,_,b,w,E,M,R,F,N){const V=this.bucketLayerIDs[d];if(w&&!function(ie,_e){for(let De=0;De<ie.length;De++)if(_e.indexOf(ie[De])>=0)return!0;return!1}(w,V))return;const j=this.sourceLayerCoder.decode(m),$=this.vtLayers[j].feature(_);if(b.needGeometry){const ie=Ac($,!0);if(!b.filter(new Wi(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!b.filter(new Wi(this.tileID.overscaledZ),$))return;const oe=this.getId($,j);for(let ie=0;ie<V.length;ie++){const _e=V[ie];if(w&&w.indexOf(_e)<0)continue;const De=M[_e];if(!De)continue;let fe={};oe&&F&&(fe=F.getState(De.sourceLayer||"_geojsonTileLayer",oe));const xe=Oo({},R[_e]);xe.paint=eo(xe.paint,De.paint,$,fe,E),xe.layout=eo(xe.layout,De.layout,$,fe,E);const Be=!N||N($,De,fe);if(!Be)continue;const Ne=new Ef($,this.z,this.x,this.y,oe);Ne.layer=xe;let at=s[_e];void 0===at&&(at=s[_e]=[]),at.push({featureIndex:_,feature:Ne,intersectionZ:Be})}}lookupSymbolFeatures(s,d,m,_,b,w,E,M){const R={};this.loadVTLayers();const F=Ja(b);for(const N of s)this.loadMatchingFeature(R,m,_,N,F,w,E,M,d);return R}hasLayer(s){for(const d of this.bucketLayerIDs)for(const m of d)if(s===m)return!0;return!1}getId(s,d){let m=s.id;return this.promoteId&&(m=s.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[d]],"boolean"==typeof m&&(m=Number(m))),m}}function eo(l,s,d,m,_){return hc(l,(b,w)=>{const E=s instanceof ho?s.get(w):null;return E&&E.evaluate?E.evaluate(d,m,_):E})}function Hd(l){let s=1/0,d=1/0,m=-1/0,_=-1/0;for(const b of l)s=Math.min(s,b.x),d=Math.min(d,b.y),m=Math.max(m,b.x),_=Math.max(_,b.y);return{minX:s,minY:d,maxX:m,maxY:_}}function X_(l,s){return s-l}var pm;ut("FeatureIndex",mm,{omit:["rawTileData","sourceLayerCoder"]}),v.PerformanceMarkers=void 0,(pm=v.PerformanceMarkers||(v.PerformanceMarkers={})).create="create",pm.load="load",pm.fullLoad="fullLoad";let fm=null,$d=[];const Sf=1e3/30,K_={mark(l){performance.mark(l)},frame(l){const s=l;null!=fm&&$d.push(s-fm),fm=s},clearMetrics(){fm=null,$d=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const l in v.PerformanceMarkers)performance.clearMarks(v.PerformanceMarkers[l])},getPerformanceMetrics(){performance.measure("loadTime",v.PerformanceMarkers.create,v.PerformanceMarkers.load),performance.measure("fullLoadTime",v.PerformanceMarkers.create,v.PerformanceMarkers.fullLoad);const l=performance.getEntriesByName("loadTime")[0].duration,s=performance.getEntriesByName("fullLoadTime")[0].duration,d=$d.length,m=1/($d.reduce((b,w)=>b+w,0)/d/1e3),_=$d.filter(b=>b>Sf).reduce((b,w)=>b+(w-Sf)/Sf,0);return{loadTime:l,fullLoadTime:s,fps:m,percentDroppedFrames:_/(d+_)*100}}};v.AJAXError=qr,v.ARRAY_TYPE=Qr,v.Actor=class{constructor(l,s,d){this.target=l,this.parent=s,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},fd(["receive","process"],this),this.invoker=new G_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Fo()?l:window}send(l,s,d,m,_=!1){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[b]=d);const w=bl(this.globalScope)?void 0:[];return this.target.postMessage({id:b,type:l,hasCallback:!!d,targetMapId:m,mustQueue:_,sourceMapId:this.mapId,data:il(s,w)},w),{cancel:()=>{d&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(l){const s=l.data,d=s.id;if(d&&(!s.targetMapId||this.mapId===s.targetMapId))if("<cancel>"===s.type){delete this.tasks[d];const m=this.cancelCallbacks[d];delete this.cancelCallbacks[d],m&&m()}else Fo()||s.mustQueue?(this.tasks[d]=s,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,s)}process(){if(!this.taskQueue.length)return;const l=this.taskQueue.shift(),s=this.tasks[l];delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(l,s)}processTask(l,s){if("<response>"===s.type){const d=this.callbacks[l];delete this.callbacks[l],d&&(s.error?d(ea(s.error)):d(null,ea(s.data)))}else{let d=!1;const m=bl(this.globalScope)?void 0:[],_=s.hasCallback?(E,M)=>{d=!0,delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:E?il(E):null,data:il(M,m)},m)}:E=>{d=!0};let b=null;const w=ea(s.data);if(this.parent[s.type])b=this.parent[s.type](s.sourceMapId,w,_);else if(this.parent.getWorkerSource){const E=s.type.split(".");b=this.parent.getWorkerSource(s.sourceMapId,E[0],w.source)[E[1]](w,_)}else _(new Error(`Could not find function ${s.type}`));!d&&b&&b.cancel&&(this.cancelCallbacks[l]=b.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},v.AlphaImage=Fc,v.CanonicalTileID=Cf,v.CollisionBoxArray=Pe,v.CollisionCircleLayoutArray=class extends L{},v.Color=Z,v.DEMData=Mo,v.DataConstantProperty=pt,v.DictionaryCoder=hm,v.EXTENT=ai,v.ErrorEvent=fa,v.EvaluationParameters=Wi,v.Event=Ws,v.Evented=Zs,v.FeatureIndex=mm,v.FillBucket=Ad,v.FillExtrusionBucket=v_,v.GeoJSONFeature=Ef,v.ImageAtlas=Nd,v.ImagePosition=Ld,v.LineBucket=rm,v.LineStripIndexArray=class extends ne{},v.LngLat=yn,v.LngLatBounds=Fa,v.MercatorCoordinate=um,v.ONE_EM=Yn,v.OverscaledTileID=cs,v.PerformanceUtils=K_,v.PosArray=yt,v.Properties=jn,v.QuadTriangleArray=class extends H{},v.RGBAImage=as,v.RasterBoundsArray=class extends f{},v.RequestPerformance=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return 0===l.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},v.ResourceType=Gt,v.SegmentVector=si,v.SymbolBucket=Yu,v.Transitionable=Ru,v.TriangleIndexArray=Yi,v.Uniform1f=ol,v.Uniform1i=class extends ka{constructor(l,s){super(l,s),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},v.Uniform2f=class extends ka{constructor(l,s){super(l,s),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},v.Uniform3f=class extends ka{constructor(l,s){super(l,s),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},v.Uniform4f=Sd,v.UniformColor=Zn,v.UniformMatrix4f=class extends ka{constructor(l,s){super(l,s),this.current=s_}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let s=1;s<16;s++)if(l[s]!==this.current[s]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},v.UnwrappedTileID=Df,v.ValidationError=et,v.ZoomHistory=Fe,v.add=function(l,s,d){return l[0]=s[0]+d[0],l[1]=s[1]+d[1],l[2]=s[2]+d[2],l},v.addDynamicAttributes=N_,v.asyncAll=function(l,s,d){if(!l.length)return d(null,[]);let m=l.length;const _=new Array(l.length);let b=null;l.forEach((w,E)=>{s(w,(M,R)=>{M&&(b=M),_[E]=R,0==--m&&d(b,_)})})},v.bezier=ys,v.bindAll=fd,v.cacheEntryPossiblyAdded=function(l){Ct++,Ct>wl&&(l.getActor().send("enforceCacheSizeLimit",xl),Ct=0)},v.clamp=Ae,v.clearTileCache=function(l){const s=caches.delete(No);l&&s.catch(l).then(()=>l())},v.clipLine=O_,v.clone=function(l){var s=new Qr(16);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],s},v.clone$1=Gr,v.clone$2=function(l){var s=new Qr(3);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s},v.collisionCircleLayout=Pd,v.config=$s,v.copy=function(l,s){return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[4]=s[4],l[5]=s[5],l[6]=s[6],l[7]=s[7],l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},v.create=function(){var l=new Qr(16);return Qr!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},v.create$1=Pc,v.createExpression=we,v.createFilter=Ja,v.createLayout=Dn,v.createStyleLayer=function(l){return"custom"===l.type?new $_(l):new jd[l.type](l)},v.cross=function(l,s,d){var m=s[0],_=s[1],b=s[2],w=d[0],E=d[1],M=d[2];return l[0]=_*M-b*E,l[1]=b*w-m*M,l[2]=m*E-_*w,l},v.dot=function(l,s){return l[0]*s[0]+l[1]*s[1]+l[2]*s[2]},v.dot$1=function(l,s){return l[0]*s[0]+l[1]*s[1]+l[2]*s[2]+l[3]*s[3]},v.ease=Oi,v.emitValidationErrors=Mt,v.enforceCacheSizeLimit=function(l){Cl(),Si&&Si.then(s=>{s.keys().then(d=>{for(let m=0;m<d.length-l;m++)s.delete(d[m])})})},v.equals=function(l,s){var d=l[0],m=l[1],_=l[2],b=l[3],w=l[4],E=l[5],M=l[6],R=l[7],F=l[8],N=l[9],V=l[10],j=l[11],$=l[12],oe=l[13],ie=l[14],_e=l[15],De=s[0],fe=s[1],xe=s[2],Be=s[3],Ne=s[4],at=s[5],ft=s[6],it=s[7],Ke=s[8],Ye=s[9],nt=s[10],tt=s[11],$e=s[12],wt=s[13],mt=s[14],ii=s[15];return Math.abs(d-De)<=fo*Math.max(1,Math.abs(d),Math.abs(De))&&Math.abs(m-fe)<=fo*Math.max(1,Math.abs(m),Math.abs(fe))&&Math.abs(_-xe)<=fo*Math.max(1,Math.abs(_),Math.abs(xe))&&Math.abs(b-Be)<=fo*Math.max(1,Math.abs(b),Math.abs(Be))&&Math.abs(w-Ne)<=fo*Math.max(1,Math.abs(w),Math.abs(Ne))&&Math.abs(E-at)<=fo*Math.max(1,Math.abs(E),Math.abs(at))&&Math.abs(M-ft)<=fo*Math.max(1,Math.abs(M),Math.abs(ft))&&Math.abs(R-it)<=fo*Math.max(1,Math.abs(R),Math.abs(it))&&Math.abs(F-Ke)<=fo*Math.max(1,Math.abs(F),Math.abs(Ke))&&Math.abs(N-Ye)<=fo*Math.max(1,Math.abs(N),Math.abs(Ye))&&Math.abs(V-nt)<=fo*Math.max(1,Math.abs(V),Math.abs(nt))&&Math.abs(j-tt)<=fo*Math.max(1,Math.abs(j),Math.abs(tt))&&Math.abs($-$e)<=fo*Math.max(1,Math.abs($),Math.abs($e))&&Math.abs(oe-wt)<=fo*Math.max(1,Math.abs(oe),Math.abs(wt))&&Math.abs(ie-mt)<=fo*Math.max(1,Math.abs(ie),Math.abs(mt))&&Math.abs(_e-ii)<=fo*Math.max(1,Math.abs(_e),Math.abs(ii))},v.evaluateSizeForFeature=function(l,{uSize:s,uSizeT:d},{lowerSize:m,upperSize:_}){return"source"===l.kind?m/Ps:"composite"===l.kind?ln(m/Ps,_/Ps,d):s},v.evaluateSizeForZoom=function(l,s){let d=0,m=0;if("constant"===l.kind)m=l.layoutSize;else if("source"!==l.kind){const{interpolationType:_,minZoom:b,maxZoom:w}=l,E=_?Ae(Vo.interpolationFactor(_,s,b,w),0,1):0;"camera"===l.kind?m=ln(l.minSize,l.maxSize,E):d=E}return{uSizeT:d,uSize:m}},v.evaluateVariableOffset=ff,v.evented=ir,v.exported=ua,v.exported$1=Gs,v.extend=Oo,v.filterObject=js,v.fromRotation=function(l,s){var d=Math.sin(s),m=Math.cos(s);return l[0]=m,l[1]=d,l[2]=0,l[3]=-d,l[4]=m,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},v.fromScaling=function(l,s){return l[0]=s[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=s[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},v.getAnchorAlignment=df,v.getAnchorJustification=gf,v.getArrayBuffer=El,v.getImage=pa,v.getJSON=function(l,s){return Dl(Oo(l,{type:"json"}),s)},v.getOverlapMode=Xu,v.getRTLTextPluginStatus=Ss,v.getReferrer=pc,v.getVideo=function(l,s){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){s(null,d)};for(let m=0;m<l.length;m++){const _=window.document.createElement("source");fc(l[m])||(d.crossOrigin="Anonymous"),_.src=l[m],d.appendChild(_)}return{cancel:()=>{}}},v.identity=Up,v.invert=function(l,s){var d=s[0],m=s[1],_=s[2],b=s[3],w=s[4],E=s[5],M=s[6],R=s[7],F=s[8],N=s[9],V=s[10],j=s[11],$=s[12],oe=s[13],ie=s[14],_e=s[15],De=d*E-m*w,fe=d*M-_*w,xe=d*R-b*w,Be=m*M-_*E,Ne=m*R-b*E,at=_*R-b*M,ft=F*oe-N*$,it=F*ie-V*$,Ke=F*_e-j*$,Ye=N*ie-V*oe,nt=N*_e-j*oe,tt=V*_e-j*ie,$e=De*tt-fe*nt+xe*Ye+Be*Ke-Ne*it+at*ft;return $e?(l[0]=(E*tt-M*nt+R*Ye)*($e=1/$e),l[1]=(_*nt-m*tt-b*Ye)*$e,l[2]=(oe*at-ie*Ne+_e*Be)*$e,l[3]=(V*Ne-N*at-j*Be)*$e,l[4]=(M*Ke-w*tt-R*it)*$e,l[5]=(d*tt-_*Ke+b*it)*$e,l[6]=(ie*xe-$*at-_e*fe)*$e,l[7]=(F*at-V*xe+j*fe)*$e,l[8]=(w*nt-E*Ke+R*ft)*$e,l[9]=(m*Ke-d*nt-b*ft)*$e,l[10]=($*Ne-oe*xe+_e*De)*$e,l[11]=(N*xe-F*Ne-j*De)*$e,l[12]=(E*it-w*Ye-M*ft)*$e,l[13]=(d*Ye-m*it+_*ft)*$e,l[14]=(oe*fe-$*Be-ie*De)*$e,l[15]=(F*Be-N*fe+V*De)*$e,l):null},v.isImageBitmap=xs,v.isSafari=bl,v.isWorker=Fo,v.keysDifference=function(l,s){const d=[];for(const m in l)m in s||d.push(m);return d},v.lazyLoadRTLTextPlugin=function(){fr.isLoading()||fr.isLoaded()||"deferred"!==Ss()||Cn()},v.makeRequest=Dl,v.mapObject=hc,v.mercatorXfromLng=W_,v.mercatorYfromLat=Z_,v.mercatorZfromAltitude=wf,v.mul=zb,v.mul$1=function(l,s,d){return l[0]=s[0]*d[0],l[1]=s[1]*d[1],l[2]=s[2]*d[2],l[3]=s[3]*d[3],l},v.multiply=d_,v.nextPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},v.normalize=function(l,s){var d=s[0],m=s[1],_=s[2],b=d*d+m*m+_*_;return b>0&&(b=1/Math.sqrt(b)),l[0]=s[0]*b,l[1]=s[1]*b,l[2]=s[2]*b,l},v.number=ln,v.ortho=function(l,s,d,m,_,b,w){var E=1/(s-d),M=1/(m-_),R=1/(b-w);return l[0]=-2*E,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*M,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*R,l[11]=0,l[12]=(s+d)*E,l[13]=(_+m)*M,l[14]=(w+b)*R,l[15]=1,l},v.parseCacheControl=vl,v.parseGlyphPbf=function(l){return new tf(l).readFields(o0,[])},v.pbf=tf,v.performSymbolLayout=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=ai/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const s=l.bucket.layers[0].layout,d=l.bucket.layers[0]._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new Wi(l.bucket.zoom+1),l.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Wi(l.bucket.zoom+1),l.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Wi(18))};if("composite"===l.bucket.textSizeData.kind){const{minZoom:M,maxZoom:R}=l.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Wi(M),l.canonical),d["text-size"].possiblyEvaluate(new Wi(R),l.canonical)]}if("composite"===l.bucket.iconSizeData.kind){const{minZoom:M,maxZoom:R}=l.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Wi(M),l.canonical),d["icon-size"].possiblyEvaluate(new Wi(R),l.canonical)]}const _=s.get("text-line-height")*Yn,b="viewport"!==s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),w=s.get("text-keep-upright"),E=s.get("text-size");for(const M of l.bucket.features){const R=s.get("text-font").evaluate(M,{},l.canonical).join(","),F=E.evaluate(M,{},l.canonical),N=m.layoutTextSize.evaluate(M,{},l.canonical),V=m.layoutIconSize.evaluate(M,{},l.canonical),j={horizontal:{},vertical:void 0},$=M.text;let oe,ie=[0,0];if($){const fe=$.toString(),xe=s.get("text-letter-spacing").evaluate(M,{},l.canonical)*Yn,Be=kr(fe)?xe:0,Ne=s.get("text-anchor").evaluate(M,{},l.canonical),at=s.get("text-variable-anchor");if(!at){const nt=s.get("text-radial-offset").evaluate(M,{},l.canonical);ie=nt?ff(Ne,[nt*Yn,Ud]):s.get("text-offset").evaluate(M,{},l.canonical).map(tt=>tt*Yn)}let ft=b?"center":s.get("text-justify").evaluate(M,{},l.canonical);const it=s.get("symbol-placement"),Ke="point"===it?s.get("text-max-width").evaluate(M,{},l.canonical)*Yn:0,Ye=()=>{l.bucket.allowVerticalPlacement&&Li(fe)&&(j.vertical=af($,l.glyphMap,l.glyphPositions,l.imagePositions,R,Ke,_,Ne,"left",Be,ie,v.WritingMode.vertical,!0,it,N,F))};if(!b&&at){const nt="auto"===ft?at.map($e=>gf($e)):[ft];let tt=!1;for(let $e=0;$e<nt.length;$e++){const wt=nt[$e];if(!j.horizontal[wt])if(tt)j.horizontal[wt]=j.horizontal[0];else{const mt=af($,l.glyphMap,l.glyphPositions,l.imagePositions,R,Ke,_,"center",wt,Be,ie,v.WritingMode.horizontal,!1,it,N,F);mt&&(j.horizontal[wt]=mt,tt=1===mt.positionedLines.length)}}Ye()}else{"auto"===ft&&(ft=gf(Ne));const nt=af($,l.glyphMap,l.glyphPositions,l.imagePositions,R,Ke,_,Ne,ft,Be,ie,v.WritingMode.horizontal,!1,it,N,F);nt&&(j.horizontal[ft]=nt),Ye(),Li(fe)&&b&&w&&(j.vertical=af($,l.glyphMap,l.glyphPositions,l.imagePositions,R,Ke,_,Ne,ft,Be,ie,v.WritingMode.vertical,!1,it,N,F))}}let _e=!1;if(M.icon&&M.icon.name){const fe=l.imageMap[M.icon.name];fe&&(oe=l0(l.imagePositions[M.icon.name],s.get("icon-offset").evaluate(M,{},l.canonical),s.get("icon-anchor").evaluate(M,{},l.canonical)),_e=!!fe.sdf,void 0===l.bucket.sdfIcons?l.bucket.sdfIcons=_e:l.bucket.sdfIcons!==_e&&xn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fe.pixelRatio!==l.bucket.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(l.bucket.iconsNeedLinear=!0))}const De=h0(j.horizontal)||j.vertical;l.bucket.iconsInText=!!De&&De.iconsInText,(De||oe)&&L_(l.bucket,M,j,oe,l.imageMap,m,N,V,ie,_e,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},v.perspective=function(l,s,d,m,_){var b,w=1/Math.tan(s/2);return l[0]=w/d,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=_&&_!==1/0?(l[10]=(_+m)*(b=1/(m-_)),l[14]=2*_*m*b):(l[10]=-1,l[14]=-2*m),l},v.pick=function(l,s){const d={};for(let m=0;m<s.length;m++){const _=s[m];_ in l&&(d[_]=l[_])}return d},v.plugin=fr,v.pointGeometry=Pt,v.polygonIntersectsPolygon=Do,v.potpack=sf,v.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],v.register=ut,v.registerForPluginStateChange=function(l){return l({pluginStatus:At,pluginURL:Ji}),ir.on("pluginStateChange",l),l},v.renderColorRamp=Vb,v.rotateX=function(l,s,d){var m=Math.sin(d),_=Math.cos(d),b=s[4],w=s[5],E=s[6],M=s[7],R=s[8],F=s[9],N=s[10],V=s[11];return s!==l&&(l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[4]=b*_+R*m,l[5]=w*_+F*m,l[6]=E*_+N*m,l[7]=M*_+V*m,l[8]=R*_-b*m,l[9]=F*_-w*m,l[10]=N*_-E*m,l[11]=V*_-M*m,l},v.rotateZ=function(l,s,d){var m=Math.sin(d),_=Math.cos(d),b=s[0],w=s[1],E=s[2],M=s[3],R=s[4],F=s[5],N=s[6],V=s[7];return s!==l&&(l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=b*_+R*m,l[1]=w*_+F*m,l[2]=E*_+N*m,l[3]=M*_+V*m,l[4]=R*_-b*m,l[5]=F*_-w*m,l[6]=N*_-E*m,l[7]=V*_-M*m,l},v.scale=function(l,s,d){var m=d[0],_=d[1],b=d[2];return l[0]=s[0]*m,l[1]=s[1]*m,l[2]=s[2]*m,l[3]=s[3]*m,l[4]=s[4]*_,l[5]=s[5]*_,l[6]=s[6]*_,l[7]=s[7]*_,l[8]=s[8]*b,l[9]=s[9]*b,l[10]=s[10]*b,l[11]=s[11]*b,l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},v.scale$1=function(l,s,d){return l[0]=s[0]*d,l[1]=s[1]*d,l[2]=s[2]*d,l},v.setCacheLimits=function(l,s){xl=l,wl=s},v.setRTLTextPlugin=function(l,s,d=!1){if(At===Iu||At===Au||At===On)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ji=ua.resolveURL(l),At=Iu,ht=s,jo(),d||Cn()},v.spec=Re,v.sphericalToCartesian=function([l,s,d]){return s+=90,s*=Math.PI/180,d*=Math.PI/180,{x:l*Math.cos(s)*Math.sin(d),y:l*Math.sin(s)*Math.sin(d),z:l*Math.cos(d)}},v.sqrLen=function(l){var s=l[0],d=l[1];return s*s+d*d},v.sub=function(l,s,d){return l[0]=s[0]-d[0],l[1]=s[1]-d[1],l[2]=s[2]-d[2],l},v.toEvaluationFeature=Ac,v.transformMat3=function(l,s,d){var m=s[0],_=s[1],b=s[2];return l[0]=m*d[0]+_*d[3]+b*d[6],l[1]=m*d[1]+_*d[4]+b*d[7],l[2]=m*d[2]+_*d[5]+b*d[8],l},v.transformMat4=Ri,v.transformMat4$1=function(l,s,d){var m=s[0],_=s[1];return l[0]=d[0]*m+d[4]*_+d[12],l[1]=d[1]*m+d[5]*_+d[13],l},v.translate=function(l,s,d){var m,_,b,w,E,M,R,F,N,V,j,$,oe=d[0],ie=d[1],_e=d[2];return s===l?(l[12]=s[0]*oe+s[4]*ie+s[8]*_e+s[12],l[13]=s[1]*oe+s[5]*ie+s[9]*_e+s[13],l[14]=s[2]*oe+s[6]*ie+s[10]*_e+s[14],l[15]=s[3]*oe+s[7]*ie+s[11]*_e+s[15]):(_=s[1],b=s[2],w=s[3],E=s[4],M=s[5],R=s[6],F=s[7],N=s[8],V=s[9],j=s[10],$=s[11],l[0]=m=s[0],l[1]=_,l[2]=b,l[3]=w,l[4]=E,l[5]=M,l[6]=R,l[7]=F,l[8]=N,l[9]=V,l[10]=j,l[11]=$,l[12]=m*oe+E*ie+N*_e+s[12],l[13]=_*oe+M*ie+V*_e+s[13],l[14]=b*oe+R*ie+j*_e+s[14],l[15]=w*oe+F*ie+$*_e+s[15]),l},v.triggerPluginCompletionEvent=Uo,v.unicodeBlockLookup=Ze,v.uniqueId=function(){return hn++},v.validateCustomStyleLayer=function(l){const s=[],d=l.id;return void 0===d&&s.push({message:`layers.${d}: missing required property "id"`}),void 0===l.render&&s.push({message:`layers.${d}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&s.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),s},v.validateLight=ku,v.validateStyle=zl,v.vectorTile=As,v.warnOnce=xn,v.wrap=Us}),du(0,function(v){function zi(K){const O=typeof K;if("number"===O||"boolean"===O||"string"===O||null==K)return JSON.stringify(K);if(Array.isArray(K)){let Z="[";for(const re of K)Z+=`${zi(re)},`;return`${Z}]`}const B=Object.keys(K).sort();let W="{";for(let Z=0;Z<B.length;Z++)W+=`${JSON.stringify(B[Z])}:${zi(K[B[Z]])},`;return`${W}}`}function Vs(K){let O="";for(const B of v.refProperties)O+=`/${zi(K[B])}`;return O}class ys{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,B){for(const Z of O){this._layerConfigs[Z.id]=Z;const re=this._layers[Z.id]=v.createStyleLayer(Z);re._featureFilter=v.createFilter(re.filter),this.keyCache[Z.id]&&delete this.keyCache[Z.id]}for(const Z of B)delete this.keyCache[Z],delete this._layerConfigs[Z],delete this._layers[Z];this.familiesBySource={};const W=function(Z,re){const he={};for(let ae=0;ae<Z.length;ae++){const me=re&&re[Z[ae].id]||Vs(Z[ae]);re&&(re[Z[ae].id]=me);let Me=he[me];Me||(Me=he[me]=[]),Me.push(Z[ae])}const le=[];for(const ae in he)le.push(he[ae]);return le}(Object.values(this._layerConfigs),this.keyCache);for(const Z of W){const re=Z.map(Ve=>this._layers[Ve.id]),he=re[0];if("none"===he.visibility)continue;const le=he.source||"";let ae=this.familiesBySource[le];ae||(ae=this.familiesBySource[le]={});const me=he.sourceLayer||"_geojsonTileLayer";let Me=ae[me];Me||(Me=ae[me]=[]),Me.push(re)}}}class Oi{constructor(O){const B={},W=[];for(const le in O){const ae=O[le],me=B[le]={};for(const Me in ae){const Ve=ae[+Me];if(!Ve||0===Ve.bitmap.width||0===Ve.bitmap.height)continue;const Se={x:0,y:0,w:Ve.bitmap.width+2,h:Ve.bitmap.height+2};W.push(Se),me[Me]={rect:Se,metrics:Ve.metrics}}}const{w:Z,h:re}=v.potpack(W),he=new v.AlphaImage({width:Z||1,height:re||1});for(const le in O){const ae=O[le];for(const me in ae){const Me=ae[+me];if(!Me||0===Me.bitmap.width||0===Me.bitmap.height)continue;const Ve=B[le][me].rect;v.AlphaImage.copy(Me.bitmap,he,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Me.bitmap)}}this.image=he,this.positions=B}}v.register("GlyphAtlas",Oi);class Ae{constructor(O){this.tileID=new v.OverscaledTileID(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId}parse(O,B,W,Z,re){this.status="parsing",this.data=O,this.collisionBoxArray=new v.CollisionBoxArray;const he=new v.DictionaryCoder(Object.keys(O.layers).sort()),le=new v.FeatureIndex(this.tileID,this.promoteId);le.bucketLayerIDs=[];const ae={},me={featureIndex:le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Me=B.familiesBySource[this.source];for(const Nt in Me){const ti=O.layers[Nt];if(!ti)continue;1===ti.version&&v.warnOnce(`Vector tile source "${this.source}" layer "${Nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _i=he.encode(Nt),Ki=[];for(let Mn=0;Mn<ti.length;Mn++){const gn=ti.feature(Mn),mr=le.getId(gn,Nt);Ki.push({feature:gn,id:mr,index:Mn,sourceLayerIndex:_i})}for(const Mn of Me[Nt]){const gn=Mn[0];gn.source!==this.source&&v.warnOnce(`layer.source = ${gn.source} does not equal this.source = ${this.source}`),gn.minzoom&&this.zoom<Math.floor(gn.minzoom)||gn.maxzoom&&this.zoom>=gn.maxzoom||"none"!==gn.visibility&&(Us(Mn,this.zoom,W),(ae[gn.id]=gn.createBucket({index:le.bucketLayerIDs.length,layers:Mn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_i,sourceID:this.source})).populate(Ki,me,this.tileID.canonical),le.bucketLayerIDs.push(Mn.map(mr=>mr.id)))}}let Ve,Se,st,gt;const qe=v.mapObject(me.glyphDependencies,Nt=>Object.keys(Nt).map(Number));Object.keys(qe).length?Z.send("getGlyphs",{uid:this.uid,stacks:qe},(Nt,ti)=>{Ve||(Ve=Nt,Se=ti,Ii.call(this))}):Se={};const xt=Object.keys(me.iconDependencies);xt.length?Z.send("getImages",{icons:xt,source:this.source,tileID:this.tileID,type:"icons"},(Nt,ti)=>{Ve||(Ve=Nt,st=ti,Ii.call(this))}):st={};const vt=Object.keys(me.patternDependencies);function Ii(){if(Ve)return re(Ve);if(Se&&st&&gt){const Nt=new Oi(Se),ti=new v.ImageAtlas(st,gt);for(const _i in ae){const Ki=ae[_i];Ki instanceof v.SymbolBucket?(Us(Ki.layers,this.zoom,W),v.performSymbolLayout({bucket:Ki,glyphMap:Se,glyphPositions:Nt.positions,imageMap:st,imagePositions:ti.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ki.hasPattern&&(Ki instanceof v.LineBucket||Ki instanceof v.FillBucket||Ki instanceof v.FillExtrusionBucket)&&(Us(Ki.layers,this.zoom,W),Ki.addFeatures(me,this.tileID.canonical,ti.patternPositions))}this.status="done",re(null,{buckets:Object.values(ae).filter(_i=>!_i.isEmpty()),featureIndex:le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nt.image,imageAtlas:ti,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?st:null,glyphPositions:this.returnDependencies?Nt.positions:null})}}vt.length?Z.send("getImages",{icons:vt,source:this.source,tileID:this.tileID,type:"patterns"},(Nt,ti)=>{Ve||(Ve=Nt,gt=ti,Ii.call(this))}):gt={},Ii.call(this)}}function Us(K,O,B){const W=new v.EvaluationParameters(O);for(const Z of K)Z.recalculate(W,B)}function Oo(K,O){const B=v.getArrayBuffer(K.request,(W,Z,re,he)=>{W?O(W):Z&&O(null,{vectorTile:new v.vectorTile.VectorTile(new v.pbf(Z)),rawData:Z,cacheControl:re,expires:he})});return()=>{B.cancel(),O()}}class hn{constructor(O,B,W,Z){this.actor=O,this.layerIndex=B,this.availableImages=W,this.loadVectorData=Z||Oo,this.loading={},this.loaded={}}loadTile(O,B){const W=O.uid;this.loading||(this.loading={});const Z=!!(O&&O.request&&O.request.collectResourceTiming)&&new v.RequestPerformance(O.request),re=this.loading[W]=new Ae(O);re.abort=this.loadVectorData(O,(he,le)=>{if(delete this.loading[W],he||!le)return re.status="done",this.loaded[W]=re,B(he);const ae=le.rawData,me={};le.expires&&(me.expires=le.expires),le.cacheControl&&(me.cacheControl=le.cacheControl);const Me={};if(Z){const Ve=Z.finish();Ve&&(Me.resourceTiming=JSON.parse(JSON.stringify(Ve)))}re.vectorTile=le.vectorTile,re.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ve,Se)=>{if(Ve||!Se)return B(Ve);B(null,v.extend({rawTileData:ae.slice(0)},Se,me,Me))}),this.loaded=this.loaded||{},this.loaded[W]=re})}reloadTile(O,B){const W=this.loaded,Z=O.uid,re=this;if(W&&W[Z]){const he=W[Z];he.showCollisionBoxes=O.showCollisionBoxes;const le=(ae,me)=>{const Me=he.reloadCallback;Me&&(delete he.reloadCallback,he.parse(he.vectorTile,re.layerIndex,this.availableImages,re.actor,Me)),B(ae,me)};"parsing"===he.status?he.reloadCallback=le:"done"===he.status&&(he.vectorTile?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,le):le())}}abortTile(O,B){const W=this.loading,Z=O.uid;W&&W[Z]&&W[Z].abort&&(W[Z].abort(),delete W[Z]),B()}removeTile(O,B){const W=this.loaded,Z=O.uid;W&&W[Z]&&delete W[Z],B()}}class fd{constructor(){this.loaded={}}loadTile(O,B){const{uid:W,encoding:Z,rawImageData:re}=O,he=v.isImageBitmap(re)?this.getImageData(re):re,le=new v.DEMData(W,he,Z);this.loaded=this.loaded||{},this.loaded[W]=le,B(null,le)}getImageData(O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);const B=this.offscreenCanvasContext.getImageData(-1,-1,O.width+2,O.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new v.RGBAImage({width:B.width,height:B.height},B.data)}removeTile(O){const B=this.loaded,W=O.uid;B&&B[W]&&delete B[W]}}var hc=function K(O,B){var W,Z=O&&O.type;if("FeatureCollection"===Z)for(W=0;W<O.features.length;W++)K(O.features[W],B);else if("GeometryCollection"===Z)for(W=0;W<O.geometries.length;W++)K(O.geometries[W],B);else if("Feature"===Z)K(O.geometry,B);else if("Polygon"===Z)js(O.coordinates,B);else if("MultiPolygon"===Z)for(W=0;W<O.coordinates.length;W++)js(O.coordinates[W],B);return O};function js(K,O){if(0!==K.length){Gr(K[0],O);for(var B=1;B<K.length;B++)Gr(K[B],!O)}}function Gr(K,O){for(var B=0,W=0,Z=0,re=K.length,he=re-1;Z<re;he=Z++){var le=(K[Z][0]-K[he][0])*(K[he][1]+K[Z][1]),ae=B+le;W+=Math.abs(B)>=Math.abs(le)?B-ae+le:le-ae+B,B=ae}B+W>=0!=!!O&&K.reverse()}const Qo=v.vectorTile.VectorTileFeature.prototype.toGeoJSON;class xn{constructor(O){this._feature=O,this.extent=v.EXTENT,this.type=O.type,this.properties=O.tags,"id"in O&&!isNaN(O.id)&&(this.id=parseInt(O.id,10))}loadGeometry(){if(1===this._feature.type){const O=[];for(const B of this._feature.geometry)O.push([new v.pointGeometry(B[0],B[1])]);return O}{const O=[];for(const B of this._feature.geometry){const W=[];for(const Z of B)W.push(new v.pointGeometry(Z[0],Z[1]));O.push(W)}return O}}toGeoJSON(O,B,W){return Qo.call(this,O,B,W)}}class vs{constructor(O){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.EXTENT,this.length=O.length,this._features=O}feature(O){return new xn(this._features[O])}}var bs={exports:{}},Fo=v.pointGeometry,vl=v.vectorTile.VectorTileFeature,Hs=Jo;function Jo(K,O){this.options=O||{},this.features=K,this.length=K.length}function Lo(K,O){this.id="number"==typeof K.id?K.id:void 0,this.type=K.type,this.rawGeometry=1===K.type?[K.geometry]:K.geometry,this.properties=K.tags,this.extent=O||4096}Jo.prototype.feature=function(K){return new Lo(this.features[K],this.options.extent)},Lo.prototype.loadGeometry=function(){var K=this.rawGeometry;this.geometry=[];for(var O=0;O<K.length;O++){for(var B=K[O],W=[],Z=0;Z<B.length;Z++)W.push(new Fo(B[Z][0],B[Z][1]));this.geometry.push(W)}return this.geometry},Lo.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var K=this.geometry,O=1/0,B=-1/0,W=1/0,Z=-1/0,re=0;re<K.length;re++)for(var he=K[re],le=0;le<he.length;le++){var ae=he[le];O=Math.min(O,ae.x),B=Math.max(B,ae.x),W=Math.min(W,ae.y),Z=Math.max(Z,ae.y)}return[O,W,B,Z]},Lo.prototype.toGeoJSON=vl.prototype.toGeoJSON;var bl=v.pbf,xs=Hs;function ua(K){var O=new bl;return function(B,W){for(var Z in B.layers)W.writeMessage(3,Pt,B.layers[Z])}(K,O),O.finish()}function Pt(K,O){var B;O.writeVarintField(15,K.version||1),O.writeStringField(1,K.name||""),O.writeVarintField(5,K.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<K.length;B++)W.feature=K.feature(B),O.writeMessage(2,Er,W);var Z=W.keys;for(B=0;B<Z.length;B++)O.writeStringField(3,Z[B]);var re=W.values;for(B=0;B<re.length;B++)O.writeMessage(4,xl,re[B])}function Er(K,O){var B=K.feature;void 0!==B.id&&O.writeVarintField(1,B.id),O.writeMessage(2,$s,K),O.writeVarintField(3,B.type),O.writeMessage(4,ha,B)}function $s(K,O){var B=K.feature,W=K.keys,Z=K.values,re=K.keycache,he=K.valuecache;for(var le in B.properties){var ae=B.properties[le],me=re[le];if(null!==ae){void 0===me&&(W.push(le),re[le]=me=W.length-1),O.writeVarint(me);var Me=typeof ae;"string"!==Me&&"boolean"!==Me&&"number"!==Me&&(ae=JSON.stringify(ae));var Ve=Me+":"+ae,Se=he[Ve];void 0===Se&&(Z.push(ae),he[Ve]=Se=Z.length-1),O.writeVarint(Se)}}}function No(K,O){return(O<<3)+(7&K)}function Si(K){return K<<1^K>>31}function ha(K,O){for(var B=K.loadGeometry(),W=K.type,Z=0,re=0,he=B.length,le=0;le<he;le++){var ae=B[le],me=1;1===W&&(me=ae.length),O.writeVarint(No(1,me));for(var Me=3===W?ae.length-1:ae.length,Ve=0;Ve<Me;Ve++){1===Ve&&1!==W&&O.writeVarint(No(2,Me-1));var Se=ae[Ve].x-Z,st=ae[Ve].y-re;O.writeVarint(Si(Se)),O.writeVarint(Si(st)),Z+=Se,re+=st}3===W&&O.writeVarint(No(7,1))}}function xl(K,O){var B=typeof K;"string"===B?O.writeStringField(1,K):"boolean"===B?O.writeBooleanField(7,K):"number"===B&&(K%1!=0?O.writeDoubleField(3,K):K<0?O.writeSVarintField(6,K):O.writeVarintField(5,K))}function wl(K,O,B,W,Z,re){if(Z-W<=B)return;const he=W+Z>>1;Cl(K,O,he,W,Z,re%2),wl(K,O,B,W,he-1,re+1),wl(K,O,B,he+1,Z,re+1)}function Cl(K,O,B,W,Z,re){for(;Z>W;){if(Z-W>600){const me=Z-W+1,Me=B-W+1,Ve=Math.log(me),Se=.5*Math.exp(2*Ve/3),st=.5*Math.sqrt(Ve*Se*(me-Se)/me)*(Me-me/2<0?-1:1);Cl(K,O,B,Math.max(W,Math.floor(B-Me*Se/me+st)),Math.min(Z,Math.floor(B+(me-Me)*Se/me+st)),re)}const he=O[2*B+re];let le=W,ae=Z;for(Ct(K,O,W,B),O[2*Z+re]>he&&Ct(K,O,W,Z);le<ae;){for(Ct(K,O,le,ae),le++,ae--;O[2*le+re]<he;)le++;for(;O[2*ae+re]>he;)ae--}O[2*W+re]===he?Ct(K,O,W,ae):(ae++,Ct(K,O,ae,Z)),ae<=B&&(W=ae+1),B<=ae&&(Z=ae-1)}}function Ct(K,O,B,W){Gs(K,B,W),Gs(O,2*B,2*W),Gs(O,2*B+1,2*W+1)}function Gs(K,O,B){const W=K[O];K[O]=K[B],K[B]=W}function Pn(K,O,B,W){const Z=K-B,re=O-W;return Z*Z+re*re}bs.exports=ua,bs.exports.fromVectorTileJs=ua,bs.exports.fromGeojsonVt=function(K,O){O=O||{};var B={};for(var W in K)B[W]=new xs(K[W].features,O),B[W].name=W,B[W].version=O.version,B[W].extent=O.extent;return ua({layers:B})},bs.exports.GeoJSONWrapper=xs;const qs=K=>K[0],Ti=K=>K[1];class nn{constructor(O,B=qs,W=Ti,Z=64,re=Float64Array){this.nodeSize=Z,this.points=O;const he=O.length<65536?Uint16Array:Uint32Array,le=this.ids=new he(O.length),ae=this.coords=new re(2*O.length);for(let me=0;me<O.length;me++)le[me]=me,ae[2*me]=B(O[me]),ae[2*me+1]=W(O[me]);wl(le,ae,Z,0,le.length-1,0)}range(O,B,W,Z){return function(re,he,le,ae,me,Me,Ve){const Se=[0,re.length-1,0],st=[];let gt,qe;for(;Se.length;){const xt=Se.pop(),vt=Se.pop(),Ii=Se.pop();if(vt-Ii<=Ve){for(let _i=Ii;_i<=vt;_i++)gt=he[2*_i],qe=he[2*_i+1],gt>=le&&gt<=me&&qe>=ae&&qe<=Me&&st.push(re[_i]);continue}const Nt=Math.floor((Ii+vt)/2);gt=he[2*Nt],qe=he[2*Nt+1],gt>=le&&gt<=me&&qe>=ae&&qe<=Me&&st.push(re[Nt]);const ti=(xt+1)%2;(0===xt?le<=gt:ae<=qe)&&(Se.push(Ii),Se.push(Nt-1),Se.push(ti)),(0===xt?me>=gt:Me>=qe)&&(Se.push(Nt+1),Se.push(vt),Se.push(ti))}return st}(this.ids,this.coords,O,B,W,Z,this.nodeSize)}within(O,B,W){return function(Z,re,he,le,ae,me){const Me=[0,Z.length-1,0],Ve=[],Se=ae*ae;for(;Me.length;){const st=Me.pop(),gt=Me.pop(),qe=Me.pop();if(gt-qe<=me){for(let ti=qe;ti<=gt;ti++)Pn(re[2*ti],re[2*ti+1],he,le)<=Se&&Ve.push(Z[ti]);continue}const xt=Math.floor((qe+gt)/2),vt=re[2*xt],Ii=re[2*xt+1];Pn(vt,Ii,he,le)<=Se&&Ve.push(Z[xt]);const Nt=(st+1)%2;(0===st?he-ae<=vt:le-ae<=Ii)&&(Me.push(qe),Me.push(xt-1),Me.push(Nt)),(0===st?he+ae>=vt:le+ae>=Ii)&&(Me.push(xt+1),Me.push(gt),Me.push(Nt))}return Ve}(this.ids,this.coords,O,B,W,this.nodeSize)}}const mc={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:K=>K},Gt=Math.fround||(qr=new Float32Array(1),K=>(qr[0]=+K,qr[0]));var qr;class pc{constructor(O){this.options=pa(Object.create(mc),O),this.trees=new Array(this.options.maxZoom+1)}load(O){const{log:B,minZoom:W,maxZoom:Z,nodeSize:re}=this.options;B&&console.time("total time");const he=`prepare ${O.length} points`;B&&console.time(he),this.points=O;let le=[];for(let ae=0;ae<O.length;ae++)O[ae].geometry&&le.push(Dl(O[ae],ae));this.trees[Z+1]=new nn(le,gc,Ds,re,Float32Array),B&&console.timeEnd(he);for(let ae=Z;ae>=W;ae--){const me=+Date.now();le=this._cluster(le,ae),this.trees[ae]=new nn(le,gc,Ds,re,Float32Array),B&&console.log("z%d: %d clusters in %dms",ae,le.length,+Date.now()-me)}return B&&console.timeEnd("total time"),this}getClusters(O,B){let W=((O[0]+180)%360+360)%360-180;const Z=Math.max(-90,Math.min(90,O[1]));let re=180===O[2]?180:((O[2]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)W=-180,re=180;else if(W>re){const Me=this.getClusters([W,Z,180,he],B),Ve=this.getClusters([-180,Z,re,he],B);return Me.concat(Ve)}const le=this.trees[this._limitZoom(B)],ae=le.range(Mi(W),Cs(he),Mi(re),Cs(Z)),me=[];for(const Me of ae){const Ve=le.points[Me];me.push(Ve.numPoints?El(Ve):this.points[Ve.index])}return me}getChildren(O){const B=this._getOriginId(O),W=this._getOriginZoom(O),Z="No cluster with the specified id.",re=this.trees[W];if(!re)throw new Error(Z);const he=re.points[B];if(!he)throw new Error(Z);const le=this.options.radius/(this.options.extent*Math.pow(2,W-1)),ae=re.within(he.x,he.y,le),me=[];for(const Me of ae){const Ve=re.points[Me];Ve.parentId===O&&me.push(Ve.numPoints?El(Ve):this.points[Ve.index])}if(0===me.length)throw new Error(Z);return me}getLeaves(O,B,W){const Z=[];return this._appendLeaves(Z,O,B=B||10,W=W||0,0),Z}getTile(O,B,W){const Z=this.trees[this._limitZoom(O)],re=Math.pow(2,O),{extent:he,radius:le}=this.options,ae=le/he,me=(W-ae)/re,Me=(W+1+ae)/re,Ve={features:[]};return this._addTileFeatures(Z.range((B-ae)/re,me,(B+1+ae)/re,Me),Z.points,B,W,re,Ve),0===B&&this._addTileFeatures(Z.range(1-ae/re,me,1,Me),Z.points,re,W,re,Ve),B===re-1&&this._addTileFeatures(Z.range(0,me,ae/re,Me),Z.points,-1,W,re,Ve),Ve.features.length?Ve:null}getClusterExpansionZoom(O){let B=this._getOriginZoom(O)-1;for(;B<=this.options.maxZoom;){const W=this.getChildren(O);if(B++,1!==W.length)break;O=W[0].properties.cluster_id}return B}_appendLeaves(O,B,W,Z,re){const he=this.getChildren(B);for(const le of he){const ae=le.properties;if(ae&&ae.cluster?re+ae.point_count<=Z?re+=ae.point_count:re=this._appendLeaves(O,ae.cluster_id,W,Z,re):re<Z?re++:O.push(le),O.length===W)break}return re}_addTileFeatures(O,B,W,Z,re,he){for(const le of O){const ae=B[le],me=ae.numPoints;let Me,Ve,Se;if(me)Me=fc(ae),Ve=ae.x,Se=ae.y;else{const qe=this.points[ae.index];Me=qe.properties,Ve=Mi(qe.geometry.coordinates[0]),Se=Cs(qe.geometry.coordinates[1])}const st={type:1,geometry:[[Math.round(this.options.extent*(Ve*re-W)),Math.round(this.options.extent*(Se*re-Z))]],tags:Me};let gt;me?gt=ae.id:this.options.generateId?gt=ae.index:this.points[ae.index].id&&(gt=this.points[ae.index].id),void 0!==gt&&(st.id=gt),he.features.push(st)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,B){const W=[],{radius:Z,extent:re,reduce:he,minPoints:le}=this.options,ae=Z/(re*Math.pow(2,B));for(let me=0;me<O.length;me++){const Me=O[me];if(Me.zoom<=B)continue;Me.zoom=B;const Ve=this.trees[B+1],Se=Ve.within(Me.x,Me.y,ae),st=Me.numPoints||1;let gt=st;for(const qe of Se){const xt=Ve.points[qe];xt.zoom>B&&(gt+=xt.numPoints||1)}if(gt>st&&gt>=le){let qe=Me.x*st,xt=Me.y*st,vt=he&&st>1?this._map(Me,!0):null;const Ii=(me<<5)+(B+1)+this.points.length;for(const Nt of Se){const ti=Ve.points[Nt];if(ti.zoom<=B)continue;ti.zoom=B;const _i=ti.numPoints||1;qe+=ti.x*_i,xt+=ti.y*_i,ti.parentId=Ii,he&&(vt||(vt=this._map(Me,!0)),he(vt,this._map(ti)))}Me.parentId=Ii,W.push(ws(qe/gt,xt/gt,Ii,gt,vt))}else if(W.push(Me),gt>1)for(const qe of Se){const xt=Ve.points[qe];xt.zoom<=B||(xt.zoom=B,W.push(xt))}}return W}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,B){if(O.numPoints)return B?pa({},O.properties):O.properties;const W=this.points[O.index].properties,Z=this.options.map(W);return B&&Z===W?pa({},Z):Z}}function ws(K,O,B,W,Z){return{x:Gt(K),y:Gt(O),zoom:1/0,id:B,parentId:-1,numPoints:W,properties:Z}}function Dl(K,O){const[B,W]=K.geometry.coordinates;return{x:Gt(Mi(B)),y:Gt(Cs(W)),zoom:1/0,index:O,parentId:-1}}function El(K){return{type:"Feature",id:K.id,properties:fc(K),geometry:{type:"Point",coordinates:[(O=K.x,360*(O-.5)),ma(K.y)]}};var O}function fc(K){const O=K.numPoints,B=O>=1e4?`${Math.round(O/1e3)}k`:O>=1e3?Math.round(O/100)/10+"k":O;return pa(pa({},K.properties),{cluster:!0,cluster_id:K.id,point_count:O,point_count_abbreviated:B})}function Mi(K){return K/360+.5}function Cs(K){const O=Math.sin(K*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function ma(K){const O=(180-360*K)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function pa(K,O){for(const B in O)K[B]=O[B];return K}function gc(K){return K.x}function Ds(K){return K.y}function Ws(K,O,B,W){for(var Z,re=W,he=B-O>>1,le=B-O,ae=K[O],me=K[O+1],Me=K[B],Ve=K[B+1],Se=O+3;Se<B;Se+=3){var st=fa(K[Se],K[Se+1],ae,me,Me,Ve);if(st>re)Z=Se,re=st;else if(st===re){var gt=Math.abs(Se-he);gt<le&&(Z=Se,le=gt)}}re>W&&(Z-O>3&&Ws(K,O,Z,W),K[Z+2]=re,B-Z>3&&Ws(K,Z,B,W))}function fa(K,O,B,W,Z,re){var he=Z-B,le=re-W;if(0!==he||0!==le){var ae=((K-B)*he+(O-W)*le)/(he*he+le*le);ae>1?(B=Z,W=re):ae>0&&(B+=he*ae,W+=le*ae)}return(he=K-B)*he+(le=O-W)*le}function Zs(K,O,B,W){var Z={id:void 0===K?null:K,type:O,geometry:B,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var he=re.geometry,le=re.type;if("Point"===le||"MultiPoint"===le||"LineString"===le)Re(re,he);else if("Polygon"===le||"MultiLineString"===le)for(var ae=0;ae<he.length;ae++)Re(re,he[ae]);else if("MultiPolygon"===le)for(ae=0;ae<he.length;ae++)for(var me=0;me<he[ae].length;me++)Re(re,he[ae][me])}(Z),Z}function Re(K,O){for(var B=0;B<O.length;B+=3)K.minX=Math.min(K.minX,O[B]),K.minY=Math.min(K.minY,O[B+1]),K.maxX=Math.max(K.maxX,O[B]),K.maxY=Math.max(K.maxY,O[B+1])}function et(K,O,B,W){if(O.geometry){var Z=O.geometry.coordinates,re=O.geometry.type,he=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),le=[],ae=O.id;if(B.promoteId?ae=O.properties[B.promoteId]:B.generateId&&(ae=W||0),"Point"===re)Wa(Z,le);else if("MultiPoint"===re)for(var me=0;me<Z.length;me++)Wa(Z[me],le);else if("LineString"===re)es(Z,le,he,!1);else if("MultiLineString"===re){if(B.lineMetrics){for(me=0;me<Z.length;me++)es(Z[me],le=[],he,!1),K.push(Zs(ae,"LineString",le,O.properties));return}ki(Z,le,he,!1)}else if("Polygon"===re)ki(Z,le,he,!0);else{if("MultiPolygon"!==re){if("GeometryCollection"===re){for(me=0;me<O.geometry.geometries.length;me++)et(K,{id:ae,geometry:O.geometry.geometries[me],properties:O.properties},B,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<Z.length;me++){var Me=[];ki(Z[me],Me,he,!0),le.push(Me)}}K.push(Zs(ae,re,le,O.properties))}}function Wa(K,O){O.push(Wn(K[0])),O.push(so(K[1])),O.push(0)}function es(K,O,B,W){for(var Z,re,he=0,le=0;le<K.length;le++){var ae=Wn(K[le][0]),me=so(K[le][1]);O.push(ae),O.push(me),O.push(0),le>0&&(he+=W?(Z*me-ae*re)/2:Math.sqrt(Math.pow(ae-Z,2)+Math.pow(me-re,2))),Z=ae,re=me}var Me=O.length-3;O[2]=1,Ws(O,0,Me,B),O[Me+2]=1,O.size=Math.abs(he),O.start=0,O.end=O.size}function ki(K,O,B,W){for(var Z=0;Z<K.length;Z++){var re=[];es(K[Z],re,B,W),O.push(re)}}function Wn(K){return K/360+.5}function so(K){var O=Math.sin(K*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function wo(K,O,B,W,Z,re,he,le){if(W/=O,re>=(B/=O)&&he<W)return K;if(he<B||re>=W)return null;for(var ae=[],me=0;me<K.length;me++){var Me=K[me],Ve=Me.geometry,Se=Me.type,st=0===Z?Me.minX:Me.minY,gt=0===Z?Me.maxX:Me.maxY;if(st>=B&&gt<W)ae.push(Me);else if(!(gt<B||st>=W)){var qe=[];if("Point"===Se||"MultiPoint"===Se)Ys(Ve,qe,B,W,Z);else if("LineString"===Se)Qe(Ve,qe,B,W,Z,!1,le.lineMetrics);else if("MultiLineString"===Se)jt(Ve,qe,B,W,Z,!1);else if("Polygon"===Se)jt(Ve,qe,B,W,Z,!0);else if("MultiPolygon"===Se)for(var xt=0;xt<Ve.length;xt++){var vt=[];jt(Ve[xt],vt,B,W,Z,!0),vt.length&&qe.push(vt)}if(qe.length){if(le.lineMetrics&&"LineString"===Se){for(xt=0;xt<qe.length;xt++)ae.push(Zs(Me.id,Se,qe[xt],Me.tags));continue}"LineString"!==Se&&"MultiLineString"!==Se||(1===qe.length?(Se="LineString",qe=qe[0]):Se="MultiLineString"),"Point"!==Se&&"MultiPoint"!==Se||(Se=3===qe.length?"Point":"MultiPoint"),ae.push(Zs(Me.id,Se,qe,Me.tags))}}}return ae.length?ae:null}function Ys(K,O,B,W,Z){for(var re=0;re<K.length;re+=3){var he=K[re+Z];he>=B&&he<=W&&(O.push(K[re]),O.push(K[re+1]),O.push(K[re+2]))}}function Qe(K,O,B,W,Z,re,he){for(var le,ae,me=ri(K),Me=0===Z?ga:Ht,Ve=K.start,Se=0;Se<K.length-3;Se+=3){var st=K[Se],gt=K[Se+1],qe=K[Se+2],xt=K[Se+3],vt=K[Se+4],Ii=0===Z?st:gt,Nt=0===Z?xt:vt,ti=!1;he&&(le=Math.sqrt(Math.pow(st-xt,2)+Math.pow(gt-vt,2))),Ii<B?Nt>B&&(ae=Me(me,st,gt,xt,vt,B),he&&(me.start=Ve+le*ae)):Ii>W?Nt<W&&(ae=Me(me,st,gt,xt,vt,W),he&&(me.start=Ve+le*ae)):hr(me,st,gt,qe),Nt<B&&Ii>=B&&(ae=Me(me,st,gt,xt,vt,B),ti=!0),Nt>W&&Ii<=W&&(ae=Me(me,st,gt,xt,vt,W),ti=!0),!re&&ti&&(he&&(me.end=Ve+le*ae),O.push(me),me=ri(K)),he&&(Ve+=le)}var _i=K.length-3;st=K[_i],gt=K[_i+1],qe=K[_i+2],(Ii=0===Z?st:gt)>=B&&Ii<=W&&hr(me,st,gt,qe),_i=me.length-3,re&&_i>=3&&(me[_i]!==me[0]||me[_i+1]!==me[1])&&hr(me,me[0],me[1],me[2]),me.length&&O.push(me)}function ri(K){var O=[];return O.size=K.size,O.start=K.start,O.end=K.end,O}function jt(K,O,B,W,Z,re){for(var he=0;he<K.length;he++)Qe(K[he],O,B,W,Z,re,!1)}function hr(K,O,B,W){K.push(O),K.push(B),K.push(W)}function ga(K,O,B,W,Z,re){var he=(re-O)/(W-O);return K.push(re),K.push(B+(Z-B)*he),K.push(1),he}function Ht(K,O,B,W,Z,re){var he=(re-B)/(Z-B);return K.push(O+(W-O)*he),K.push(re),K.push(1),he}function Xs(K,O){for(var B=[],W=0;W<K.length;W++){var Z,re=K[W],he=re.type;if("Point"===he||"MultiPoint"===he||"LineString"===he)Z=er(re.geometry,O);else if("MultiLineString"===he||"Polygon"===he){Z=[];for(var le=0;le<re.geometry.length;le++)Z.push(er(re.geometry[le],O))}else if("MultiPolygon"===he)for(Z=[],le=0;le<re.geometry.length;le++){for(var ae=[],me=0;me<re.geometry[le].length;me++)ae.push(er(re.geometry[le][me],O));Z.push(ae)}B.push(Zs(re.id,he,Z,re.tags))}return B}function er(K,O){var B=[];B.size=K.size,void 0!==K.start&&(B.start=K.start,B.end=K.end);for(var W=0;W<K.length;W+=3)B.push(K[W]+O,K[W+1],K[W+2]);return B}function Sl(K,O){if(K.transformed)return K;var B,W,Z,re=1<<K.z,he=K.x,le=K.y;for(B=0;B<K.features.length;B++){var ae=K.features[B],me=ae.geometry,Me=ae.type;if(ae.geometry=[],1===Me)for(W=0;W<me.length;W+=2)ae.geometry.push(Vn(me[W],me[W+1],O,re,he,le));else for(W=0;W<me.length;W++){var Ve=[];for(Z=0;Z<me[W].length;Z+=2)Ve.push(Vn(me[W][Z],me[W][Z+1],O,re,he,le));ae.geometry.push(Ve)}}return K.transformed=!0,K}function Vn(K,O,B,W,Z,re){return[Math.round(B*(K*W-Z)),Math.round(B*(O*W-re))]}function Wr(K,O,B,W,Z){for(var re=O===Z.maxZoom?0:Z.tolerance/((1<<O)*Z.extent),he={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:W,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},le=0;le<K.length;le++){he.numFeatures++,Xi(he,K[le],re,Z);var ae=K[le].minX,me=K[le].minY,Me=K[le].maxX,Ve=K[le].maxY;ae<he.minX&&(he.minX=ae),me<he.minY&&(he.minY=me),Me>he.maxX&&(he.maxX=Me),Ve>he.maxY&&(he.maxY=Ve)}return he}function Xi(K,O,B,W){var Z=O.geometry,re=O.type,he=[];if("Point"===re||"MultiPoint"===re)for(var le=0;le<Z.length;le+=3)he.push(Z[le]),he.push(Z[le+1]),K.numPoints++,K.numSimplified++;else if("LineString"===re)_c(he,Z,K,B,!1,!1);else if("MultiLineString"===re||"Polygon"===re)for(le=0;le<Z.length;le++)_c(he,Z[le],K,B,"Polygon"===re,0===le);else if("MultiPolygon"===re)for(var ae=0;ae<Z.length;ae++){var me=Z[ae];for(le=0;le<me.length;le++)_c(he,me[le],K,B,!0,0===le)}if(he.length){var Me=O.tags||null;if("LineString"===re&&W.lineMetrics){for(var Ve in Me={},O.tags)Me[Ve]=O.tags[Ve];Me.mapbox_clip_start=Z.start/Z.size,Me.mapbox_clip_end=Z.end/Z.size}var Se={geometry:he,type:"Polygon"===re||"MultiPolygon"===re?3:"LineString"===re||"MultiLineString"===re?2:1,tags:Me};null!==O.id&&(Se.id=O.id),K.features.push(Se)}}function _c(K,O,B,W,Z,re){var he=W*W;if(W>0&&O.size<(Z?he:W))B.numPoints+=O.length/3;else{for(var le=[],ae=0;ae<O.length;ae+=3)(0===W||O[ae+2]>he)&&(B.numSimplified++,le.push(O[ae]),le.push(O[ae+1])),B.numPoints++;Z&&function(me,Me){for(var Ve=0,Se=0,st=me.length,gt=st-2;Se<st;gt=Se,Se+=2)Ve+=(me[Se]-me[gt])*(me[Se+1]+me[gt+1]);if(Ve>0===Me)for(Se=0,st=me.length;Se<st/2;Se+=2){var qe=me[Se],xt=me[Se+1];me[Se]=me[st-2-Se],me[Se+1]=me[st-1-Se],me[st-2-Se]=qe,me[st-1-Se]=xt}}(le,re),K.push(le)}}function Bo(K,O){var B=(O=this.options=function(Z,re){for(var he in re)Z[he]=re[he];return Z}(Object.create(this.options),O)).debug;if(B&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z,re,he,le,ae,me,W=function(Z,re){var he=[];if("FeatureCollection"===Z.type)for(var le=0;le<Z.features.length;le++)et(he,Z.features[le],re,le);else et(he,"Feature"===Z.type?Z:{geometry:Z},re);return he}(K,O);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=Z=W,ae=wo(Z,1,-1-(he=(re=O).buffer/re.extent),he,0,-1,2,re),me=wo(Z,1,1-he,2+he,0,-1,2,re),(ae||me)&&(le=wo(Z,1,-he,1+he,0,-1,2,re)||[],ae&&(le=Xs(ae,1).concat(le)),me&&(le=le.concat(Xs(me,-1)))),(W=le).length&&this.splitTile(W,0,0,0),B&&(W.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _a(K,O,B){return 32*((1<<K)*B+O)+K}function ya(K,O){const B=K.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);const W=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!W)return O(null,null);const Z=new vs(W.features);let re=bs.exports(Z);0===re.byteOffset&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),O(null,{vectorTile:Z,rawData:re.buffer})}Bo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bo.prototype.splitTile=function(K,O,B,W,Z,re,he){for(var le=[K,O,B,W],ae=this.options,me=ae.debug;le.length;){W=le.pop(),B=le.pop(),O=le.pop(),K=le.pop();var Me=1<<O,Ve=_a(O,B,W),Se=this.tiles[Ve];if(!Se&&(me>1&&console.time("creation"),Se=this.tiles[Ve]=Wr(K,O,B,W,ae),this.tileCoords.push({z:O,x:B,y:W}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,B,W,Se.numFeatures,Se.numPoints,Se.numSimplified),console.timeEnd("creation"));var st="z"+O;this.stats[st]=(this.stats[st]||0)+1,this.total++}if(Se.source=K,Z){if(O===ae.maxZoom||O===Z)continue;var gt=1<<Z-O;if(B!==Math.floor(re/gt)||W!==Math.floor(he/gt))continue}else if(O===ae.indexMaxZoom||Se.numPoints<=ae.indexMaxPoints)continue;if(Se.source=null,0!==K.length){me>1&&console.time("clipping");var qe,xt,vt,Ii,Nt,ti,_i=.5*ae.buffer/ae.extent,Ki=.5-_i,Mn=.5+_i,gn=1+_i;qe=xt=vt=Ii=null,Nt=wo(K,Me,B-_i,B+Mn,0,Se.minX,Se.maxX,ae),ti=wo(K,Me,B+Ki,B+gn,0,Se.minX,Se.maxX,ae),K=null,Nt&&(qe=wo(Nt,Me,W-_i,W+Mn,1,Se.minY,Se.maxY,ae),xt=wo(Nt,Me,W+Ki,W+gn,1,Se.minY,Se.maxY,ae),Nt=null),ti&&(vt=wo(ti,Me,W-_i,W+Mn,1,Se.minY,Se.maxY,ae),Ii=wo(ti,Me,W+Ki,W+gn,1,Se.minY,Se.maxY,ae),ti=null),me>1&&console.timeEnd("clipping"),le.push(qe||[],O+1,2*B,2*W),le.push(xt||[],O+1,2*B,2*W+1),le.push(vt||[],O+1,2*B+1,2*W),le.push(Ii||[],O+1,2*B+1,2*W+1)}}},Bo.prototype.getTile=function(K,O,B){var W=this.options,Z=W.extent,re=W.debug;if(K<0||K>24)return null;var he=1<<K,le=_a(K,O=(O%he+he)%he,B);if(this.tiles[le])return Sl(this.tiles[le],Z);re>1&&console.log("drilling down to z%d-%d-%d",K,O,B);for(var ae,me=K,Me=O,Ve=B;!ae&&me>0;)me--,Me=Math.floor(Me/2),Ve=Math.floor(Ve/2),ae=this.tiles[_a(me,Me,Ve)];return ae&&ae.source?(re>1&&console.log("found parent tile z%d-%d-%d",me,Me,Ve),re>1&&console.time("drilling down"),this.splitTile(ae.source,me,Me,Ve,K,O,B),re>1&&console.timeEnd("drilling down"),this.tiles[le]?Sl(this.tiles[le],Z):null):null};class Za extends hn{constructor(O,B,W,Z){super(O,B,W,ya),Z&&(this.loadGeoJSON=Z)}loadData(O,B){var W;null===(W=this._pendingRequest)||void 0===W||W.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Z=!!(O&&O.request&&O.request.collectResourceTiming)&&new v.RequestPerformance(O.request);this._pendingCallback=B,this._pendingRequest=this.loadGeoJSON(O,(re,he)=>{if(delete this._pendingCallback,delete this._pendingRequest,re||!he)return B(re);if("object"!=typeof he)return B(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));{hc(he,!0);try{if(O.filter){const ae=v.createExpression(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ae.result)throw new Error(ae.value.map(Me=>`${Me.key}: ${Me.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(Me=>ae.value.evaluate({zoom:0},Me))}}this._geoJSONIndex=O.cluster?new pc(function({superclusterOptions:ae,clusterProperties:me}){if(!me||!ae)return ae;const Me={},Ve={},Se={accumulated:null,zoom:0},st={properties:null},gt=Object.keys(me);for(const qe of gt){const[xt,vt]=me[qe],Ii=v.createExpression(vt),Nt=v.createExpression("string"==typeof xt?[xt,["accumulated"],["get",qe]]:xt);Me[qe]=Ii.value,Ve[qe]=Nt.value}return ae.map=qe=>{st.properties=qe;const xt={};for(const vt of gt)xt[vt]=Me[vt].evaluate(Se,st);return xt},ae.reduce=(qe,xt)=>{st.properties=xt;for(const vt of gt)Se.accumulated=qe[vt],qe[vt]=Ve[vt].evaluate(Se,st)},ae}(O)).load(he.features):new Bo(ae=he,O.geojsonVtOptions)}catch(ae){return B(ae)}this.loaded={};const le={};if(Z){const ae=Z.finish();ae&&(le.resourceTiming={},le.resourceTiming[O.source]=JSON.parse(JSON.stringify(ae)))}B(null,le)}var ae})}reloadTile(O,B){const W=this.loaded;return W&&W[O.uid]?super.reloadTile(O,B):this.loadTile(O,B)}loadGeoJSON(O,B){if(O.request)return v.getJSON(O.request,B);if("string"==typeof O.data)try{B(null,JSON.parse(O.data))}catch{B(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`))}else B(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(O,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(O,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch(W){B(W)}}getClusterChildren(O,B){try{B(null,this._geoJSONIndex.getChildren(O.clusterId))}catch(W){B(W)}}getClusterLeaves(O,B){try{B(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch(W){B(W)}}}class va{constructor(O){this.self=O,this.actor=new v.Actor(O,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:hn,geojson:Za},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,W)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=W},this.self.registerRTLTextPlugin=B=>{if(v.plugin.isParsed())throw new Error("RTL text plugin already registered.");v.plugin.applyArabicShaping=B.applyArabicShaping,v.plugin.processBidirectionalText=B.processBidirectionalText,v.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(O,B){this.referrer=B}setImages(O,B,W){this.availableImages[O]=B;for(const Z in this.workerSources[O]){const re=this.workerSources[O][Z];for(const he in re)re[he].availableImages=B}W()}setLayers(O,B,W){this.getLayerIndex(O).replace(B),W()}updateLayers(O,B,W){this.getLayerIndex(O).update(B.layers,B.removedIds),W()}loadTile(O,B,W){this.getWorkerSource(O,B.type,B.source).loadTile(B,W)}loadDEMTile(O,B,W){this.getDEMWorkerSource(O,B.source).loadTile(B,W)}reloadTile(O,B,W){this.getWorkerSource(O,B.type,B.source).reloadTile(B,W)}abortTile(O,B,W){this.getWorkerSource(O,B.type,B.source).abortTile(B,W)}removeTile(O,B,W){this.getWorkerSource(O,B.type,B.source).removeTile(B,W)}removeDEMTile(O,B){this.getDEMWorkerSource(O,B.source).removeTile(B)}removeSource(O,B,W){if(!this.workerSources[O]||!this.workerSources[O][B.type]||!this.workerSources[O][B.type][B.source])return;const Z=this.workerSources[O][B.type][B.source];delete this.workerSources[O][B.type][B.source],void 0!==Z.removeSource?Z.removeSource(B,W):W()}loadWorkerSource(O,B,W){try{this.self.importScripts(B.url),W()}catch(Z){W(Z.toString())}}syncRTLPluginState(O,B,W){try{v.plugin.setState(B);const Z=v.plugin.getPluginURL();if(v.plugin.isLoaded()&&!v.plugin.isParsed()&&null!=Z){this.self.importScripts(Z);const re=v.plugin.isParsed();W(re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Z}`),re)}}catch(Z){W(Z.toString())}}getAvailableImages(O){let B=this.availableImages[O];return B||(B=[]),B}getLayerIndex(O){let B=this.layerIndexes[O];return B||(B=this.layerIndexes[O]=new ys),B}getWorkerSource(O,B,W){return this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][B]||(this.workerSources[O][B]={}),this.workerSources[O][B][W]||(this.workerSources[O][B][W]=new this.workerSourceTypes[B]({send:(re,he,le)=>{this.actor.send(re,he,le,O)}},this.getLayerIndex(O),this.getAvailableImages(O))),this.workerSources[O][B][W]}getDEMWorkerSource(O,B){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][B]||(this.demWorkerSources[O][B]=new fd),this.demWorkerSources[O][B]}enforceCacheSizeLimit(O,B){v.enforceCacheSizeLimit(B)}}return v.isWorker()&&(self.worker=new va(self)),va}),du(0,function(v){var zi=Vs;function Vs(f){return a=f,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,y,x=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(x);try{y=new Worker(D),p=!0}catch{p=!1}return y&&y.terminate(),URL.revokeObjectURL(D),p}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var p=document.createElement("canvas");p.width=p.height=1;var y=p.getContext("2d");if(!y)return!1;var x=y.getImageData(0,0,1,1);return x&&x.width===p.width}()||(void 0===ys[u=a&&a.failIfMajorPerformanceCaveat]&&(ys[u]=function(p){var y,D,k,T,x=(D=p,k=document.createElement("canvas"),(T=Object.create(Vs.webGLContextAttributes)).failIfMajorPerformanceCaveat=D,k.getContext("webgl",T)||k.getContext("experimental-webgl",T));if(!x)return!1;try{y=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!y||x.isContextLost())&&(x.shaderSource(y,"void main() {}"),x.compileShader(y),!0===x.getShaderParameter(y,x.COMPILE_STATUS))}(u)),!ys[u]||document.documentMode));var a,u}var ys={};function Oi(f,a){if(Array.isArray(f)){if(!Array.isArray(a)||f.length!==a.length)return!1;for(let u=0;u<f.length;u++)if(!Oi(f[u],a[u]))return!1;return!0}if("object"==typeof f&&null!==f&&null!==a){if("object"!=typeof a||Object.keys(f).length!==Object.keys(a).length)return!1;for(const u in f)if(!Oi(f[u],a[u]))return!1;return!0}return f===a}Vs.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class Ae{static testProp(a){if(!Ae.docStyle)return a[0];for(let u=0;u<a.length;u++)if(a[u]in Ae.docStyle)return a[u];return a[0]}static create(a,u,p){const y=window.document.createElement(a);return void 0!==u&&(y.className=u),p&&p.appendChild(y),y}static createNS(a,u){return window.document.createElementNS(a,u)}static disableDrag(){Ae.docStyle&&Ae.selectProp&&(Ae.userSelect=Ae.docStyle[Ae.selectProp],Ae.docStyle[Ae.selectProp]="none")}static enableDrag(){Ae.docStyle&&Ae.selectProp&&(Ae.docStyle[Ae.selectProp]=Ae.userSelect)}static setTransform(a,u){a.style[Ae.transformProp]=u}static addEventListener(a,u,p,y={}){a.addEventListener(u,p,"passive"in y?y:y.capture)}static removeEventListener(a,u,p,y={}){a.removeEventListener(u,p,"passive"in y?y:y.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",Ae.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Ae.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Ae.suppressClickInternal,!0)},0)}static mousePos(a,u){const p=a.getBoundingClientRect();return new v.pointGeometry(u.clientX-p.left-a.clientLeft,u.clientY-p.top-a.clientTop)}static touchPos(a,u){const p=a.getBoundingClientRect(),y=[];for(let x=0;x<u.length;x++)y.push(new v.pointGeometry(u[x].clientX-p.left-a.clientLeft,u[x].clientY-p.top-a.clientTop));return y}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}Ae.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Ae.selectProp=Ae.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Ae.transformProp=Ae.testProp(["transform","WebkitTransform"]);class Us{constructor(a){this._transformRequestFn=a}transformRequest(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}}normalizeSpriteURL(a,u,p){const y=function(x){const D=x.match(Oo);if(!D)throw new Error(`Unable to parse URL "${x}"`);return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}(a);return y.path+=`${u}${p}`,function(x){const D=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${D}`}(y)}setTransformRequest(a){this._transformRequestFn=a}}const Oo=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class hn{constructor(a,u,p,y){this.context=a,this.format=p,this.texture=a.gl.createTexture(),this.update(u,y)}update(a,u,p){const{width:y,height:x}=a,D=!(this.size&&this.size[0]===y&&this.size[1]===x||p),{context:k}=this,{gl:T}=k;if(this.useMipmap=!(!u||!u.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!u||!1!==u.premultiply)),D)this.size=[y,x],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||v.isImageBitmap(a)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,a):T.texImage2D(T.TEXTURE_2D,0,this.format,y,x,0,this.format,T.UNSIGNED_BYTE,a.data);else{const{x:P,y:L}=p||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||v.isImageBitmap(a)?T.texSubImage2D(T.TEXTURE_2D,0,P,L,T.RGBA,T.UNSIGNED_BYTE,a):T.texSubImage2D(T.TEXTURE_2D,0,P,L,y,x,T.RGBA,T.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(a,u,p){const{context:y}=this,{gl:x}=y;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||a),this.filter=a),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function fd(f){const{userImage:a}=f;return!!(a&&a.render&&a.render())&&(f.data.replace(new Uint8Array(a.data.buffer)),!0)}class hc extends v.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new v.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(a){return this.images[a]}addImage(a,u){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,u)&&(this.images[a]=u)}_validate(a,u){let p=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new v.ErrorEvent(new Error(`Image "${a}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new v.ErrorEvent(new Error(`Image "${a}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new v.ErrorEvent(new Error(`Image "${a}" has invalid "content" value`))),p=!1),p}_validateStretch(a,u){if(!a)return!0;let p=0;for(const y of a){if(y[0]<p||y[1]<y[0]||u<y[1])return!1;p=y[1]}return!0}_validateContent(a,u){return!(a&&(4!==a.length||a[0]<0||u.data.width<a[0]||a[1]<0||u.data.height<a[1]||a[2]<0||u.data.width<a[2]||a[3]<0||u.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,u){const p=this.images[a];if(p.data.width!==u.data.width||p.data.height!==u.data.height)throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=p.version+1,this.images[a]=u,this.updatedImages[a]=!0}removeImage(a){const u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,u){let p=!0;if(!this.isLoaded())for(const y of a)this.images[y]||(p=!1);this.isLoaded()||p?this._notify(a,u):this.requestors.push({ids:a,callback:u})}_notify(a,u){const p={};for(const y of a){this.images[y]||this.fire(new v.Event("styleimagemissing",{id:y}));const x=this.images[y];x?p[y]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!(!x.userImage||!x.userImage.render)}:v.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:a,height:u}=this.atlasImage;return{width:a,height:u}}getPattern(a){const u=this.patterns[a],p=this.getImage(a);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const y={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new v.ImagePosition(y,p);this.patterns[a]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new hn(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const x in this.patterns)a.push(this.patterns[x].bin);const{w:u,h:p}=v.potpack(a),y=this.atlasImage;y.resize({width:u||1,height:p||1});for(const x in this.patterns){const{bin:D}=this.patterns[x],k=D.x+1,T=D.y+1,P=this.images[x].data,L=P.width,z=P.height;v.RGBAImage.copy(P,y,{x:0,y:0},{x:k,y:T},{width:L,height:z}),v.RGBAImage.copy(P,y,{x:0,y:z-1},{x:k,y:T-1},{width:L,height:1}),v.RGBAImage.copy(P,y,{x:0,y:0},{x:k,y:T+z},{width:L,height:1}),v.RGBAImage.copy(P,y,{x:L-1,y:0},{x:k-1,y:T},{width:1,height:z}),v.RGBAImage.copy(P,y,{x:0,y:0},{x:k+L,y:T},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const u of a){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.images[u];p||v.warnOnce(`Image with ID: "${u}" was not found`),fd(p)&&this.updateImage(u,p)}}}const js=1e20;function Gr(f,a,u,p,y,x,D,k,T){for(let P=a;P<a+p;P++)Qo(f,u*x+P,x,y,D,k,T);for(let P=u;P<u+y;P++)Qo(f,P*x+a,1,p,D,k,T)}function Qo(f,a,u,p,y,x,D){x[0]=0,D[0]=-js,D[1]=js,y[0]=f[a];for(let k=1,T=0,P=0;k<p;k++){y[k]=f[a+k*u];const L=k*k;do{const z=x[T];P=(y[k]-y[z]+L-z*z)/(k-z)/2}while(P<=D[T]&&--T>-1);T++,x[T]=k,D[T]=P,D[T+1]=js}for(let k=0,T=0;k<p;k++){for(;D[T+1]<k;)T++;const P=x[T],L=k-P;f[a+k*u]=y[P]+L*L}}class xn{constructor(a,u){this.requestManager=a,this.localIdeographFontFamily=u,this.entries={}}setURL(a){this.url=a}getGlyphs(a,u){const p=[];for(const y in a)for(const x of a[y])p.push({stack:y,id:x});v.asyncAll(p,({stack:y,id:x},D)=>{let k=this.entries[y];k||(k=this.entries[y]={glyphs:{},requests:{},ranges:{}});let T=k.glyphs[x];if(void 0!==T)return void D(null,{stack:y,id:x,glyph:T});if(T=this._tinySDF(k,y,x),T)return k.glyphs[x]=T,void D(null,{stack:y,id:x,glyph:T});const P=Math.floor(x/256);if(256*P>65535)return void D(new Error("glyphs > 65535 not supported"));if(k.ranges[P])return void D(null,{stack:y,id:x,glyph:T});let L=k.requests[P];L||(L=k.requests[P]=[],xn.loadGlyphRange(y,P,this.url,this.requestManager,(z,H)=>{if(H){for(const ee in H)this._doesCharSupportLocalGlyph(+ee)||(k.glyphs[+ee]=H[+ee]);k.ranges[P]=!0}for(const ee of L)ee(z,H);delete k.requests[P]})),L.push((z,H)=>{z?D(z):H&&D(null,{stack:y,id:x,glyph:H[x]||null})})},(y,x)=>{if(y)u(y);else if(x){const D={};for(const{stack:k,id:T,glyph:P}of x)(D[k]||(D[k]={}))[T]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};u(null,D)}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(v.unicodeBlockLookup["CJK Unified Ideographs"](a)||v.unicodeBlockLookup["Hangul Syllables"](a)||v.unicodeBlockLookup.Hiragana(a)||v.unicodeBlockLookup.Katakana(a))}_tinySDF(a,u,p){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let x=a.tinySDF;if(!x){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),x=a.tinySDF=new xn.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:k})}const D=x.draw(String.fromCharCode(p));return{id:p,bitmap:new v.AlphaImage({width:D.width||30,height:D.height||30},D.data),metrics:{width:D.glyphWidth||24,height:D.glyphHeight||24,left:D.glyphLeft||0,top:D.glyphTop-27||-8,advance:D.glyphAdvance||24}}}}xn.loadGlyphRange=function(f,a,u,p,y){const x=256*a,D=x+255,k=p.transformRequest(u.replace("{fontstack}",f).replace("{range}",`${x}-${D}`),v.ResourceType.Glyphs);v.getArrayBuffer(k,(T,P)=>{if(T)y(T);else if(P){const L={};for(const z of v.parseGlyphPbf(P))L[z.id]=z;y(null,L)}})},xn.TinySDF=class{constructor({fontSize:f=24,buffer:a=3,radius:u=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:x="normal",fontStyle:D="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=u;const k=this.size=f+4*a,T=this._createCanvas(k),P=this.ctx=T.getContext("2d",{willReadFrequently:!0});P.font=`${D} ${x} ${f}px ${y}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(f){const a=document.createElement("canvas");return a.width=a.height=f,a}draw(f){const{width:a,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:x}=this.ctx.measureText(f),D=Math.ceil(u),k=Math.min(this.size-this.buffer,Math.ceil(x-y)),T=Math.min(this.size-this.buffer,D+Math.ceil(p)),P=k+2*this.buffer,L=T+2*this.buffer,z=Math.max(P*L,0),H=new Uint8ClampedArray(z),ee={data:H,width:P,height:L,glyphWidth:k,glyphHeight:T,glyphTop:D,glyphLeft:0,glyphAdvance:a};if(0===k||0===T)return ee;const{ctx:Q,buffer:J,gridInner:de,gridOuter:pe}=this;Q.clearRect(J,J,k,T),Q.fillText(f,J,J+D);const ve=Q.getImageData(J,J,k,T);pe.fill(js,0,z),de.fill(0,0,z);for(let ne=0;ne<T;ne++)for(let Ce=0;Ce<k;Ce++){const be=ve.data[4*(ne*k+Ce)+3]/255;if(0===be)continue;const Pe=(ne+J)*P+Ce+J;if(1===be)pe[Pe]=0,de[Pe]=js;else{const Oe=.5-be;pe[Pe]=Oe>0?Oe*Oe:0,de[Pe]=Oe<0?Oe*Oe:0}}Gr(pe,0,0,P,L,P,this.f,this.v,this.z),Gr(de,J,J,k,T,P,this.f,this.v,this.z);for(let ne=0;ne<z;ne++){const Ce=Math.sqrt(pe[ne])-Math.sqrt(de[ne]);H[ne]=Math.round(255-255*(Ce/this.radius+this.cutoff))}return ee}};const vs=new v.Properties({anchor:new v.DataConstantProperty(v.spec.light.anchor),position:new class{constructor(){this.specification=v.spec.light.position}possiblyEvaluate(f,a){return v.sphericalToCartesian(f.expression.evaluate(a))}interpolate(f,a,u){return{x:v.number(f.x,a.x,u),y:v.number(f.y,a.y,u),z:v.number(f.z,a.z,u)}}},color:new v.DataConstantProperty(v.spec.light.color),intensity:new v.DataConstantProperty(v.spec.light.intensity)}),bs="-transition";class Fo extends v.Evented{constructor(a){super(),this._transitionable=new v.Transitionable(vs),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u={}){if(!this._validate(v.validateLight,a,u))for(const p in a){const y=a[p];p.endsWith(bs)?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,p){return(!p||!1!==p.validate)&&v.emitValidationErrors(this,a.call(v.validateStyle,v.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:v.spec})))}}class vl{constructor(a,u){this.width=a,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,u){const p=a.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(a,u)),this.dashEntry[p]}getDashRanges(a,u,p){const y=[];let x=a.length%2==1?-a[a.length-1]*p:0,D=a[0]*p,k=!0;y.push({left:x,right:D,isDash:k,zeroLength:0===a[0]});let T=a[0];for(let P=1;P<a.length;P++){k=!k;const L=a[P];x=T*p,T+=L,D=T*p,y.push({left:x,right:D,isDash:k,zeroLength:0===L})}return y}addRoundDash(a,u,p){const y=u/2;for(let x=-p;x<=p;x++){const D=this.width*(this.nextRow+p+x);let k=0,T=a[k];for(let P=0;P<this.width;P++){P/T.right>1&&(T=a[++k]);const L=Math.abs(P-T.left),z=Math.abs(P-T.right),H=Math.min(L,z);let ee;const Q=x/p*(y+1);if(T.isDash){const J=y-Math.abs(Q);ee=Math.sqrt(H*H+J*J)}else ee=y-Math.sqrt(H*H+Q*Q);this.data[D+P]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(a){for(let k=a.length-1;k>=0;--k){const T=a[k],P=a[k+1];T.zeroLength?a.splice(k,1):P&&P.isDash===T.isDash&&(P.left=T.left,a.splice(k,1))}const u=a[0],p=a[a.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const y=this.width*this.nextRow;let x=0,D=a[x];for(let k=0;k<this.width;k++){k/D.right>1&&(D=a[++x]);const T=Math.abs(k-D.left),P=Math.abs(k-D.right),L=Math.min(T,P);this.data[y+k]=Math.max(0,Math.min(255,(D.isDash?L:-L)+128))}}addDash(a,u){const p=u?7:0,y=2*p+1;if(this.nextRow+y>this.height)return v.warnOnce("LineAtlas out of space"),null;let x=0;for(let k=0;k<a.length;k++)x+=a[k];if(0!==x){const k=this.width/x,T=this.getDashRanges(a,this.width,k);u?this.addRoundDash(T,k,p):this.addRegularDash(T)}const D={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=y,this.dirty=!0,D}bind(a){const u=a.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Hs{constructor(a,u){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=v.uniqueId();const p=this.workerPool.acquire(this.id);for(let y=0;y<p.length;y++){const x=new Hs.Actor(p[y],u,this.id);x.name=`Worker ${y}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,u,p){v.asyncAll(this.actors,(y,x)=>{y.send(a,u,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Jo(f,a,u){const p=function(y,x){if(y)return u(y);if(x){const D=v.pick(v.extend(x,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(D.vectorLayers=x.vector_layers,D.vectorLayerIds=D.vectorLayers.map(k=>k.id)),u(null,D)}};return f.url?v.getJSON(a.transformRequest(f.url,v.ResourceType.Source),p):v.exported.frame(()=>p(null,f))}Hs.Actor=v.Actor;class Lo{constructor(a,u,p){this.bounds=v.LngLatBounds.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(a){return Array.isArray(a)&&4===a.length?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const u=Math.pow(2,a.z),p=Math.floor(v.mercatorXfromLng(this.bounds.getWest())*u),y=Math.floor(v.mercatorYfromLat(this.bounds.getNorth())*u),x=Math.ceil(v.mercatorXfromLng(this.bounds.getEast())*u),D=Math.ceil(v.mercatorYfromLat(this.bounds.getSouth())*u);return a.x>=p&&a.x<x&&a.y>=y&&a.y<D}}class bl extends v.Evented{constructor(a,u,p,y){if(super(),this.id=a,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,v.extend(this,v.pick(u,["url","scheme","tileSize","promoteId"])),this._options=v.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Jo(this._options,this.map._requestManager,(a,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a?this.fire(new v.ErrorEvent(a)):u&&(v.extend(this,u),u.bounds&&(this.tileBounds=new Lo(u.bounds,this.minzoom,this.maxzoom)),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return v.extend({},this._options)}loadTile(a,u){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(p,v.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(D,k){return delete a.request,a.aborted?u(null):D&&404!==D.status?u(D):(k&&k.resourceTiming&&(a.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&a.setExpiryData(k),a.loadVectorData(k,this.map.painter),v.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,a.actor&&"expired"!==a.state?"loading"===a.state?a.reloadCallback=u:a.request=a.actor.send("reloadTile",y,x.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",y,x.bind(this)))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class xs extends v.Evented{constructor(a,u,p,y){super(),this.id=a,this.dispatcher=p,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=v.extend({type:"raster"},u),v.extend(this,v.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Jo(this._options,this.map._requestManager,(a,u)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new v.ErrorEvent(a)):u&&(v.extend(this,u),u.bounds&&(this.tileBounds=new Lo(u.bounds,this.minzoom,this.maxzoom)),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return v.extend({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,u){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.request=v.getImage(this.map._requestManager.transformRequest(p,v.ResourceType.Tile),(y,x,D)=>{if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(y)a.state="errored",u(y);else if(x){this.map._refreshExpiredTiles&&a.setExpiryData(D);const k=this.map.painter.context,T=k.gl;a.texture=this.map.painter.getTileTexture(x.width),a.texture?a.texture.update(x,{useMipmap:!0}):(a.texture=new hn(k,x,T.RGBA,{useMipmap:!0}),a.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&T.texParameterf(T.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),a.state="loaded",v.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(a,u){a.request&&(a.request.cancel(),delete a.request),u()}unloadTile(a,u){a.texture&&this.map.painter.saveTileTexture(a.texture),u()}hasTransition(){return!1}}let ua;class Pt extends xs{constructor(a,u,p,y){super(a,u,p,y),this.type="raster-dem",this.maxzoom=22,this._options=v.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(a,u){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(x,D){x&&(a.state="errored",u(x)),D&&(a.dem=D,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded",u(null))}a.request=v.getImage(this.map._requestManager.transformRequest(p,v.ResourceType.Tile),function(x,D){if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(x)a.state="errored",u(x);else if(D){this.map._refreshExpiredTiles&&a.setExpiryData(D),delete D.cacheControl,delete D.expires;const k=v.isImageBitmap(D)&&(null==ua&&(ua=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),ua)?D:v.exported.getImageData(D,1),T={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:k,encoding:this.encoding};a.actor&&"expired"!==a.state||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",T,y.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)}_getNeighboringTiles(a){const u=a.canonical,p=Math.pow(2,u.z),y=(u.x-1+p)%p,x=0===u.x?a.wrap-1:a.wrap,D=(u.x+1+p)%p,k=u.x+1===p?a.wrap+1:a.wrap,T={};return T[new v.OverscaledTileID(a.overscaledZ,x,u.z,y,u.y).key]={backfilled:!1},T[new v.OverscaledTileID(a.overscaledZ,k,u.z,D,u.y).key]={backfilled:!1},u.y>0&&(T[new v.OverscaledTileID(a.overscaledZ,x,u.z,y,u.y-1).key]={backfilled:!1},T[new v.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},T[new v.OverscaledTileID(a.overscaledZ,k,u.z,D,u.y-1).key]={backfilled:!1}),u.y+1<p&&(T[new v.OverscaledTileID(a.overscaledZ,x,u.z,y,u.y+1).key]={backfilled:!1},T[new v.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},T[new v.OverscaledTileID(a.overscaledZ,k,u.z,D,u.y+1).key]={backfilled:!1}),T}unloadTile(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})}}class Er extends v.Evented{constructor(a,u,p,y){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(y),this._data=u.data,this._options=v.extend({},u),this._collectResourceTiming=u.collectResourceTiming,void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const x=v.EXTENT/this.tileSize;this.workerOptions=v.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(void 0!==u.buffer?u.buffer:128)*x,tolerance:(void 0!==u.tolerance?u.tolerance:.375)*x,extent:v.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:void 0!==u.clusterMaxZoom?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:v.EXTENT,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData("content"),this}getClusterExpansionZoom(a,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},u),this}getClusterChildren(a,u){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},u),this}getClusterLeaves(a,u,p,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:u,offset:p},y),this}_updateWorkerData(a){const u=v.extend({},this.workerOptions),p=this._data;"string"==typeof p?(u.request=this.map._requestManager.transformRequest(v.exported.resolveURL(p),v.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(p),this._pendingLoads++,this.fire(new v.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(y,x)=>{if(this._pendingLoads--,this._removed||x&&x.abandoned)return void this.fire(new v.Event("dataabort",{dataType:"source",sourceDataType:a}));let D=null;if(x&&x.resourceTiming&&x.resourceTiming[this.id]&&(D=x.resourceTiming[this.id].slice(0)),y)return void this.fire(new v.ErrorEvent(y));const k={dataType:"source",sourceDataType:a};this._collectResourceTiming&&D&&D.length>0&&v.extend(k,{resourceTiming:D}),this.fire(new v.Event("data",k))})}loaded(){return 0===this._pendingLoads}loadTile(a,u){const p=a.actor?"reloadTile":"loadTile";a.actor=this.actor;const y={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.request=this.actor.send(p,y,(x,D)=>(delete a.request,a.unloadVectorData(),a.aborted?u(null):x?u(x):(a.loadVectorData(D,this.map.painter,"reloadTile"===p),u(null))))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0}unloadTile(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return v.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var $s=v.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class No extends v.Evented{constructor(a,u,p,y){super(),this.id=a,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}load(a,u){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this.url=this.options.url,v.getImage(this.map._requestManager.transformRequest(this.url,v.ResourceType.Image),(p,y)=>{this._loaded=!0,p?this.fire(new v.ErrorEvent(p)):y&&(this.image=y,a&&(this.coordinates=a),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(a){return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}setCoordinates(a){this.coordinates=a;const u=a.map(v.MercatorCoordinate.fromLngLat);this.tileID=function(y){let x=1/0,D=1/0,k=-1/0,T=-1/0;for(const H of y)x=Math.min(x,H.x),D=Math.min(D,H.y),k=Math.max(k,H.x),T=Math.max(T,H.y);const P=Math.max(k-x,T-D),L=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),z=Math.pow(2,L);return new v.CanonicalTileID(L,Math.floor((x+k)/2*z),Math.floor((D+T)/2*z))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new v.RasterBoundsArray,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,v.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,v.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,v.EXTENT,v.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const a=this.map.painter.context,u=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,$s.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new hn(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const p in this.tiles){const y=this.tiles[p];"loaded"!==y.state&&(y.state="loaded",y.texture=this.texture)}}loadTile(a,u){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},u(null)):(a.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Si extends No{constructor(a,u,p,y){super(a,u,p,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const a=this.options;this.urls=[];for(const u of a.urls)this.urls.push(this.map._requestManager.transformRequest(u,v.ResourceType.Source).url);v.getVideo(this.urls,(u,p)=>{this._loaded=!0,u?this.fire(new v.ErrorEvent(u)):p&&(this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const u=this.video.seekable;a<u.start(0)||a>u.end(0)?this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const a=this.map.painter.context,u=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,$s.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new hn(a,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const p in this.tiles){const y=this.tiles[p];"loaded"!==y.state&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ha extends No{constructor(a,u,p,y){super(a,u,p,y),u.coordinates?Array.isArray(u.coordinates)&&4===u.coordinates.length&&!u.coordinates.some(x=>!Array.isArray(x)||2!==x.length||x.some(D=>"number"!=typeof D))||this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'missing required property "coordinates"'))),u.animate&&"boolean"!=typeof u.animate&&this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),u.canvas?"string"==typeof u.canvas||u.canvas instanceof HTMLCanvasElement||this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'missing required property "canvas"'))),this.options=u,this.animate=void 0===u.animate||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new v.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,$s.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new hn(u,this.canvas,p.RGBA,{premultiply:!0});for(const y in this.tiles){const x=this.tiles[y];"loaded"!==x.state&&(x.state="loaded",x.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const xl={vector:bl,raster:xs,"raster-dem":Pt,geojson:Er,video:Si,image:No,canvas:ha};function wl(f,a){const u=v.create();return v.translate(u,u,[1,1,0]),v.scale(u,u,[.5*f.width,.5*f.height,1]),v.multiply(u,u,f.calculatePosMatrix(a.toUnwrapped()))}function Cl(f,a,u,p,y,x){const D=function(z,H,ee){if(z)for(const Q of z){const J=H[Q];if(J&&J.source===ee&&"fill-extrusion"===J.type)return!0}else for(const Q in H){const J=H[Q];if(J.source===ee&&"fill-extrusion"===J.type)return!0}return!1}(y&&y.layers,a,f.id),k=x.maxPitchScaleFactor(),T=f.tilesIn(p,k,D);T.sort(Ct);const P=[];for(const z of T)P.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(a,u,f._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,y,x,k,wl(f.transform,z.tileID))});const L=function(z){const H={},ee={};for(const Q of z){const J=Q.queryResults,de=Q.wrappedTileID,pe=ee[de]=ee[de]||{};for(const ve in J){const ne=J[ve],Ce=pe[ve]=pe[ve]||{},be=H[ve]=H[ve]||[];for(const Pe of ne)Ce[Pe.featureIndex]||(Ce[Pe.featureIndex]=!0,be.push(Pe))}}return H}(P);for(const z in L)L[z].forEach(H=>{const ee=H.feature,Q=f.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=Q});return L}function Ct(f,a){const u=f.tileID,p=a.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class Gs{constructor(a,u){this.tileID=a,this.uid=v.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const u=a+this.timeAdded;u<v.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.textures.forEach(u=>a.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(a,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(y,x){const D={};if(!x)return D;for(const k of y){const T=k.layerIds.map(P=>x.getLayer(P)).filter(Boolean);if(0!==T.length){k.layers=T,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(P=>T.filter(L=>L.id===P)[0]));for(const P of T)D[P.id]=k}}return D}(a.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const x=this.buckets[y];if(x instanceof v.SymbolBucket){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const x=this.buckets[y];if(x instanceof v.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,v.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const x=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(x))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new v.CollisionBoxArray}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(a)}const u=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hn(a,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hn(a,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,u,p,y,x,D,k,T,P,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:D,tileSize:this.tileSize,pixelPosMatrix:L,transform:T,params:k,queryPadding:this.queryPadding*P},a,u,p):{}}querySourceFeatures(a,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),x=u?u.sourceLayer:"",D=y._geojsonTileLayer||y[x];if(!D)return;const k=v.createFilter(u&&u.filter),{z:T,x:P,y:L}=this.tileID.canonical,z={z:T,x:P,y:L};for(let H=0;H<D.length;H++){const ee=D.feature(H);if(k.needGeometry){const de=v.toEvaluationFeature(ee,!0);if(!k.filter(new v.EvaluationParameters(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!k.filter(new v.EvaluationParameters(this.tileID.overscaledZ),ee))continue;const Q=p.getId(ee,x),J=new v.GeoJSONFeature(ee,T,P,L,Q);J.tile=z,a.push(J)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const u=this.expirationTime;if(a.cacheControl){const p=v.parseCacheControl(a.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const x=this.expirationTime-u;x?this.expirationTime=p+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(a).length)return;const p=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const x=this.buckets[y],D=x.layers[0].sourceLayer||"_geojsonTileLayer",k=p[D],T=a[D];if(!k||!T||0===Object.keys(T).length)continue;x.update(T,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=u&&u.style&&u.style.getLayer(y);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(x)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=v.exported.now()+a}setDependencies(a,u){const p={};for(const y of u)p[y]=!0;this.dependencies[a]=p}hasDependency(a,u){for(const p of a){const y=this.dependencies[p];if(y)for(const x of u)if(y[x])return!0}return!1}}class Pn{constructor(a,u){this.max=a,this.onRemove=u,this.reset()}reset(){for(const a in this.data)for(const u of this.data[a])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(a,u,p){const y=a.wrapped().key;void 0===this.data[y]&&(this.data[y]=[]);const x={value:u,timeout:void 0};if(void 0!==p&&(x.timeout=setTimeout(()=>{this.remove(a,x)},p)),this.data[y].push(x),this.order.push(y),this.order.length>this.max){const D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const u=this.data[a].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),u.value}getByKey(a){const u=this.data[a];return u?u[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,u){if(!this.has(a))return this;const p=a.wrapped().key,y=void 0===u?0:this.data[p].indexOf(u),x=this.data[p][y];return this.data[p].splice(y,1),x.timeout&&clearTimeout(x.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(a){const u=[];for(const p in this.data)for(const y of this.data[p])a(y.value)||u.push(y);for(const p of u)this.remove(p.value.tileID,p)}}class qs{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,u,p){const y=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][y]=this.stateChanges[a][y]||{},v.extend(this.stateChanges[a][y],p),null===this.deletedStates[a]){this.deletedStates[a]={};for(const x in this.state[a])x!==y&&(this.deletedStates[a][x]=null)}else if(this.deletedStates[a]&&null===this.deletedStates[a][y]){this.deletedStates[a][y]={};for(const x in this.state[a][y])p[x]||(this.deletedStates[a][y][x]=null)}else for(const x in p)this.deletedStates[a]&&this.deletedStates[a][y]&&null===this.deletedStates[a][y][x]&&delete this.deletedStates[a][y][x]}removeFeatureState(a,u,p){if(null===this.deletedStates[a])return;const y=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},p&&void 0!==u)null!==this.deletedStates[a][y]&&(this.deletedStates[a][y]=this.deletedStates[a][y]||{},this.deletedStates[a][y][p]=null);else if(void 0!==u)if(this.stateChanges[a]&&this.stateChanges[a][y])for(p in this.deletedStates[a][y]={},this.stateChanges[a][y])this.deletedStates[a][y][p]=null;else this.deletedStates[a][y]=null;else this.deletedStates[a]=null}getState(a,u){const p=String(u),y=v.extend({},(this.state[a]||{})[p],(this.stateChanges[a]||{})[p]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){const x=this.deletedStates[a][u];if(null===x)return{};for(const D in x)delete y[D]}return y}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const x={};for(const D in this.stateChanges[y])this.state[y][D]||(this.state[y][D]={}),v.extend(this.state[y][D],this.stateChanges[y][D]),x[D]=this.state[y][D];p[y]=x}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const x={};if(null===this.deletedStates[y])for(const D in this.state[y])x[D]={},this.state[y][D]={};else for(const D in this.deletedStates[y]){if(null===this.deletedStates[y][D])this.state[y][D]={};else for(const k of Object.keys(this.deletedStates[y][D]))delete this.state[y][D][k];x[D]=this.state[y][D]}p[y]=p[y]||{},v.extend(p[y],x)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const y in a)a[y].setFeatureState(p,u)}}class Ti extends v.Evented{constructor(a,u,p){super(),this.id=a,this.dispatcher=p,this.on("data",y=>{"source"===y.dataType&&"metadata"===y.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===y.dataType&&"content"===y.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(y,x,D,k){const T=new xl[x.type](y,x,D,k);if(T.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${T.id}`);return v.bindAll(["load","abort","unload","serialize","prepare"],T),T}(a,u,p,this),this._tiles={},this._cache=new Pn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new qs}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const u=this._tiles[a];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,u){return this._source.loadTile(a,u)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){this._source.abortTile&&this._source.abortTile(a,()=>{}),this._source.fire(new v.Event("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(a),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(nn).map(a=>a.key)}getRenderableIds(a){const u=[];for(const p in this._tiles)this._isIdRenderable(p,a)&&u.push(this._tiles[p]);return a?u.sort((p,y)=>{const x=p.tileID,D=y.tileID,k=new v.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),T=new v.pointGeometry(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-D.overscaledZ||T.y-k.y||T.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(nn).map(p=>p.key)}hasRenderableParent(a){const u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(a,u){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(a,"reloading")}}_reloadTile(a,u){const p=this._tiles[a];p&&("loading"!==p.state&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,a,u)))}_tileLoaded(a,u,p,y){if(y)return a.state="errored",void(404!==y.status?this._source.fire(new v.ErrorEvent(y,{tile:a})):this.update(this.transform,this.terrain));a.timeAdded=v.exported.now(),"expired"===p&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),"raster-dem"===this.getSource().type&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new v.Event("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const x=u[y];if(a.neighboringTiles&&a.neighboringTiles[x]){const D=this.getTileByID(x);p(a,D),p(D,a)}}function p(y,x){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let D=x.tileID.canonical.x-y.tileID.canonical.x;const k=x.tileID.canonical.y-y.tileID.canonical.y,T=Math.pow(2,y.tileID.canonical.z),P=x.tileID.key;0===D&&0===k||Math.abs(k)>1||(Math.abs(D)>1&&(1===Math.abs(D+T)?D+=T:1===Math.abs(D-T)&&(D-=T)),x.dem&&y.dem&&(y.dem.backfillBorder(x.dem,D,k),y.neighboringTiles&&y.neighboringTiles[P]&&(y.neighboringTiles[P].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,u,p,y){for(const x in this._tiles){let D=this._tiles[x];if(y[x]||!D.hasData()||D.tileID.overscaledZ<=u||D.tileID.overscaledZ>p)continue;let k=D.tileID;for(;D&&D.tileID.overscaledZ>u+1;){const P=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[P.key],D&&D.hasData()&&(k=P)}let T=k;for(;T.overscaledZ>u;)if(T=T.scaledTo(T.overscaledZ-1),a[T.key]){y[k.key]=k;break}}}findLoadedParent(a,u){if(a.key in this._loadedParentTiles){const p=this._loadedParentTiles[a.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=a.overscaledZ-1;p>=u;p--){const y=a.scaledTo(p),x=this._getLoadedTile(y);if(x)return x}}_getLoadedTile(a){const u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const u=Math.ceil(a.width/this._source.tileSize)+1,p=Math.ceil(a.height/this._source.tileSize)+1,y=Math.floor(u*p*5),x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(a){const u=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,u){const p={};for(const y in this._tiles){const x=this._tiles[y];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),p[x.tileID.key]=x}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(a,u){if(this.transform=a,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(P=>new v.OverscaledTileID(P.canonical.z,P.wrap,P.canonical.z,P.canonical.x,P.canonical.y)):(p=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(P=>this._source.hasTile(P)))):p=[];const y=a.coveringZoomLevel(this._source),x=Math.max(y-Ti.maxOverzooming,this._source.minzoom),D=Math.max(y+Ti.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const P={};for(const L of p)if(L.canonical.z>this._source.minzoom){const z=L.scaledTo(L.canonical.z-1);P[z.key]=z;const H=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));P[H.key]=H}p=p.concat(Object.values(P))}const k=this._updateRetainedTiles(p,y);if(mc(this._source.type)){const P={},L={},z=Object.keys(k);for(const H of z){const ee=k[H],Q=this._tiles[H];if(!Q||Q.fadeEndTime&&Q.fadeEndTime<=v.exported.now())continue;const J=this.findLoadedParent(ee,x);J&&(this._addTile(J.tileID),P[J.tileID.key]=J.tileID),L[H]=ee}this._retainLoadedChildren(L,y,D,k);for(const H in P)k[H]||(this._coveredTiles[H]=!0,k[H]=P[H]);if(u){const H={},ee={};for(const Q of p)this._tiles[Q.key].hasData()?H[Q.key]=Q:ee[Q.key]=Q;for(const Q in ee){const J=ee[Q].children(this._source.maxzoom);this._tiles[J[0].key]&&this._tiles[J[1].key]&&this._tiles[J[2].key]&&this._tiles[J[3].key]&&(H[J[0].key]=k[J[0].key]=J[0],H[J[1].key]=k[J[1].key]=J[1],H[J[2].key]=k[J[2].key]=J[2],H[J[3].key]=k[J[3].key]=J[3],delete ee[Q])}for(const Q in ee){const J=this.findLoadedParent(ee[Q],this._source.minzoom);if(J){H[J.tileID.key]=k[J.tileID.key]=J.tileID;for(const de in H)H[de].isChildOf(J.tileID)&&delete H[de]}}for(const Q in this._tiles)H[Q]||(this._coveredTiles[Q]=!0)}}for(const P in k)this._tiles[P].clearFadeHold();const T=v.keysDifference(this._tiles,k);for(const P of T){const L=this._tiles[P];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(P)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,u){const p={},y={},x=Math.max(u-Ti.maxOverzooming,this._source.minzoom),D=Math.max(u+Ti.maxUnderzooming,this._source.minzoom),k={};for(const T of a){const P=this._addTile(T);p[T.key]=T,P.hasData()||u<this._source.maxzoom&&(k[T.key]=T)}this._retainLoadedChildren(k,u,D,p);for(const T of a){let P=this._tiles[T.key];if(P.hasData())continue;if(u+1>this._source.maxzoom){const z=T.children(this._source.maxzoom)[0],H=this.getTile(z);if(H&&H.hasData()){p[z.key]=z;continue}}else{const z=T.children(this._source.maxzoom);if(p[z[0].key]&&p[z[1].key]&&p[z[2].key]&&p[z[3].key])continue}let L=P.wasRequested();for(let z=T.overscaledZ-1;z>=x;--z){const H=T.scaledTo(z);if(y[H.key]||(y[H.key]=!0,P=this.getTile(H),!P&&L&&(P=this._addTile(H)),P&&(p[H.key]=H,L=P.wasRequested(),P.hasData())))break}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const u=[];let p,y=this._tiles[a].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}u.push(y.key);const x=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;y=x}for(const x of u)this._loadedParentTiles[x]=p}}_addTile(a){let u=this._tiles[a.key];if(u)return u;u=this._cache.getAndRemove(a),u&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));const p=u;return u||(u=new Gs(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))),u.uses++,this._tiles[a.key]=u,p||this._source.fire(new v.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(a,u){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const p=u.getExpiryTimeout();p&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},p))}_removeTile(a){const u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,u,p){const y=[],x=this.transform;if(!x)return y;const D=p?x.getCameraQueryGeometry(a):a,k=a.map(Q=>x.pointCoordinate(Q,this.terrain)),T=D.map(Q=>x.pointCoordinate(Q,this.terrain)),P=this.getIds();let L=1/0,z=1/0,H=-1/0,ee=-1/0;for(const Q of T)L=Math.min(L,Q.x),z=Math.min(z,Q.y),H=Math.max(H,Q.x),ee=Math.max(ee,Q.y);for(let Q=0;Q<P.length;Q++){const J=this._tiles[P[Q]];if(J.holdingForFade())continue;const de=J.tileID,pe=Math.pow(2,x.zoom-J.tileID.overscaledZ),ve=u*J.queryPadding*v.EXTENT/J.tileSize/pe,ne=[de.getTilePoint(new v.MercatorCoordinate(L,z)),de.getTilePoint(new v.MercatorCoordinate(H,ee))];if(ne[0].x-ve<v.EXTENT&&ne[0].y-ve<v.EXTENT&&ne[1].x+ve>=0&&ne[1].y+ve>=0){const Ce=k.map(Pe=>de.getTilePoint(Pe)),be=T.map(Pe=>de.getTilePoint(Pe));y.push({tile:J,tileID:de,queryGeometry:Ce,cameraQueryGeometry:be,scale:pe})}}return y}getVisibleCoordinates(a){const u=this.getRenderableIds(a).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(mc(this._source.type))for(const a in this._tiles){const u=this._tiles[a];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=v.exported.now())return!0}return!1}setFeatureState(a,u,p){this._state.updateState(a=a||"_geojsonTileLayer",u,p)}removeFeatureState(a,u,p){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,p)}getFeatureState(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)}setDependencies(a,u,p){const y=this._tiles[a];y&&y.setDependencies(u,p)}reloadTilesForDependencies(a,u){for(const p in this._tiles)this._tiles[p].hasDependency(a,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(a,u))}}function nn(f,a){const u=Math.abs(2*f.wrap)-+(f.wrap<0),p=Math.abs(2*a.wrap)-+(a.wrap<0);return f.overscaledZ-a.overscaledZ||p-u||a.canonical.y-f.canonical.y||a.canonical.x-f.canonical.x}function mc(f){return"raster"===f||"image"===f||"video"===f}Ti.maxOverzooming=10,Ti.maxUnderzooming=3;const Gt="mapboxgl_preloaded_worker_pool";class qr{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<qr.workerCount;)this.workers.push(new Worker(ss.workerUrl));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Gt]}numActive(){return Object.keys(this.active).length}}const pc=Math.floor(v.exported.hardwareConcurrency/2);let ws;function Dl(){return ws||(ws=new qr),ws}function El(f,a){const u={};for(const p in f)"ref"!==p&&(u[p]=f[p]);return v.refProperties.forEach(p=>{p in a&&(u[p]=a[p])}),u}function fc(f){f=f.slice();const a=Object.create(null);for(let u=0;u<f.length;u++)a[f[u].id]=f[u];for(let u=0;u<f.length;u++)"ref"in f[u]&&(f[u]=El(f[u],a[f[u].ref]));return f}qr.workerCount=Math.max(Math.min(pc,6),1);const Mi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Cs(f,a,u){u.push({command:Mi.addSource,args:[f,a[f]]})}function ma(f,a,u){a.push({command:Mi.removeSource,args:[f]}),u[f]=!0}function pa(f,a,u,p){ma(f,u,p),Cs(f,a,u)}function gc(f,a,u){let p;for(p in f[u])if(Object.prototype.hasOwnProperty.call(f[u],p)&&"data"!==p&&!Oi(f[u][p],a[u][p]))return!1;for(p in a[u])if(Object.prototype.hasOwnProperty.call(a[u],p)&&"data"!==p&&!Oi(f[u][p],a[u][p]))return!1;return!0}function Ds(f,a,u,p,y,x){let D;for(D in a=a||{},f=f||{})Object.prototype.hasOwnProperty.call(f,D)&&(Oi(f[D],a[D])||u.push({command:x,args:[p,D,a[D],y]}));for(D in a)Object.prototype.hasOwnProperty.call(a,D)&&!Object.prototype.hasOwnProperty.call(f,D)&&(Oi(f[D],a[D])||u.push({command:x,args:[p,D,a[D],y]}))}function Ws(f){return f.id}function fa(f,a){return f[a.id]=a,f}class Zs{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(1===this.points.length)return this.points[0];a=v.clamp(a,0,1);let u=1,p=this._distances[u];const y=a*this.paddedLength+this.padding;for(;p<y&&u<this._distances.length;)p=this._distances[++u];const x=u-1,D=this._distances[x],k=p-D,T=k>0?(y-D)/k:0;return this.points[x].mult(1-T).add(this.points[u].mult(T))}}function Re(f,a){let u=!0;return"always"===f||"never"!==f&&"never"!==a||(u=!1),u}class et{constructor(a,u,p){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(a/p),this.yCellCount=Math.ceil(u/p);for(let D=0;D<this.xCellCount*this.yCellCount;D++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,p,y,x){this._forEachCell(u,p,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(a,u,p,y){this._forEachCell(u-y,p-y,u+y,p+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(p),this.circles.push(y)}_insertBoxCell(a,u,p,y,x,D){this.boxCells[x].push(D)}_insertCircleCell(a,u,p,y,x,D){this.circleCells[x].push(D)}_query(a,u,p,y,x,D,k){if(p<0||a>this.width||y<0||u>this.height)return[];const T=[];if(a<=0&&u<=0&&this.width<=p&&this.height<=y){if(x)return[{key:null,x1:a,y1:u,x2:p,y2:y}];for(let P=0;P<this.boxKeys.length;P++)T.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const L=this.circles[3*P],z=this.circles[3*P+1],H=this.circles[3*P+2];T.push({key:this.circleKeys[P],x1:L-H,y1:z-H,x2:L+H,y2:z+H})}}else this._forEachCell(a,u,p,y,this._queryCell,T,{hitTest:x,overlapMode:D,seenUids:{box:{},circle:{}}},k);return T}query(a,u,p,y){return this._query(a,u,p,y,!1,null)}hitTest(a,u,p,y,x,D){return this._query(a,u,p,y,!0,x,D).length>0}hitTestCircle(a,u,p,y,x){const D=a-p,k=a+p,T=u-p,P=u+p;if(k<0||D>this.width||P<0||T>this.height)return!1;const L=[];return this._forEachCell(D,T,k,P,this._queryCellCircle,L,{hitTest:!0,overlapMode:y,circle:{x:a,y:u,radius:p},seenUids:{box:{},circle:{}}},x),L.length>0}_queryCell(a,u,p,y,x,D,k,T){const{seenUids:P,hitTest:L,overlapMode:z}=k,H=this.boxCells[x];if(null!==H){const Q=this.bboxes;for(const J of H)if(!P.box[J]){P.box[J]=!0;const de=4*J,pe=this.boxKeys[J];if(a<=Q[de+2]&&u<=Q[de+3]&&p>=Q[de+0]&&y>=Q[de+1]&&(!T||T(pe))&&(!L||!Re(z,pe.overlapMode))&&(D.push({key:pe,x1:Q[de],y1:Q[de+1],x2:Q[de+2],y2:Q[de+3]}),L))return!0}}const ee=this.circleCells[x];if(null!==ee){const Q=this.circles;for(const J of ee)if(!P.circle[J]){P.circle[J]=!0;const de=3*J,pe=this.circleKeys[J];if(this._circleAndRectCollide(Q[de],Q[de+1],Q[de+2],a,u,p,y)&&(!T||T(pe))&&(!L||!Re(z,pe.overlapMode))){const ve=Q[de],ne=Q[de+1],Ce=Q[de+2];if(D.push({key:pe,x1:ve-Ce,y1:ne-Ce,x2:ve+Ce,y2:ne+Ce}),L)return!0}}}return!1}_queryCellCircle(a,u,p,y,x,D,k,T){const{circle:P,seenUids:L,overlapMode:z}=k,H=this.boxCells[x];if(null!==H){const Q=this.bboxes;for(const J of H)if(!L.box[J]){L.box[J]=!0;const de=4*J,pe=this.boxKeys[J];if(this._circleAndRectCollide(P.x,P.y,P.radius,Q[de+0],Q[de+1],Q[de+2],Q[de+3])&&(!T||T(pe))&&!Re(z,pe.overlapMode))return D.push(!0),!0}}const ee=this.circleCells[x];if(null!==ee){const Q=this.circles;for(const J of ee)if(!L.circle[J]){L.circle[J]=!0;const de=3*J,pe=this.circleKeys[J];if(this._circlesCollide(Q[de],Q[de+1],Q[de+2],P.x,P.y,P.radius)&&(!T||T(pe))&&!Re(z,pe.overlapMode))return D.push(!0),!0}}}_forEachCell(a,u,p,y,x,D,k,T){const P=this._convertToXCellCoord(a),L=this._convertToYCellCoord(u),z=this._convertToXCellCoord(p),H=this._convertToYCellCoord(y);for(let ee=P;ee<=z;ee++)for(let Q=L;Q<=H;Q++)if(x.call(this,a,u,p,y,this.xCellCount*Q+ee,D,k,T))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,p,y,x,D){const k=y-a,T=x-u,P=p+D;return P*P>k*k+T*T}_circleAndRectCollide(a,u,p,y,x,D,k){const T=(D-y)/2,P=Math.abs(a-(y+T));if(P>T+p)return!1;const L=(k-x)/2,z=Math.abs(u-(x+L));if(z>L+p)return!1;if(P<=T||z<=L)return!0;const H=P-T,ee=z-L;return H*H+ee*ee<=p*p}}function Wa(f,a,u,p,y){const x=v.create();return a?(v.scale(x,x,[1/y,1/y,1]),u||v.rotateZ(x,x,p.angle)):v.multiply(x,p.labelPlaneMatrix,f),x}function es(f,a,u,p,y){if(a){const x=v.clone(f);return v.scale(x,x,[y,y,1]),u||v.rotateZ(x,x,-p.angle),x}return p.glCoordMatrix}function ki(f,a,u){let p;u?(p=[f.x,f.y,u(f.x,f.y),1],v.transformMat4(p,p,a)):(p=[f.x,f.y,0,1],Xs(p,p,a));const y=p[3];return{point:new v.pointGeometry(p[0]/y,p[1]/y),signedDistanceFromCamera:y}}function Wn(f,a){return.5+f/a*.5}function so(f,a){const u=f[0]/f[3],p=f[1]/f[3];return u>=-a[0]&&u<=a[0]&&p>=-a[1]&&p<=a[1]}function wo(f,a,u,p,y,x,D,k,T,P){const L=p?f.textSizeData:f.iconSizeData,z=v.evaluateSizeForZoom(L,u.transform.zoom),H=[256/u.width*2+1,256/u.height*2+1],ee=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;ee.clear();const Q=f.lineVertexArray,J=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,de=u.transform.width/u.transform.height;let pe=!1;for(let ve=0;ve<J.length;ve++){const ne=J.get(ve);if(ne.hidden||ne.writingMode===v.WritingMode.vertical&&!pe){Ht(ne.numGlyphs,ee);continue}let Ce;if(pe=!1,P?(Ce=[ne.anchorX,ne.anchorY,P(ne.anchorX,ne.anchorY),1],v.transformMat4(Ce,Ce,a)):(Ce=[ne.anchorX,ne.anchorY,0,1],Xs(Ce,Ce,a)),!so(Ce,H)){Ht(ne.numGlyphs,ee);continue}const be=Wn(u.transform.cameraToCenterDistance,Ce[3]),Pe=v.evaluateSizeForFeature(L,z,ne),Oe=D?Pe/be:Pe*be,je=new v.pointGeometry(ne.anchorX,ne.anchorY),ke=ki(je,y,P).point,rt={},Xe=ri(ne,Oe,!1,k,a,y,x,f.glyphOffsetArray,Q,ee,ke,je,rt,de,T,P);pe=Xe.useVertical,(Xe.notEnoughRoom||pe||Xe.needsFlipping&&ri(ne,Oe,!0,k,a,y,x,f.glyphOffsetArray,Q,ee,ke,je,rt,de,T,P).notEnoughRoom)&&Ht(ne.numGlyphs,ee)}p?f.text.dynamicLayoutVertexBuffer.updateData(ee):f.icon.dynamicLayoutVertexBuffer.updateData(ee)}function Ys(f,a,u,p,y,x,D,k,T,P,L,z,H){const ee=k.glyphStartIndex+k.numGlyphs,Q=k.lineStartIndex,J=k.lineStartIndex+k.lineLength,de=a.getoffsetX(k.glyphStartIndex),pe=a.getoffsetX(ee-1),ve=hr(f*de,u,p,y,x,D,k.segment,Q,J,T,P,L,z,H);if(!ve)return null;const ne=hr(f*pe,u,p,y,x,D,k.segment,Q,J,T,P,L,z,H);return ne?{first:ve,last:ne}:null}function Qe(f,a,u,p){return f===v.WritingMode.horizontal&&Math.abs(u.y-a.y)>Math.abs(u.x-a.x)*p?{useVertical:!0}:(f===v.WritingMode.vertical?a.y<u.y:a.x>u.x)?{needsFlipping:!0}:null}function ri(f,a,u,p,y,x,D,k,T,P,L,z,H,ee,Q,J){const de=a/24,pe=f.lineOffsetX*de,ve=f.lineOffsetY*de;let ne;if(f.numGlyphs>1){const Ce=f.glyphStartIndex+f.numGlyphs,be=f.lineStartIndex,Pe=f.lineStartIndex+f.lineLength,Oe=Ys(de,k,pe,ve,u,L,z,f,T,x,H,Q,J);if(!Oe)return{notEnoughRoom:!0};const je=ki(Oe.first.point,D,J).point,ke=ki(Oe.last.point,D,J).point;if(p&&!u){const rt=Qe(f.writingMode,je,ke,ee);if(rt)return rt}ne=[Oe.first];for(let rt=f.glyphStartIndex+1;rt<Ce-1;rt++)ne.push(hr(de*k.getoffsetX(rt),pe,ve,u,L,z,f.segment,be,Pe,T,x,H,Q,J));ne.push(Oe.last)}else{if(p&&!u){const be=ki(z,y,J).point,Pe=f.lineStartIndex+f.segment+1,Oe=new v.pointGeometry(T.getx(Pe),T.gety(Pe)),je=ki(Oe,y,J),ke=je.signedDistanceFromCamera>0?je.point:jt(z,Oe,be,1,y,J),rt=Qe(f.writingMode,be,ke,ee);if(rt)return rt}const Ce=hr(de*k.getoffsetX(f.glyphStartIndex),pe,ve,u,L,z,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,T,x,H,Q,J);if(!Ce)return{notEnoughRoom:!0};ne=[Ce]}for(const Ce of ne)v.addDynamicAttributes(P,Ce.point,Ce.angle);return{}}function jt(f,a,u,p,y,x){const D=ki(f.add(f.sub(a)._unit()),y,x).point,k=u.sub(D);return u.add(k._mult(p/k.mag()))}function hr(f,a,u,p,y,x,D,k,T,P,L,z,H,ee){const Q=p?f-a:f+a;let J=Q>0?1:-1,de=0;p&&(J*=-1,de=Math.PI),J<0&&(de+=Math.PI);let pe=J>0?k+D:k+D+1,ve=y,ne=y,Ce=0,be=0;const Pe=Math.abs(Q),Oe=[];for(;Ce+be<=Pe;){if(pe+=J,pe<k||pe>=T)return null;if(ne=ve,Oe.push(ve),ve=z[pe],void 0===ve){const ct=new v.pointGeometry(P.getx(pe),P.gety(pe)),Kt=ki(ct,L,ee);if(Kt.signedDistanceFromCamera>0)ve=z[pe]=Kt.point;else{const di=pe-J;ve=jt(0===Ce?x:new v.pointGeometry(P.getx(di),P.gety(di)),ct,ne,Pe-Ce+1,L,ee)}}Ce+=be,be=ne.dist(ve)}const je=(Pe-Ce)/be,ke=ve.sub(ne),rt=ke.mult(je)._add(ne);rt._add(ke._unit()._perp()._mult(u*J));const Xe=de+Math.atan2(ve.y-ne.y,ve.x-ne.x);return Oe.push(rt),{point:rt,angle:H?Xe:0,path:Oe}}const ga=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ht(f,a){for(let u=0;u<f;u++){const p=a.length;a.resize(p+4),a.float32.set(ga,3*p)}}function Xs(f,a,u){const p=a[0],y=a[1];return f[0]=u[0]*p+u[4]*y+u[12],f[1]=u[1]*p+u[5]*y+u[13],f[3]=u[3]*p+u[7]*y+u[15],f}const er=100;class Sl{constructor(a,u=new et(a.width+200,a.height+200,25),p=new et(a.width+200,a.height+200,25)){this.transform=a,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+er,this.screenBottomBoundary=a.height+er,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,u,p,y,x,D){const k=this.projectAndGetPerspectiveRatio(y,a.anchorPointX,a.anchorPointY,D),T=p*k.perspectiveRatio,P=a.x1*T+k.point.x,L=a.y1*T+k.point.y,z=a.x2*T+k.point.x,H=a.y2*T+k.point.y;return!this.isInsideGrid(P,L,z,H)||"always"!==u&&this.grid.hitTest(P,L,z,H,u,x)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[P,L,z,H],offscreen:this.isOffscreen(P,L,z,H)}}placeCollisionCircles(a,u,p,y,x,D,k,T,P,L,z,H,ee,Q){const J=[],de=new v.pointGeometry(u.anchorX,u.anchorY),pe=ki(de,D,Q),ve=Wn(this.transform.cameraToCenterDistance,pe.signedDistanceFromCamera),ne=(L?x/ve:x*ve)/v.ONE_EM,Ce=ki(de,k,Q).point,be=Ys(ne,y,u.lineOffsetX*ne,u.lineOffsetY*ne,!1,Ce,de,u,p,k,{},!1,Q);let Pe=!1,Oe=!1,je=!0;if(be){const ke=.5*H*ve+ee,rt=new v.pointGeometry(-100,-100),Xe=new v.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ct=new Zs,Kt=be.first,di=be.last;let yt=[];for(let mi=Kt.path.length-1;mi>=1;mi--)yt.push(Kt.path[mi]);for(let mi=1;mi<di.path.length;mi++)yt.push(di.path[mi]);const Gi=2.5*ke;if(T){const mi=yt.map(wi=>ki(wi,T,Q));yt=mi.some(wi=>wi.signedDistanceFromCamera<=0)?[]:mi.map(wi=>wi.point)}let en=[];if(yt.length>0){const mi=yt[0].clone(),wi=yt[0].clone();for(let tn=1;tn<yt.length;tn++)mi.x=Math.min(mi.x,yt[tn].x),mi.y=Math.min(mi.y,yt[tn].y),wi.x=Math.max(wi.x,yt[tn].x),wi.y=Math.max(wi.y,yt[tn].y);en=mi.x>=rt.x&&wi.x<=Xe.x&&mi.y>=rt.y&&wi.y<=Xe.y?[yt]:wi.x<rt.x||mi.x>Xe.x||wi.y<rt.y||mi.y>Xe.y?[]:v.clipLine([yt],rt.x,rt.y,Xe.x,Xe.y)}for(const mi of en){ct.reset(mi,.25*ke);let wi=0;wi=ct.length<=.5*ke?1:Math.ceil(ct.paddedLength/Gi)+1;for(let tn=0;tn<wi;tn++){const nr=tn/Math.max(wi-1,1),Ms=ct.lerp(nr),ks=Ms.x+er,Ts=Ms.y+er;J.push(ks,Ts,ke,0);const gr=ks-ke,Kr=Ts-ke,Yi=ks+ke,Is=Ts+ke;if(je=je&&this.isOffscreen(gr,Kr,Yi,Is),Oe=Oe||this.isInsideGrid(gr,Kr,Yi,Is),"always"!==a&&this.grid.hitTestCircle(ks,Ts,ke,a,z)&&(Pe=!0,!P))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!P&&Pe||!Oe||ve<this.perspectiveRatioCutoff?[]:J,offscreen:je,collisionDetected:Pe}}queryRenderedSymbols(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[];let p=1/0,y=1/0,x=-1/0,D=-1/0;for(const L of a){const z=new v.pointGeometry(L.x+er,L.y+er);p=Math.min(p,z.x),y=Math.min(y,z.y),x=Math.max(x,z.x),D=Math.max(D,z.y),u.push(z)}const k=this.grid.query(p,y,x,D).concat(this.ignoredGrid.query(p,y,x,D)),T={},P={};for(const L of k){const z=L.key;if(void 0===T[z.bucketInstanceId]&&(T[z.bucketInstanceId]={}),T[z.bucketInstanceId][z.featureIndex])continue;const H=[new v.pointGeometry(L.x1,L.y1),new v.pointGeometry(L.x2,L.y1),new v.pointGeometry(L.x2,L.y2),new v.pointGeometry(L.x1,L.y2)];v.polygonIntersectsPolygon(u,H)&&(T[z.bucketInstanceId][z.featureIndex]=!0,void 0===P[z.bucketInstanceId]&&(P[z.bucketInstanceId]=[]),P[z.bucketInstanceId].push(z.featureIndex))}return P}insertCollisionBox(a,u,p,y,x,D){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:D,overlapMode:u},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,p,y,x,D){const k=p?this.ignoredGrid:this.grid,T={bucketInstanceId:y,featureIndex:x,collisionGroupID:D,overlapMode:u};for(let P=0;P<a.length;P+=4)k.insertCircle(T,a[P],a[P+1],a[P+2])}projectAndGetPerspectiveRatio(a,u,p,y){let x;return y?(x=[u,p,y(u,p),1],v.transformMat4(x,x,a)):(x=[u,p,0,1],Xs(x,x,a)),{point:new v.pointGeometry((x[0]/x[3]+1)/2*this.transform.width+er,(-x[1]/x[3]+1)/2*this.transform.height+er),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(a,u,p,y){return p<er||a>=this.screenRightBoundary||y<er||u>this.screenBottomBoundary}isInsideGrid(a,u,p,y){return p>=0&&a<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const a=v.identity([]);return v.translate(a,a,[-100,-100,0]),a}}function Vn(f,a,u){return a*(v.EXTENT/(f.tileSize*Math.pow(2,u-f.tileID.overscaledZ)))}class Wr{constructor(a,u,p,y){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):y&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class Xi{constructor(a,u,p,y,x){this.text=new Wr(a?a.text:null,u,p,x),this.icon=new Wr(a?a.icon:null,u,y,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _c{constructor(a,u,p){this.text=a,this.icon=u,this.skipFade=p}}class Bo{constructor(){this.invProjMatrix=v.create(),this.viewportMatrix=v.create(),this.circles=[]}}class _a{constructor(a,u,p,y,x){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=y,this.tileID=x}}class ya{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[a]}}function Za(f,a,u,p,y){const{horizontalAlign:x,verticalAlign:D}=v.getAnchorAlignment(f),k=-(x-.5)*a,T=-(D-.5)*u,P=v.evaluateVariableOffset(f,p);return new v.pointGeometry(k+P[0]*y,T+P[1]*y)}function va(f,a,u,p,y,x){const{x1:D,x2:k,y1:T,y2:P,anchorPointX:L,anchorPointY:z}=f,H=new v.pointGeometry(a,u);return p&&H._rotate(y?x:-x),{x1:D+H.x,y1:T+H.y,x2:k+H.x,y2:P+H.y,anchorPointX:L,anchorPointY:z}}class K{constructor(a,u,p,y,x){this.transform=a.clone(),this.terrain=u,this.collisionIndex=new Sl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ya(y),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,u,p,y){const x=p.getBucket(u),D=p.latestFeatureIndex;if(!x||!D||u.id!==x.layerIds[0])return;const k=p.collisionBoxArray,T=x.layers[0].layout,P=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),L=p.tileSize/v.EXTENT,z=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),H="map"===T.get("text-pitch-alignment"),ee="map"===T.get("text-rotation-alignment"),Q=Vn(p,1,this.transform.zoom),J=Wa(z,H,ee,this.transform,Q);let de=null;if(H){const ve=es(z,H,ee,this.transform,Q);de=v.multiply([],this.transform.labelPlaneMatrix,ve)}this.retainedQueryData[x.bucketInstanceId]=new _a(x.bucketInstanceId,D,x.sourceLayerIndex,x.index,p.tileID);const pe={bucket:x,layout:T,posMatrix:z,textLabelPlaneMatrix:J,labelToScreenMatrix:de,scale:P,textPixelRatio:L,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:v.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const ve of x.sortKeyRanges){const{sortKey:ne,symbolInstanceStart:Ce,symbolInstanceEnd:be}=ve;a.push({sortKey:ne,symbolInstanceStart:Ce,symbolInstanceEnd:be,parameters:pe})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(a,u,p,y,x,D,k,T,P,L,z,H,ee,Q,J,de){const pe=[H.textOffset0,H.textOffset1],ve=Za(a,p,y,pe,x),ne=this.collisionIndex.placeCollisionBox(va(u,ve.x,ve.y,D,k,this.transform.angle),z,T,P,L.predicate,de);if((!J||0!==this.collisionIndex.placeCollisionBox(va(J,ve.x,ve.y,D,k,this.transform.angle),z,T,P,L.predicate,de).box.length)&&ne.box.length>0){let Ce;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Ce=this.prevPlacement.variableOffsets[H.crossTileID].anchor),0===H.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:pe,width:p,height:y,anchor:a,textBoxScale:x,prevAnchor:Ce},this.markUsedJustification(ee,a,H,Q),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,Q,H),this.placedOrientations[H.crossTileID]=Q),{shift:ve,placedGlyphBoxes:ne}}}placeLayerBucketPart(a,u,p){const{bucket:y,layout:x,posMatrix:D,textLabelPlaneMatrix:k,labelToScreenMatrix:T,textPixelRatio:P,holdingForFade:L,collisionBoxArray:z,partiallyEvaluatedTextSize:H,collisionGroup:ee}=a.parameters,Q=x.get("text-optional"),J=x.get("icon-optional"),de=v.getOverlapMode(x,"text-overlap","text-allow-overlap"),pe="always"===de,ve=v.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),ne="always"===ve,Ce="map"===x.get("text-rotation-alignment"),be="map"===x.get("text-pitch-alignment"),Pe="none"!==x.get("icon-text-fit"),Oe="viewport-y"===x.get("symbol-z-order"),je=pe&&(ne||!y.hasIconData()||J),ke=ne&&(pe||!y.hasTextData()||Q);!y.collisionArrays&&z&&y.deserializeCollisionBoxes(z);const rt=(Xe,ct)=>{if(u[Xe.crossTileID])return;if(L)return void(this.placements[Xe.crossTileID]=new _c(!1,!1,!1));let Kt=!1,di=!1,yt=!0,Gi=null,en={box:null,offscreen:null},mi={box:null,offscreen:null},wi=null,tn=null,nr=null,Ms=0,ks=0,Ts=0;ct.textFeatureIndex?Ms=ct.textFeatureIndex:Xe.useRuntimeCollisionCircles&&(Ms=Xe.featureIndex),ct.verticalTextFeatureIndex&&(ks=ct.verticalTextFeatureIndex);const gr=this.retainedQueryData[y.bucketInstanceId].tileID,Kr=this.terrain?(Ln,si)=>this.terrain.getElevation(gr,Ln,si):null;for(const Ln of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const si=ct[Ln];si&&(si.elevation=Kr?Kr(si.anchorPointX,si.anchorPointY):0)}const Yi=ct.textBox;if(Yi){const Ln=Ai=>{let rr=v.WritingMode.horizontal;if(y.allowVerticalPlacement&&!Ai&&this.prevPlacement){const _r=this.prevPlacement.placedOrientations[Xe.crossTileID];_r&&(this.placedOrientations[Xe.crossTileID]=_r,rr=_r,this.markUsedOrientation(y,rr,Xe))}return rr},si=(Ai,rr)=>{if(y.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&ct.verticalTextBox){for(const _r of y.writingModes)if(_r===v.WritingMode.vertical?(en=rr(),mi=en):en=Ai(),en&&en.box&&en.box.length)break}else en=Ai()};if(x.get("text-variable-anchor")){let Ai=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Xe.crossTileID]){const mn=this.prevPlacement.variableOffsets[Xe.crossTileID];Ai.indexOf(mn.anchor)>0&&(Ai=Ai.filter(mo=>mo!==mn.anchor),Ai.unshift(mn.anchor))}const rr=(mn,mo,rl)=>{const Vl=mn.x2-mn.x1,Ul=mn.y2-mn.y1,Pp=Xe.textBoxScale,Zh=Pe&&"never"===ve?mo:null;let na={box:[],offscreen:!1};const ka="never"!==de?2*Ai.length:Ai.length;for(let ol=0;ol<ka;++ol){const Sd=this.attemptAnchorPlacement(Ai[ol%Ai.length],mn,Vl,Ul,Pp,Ce,be,P,D,ee,ol>=Ai.length?de:"never",Xe,y,rl,Zh,Kr);if(Sd&&(na=Sd.placedGlyphBoxes,na&&na.box&&na.box.length)){Kt=!0,Gi=Sd.shift;break}}return na};si(()=>rr(Yi,ct.iconBox,v.WritingMode.horizontal),()=>{const mn=ct.verticalTextBox;return y.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&Xe.numVerticalGlyphVertices>0&&mn?rr(mn,ct.verticalIconBox,v.WritingMode.vertical):{box:null,offscreen:null}}),en&&(Kt=en.box,yt=en.offscreen);const _r=Ln(en&&en.box);if(!Kt&&this.prevPlacement){const mn=this.prevPlacement.variableOffsets[Xe.crossTileID];mn&&(this.variableOffsets[Xe.crossTileID]=mn,this.markUsedJustification(y,mn.anchor,Xe,_r))}}else{const Ai=(rr,_r)=>{const mn=this.collisionIndex.placeCollisionBox(rr,de,P,D,ee.predicate,Kr);return mn&&mn.box&&mn.box.length&&(this.markUsedOrientation(y,_r,Xe),this.placedOrientations[Xe.crossTileID]=_r),mn};si(()=>Ai(Yi,v.WritingMode.horizontal),()=>{const rr=ct.verticalTextBox;return y.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&rr?Ai(rr,v.WritingMode.vertical):{box:null,offscreen:null}}),Ln(en&&en.box&&en.box.length)}}if(wi=en,Kt=wi&&wi.box&&wi.box.length>0,yt=wi&&wi.offscreen,Xe.useRuntimeCollisionCircles){const Ln=y.text.placedSymbolArray.get(Xe.centerJustifiedTextSymbolIndex),si=v.evaluateSizeForFeature(y.textSizeData,H,Ln),Ai=x.get("text-padding");tn=this.collisionIndex.placeCollisionCircles(de,Ln,y.lineVertexArray,y.glyphOffsetArray,si,D,k,T,p,be,ee.predicate,Xe.collisionCircleDiameter,Ai,Kr),tn.circles.length&&tn.collisionDetected&&!p&&v.warnOnce("Collisions detected, but collision boxes are not shown"),Kt=pe||tn.circles.length>0&&!tn.collisionDetected,yt=yt&&tn.offscreen}if(ct.iconFeatureIndex&&(Ts=ct.iconFeatureIndex),ct.iconBox){const Ln=si=>{const Ai=Pe&&Gi?va(si,Gi.x,Gi.y,Ce,be,this.transform.angle):si;return this.collisionIndex.placeCollisionBox(Ai,ve,P,D,ee.predicate,Kr)};mi&&mi.box&&mi.box.length&&ct.verticalIconBox?(nr=Ln(ct.verticalIconBox),di=nr.box.length>0):(nr=Ln(ct.iconBox),di=nr.box.length>0),yt=yt&&nr.offscreen}const Is=Q||0===Xe.numHorizontalGlyphVertices&&0===Xe.numVerticalGlyphVertices,Pu=J||0===Xe.numIconVertices;if(Is||Pu?Pu?Is||(di=di&&Kt):Kt=di&&Kt:di=Kt=di&&Kt,Kt&&wi&&wi.box&&this.collisionIndex.insertCollisionBox(wi.box,de,x.get("text-ignore-placement"),y.bucketInstanceId,mi&&mi.box&&ks?ks:Ms,ee.ID),di&&nr&&this.collisionIndex.insertCollisionBox(nr.box,ve,x.get("icon-ignore-placement"),y.bucketInstanceId,Ts,ee.ID),tn&&(Kt&&this.collisionIndex.insertCollisionCircles(tn.circles,de,x.get("text-ignore-placement"),y.bucketInstanceId,Ms,ee.ID),p)){const Ln=y.bucketInstanceId;let si=this.collisionCircleArrays[Ln];void 0===si&&(si=this.collisionCircleArrays[Ln]=new Bo);for(let Ai=0;Ai<tn.circles.length;Ai+=4)si.circles.push(tn.circles[Ai+0]),si.circles.push(tn.circles[Ai+1]),si.circles.push(tn.circles[Ai+2]),si.circles.push(tn.collisionDetected?1:0)}if(0===Xe.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===y.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xe.crossTileID]=new _c(Kt||je,di||ke,yt||y.justReloaded),u[Xe.crossTileID]=!0};if(Oe){if(0!==a.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Xe=y.getSortedSymbolIndexes(this.transform.angle);for(let ct=Xe.length-1;ct>=0;--ct){const Kt=Xe[ct];rt(y.symbolInstances.get(Kt),y.collisionArrays[Kt])}}else for(let Xe=a.symbolInstanceStart;Xe<a.symbolInstanceEnd;Xe++)rt(y.symbolInstances.get(Xe),y.collisionArrays[Xe]);if(p&&y.bucketInstanceId in this.collisionCircleArrays){const Xe=this.collisionCircleArrays[y.bucketInstanceId];v.invert(Xe.invProjMatrix,D),Xe.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(a,u,p,y){let x;x=y===v.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[v.getAnchorJustification(u)];const D=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of D)k>=0&&(a.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:p.crossTileID)}markUsedOrientation(a,u,p){const y=u===v.WritingMode.horizontal||u===v.WritingMode.horizontalOnly?u:0,x=u===v.WritingMode.vertical?u:0,D=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of D)a.text.placedSymbolArray.get(k).placedOrientation=y;p.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(a):1,x=u?u.opacities:{},D=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const T in this.placements){const P=this.placements[T],L=x[T];L?(this.opacities[T]=new Xi(L,y,P.text,P.icon),p=p||P.text!==L.text.placed||P.icon!==L.icon.placed):(this.opacities[T]=new Xi(null,y,P.text,P.icon,P.skipFade),p=p||P.text||P.icon)}for(const T in x){const P=x[T];if(!this.opacities[T]){const L=new Xi(P,y,!1,!1);L.isHidden()||(this.opacities[T]=L,p=p||P.text.placed||P.icon.placed)}}for(const T in D)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=D[T]);for(const T in k)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=k[T]);if(u&&void 0===u.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=a:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u){const p={};for(const y of u){const x=y.getBucket(a);x&&y.latestFeatureIndex&&a.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,y.collisionBoxArray)}}updateBucketOpacities(a,u,p){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const y=a.layers[0].layout,x=new Xi(null,0,!1,!1,!0),D=y.get("text-allow-overlap"),k=y.get("icon-allow-overlap"),T=y.get("text-variable-anchor"),P="map"===y.get("text-rotation-alignment"),L="map"===y.get("text-pitch-alignment"),z="none"!==y.get("icon-text-fit"),H=new Xi(null,0,D&&(k||!a.hasIconData()||y.get("icon-optional")),k&&(D||!a.hasTextData()||y.get("text-optional")),!0);!a.collisionArrays&&p&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(p);const ee=(Q,J,de)=>{for(let pe=0;pe<J/4;pe++)Q.opacityVertexArray.emplaceBack(de)};for(let Q=0;Q<a.symbolInstances.length;Q++){const J=a.symbolInstances.get(Q),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:pe,crossTileID:ve}=J;let ne=this.opacities[ve];u[ve]?ne=x:ne||(ne=H,this.opacities[ve]=ne),u[ve]=!0;const Ce=J.numIconVertices>0,be=this.placedOrientations[J.crossTileID],Pe=be===v.WritingMode.vertical,Oe=be===v.WritingMode.horizontal||be===v.WritingMode.horizontalOnly;if(de>0||pe>0){const je=me(ne.text);ee(a.text,de,Pe?Me:je),ee(a.text,pe,Oe?Me:je);const ke=ne.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(ct=>{ct>=0&&(a.text.placedSymbolArray.get(ct).hidden=ke||Pe?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=ke||Oe?1:0);const rt=this.variableOffsets[J.crossTileID];rt&&this.markUsedJustification(a,rt.anchor,J,be);const Xe=this.placedOrientations[J.crossTileID];Xe&&(this.markUsedJustification(a,"left",J,Xe),this.markUsedOrientation(a,Xe,J))}if(Ce){const je=me(ne.icon),ke=!(z&&J.verticalPlacedIconSymbolIndex&&Pe);J.placedIconSymbolIndex>=0&&(ee(a.icon,J.numIconVertices,ke?je:Me),a.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=ne.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(ee(a.icon,J.numVerticalIconVertices,ke?Me:je),a.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=ne.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const je=a.collisionArrays[Q];if(je){let ke=new v.pointGeometry(0,0);if(je.textBox||je.verticalTextBox){let Xe=!0;if(T){const ct=this.variableOffsets[ve];ct?(ke=Za(ct.anchor,ct.width,ct.height,ct.textOffset,ct.textBoxScale),P&&ke._rotate(L?this.transform.angle:-this.transform.angle)):Xe=!1}je.textBox&&O(a.textCollisionBox.collisionVertexArray,ne.text.placed,!Xe||Pe,ke.x,ke.y),je.verticalTextBox&&O(a.textCollisionBox.collisionVertexArray,ne.text.placed,!Xe||Oe,ke.x,ke.y)}const rt=!(Oe||!je.verticalIconBox);je.iconBox&&O(a.iconCollisionBox.collisionVertexArray,ne.icon.placed,rt,z?ke.x:0,z?ke.y:0),je.verticalIconBox&&O(a.iconCollisionBox.collisionVertexArray,ne.icon.placed,!rt,z?ke.x:0,z?ke.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Q.invProjMatrix,a.placementViewportMatrix=Q.viewportMatrix,a.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return 0===this.fadeDuration?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>a}setStale(){this.stale=!0}}function O(f,a,u,p,y){f.emplaceBack(a?1:0,u?1:0,p||0,y||0),f.emplaceBack(a?1:0,u?1:0,p||0,y||0),f.emplaceBack(a?1:0,u?1:0,p||0,y||0),f.emplaceBack(a?1:0,u?1:0,p||0,y||0)}const B=Math.pow(2,25),W=Math.pow(2,24),Z=Math.pow(2,17),re=Math.pow(2,16),he=Math.pow(2,9),le=Math.pow(2,8),ae=Math.pow(2,1);function me(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;const a=f.placed?1:0,u=Math.floor(127*f.opacity);return u*B+a*W+u*Z+a*re+u*he+a*le+u*ae+a}const Me=0;class Ve{constructor(a){this._sortAcrossTiles="viewport-y"!==a.layout.get("symbol-z-order")&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,u,p,y,x){const D=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(D,y,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((k,T)=>k.sortKey-T.sortKey));this._currentPartIndex<D.length;)if(u.placeLayerBucketPart(D[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class Se{constructor(a,u,p,y,x,D,k,T){this.placement=new K(a,u,D,k,T),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(a,u,p){const y=v.exported.now(),x=()=>{const D=v.exported.now()-y;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=u[a[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if("symbol"===D.type&&(!D.minzoom||D.minzoom<=k)&&(!D.maxzoom||D.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Ve(D)),this._inProgressLayer.continuePlacement(p[D.source],this.placement,this._showCollisionBoxes,D,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const st=512/v.EXTENT/2;class gt{constructor(a,u,p){this.tileID=a,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let y=0;y<u.length;y++){const x=u.get(y),D=x.key;this.indexedSymbolInstances[D]||(this.indexedSymbolInstances[D]=[]),this.indexedSymbolInstances[D].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,a)})}}getScaledCoordinates(a,u){const p=st/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*v.EXTENT+a.anchorX)*p),y:Math.floor((u.canonical.y*v.EXTENT+a.anchorY)*p)}}findMatches(a,u,p){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<a.length;x++){const D=a.get(x);if(D.crossTileID)continue;const k=this.indexedSymbolInstances[D.key];if(!k)continue;const T=this.getScaledCoordinates(D,u);for(const P of k)if(Math.abs(P.coord.x-T.x)<=y&&Math.abs(P.coord.y-T.y)<=y&&!p[P.crossTileID]){p[P.crossTileID]=!0,D.crossTileID=P.crossTileID;break}}}}class qe{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const u=Math.round((a-this.lng)/360);if(0!==u)for(const p in this.indexes){const y=this.indexes[p],x={};for(const D in y){const k=y[D];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),x[k.tileID.key]=k}this.indexes[p]=x}this.lng=a}addBucket(a,u,p){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const y=this.usedCrossTileIDs[a.overscaledZ];for(const x in this.indexes){const D=this.indexes[x];if(Number(x)>a.overscaledZ)for(const k in D){const T=D[k];T.tileID.isChildOf(a)&&T.findMatches(u.symbolInstances,a,y)}else{const k=D[a.scaledTo(Number(x)).key];k&&k.findMatches(u.symbolInstances,a,y)}}for(let x=0;x<u.symbolInstances.length;x++){const D=u.symbolInstances.get(x);D.crossTileID||(D.crossTileID=p.generate(),y[D.crossTileID]=!0)}return void 0===this.indexes[a.overscaledZ]&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new gt(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(const p in u.indexedSymbolInstances)for(const y of u.indexedSymbolInstances[p])delete this.usedCrossTileIDs[a][y.crossTileID]}removeStaleBuckets(a){let u=!1;for(const p in this.indexes){const y=this.indexes[p];for(const x in y)a[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,y[x]),delete y[x],u=!0)}return u}}class vt{constructor(){this.layerIndexes={},this.crossTileIDs=new qe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,p){let y=this.layerIndexes[a.id];void 0===y&&(y=this.layerIndexes[a.id]=new xt);let x=!1;const D={};y.handleWrapJump(p);for(const k of u){const T=k.getBucket(a);T&&a.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(k.tileID,T,this.crossTileIDs)&&(x=!0),D[T.bucketInstanceId]=!0)}return y.removeStaleBuckets(D)&&(x=!0),x}pruneUnusedLayers(a){const u={};a.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var Ii=v.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Nt extends v.Evented{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=a._cache.max,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const a in this._tiles){const u=this._tiles[a];u.textures.forEach(p=>p.destroy()),u.textures=[]}}update(a,u){this.sourceCache.update(a,u),this._renderableTilesKeys=[];for(const p of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),v.ortho(p.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),this._tiles[p.key]=new Gs(p,this.tileSize))}removeOutdated(a){const u={};this.renderHistory=this.renderHistory.filter((p,y)=>this.renderHistory.indexOf(p)===y).slice(0,this.renderHistorySize);for(const p of this._renderableTilesKeys)u[p]=!0;for(const p of this.renderHistory)u[p]=!0;for(const p in this._tiles)u[p]||(this._tiles[p].clearTextures(a),delete this._tiles[p])}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const u={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID;if(y.canonical.equals(a.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16),v.ortho(x.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),u[p]=x}else if(y.canonical.isChildOf(a.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16);const D=y.canonical.z-a.canonical.z,k=y.canonical.x-(y.canonical.x>>D<<D),T=y.canonical.y-(y.canonical.y>>D<<D),P=v.EXTENT>>D;v.ortho(x.posMatrix,0,P,0,P,0,1),v.translate(x.posMatrix,x.posMatrix,[-k*P,-T*P,0]),u[p]=x}else if(a.canonical.isChildOf(y.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16);const D=a.canonical.z-y.canonical.z,k=a.canonical.x-(a.canonical.x>>D<<D),T=a.canonical.y-(a.canonical.y>>D<<D),P=v.EXTENT>>D;v.ortho(x.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),v.translate(x.posMatrix,x.posMatrix,[k*P,T*P,0]),v.scale(x.posMatrix,x.posMatrix,[1/2**D,1/2**D,0]),u[p]=x}}return u}getSourceTile(a,u){const p=this.sourceCache._source;let y=a.overscaledZ-this.deltaZoom;if(y>p.maxzoom&&(y=p.maxzoom),y<p.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(y).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!x||!x.dem)&&u)for(;y>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(a.scaledTo(y--).key);return x}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=a)}}class ti{constructor(a,u,p){this.style=a,this.sourceCache=new Nt(u),this.options=p,this.exaggeration="number"==typeof p.exaggeration?p.exaggeration:1,this.elevationOffset="number"==typeof p.elevationOffset?p.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(a,u,p,y=v.EXTENT){if(!(u>=0&&u<y&&p>=0&&p<y))return this.elevationOffset;let x=0;const D=this.getTerrainData(a);if(D.tile&&D.tile.dem){const k=v.transformMat4$1([],[u/y*v.EXTENT,p/y*v.EXTENT],D.u_terrain_matrix),T=[k[0]*D.tile.dem.dim,k[1]*D.tile.dem.dim],P=[Math.floor(T[0]),Math.floor(T[1])],L=D.tile.dem.get(P[0],P[1]),z=D.tile.dem.get(P[0],P[1]+1),H=D.tile.dem.get(P[0]+1,P[1]),ee=D.tile.dem.get(P[0]+1,P[1]+1);x=v.number(v.number(L,z,T[0]-P[0]),v.number(H,ee,T[0]-P[0]),T[1]-P[1])}return x}rememberForRerender(a,u){for(const p in this.sourceCache._tiles){const y=this.sourceCache._tiles[p];(y.tileID.equals(u)||y.tileID.isChildOf(u))&&(a===this.sourceCache.sourceCache.id&&(y.timeLoaded=Date.now()),this._rerender[a]=this._rerender[a]||{},this._rerender[a][y.tileID.key]=!0)}}needsRerender(a,u){return this._rerender[a]&&this._rerender[a][u.key]}clearRerenderCache(){this._rerender={}}getElevation(a,u,p,y=v.EXTENT){return(this.getDEMElevation(a,u,p,y)+this.elevationOffset)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const y=this.style.map.painter.context,x=new v.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new hn(y,x,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new hn(y,new v.RGBAImage({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=v.identity([])}const u=this.sourceCache.getSourceTile(a,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const y=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new hn(y,u.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),u.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+a.key;if(p&&!this._demMatrixCache[p]){const y=this.sourceCache.sourceCache._source.maxzoom;let x=a.canonical.z-u.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=y?x=a.canonical.z-y:v.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const D=a.canonical.x-(a.canonical.x>>x<<x),k=a.canonical.y-(a.canonical.y>>x<<x),T=v.fromScaling(new Float64Array(16),[1/(v.EXTENT<<x),1/(v.EXTENT<<x),0]);v.translate(T,T,[D*v.EXTENT,k*v.EXTENT,0]),this._demMatrixCache[a.key]={matrix:T,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const a=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=a.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(a){const u=this.style.map.painter,p=u.width/devicePixelRatio,y=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new hn(u.context,{width:p,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new hn(u.context,{width:p,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,y,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,y))),this._fbo.colorAttachment.set("coords"===a?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,D=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,D+=4)u[D+0]=255&k,u[D+1]=255&x,u[D+2]=k>>8<<4|x>>8,u[D+3]=0;const p=new v.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),y=new hn(a,p,a.gl.RGBA,{premultiply:!1});return y.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(a){const u=new Uint8Array(4),p=this.style.map.painter,y=p.context,x=y.gl;y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),x.readPixels(a.x,p.height/devicePixelRatio-a.y-1,1,1,x.RGBA,x.UNSIGNED_BYTE,u),y.bindFramebuffer.set(null);const D=u[0]+(u[2]>>4<<8),k=u[1]+((15&u[2])<<8),T=this.coordsIndex[255-u[3]],P=T&&this.sourceCache.getTileByID(T);if(!P)return null;const L=this._coordsTextureSize,z=(1<<P.tileID.canonical.z)*L;return new v.MercatorCoordinate((P.tileID.canonical.x*L+D)/z,(P.tileID.canonical.y*L+k)/z,this.getElevation(P.tileID,D,k,L))}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.style.map.painter.context,u=new v.PosArray,p=new v.TriangleIndexArray,y=this.meshSize,x=v.EXTENT/y,D=y*y;for(let k=0;k<=y;k++)for(let T=0;T<=y;T++)u.emplaceBack(T*x,k*x);for(let k=0;k<D;k+=y+1)for(let T=0;T<y;T++)p.emplaceBack(T+k,y+T+k+1,y+T+k+2),p.emplaceBack(T+k,y+T+k+2,T+k+1);return this._mesh={indexBuffer:a.createIndexBuffer(p),vertexBuffer:a.createVertexBuffer(u,Ii.members),segments:v.SegmentVector.simpleSegment(0,0,u.length,p.length)},this._mesh}getMinMaxElevation(a){const u=this.getTerrainData(a).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,p.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),p}}const _i=(f,a)=>v.emitValidationErrors(f,a&&a.filter(u=>"source.canvas"!==u.identifier)),Ki=v.pick(Mi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Mn=v.pick(Mi,["setCenter","setZoom","setBearing","setPitch"]),gn=function(){const f={},a=v.spec.$version;for(const u in v.spec.$root){const p=v.spec.$root[u];if(p.required){let y=null;y="version"===u?a:"array"===p.type?[]:{},null!=y&&(f[u]=y)}}return f}();class mr extends v.Evented{constructor(a,u={}){super(),this.map=a,this.dispatcher=new Hs(Dl(),this),this.imageManager=new hc,this.imageManager.setEventedParent(this),this.glyphManager=new xn(a._requestManager,u.localIdeographFontFamily),this.lineAtlas=new vl(256,512),this.crossTileSymbolIndex=new vt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new v.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",v.getReferrer());const p=this;this._rtlTextPluginCallback=mr.registerForPluginStateChange(y=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(x,D)=>{if(v.triggerPluginCompletionEvent(x),D&&D.every(k=>k))for(const k in p.sourceCaches)p.sourceCaches[k].reload()})}),this.on("data",y=>{if("source"!==y.dataType||"metadata"!==y.sourceDataType)return;const x=this.sourceCaches[y.sourceId];if(!x)return;const D=x.getSource();if(D&&D.vectorLayerIds)for(const k in this._layers){const T=this._layers[k];T.source===D.id&&this._validateLayer(T)}})}loadURL(a,u={}){this.fire(new v.Event("dataloading",{dataType:"style"}));const p="boolean"!=typeof u.validate||u.validate,y=this.map._requestManager.transformRequest(a,v.ResourceType.Style);this._request=v.getJSON(y,(x,D)=>{this._request=null,x?this.fire(new v.ErrorEvent(x)):D&&this._load(D,p)})}loadJSON(a,u={}){this.fire(new v.Event("dataloading",{dataType:"style"})),this._request=v.exported.frame(()=>{this._request=null,this._load(a,!1!==u.validate)})}loadEmpty(){this.fire(new v.Event("dataloading",{dataType:"style"})),this._load(gn,!1)}_load(a,u){if(u&&_i(this,v.validateStyle(a)))return;this._loaded=!0,this.stylesheet=a;for(const y in a.sources)this.addSource(y,a.sources[y],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);const p=fc(this.stylesheet.layers);this._order=p.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of p)y=v.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Fo(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new v.Event("data",{dataType:"style"})),this.fire(new v.Event("style.load"))}_loadSprite(a){this._spriteRequest=function(u,p,y,x){let D,k,T;const P=y>1?"@2x":"";let L=v.getJSON(p.transformRequest(p.normalizeSpriteURL(u,P,".json"),v.ResourceType.SpriteJSON),(ee,Q)=>{L=null,T||(T=ee,D=Q,H())}),z=v.getImage(p.transformRequest(p.normalizeSpriteURL(u,P,".png"),v.ResourceType.SpriteImage),(ee,Q)=>{z=null,T||(T=ee,k=Q,H())});function H(){if(T)x(T);else if(D&&k){const ee=v.exported.getImageData(k),Q={};for(const J in D){const{width:de,height:pe,x:ve,y:ne,sdf:Ce,pixelRatio:be,stretchX:Pe,stretchY:Oe,content:je}=D[J],ke=new v.RGBAImage({width:de,height:pe});v.RGBAImage.copy(ee,ke,{x:ve,y:ne},{x:0,y:0},{width:de,height:pe}),Q[J]={data:ke,pixelRatio:be,sdf:Ce,stretchX:Pe,stretchY:Oe,content:je}}x(null,Q)}}return{cancel(){L&&(L.cancel(),L=null),z&&(z.cancel(),z=null)}}}(a,this.map._requestManager,this.map.getPixelRatio(),(u,p)=>{if(this._spriteRequest=null,u)this.fire(new v.ErrorEvent(u));else if(p)for(const y in p)this.imageManager.addImage(y,p[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))})}_validateLayer(a){const u=this.sourceCaches[a.source];if(!u)return;const p=a.sourceLayer;if(!p)return;const y=u.getSource();("geojson"===y.type||y.vectorLayerIds&&-1===y.vectorLayerIds.indexOf(p))&&this.fire(new v.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${y.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(a){const u=[];for(const p of a){const y=this._layers[p];"custom"!==y.type&&u.push(y.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const u=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const D in this._updatedSources){const k=this._updatedSources[D];if("reload"===k)this._reloadSource(D);else{if("clear"!==k)throw new Error(`Invalid action ${k}`);this._clearSource(D)}}this._updateTilesForChangedImages();for(const D in this._updatedPaintProps)this._layers[D].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const p={};for(const y in this.sourceCaches){const x=this.sourceCaches[y];p[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];x.recalculate(a,this._availableImages),!x.isHidden(a.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const y in p){const x=this.sourceCaches[y];p[y]!==x.used&&x.fire(new v.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(a),this.z=a.zoom,u&&this.fire(new v.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateWorkerLayers(a,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(a){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),a){const u=this.sourceCaches[a.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${a.source}`);this.terrain=new ti(this,u,a),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=p=>{p.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=p=>{p.tile&&(p.sourceId===a.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(p.sourceId,p.tile.tileID)):"geojson"===p.source.type&&this.terrain.rememberForRerender(p.sourceId,p.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new v.Event("terrain",{terrain:a}))}setState(a){if(this._checkLoaded(),_i(this,v.validateStyle(a)))return!1;(a=v.clone$1(a)).layers=fc(a.layers);const u=function(y,x){if(!y)return[{command:Mi.setStyle,args:[x]}];let D=[];try{if(!Oi(y.version,x.version))return[{command:Mi.setStyle,args:[x]}];Oi(y.center,x.center)||D.push({command:Mi.setCenter,args:[x.center]}),Oi(y.zoom,x.zoom)||D.push({command:Mi.setZoom,args:[x.zoom]}),Oi(y.bearing,x.bearing)||D.push({command:Mi.setBearing,args:[x.bearing]}),Oi(y.pitch,x.pitch)||D.push({command:Mi.setPitch,args:[x.pitch]}),Oi(y.sprite,x.sprite)||D.push({command:Mi.setSprite,args:[x.sprite]}),Oi(y.glyphs,x.glyphs)||D.push({command:Mi.setGlyphs,args:[x.glyphs]}),Oi(y.transition,x.transition)||D.push({command:Mi.setTransition,args:[x.transition]}),Oi(y.light,x.light)||D.push({command:Mi.setLight,args:[x.light]});const k={},T=[];!function(L,z,H,ee){let Q;for(Q in z=z||{},L=L||{})Object.prototype.hasOwnProperty.call(L,Q)&&(Object.prototype.hasOwnProperty.call(z,Q)||ma(Q,H,ee));for(Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(Object.prototype.hasOwnProperty.call(L,Q)?Oi(L[Q],z[Q])||("geojson"===L[Q].type&&"geojson"===z[Q].type&&gc(L,z,Q)?H.push({command:Mi.setGeoJSONSourceData,args:[Q,z[Q].data]}):pa(Q,z,H,ee)):Cs(Q,z,H))}(y.sources,x.sources,T,k);const P=[];y.layers&&y.layers.forEach(L=>{k[L.source]?D.push({command:Mi.removeLayer,args:[L.id]}):P.push(L)}),D=D.concat(T),function(L,z,H){z=z||[];const ee=(L=L||[]).map(Ws),Q=z.map(Ws),J=L.reduce(fa,{}),de=z.reduce(fa,{}),pe=ee.slice(),ve=Object.create(null);let ne,Ce,be,Pe,Oe,je,ke;for(ne=0,Ce=0;ne<ee.length;ne++)be=ee[ne],Object.prototype.hasOwnProperty.call(de,be)?Ce++:(H.push({command:Mi.removeLayer,args:[be]}),pe.splice(pe.indexOf(be,Ce),1));for(ne=0,Ce=0;ne<Q.length;ne++)be=Q[Q.length-1-ne],pe[pe.length-1-ne]!==be&&(Object.prototype.hasOwnProperty.call(J,be)?(H.push({command:Mi.removeLayer,args:[be]}),pe.splice(pe.lastIndexOf(be,pe.length-Ce),1)):Ce++,je=pe[pe.length-ne],H.push({command:Mi.addLayer,args:[de[be],je]}),pe.splice(pe.length-ne,0,be),ve[be]=!0);for(ne=0;ne<Q.length;ne++)if(be=Q[ne],Pe=J[be],Oe=de[be],!ve[be]&&!Oi(Pe,Oe))if(Oi(Pe.source,Oe.source)&&Oi(Pe["source-layer"],Oe["source-layer"])&&Oi(Pe.type,Oe.type)){for(ke in Ds(Pe.layout,Oe.layout,H,be,null,Mi.setLayoutProperty),Ds(Pe.paint,Oe.paint,H,be,null,Mi.setPaintProperty),Oi(Pe.filter,Oe.filter)||H.push({command:Mi.setFilter,args:[be,Oe.filter]}),Oi(Pe.minzoom,Oe.minzoom)&&Oi(Pe.maxzoom,Oe.maxzoom)||H.push({command:Mi.setLayerZoomRange,args:[be,Oe.minzoom,Oe.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,ke)&&"layout"!==ke&&"paint"!==ke&&"filter"!==ke&&"metadata"!==ke&&"minzoom"!==ke&&"maxzoom"!==ke&&(0===ke.indexOf("paint.")?Ds(Pe[ke],Oe[ke],H,be,ke.slice(6),Mi.setPaintProperty):Oi(Pe[ke],Oe[ke])||H.push({command:Mi.setLayerProperty,args:[be,ke,Oe[ke]]}));for(ke in Oe)Object.prototype.hasOwnProperty.call(Oe,ke)&&!Object.prototype.hasOwnProperty.call(Pe,ke)&&"layout"!==ke&&"paint"!==ke&&"filter"!==ke&&"metadata"!==ke&&"minzoom"!==ke&&"maxzoom"!==ke&&(0===ke.indexOf("paint.")?Ds(Pe[ke],Oe[ke],H,be,ke.slice(6),Mi.setPaintProperty):Oi(Pe[ke],Oe[ke])||H.push({command:Mi.setLayerProperty,args:[be,ke,Oe[ke]]}))}else H.push({command:Mi.removeLayer,args:[be]}),je=pe[pe.lastIndexOf(be)+1],H.push({command:Mi.addLayer,args:[Oe,je]})}(P,x.layers,D)}catch(k){console.warn("Unable to compute style diff:",k),D=[{command:Mi.setStyle,args:[x]}]}return D}(this.serialize(),a).filter(y=>!(y.command in Mn));if(0===u.length)return!1;const p=u.filter(y=>!(y.command in Ki));if(p.length>0)throw new Error(`Unimplemented: ${p.map(y=>y.command).join(", ")}.`);return u.forEach(y=>{"setTransition"!==y.command&&this[y.command].apply(this,y.args)}),this.stylesheet=a,!0}addImage(a,u){if(this.getImage(a))return this.fire(new v.ErrorEvent(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,u),this._afterImageUpdated(a)}updateImage(a,u){this.imageManager.updateImage(a,u)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new v.ErrorEvent(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,u,p={}){if(this._checkLoaded(),void 0!==this.sourceCaches[a])throw new Error(`Source "${a}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(v.validateStyle.source,`sources.${a}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.sourceCaches[a]=new Ti(a,u,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:a})),y.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===a)return this.fire(new v.ErrorEvent(new Error(`Source "${a}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],u.fire(new v.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,u){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error(`There is no source with this ID=${a}`);const p=this.sourceCaches[a].getSource();if("geojson"!==p.type)throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,u,p={}){this._checkLoaded();const y=a.id;if(this.getLayer(y))return void this.fire(new v.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let x;if("custom"===a.type){if(_i(this,v.validateCustomStyleLayer(a)))return;x=v.createStyleLayer(a)}else{if("object"==typeof a.source&&(this.addSource(y,a.source),a=v.clone$1(a),a=v.extend(a,{source:y})),this._validate(v.validateStyle.layer,`layers.${y}`,a,{arrayIndex:-1},p))return;x=v.createStyleLayer(a),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[x.id]=x.serialize()}const D=u?this._order.indexOf(u):this._order.length;if(u&&-1===D)this.fire(new v.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(D,0,y),this._layerOrderChanged=!0,this._layers[y]=x,this._removedLayers[y]&&x.source&&"custom"!==x.type){const k=this._removedLayers[y];delete this._removedLayers[y],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(a,u){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new v.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===u)return;const p=this._order.indexOf(a);this._order.splice(p,1);const y=u?this._order.indexOf(u):this._order.length;u&&-1===y?this.fire(new v.ErrorEvent(new Error(`Cannot move layer "${a}" before non-existing layer "${u}".`))):(this._order.splice(y,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const u=this._layers[a];if(!u)return void this.fire(new v.ErrorEvent(new Error(`Cannot remove non-existing layer "${a}".`)));u.setEventedParent(null);const p=this._order.indexOf(a);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map)}getLayer(a){return this._layers[a]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,u,p){this._checkLoaded();const y=this.getLayer(a);y?y.minzoom===u&&y.maxzoom===p||(null!=u&&(y.minzoom=u),null!=p&&(y.maxzoom=p),this._updateLayer(y)):this.fire(new v.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,u,p={}){this._checkLoaded();const y=this.getLayer(a);if(y){if(!Oi(y.filter,u))return null==u?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(v.validateStyle.filter,`layers.${y.id}.filter`,u,null,p)||(y.filter=v.clone$1(u),this._updateLayer(y)))}else this.fire(new v.ErrorEvent(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return v.clone$1(this.getLayer(a).filter)}setLayoutProperty(a,u,p,y={}){this._checkLoaded();const x=this.getLayer(a);x?Oi(x.getLayoutProperty(u),p)||(x.setLayoutProperty(u,p,y),this._updateLayer(x)):this.fire(new v.ErrorEvent(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,u){const p=this.getLayer(a);if(p)return p.getLayoutProperty(u);this.fire(new v.ErrorEvent(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,u,p,y={}){this._checkLoaded();const x=this.getLayer(a);x?Oi(x.getPaintProperty(u),p)||(x.setPaintProperty(u,p,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new v.ErrorEvent(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,u){return this.getLayer(a).getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();const p=a.source,y=a.sourceLayer,x=this.sourceCaches[p];if(void 0===x)return void this.fire(new v.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const D=x.getSource().type;"geojson"===D&&y?this.fire(new v.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==D||y?(void 0===a.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(y,a.id,u)):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,u){this._checkLoaded();const p=a.source,y=this.sourceCaches[p];if(void 0===y)return void this.fire(new v.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const x=y.getSource().type,D="vector"===x?a.sourceLayer:void 0;"vector"!==x||D?u&&"string"!=typeof a.id&&"number"!=typeof a.id?this.fire(new v.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(D,a.id,u):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const u=a.source,p=a.sourceLayer,y=this.sourceCaches[u];if(void 0!==y)return"vector"!==y.getSource().type||p?(void 0===a.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(p,a.id)):void this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new v.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return v.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return v.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:v.mapObject(this.sourceCaches,a=>a.serialize()),layers:this._serializeLayers(this._order)},a=>void 0!==a)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&"raster"!==this.sourceCaches[a.source].getSource().type&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(a){const u=D=>"fill-extrusion"===this._layers[D].type,p={},y=[];for(let D=this._order.length-1;D>=0;D--){const k=this._order[D];if(u(k)){p[k]=D;for(const T of a){const P=T[k];if(P)for(const L of P)y.push(L)}}}y.sort((D,k)=>k.intersectionZ-D.intersectionZ);const x=[];for(let D=this._order.length-1;D>=0;D--){const k=this._order[D];if(u(k))for(let T=y.length-1;T>=0;T--){const P=y[T].feature;if(p[P.layer.id]<D)break;x.push(P),y.pop()}else for(const T of a){const P=T[k];if(P)for(const L of P)x.push(L.feature)}}return x}queryRenderedFeatures(a,u,p){u&&u.filter&&this._validate(v.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new v.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const D of u.layers){const k=this._layers[D];if(!k)return this.fire(new v.ErrorEvent(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];y[k.source]=!0}}const x=[];u.availableImages=this._availableImages;for(const D in this.sourceCaches)u.layers&&!y[D]||x.push(Cl(this.sourceCaches[D],this._layers,this._serializedLayers,a,u,p));return this.placement&&x.push(function(D,k,T,P,L,z,H){const ee={},Q=z.queryRenderedSymbols(P),J=[];for(const de of Object.keys(Q).map(Number))J.push(H[de]);J.sort(Ct);for(const de of J){const pe=de.featureIndex.lookupSymbolFeatures(Q[de.bucketInstanceId],k,de.bucketIndex,de.sourceLayerIndex,L.filter,L.layers,L.availableImages,D);for(const ve in pe){const ne=ee[ve]=ee[ve]||[],Ce=pe[ve];Ce.sort((be,Pe)=>{const Oe=de.featureSortOrder;if(Oe){const je=Oe.indexOf(be.featureIndex);return Oe.indexOf(Pe.featureIndex)-je}return Pe.featureIndex-be.featureIndex});for(const be of Ce)ne.push(be)}}for(const de in ee)ee[de].forEach(pe=>{const ve=pe.feature,ne=T[D[de].source].getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=ne});return ee}(this._layers,this._serializedLayers,this.sourceCaches,a,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(a,u){u&&u.filter&&this._validate(v.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[a];return p?function(y,x){const D=y.getRenderableIds().map(P=>y.getTileByID(P)),k=[],T={};for(let P=0;P<D.length;P++){const L=D[P],z=L.tileID.canonical.key;T[z]||(T[z]=!0,L.querySourceFeatures(k,x))}return k}(p,u):[]}addSourceType(a,u,p){return mr.getSourceType(a)?p(new Error(`A source type called "${a}" already exists.`)):(mr.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(a,u={}){this._checkLoaded();const p=this.light.getLight();let y=!1;for(const D in a)if(!Oi(a[D],p[D])){y=!0;break}if(!y)return;const x={now:v.exported.now(),transition:v.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,u),this.light.updateTransitions(x)}_validate(a,u,p,y,x={}){return(!x||!1!==x.validate)&&_i(this,a.call(v.validateStyle,v.extend({key:u,style:this.serialize(),value:p,styleSpec:v.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),v.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const u=this.sourceCaches[a];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const u in this.sourceCaches)this.sourceCaches[u].update(a,this.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,u,p,y,x=!1){let D=!1,k=!1;const T={};for(const P of this._order){const L=this._layers[P];if("symbol"!==L.type)continue;if(!T[L.source]){const H=this.sourceCaches[L.source];T[L.source]=H.getRenderableIds(!0).map(ee=>H.getTileByID(ee)).sort((ee,Q)=>Q.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(Q.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(L,T[L.source],a.center.lng);D=D||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.exported.now(),a.zoom))&&(this.pauseablePlacement=new Se(a,this.terrain,this._order,x,u,p,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.exported.now()),k=!0),D&&this.pauseablePlacement.placement.setStale()),k||D)for(const P of this._order){const L=this._layers[P];"symbol"===L.type&&this.placement.updateLayerOpacities(L,T[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.exported.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(a,u,p){this.glyphManager.getGlyphs(u.stacks,p)}getResource(a,u,p){return v.makeRequest(u,p)}}mr.getSourceType=function(f){return xl[f]},mr.setSourceType=function(f,a){xl[f]=a},mr.registerForPluginStateChange=v.registerForPluginStateChange;var Ya="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const yc={prelude:rn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:rn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:rn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:rn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:rn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:rn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:rn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:rn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:rn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:rn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:rn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:rn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:rn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:rn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:rn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:rn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:rn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:rn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:rn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:rn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:rn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:rn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:rn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:rn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:rn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:rn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:rn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ya),terrainDepth:rn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ya),terrainCoords:rn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ya)};function rn(f,a){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=a.match(/attribute ([\w]+) ([\w]+)/g),y=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=x?x.concat(y):y,k={};return{fragmentSource:f=f.replace(u,(T,P,L,z,H)=>(k[H]=!0,"define"===P?`\n#ifndef HAS_UNIFORM_u_${H}\nvarying ${L} ${z} ${H};\n#else\nuniform ${L} ${z} u_${H};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${H}\n    ${L} ${z} ${H} = u_${H};\n#endif\n`)),vertexSource:a=a.replace(u,(T,P,L,z,H)=>{const ee="float"===z?"vec2":"vec4",Q=H.match(/color/)?"color":ee;return k[H]?"define"===P?`\n#ifndef HAS_UNIFORM_u_${H}\nuniform lowp float u_${H}_t;\nattribute ${L} ${ee} a_${H};\nvarying ${L} ${z} ${H};\n#else\nuniform ${L} ${z} u_${H};\n#endif\n`:"vec4"===Q?`\n#ifndef HAS_UNIFORM_u_${H}\n    ${H} = a_${H};\n#else\n    ${L} ${z} ${H} = u_${H};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${H}\n    ${H} = unpack_mix_${Q}(a_${H}, u_${H}_t);\n#else\n    ${L} ${z} ${H} = u_${H};\n#endif\n`:"define"===P?`\n#ifndef HAS_UNIFORM_u_${H}\nuniform lowp float u_${H}_t;\nattribute ${L} ${ee} a_${H};\n#else\nuniform ${L} ${z} u_${H};\n#endif\n`:"vec4"===Q?`\n#ifndef HAS_UNIFORM_u_${H}\n    ${L} ${z} ${H} = a_${H};\n#else\n    ${L} ${z} ${H} = u_${H};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${H}\n    ${L} ${z} ${H} = unpack_mix_${Q}(a_${H}, u_${H}_t);\n#else\n    ${L} ${z} ${H} = u_${H};\n#endif\n`}),staticAttributes:p,staticUniforms:D}}class uu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,u,p,y,x,D,k,T,P){this.context=a;let L=this.boundPaintVertexBuffers.length!==y.length;for(let z=0;!L&&z<y.length;z++)this.boundPaintVertexBuffers[z]!==y[z]&&(L=!0);a.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===p&&!L&&this.boundIndexBuffer===x&&this.boundVertexOffset===D&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===T&&this.boundDynamicVertexBuffer3===P?(a.bindVertexArrayOES.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),T&&T.bind(),P&&P.bind()):this.freshBind(u,p,y,x,D,k,T,P)}freshBind(a,u,p,y,x,D,k,T){let P;const L=a.numAttributes,z=this.context,H=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=D,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=T;else{P=z.currentNumAttributes||0;for(let ee=L;ee<P;ee++)H.disableVertexAttribArray(ee)}u.enableAttributes(H,a);for(const ee of p)ee.enableAttributes(H,a);D&&D.enableAttributes(H,a),k&&k.enableAttributes(H,a),T&&T.enableAttributes(H,a),u.bind(),u.setVertexAttribPointers(H,a,x);for(const ee of p)ee.bind(),ee.setVertexAttribPointers(H,a,x);D&&(D.bind(),D.setVertexAttribPointers(H,a,x)),y&&y.bind(),k&&(k.bind(),k.setVertexAttribPointers(H,a,x)),T&&(T.bind(),T.setVertexAttribPointers(H,a,x)),z.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hu(f){const a=[];for(let u=0;u<f.length;u++){if(null===f[u])continue;const p=f[u].split(" ");a.push(p.pop())}return a}class mu{constructor(a,u,p,y,x,D,k){const T=a.gl;this.program=T.createProgram();const P=hu(p.staticAttributes),L=y?y.getBinderAttributes():[],z=P.concat(L),H=yc.prelude.staticUniforms?hu(yc.prelude.staticUniforms):[],ee=p.staticUniforms?hu(p.staticUniforms):[],Q=y?y.getBinderUniforms():[],J=H.concat(ee).concat(Q),de=[];for(const Oe of J)de.indexOf(Oe)<0&&de.push(Oe);const pe=y?y.defines():[];D&&pe.push("#define OVERDRAW_INSPECTOR;"),k&&pe.push("#define TERRAIN3D;");const ve=pe.concat(yc.prelude.fragmentSource,p.fragmentSource).join("\n"),ne=pe.concat(yc.prelude.vertexSource,p.vertexSource).join("\n"),Ce=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(Ce,ve),T.compileShader(Ce),T.attachShader(this.program,Ce);const be=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(be,ne),T.compileShader(be),T.attachShader(this.program,be),this.attributes={};const Pe={};this.numAttributes=z.length;for(let Oe=0;Oe<this.numAttributes;Oe++)z[Oe]&&(T.bindAttribLocation(this.program,Oe,z[Oe]),this.attributes[z[Oe]]=Oe);T.linkProgram(this.program),T.deleteShader(be),T.deleteShader(Ce);for(let Oe=0;Oe<de.length;Oe++){const je=de[Oe];if(je&&!Pe[je]){const ke=T.getUniformLocation(this.program,je);ke&&(Pe[je]=ke)}}var Oe,je;this.fixedUniforms=x(a,Pe),this.terrainUniforms={u_depth:new v.Uniform1i(Oe=a,(je=Pe).u_depth),u_terrain:new v.Uniform1i(Oe,je.u_terrain),u_terrain_dim:new v.Uniform1f(Oe,je.u_terrain_dim),u_terrain_matrix:new v.UniformMatrix4f(Oe,je.u_terrain_matrix),u_terrain_unpack:new v.Uniform4f(Oe,je.u_terrain_unpack),u_terrain_offset:new v.Uniform1f(Oe,je.u_terrain_offset),u_terrain_exaggeration:new v.Uniform1f(Oe,je.u_terrain_exaggeration)},this.binderUniforms=y?y.getUniforms(a,Pe):[]}draw(a,u,p,y,x,D,k,T,P,L,z,H,ee,Q,J,de,pe,ve){const ne=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(p),a.setStencilMode(y),a.setColorMode(x),a.setCullFace(D),T){a.activeTexture.set(ne.TEXTURE2),ne.bindTexture(ne.TEXTURE_2D,T.depthTexture),a.activeTexture.set(ne.TEXTURE3),ne.bindTexture(ne.TEXTURE_2D,T.texture);for(const be in this.terrainUniforms)this.terrainUniforms[be].set(T[be])}for(const be in this.fixedUniforms)this.fixedUniforms[be].set(k[be]);J&&J.setUniforms(a,this.binderUniforms,ee,{zoom:Q});let Ce=0;switch(u){case ne.LINES:Ce=2;break;case ne.TRIANGLES:Ce=3;break;case ne.LINE_STRIP:Ce=1}for(const be of H.get()){const Pe=be.vaos||(be.vaos={});(Pe[P]||(Pe[P]=new uu)).bind(a,this,L,J?J.getPaintVertexBuffers():[],z,be.vertexOffset,de,pe,ve),ne.drawElements(u,be.primitiveLength*Ce,ne.UNSIGNED_SHORT,be.primitiveOffset*Ce*2)}}}function Lh(f,a,u){const p=1/Vn(u,1,a.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,a.transform.tileZoom)/y,D=x*(u.tileID.canonical.x+u.tileID.wrap*y),k=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[D>>16,k>>16],u_pixel_coord_lower:[65535&D,65535&k]}}const pu=(f,a,u,p)=>{const y=a.style.light,x=y.properties.get("position"),D=[x.x,x.y,x.z],k=v.create$1();"viewport"===y.properties.get("anchor")&&v.fromRotation(k,-a.transform.angle),v.transformMat3(D,D,k);const T=y.properties.get("color");return{u_matrix:f,u_lightpos:D,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+u,u_opacity:p}},Un=(f,a,u,p,y,x,D)=>v.extend(pu(f,a,u,p),Lh(x,a,D),{u_height_factor:-Math.pow(2,y.overscaledZ)/D.tileSize/8}),ao=f=>({u_matrix:f}),bt=(f,a,u,p)=>v.extend(ao(f),Lh(u,a,p)),gd=(f,a)=>({u_matrix:f,u_world:a}),_d=(f,a,u,p,y)=>v.extend(bt(f,a,u,p),{u_world:y}),Sr=(f,a,u,p)=>{const y=f.transform;let x,D;if("map"===p.paint.get("circle-pitch-alignment")){const k=Vn(u,1,y.zoom);x=!0,D=[k,k]}else x=!1,D=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+("map"===p.paint.get("circle-pitch-scale")),u_matrix:f.translatePosMatrix(a.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:D}},Ks=(f,a,u)=>{const p=Vn(u,1,a.zoom),y=Math.pow(2,a.zoom-u.tileID.overscaledZ),x=u.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[a.pixelsToGLUnits[0]/(p*y),a.pixelsToGLUnits[1]/(p*y)],u_overscale_factor:x}},vc=(f,a,u=1)=>({u_matrix:f,u_color:a,u_overlay:0,u_overlay_scale:u}),Fi=f=>({u_matrix:f}),Ml=(f,a,u,p)=>({u_matrix:f,u_extrude_scale:Vn(a,1,u),u_intensity:p});function kn(f,a){const u=Math.pow(2,a.canonical.z),p=a.canonical.y;return[new v.MercatorCoordinate(0,p/u).toLngLat().lat,new v.MercatorCoordinate(0,(p+1)/u).toLngLat().lat]}const ba=(f,a,u,p)=>{const y=f.transform;return{u_matrix:Xa(f,a,u,p),u_ratio:1/Vn(a,1,y.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},fu=(f,a,u,p,y)=>v.extend(ba(f,a,u,y),{u_image:0,u_image_height:p}),Vi=(f,a,u,p,y)=>{const x=f.transform,D=ln(a,x);return{u_matrix:Xa(f,a,u,y),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Vn(a,1,x.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[D,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Bt=(f,a,u,p,y,x)=>{const D=f.lineAtlas,k=ln(a,f.transform),T="round"===u.layout.get("line-cap"),P=D.getDash(p.from,T),L=D.getDash(p.to,T),z=P.width*y.fromScale,H=L.width*y.toScale;return v.extend(ba(f,a,u,x),{u_patternscale_a:[k/z,-P.height/2],u_patternscale_b:[k/H,-L.height/2],u_sdfgamma:D.width/(256*Math.min(z,H)*f.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:L.y,u_mix:y.t})};function ln(f,a){return 1/Vn(f,1,a.tileZoom)}function Xa(f,a,u,p){return f.translatePosMatrix(p?p.posMatrix:a.tileID.posMatrix,a,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const bp=(f,a,u,p,y)=>{return{u_matrix:f,u_tl_parent:a,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(D=y.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(x=y.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:gu(y.paint.get("raster-hue-rotate"))};var x,D};function gu(f){f*=Math.PI/180;const a=Math.sin(f),u=Math.cos(f);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}const Ie=(f,a,u,p,y,x,D,k,T,P)=>{const L=y.transform;return{u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:L.width/L.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:D,u_coord_matrix:k,u_is_text:+T,u_pitch_with_map:+p,u_texsize:P,u_texture:0}},Ka=(f,a,u,p,y,x,D,k,T,P,L)=>{const z=y.transform;return v.extend(Ie(f,a,u,p,y,x,D,k,T,P),{u_gamma_scale:p?Math.cos(z._pitch)*z.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+L})},Xt=(f,a,u,p,y,x,D,k,T,P)=>v.extend(Ka(f,a,u,p,y,x,D,k,!0,T,!0),{u_texsize_icon:P,u_texture_icon:1}),Qi=(f,a,u)=>({u_matrix:f,u_opacity:a,u_color:u}),xp=(f,a,u,p,y,x)=>v.extend(function(D,k,T,P){const L=T.imageManager.getPattern(D.from.toString()),z=T.imageManager.getPattern(D.to.toString()),{width:H,height:ee}=T.imageManager.getPixelSize(),Q=Math.pow(2,P.tileID.overscaledZ),J=P.tileSize*Math.pow(2,T.transform.tileZoom)/Q,de=J*(P.tileID.canonical.x+P.tileID.wrap*Q),pe=J*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[H,ee],u_mix:k.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/Vn(P,1,T.transform.tileZoom),u_pixel_coord_upper:[de>>16,pe>>16],u_pixel_coord_lower:[65535&de,65535&pe]}}(p,x,u,y),{u_matrix:f,u_opacity:a}),Nh={fillExtrusion:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_lightpos:new v.Uniform3f(f,a.u_lightpos),u_lightintensity:new v.Uniform1f(f,a.u_lightintensity),u_lightcolor:new v.Uniform3f(f,a.u_lightcolor),u_vertical_gradient:new v.Uniform1f(f,a.u_vertical_gradient),u_opacity:new v.Uniform1f(f,a.u_opacity)}),fillExtrusionPattern:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_lightpos:new v.Uniform3f(f,a.u_lightpos),u_lightintensity:new v.Uniform1f(f,a.u_lightintensity),u_lightcolor:new v.Uniform3f(f,a.u_lightcolor),u_vertical_gradient:new v.Uniform1f(f,a.u_vertical_gradient),u_height_factor:new v.Uniform1f(f,a.u_height_factor),u_image:new v.Uniform1i(f,a.u_image),u_texsize:new v.Uniform2f(f,a.u_texsize),u_pixel_coord_upper:new v.Uniform2f(f,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(f,a.u_pixel_coord_lower),u_scale:new v.Uniform3f(f,a.u_scale),u_fade:new v.Uniform1f(f,a.u_fade),u_opacity:new v.Uniform1f(f,a.u_opacity)}),fill:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix)}),fillPattern:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_image:new v.Uniform1i(f,a.u_image),u_texsize:new v.Uniform2f(f,a.u_texsize),u_pixel_coord_upper:new v.Uniform2f(f,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(f,a.u_pixel_coord_lower),u_scale:new v.Uniform3f(f,a.u_scale),u_fade:new v.Uniform1f(f,a.u_fade)}),fillOutline:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_world:new v.Uniform2f(f,a.u_world)}),fillOutlinePattern:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_world:new v.Uniform2f(f,a.u_world),u_image:new v.Uniform1i(f,a.u_image),u_texsize:new v.Uniform2f(f,a.u_texsize),u_pixel_coord_upper:new v.Uniform2f(f,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(f,a.u_pixel_coord_lower),u_scale:new v.Uniform3f(f,a.u_scale),u_fade:new v.Uniform1f(f,a.u_fade)}),circle:(f,a)=>({u_camera_to_center_distance:new v.Uniform1f(f,a.u_camera_to_center_distance),u_scale_with_map:new v.Uniform1i(f,a.u_scale_with_map),u_pitch_with_map:new v.Uniform1i(f,a.u_pitch_with_map),u_extrude_scale:new v.Uniform2f(f,a.u_extrude_scale),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_matrix:new v.UniformMatrix4f(f,a.u_matrix)}),collisionBox:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_camera_to_center_distance:new v.Uniform1f(f,a.u_camera_to_center_distance),u_pixels_to_tile_units:new v.Uniform1f(f,a.u_pixels_to_tile_units),u_extrude_scale:new v.Uniform2f(f,a.u_extrude_scale),u_overscale_factor:new v.Uniform1f(f,a.u_overscale_factor)}),collisionCircle:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_inv_matrix:new v.UniformMatrix4f(f,a.u_inv_matrix),u_camera_to_center_distance:new v.Uniform1f(f,a.u_camera_to_center_distance),u_viewport_size:new v.Uniform2f(f,a.u_viewport_size)}),debug:(f,a)=>({u_color:new v.UniformColor(f,a.u_color),u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_overlay:new v.Uniform1i(f,a.u_overlay),u_overlay_scale:new v.Uniform1f(f,a.u_overlay_scale)}),clippingMask:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix)}),heatmap:(f,a)=>({u_extrude_scale:new v.Uniform1f(f,a.u_extrude_scale),u_intensity:new v.Uniform1f(f,a.u_intensity),u_matrix:new v.UniformMatrix4f(f,a.u_matrix)}),heatmapTexture:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_world:new v.Uniform2f(f,a.u_world),u_image:new v.Uniform1i(f,a.u_image),u_color_ramp:new v.Uniform1i(f,a.u_color_ramp),u_opacity:new v.Uniform1f(f,a.u_opacity)}),hillshade:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_image:new v.Uniform1i(f,a.u_image),u_latrange:new v.Uniform2f(f,a.u_latrange),u_light:new v.Uniform2f(f,a.u_light),u_shadow:new v.UniformColor(f,a.u_shadow),u_highlight:new v.UniformColor(f,a.u_highlight),u_accent:new v.UniformColor(f,a.u_accent)}),hillshadePrepare:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_image:new v.Uniform1i(f,a.u_image),u_dimension:new v.Uniform2f(f,a.u_dimension),u_zoom:new v.Uniform1f(f,a.u_zoom),u_unpack:new v.Uniform4f(f,a.u_unpack)}),line:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_ratio:new v.Uniform1f(f,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(f,a.u_units_to_pixels)}),lineGradient:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_ratio:new v.Uniform1f(f,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(f,a.u_units_to_pixels),u_image:new v.Uniform1i(f,a.u_image),u_image_height:new v.Uniform1f(f,a.u_image_height)}),linePattern:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_texsize:new v.Uniform2f(f,a.u_texsize),u_ratio:new v.Uniform1f(f,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_image:new v.Uniform1i(f,a.u_image),u_units_to_pixels:new v.Uniform2f(f,a.u_units_to_pixels),u_scale:new v.Uniform3f(f,a.u_scale),u_fade:new v.Uniform1f(f,a.u_fade)}),lineSDF:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_ratio:new v.Uniform1f(f,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(f,a.u_units_to_pixels),u_patternscale_a:new v.Uniform2f(f,a.u_patternscale_a),u_patternscale_b:new v.Uniform2f(f,a.u_patternscale_b),u_sdfgamma:new v.Uniform1f(f,a.u_sdfgamma),u_image:new v.Uniform1i(f,a.u_image),u_tex_y_a:new v.Uniform1f(f,a.u_tex_y_a),u_tex_y_b:new v.Uniform1f(f,a.u_tex_y_b),u_mix:new v.Uniform1f(f,a.u_mix)}),raster:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_tl_parent:new v.Uniform2f(f,a.u_tl_parent),u_scale_parent:new v.Uniform1f(f,a.u_scale_parent),u_buffer_scale:new v.Uniform1f(f,a.u_buffer_scale),u_fade_t:new v.Uniform1f(f,a.u_fade_t),u_opacity:new v.Uniform1f(f,a.u_opacity),u_image0:new v.Uniform1i(f,a.u_image0),u_image1:new v.Uniform1i(f,a.u_image1),u_brightness_low:new v.Uniform1f(f,a.u_brightness_low),u_brightness_high:new v.Uniform1f(f,a.u_brightness_high),u_saturation_factor:new v.Uniform1f(f,a.u_saturation_factor),u_contrast_factor:new v.Uniform1f(f,a.u_contrast_factor),u_spin_weights:new v.Uniform3f(f,a.u_spin_weights)}),symbolIcon:(f,a)=>({u_is_size_zoom_constant:new v.Uniform1i(f,a.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(f,a.u_is_size_feature_constant),u_size_t:new v.Uniform1f(f,a.u_size_t),u_size:new v.Uniform1f(f,a.u_size),u_camera_to_center_distance:new v.Uniform1f(f,a.u_camera_to_center_distance),u_pitch:new v.Uniform1f(f,a.u_pitch),u_rotate_symbol:new v.Uniform1i(f,a.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(f,a.u_aspect_ratio),u_fade_change:new v.Uniform1f(f,a.u_fade_change),u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(f,a.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(f,a.u_coord_matrix),u_is_text:new v.Uniform1i(f,a.u_is_text),u_pitch_with_map:new v.Uniform1i(f,a.u_pitch_with_map),u_texsize:new v.Uniform2f(f,a.u_texsize),u_texture:new v.Uniform1i(f,a.u_texture)}),symbolSDF:(f,a)=>({u_is_size_zoom_constant:new v.Uniform1i(f,a.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(f,a.u_is_size_feature_constant),u_size_t:new v.Uniform1f(f,a.u_size_t),u_size:new v.Uniform1f(f,a.u_size),u_camera_to_center_distance:new v.Uniform1f(f,a.u_camera_to_center_distance),u_pitch:new v.Uniform1f(f,a.u_pitch),u_rotate_symbol:new v.Uniform1i(f,a.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(f,a.u_aspect_ratio),u_fade_change:new v.Uniform1f(f,a.u_fade_change),u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(f,a.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(f,a.u_coord_matrix),u_is_text:new v.Uniform1i(f,a.u_is_text),u_pitch_with_map:new v.Uniform1i(f,a.u_pitch_with_map),u_texsize:new v.Uniform2f(f,a.u_texsize),u_texture:new v.Uniform1i(f,a.u_texture),u_gamma_scale:new v.Uniform1f(f,a.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(f,a.u_is_halo)}),symbolTextAndIcon:(f,a)=>({u_is_size_zoom_constant:new v.Uniform1i(f,a.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(f,a.u_is_size_feature_constant),u_size_t:new v.Uniform1f(f,a.u_size_t),u_size:new v.Uniform1f(f,a.u_size),u_camera_to_center_distance:new v.Uniform1f(f,a.u_camera_to_center_distance),u_pitch:new v.Uniform1f(f,a.u_pitch),u_rotate_symbol:new v.Uniform1i(f,a.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(f,a.u_aspect_ratio),u_fade_change:new v.Uniform1f(f,a.u_fade_change),u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(f,a.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(f,a.u_coord_matrix),u_is_text:new v.Uniform1i(f,a.u_is_text),u_pitch_with_map:new v.Uniform1i(f,a.u_pitch_with_map),u_texsize:new v.Uniform2f(f,a.u_texsize),u_texsize_icon:new v.Uniform2f(f,a.u_texsize_icon),u_texture:new v.Uniform1i(f,a.u_texture),u_texture_icon:new v.Uniform1i(f,a.u_texture_icon),u_gamma_scale:new v.Uniform1f(f,a.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(f,a.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(f,a.u_is_halo)}),background:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_opacity:new v.Uniform1f(f,a.u_opacity),u_color:new v.UniformColor(f,a.u_color)}),backgroundPattern:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_opacity:new v.Uniform1f(f,a.u_opacity),u_image:new v.Uniform1i(f,a.u_image),u_pattern_tl_a:new v.Uniform2f(f,a.u_pattern_tl_a),u_pattern_br_a:new v.Uniform2f(f,a.u_pattern_br_a),u_pattern_tl_b:new v.Uniform2f(f,a.u_pattern_tl_b),u_pattern_br_b:new v.Uniform2f(f,a.u_pattern_br_b),u_texsize:new v.Uniform2f(f,a.u_texsize),u_mix:new v.Uniform1f(f,a.u_mix),u_pattern_size_a:new v.Uniform2f(f,a.u_pattern_size_a),u_pattern_size_b:new v.Uniform2f(f,a.u_pattern_size_b),u_scale_a:new v.Uniform1f(f,a.u_scale_a),u_scale_b:new v.Uniform1f(f,a.u_scale_b),u_pixel_coord_upper:new v.Uniform2f(f,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(f,a.u_pixel_coord_lower),u_tile_units_to_pixels:new v.Uniform1f(f,a.u_tile_units_to_pixels)}),terrain:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_texture:new v.Uniform1i(f,a.u_texture)}),terrainDepth:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix)}),terrainCoords:(f,a)=>({u_matrix:new v.UniformMatrix4f(f,a.u_matrix),u_texture:new v.Uniform1i(f,a.u_texture),u_terrain_coords_id:new v.Uniform1f(f,a.u_terrain_coords_id)})};class _u{constructor(a,u,p){this.context=a;const y=a.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Zr{constructor(a,u,p,y){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=a;const x=a.gl;this.buffer=x.createBuffer(),a.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let p=0;p<this.attributes.length;p++){const y=u.attributes[this.attributes[p].name];void 0!==y&&a.enableVertexAttribArray(y)}}setVertexAttribPointers(a,u,p){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],D=u.attributes[x.name];void 0!==D&&a.vertexAttribPointer(D,x.components,a[kl[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ji{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bh extends ji{getDefault(){return v.Color.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class o_ extends ji{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class zo extends ji{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class yd extends ji{getDefault(){return[!0,!0,!0,!0]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class wp extends ji{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Vo extends ji{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class zh extends ji{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class vd extends ji{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class yu extends ji{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class vu extends ji{getDefault(){return[0,1]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Vh extends ji{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class Yr extends ji{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Hi extends ji{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class Uh extends ji{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class bu extends ji{getDefault(){return v.Color.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Cp extends ji{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class We extends ji{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class bc extends ji{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class zt extends ji{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class bd extends ji{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Dp extends ji{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class jh extends ji{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ep extends ji{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Hh extends ji{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Tl extends ji{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Il extends ji{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class xd extends ji{getDefault(){return null}set(a){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class xu extends ji{constructor(a){super(a),this.vao=a.extVertexArrayObject}getDefault(){return null}set(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)}}class It extends ji{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class wd extends ji{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class wu extends ji{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class pr extends ji{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class xa extends pr{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Sp extends pr{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class qi{constructor(a,u,p,y){this.context=a,this.width=u,this.height=p;const x=a.gl,D=this.framebuffer=x.createFramebuffer();if(this.colorAttachment=new xa(a,D),y&&(this.depthAttachment=new Sp(a,D)),x.checkFramebufferStatus(x.FRAMEBUFFER)!==x.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,u=this.colorAttachment.get();if(u&&a.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&a.deleteRenderbuffer(p)}a.deleteFramebuffer(this.framebuffer)}}class _n{constructor(a,u,p){this.blendFunction=a,this.blendColor=u,this.mask=p}}_n.Replace=[1,0],_n.disabled=new _n(_n.Replace,v.Color.transparent,[!1,!1,!1,!1]),_n.unblended=new _n(_n.Replace,v.Color.transparent,[!0,!0,!0,!0]),_n.alphaBlended=new _n([1,771],v.Color.transparent,[!0,!0,!0,!0]);class Mp{constructor(a){this.gl=a,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Bh(this),this.clearDepth=new o_(this),this.clearStencil=new zo(this),this.colorMask=new yd(this),this.depthMask=new wp(this),this.stencilMask=new Vo(this),this.stencilFunc=new zh(this),this.stencilOp=new vd(this),this.stencilTest=new yu(this),this.depthRange=new vu(this),this.depthTest=new Vh(this),this.depthFunc=new Yr(this),this.blend=new Hi(this),this.blendFunc=new Uh(this),this.blendColor=new bu(this),this.blendEquation=new Cp(this),this.cullFace=new We(this),this.cullFaceSide=new bc(this),this.frontFace=new zt(this),this.program=new bd(this),this.activeTexture=new Dp(this),this.viewport=new jh(this),this.bindFramebuffer=new Ep(this),this.bindRenderbuffer=new Hh(this),this.bindTexture=new Tl(this),this.bindVertexBuffer=new Il(this),this.bindElementBuffer=new xd(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xu(this),this.pixelStoreUnpack=new It(this),this.pixelStoreUnpackPremultiplyAlpha=new wd(this),this.pixelStoreUnpackFlipY=new wu(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=a.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(a.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u){return new _u(this,a,u)}createVertexBuffer(a,u,p){return new Zr(this,a,u,p)}createRenderbuffer(a,u,p){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,a,u,p),this.bindRenderbuffer.set(null),x}createFramebuffer(a,u,p){return new qi(this,a,u,p)}clear({color:a,depth:u}){const p=this.gl;let y=0;a&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p.clear(y)}setCullFace(a){!1===a.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){Oi(a.blendFunction,_n.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class yi{constructor(a,u,p){this.func=a,this.mask=u,this.range=p}}yi.ReadOnly=!1,yi.ReadWrite=!0,yi.disabled=new yi(519,yi.ReadOnly,[0,1]);class on{constructor(a,u,p,y,x,D){this.test=a,this.ref=u,this.mask=p,this.fail=y,this.depthFail=x,this.pass=D}}on.disabled=new on({func:519,mask:0},0,0,7680,7680,7680);class an{constructor(a,u,p){this.enable=a,this.mode=u,this.frontFace=p}}let xc;function Al(f,a,u,p,y,x,D){const k=f.context,T=k.gl,P=f.useProgram("collisionBox"),L=[];let z=0,H=0;for(let ne=0;ne<p.length;ne++){const Ce=p[ne],be=a.getTile(Ce),Pe=be.getBucket(u);if(!Pe)continue;let Oe=Ce.posMatrix;0===y[0]&&0===y[1]||(Oe=f.translatePosMatrix(Ce.posMatrix,be,y,x));const je=D?Pe.textCollisionBox:Pe.iconCollisionBox,ke=Pe.collisionCircleArray;if(ke.length>0){const rt=v.create(),Xe=Oe;v.mul(rt,Pe.placementInvProjMatrix,f.transform.glCoordMatrix),v.mul(rt,rt,Pe.placementViewportMatrix),L.push({circleArray:ke,circleOffset:H,transform:Xe,invTransform:rt,coord:Ce}),z+=ke.length/4,H=z}je&&P.draw(k,T.LINES,yi.disabled,on.disabled,f.colorModeForRenderPass(),an.disabled,Ks(Oe,f.transform,be),f.style.terrain&&f.style.terrain.getTerrainData(Ce),u.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,null,f.transform.zoom,null,null,je.collisionVertexBuffer)}if(!D||!L.length)return;const ee=f.useProgram("collisionCircle"),Q=new v.CollisionCircleLayoutArray;Q.resize(4*z),Q._trim();let J=0;for(const ne of L)for(let Ce=0;Ce<ne.circleArray.length/4;Ce++){const be=4*Ce,Pe=ne.circleArray[be+0],Oe=ne.circleArray[be+1],je=ne.circleArray[be+2],ke=ne.circleArray[be+3];Q.emplace(J++,Pe,Oe,je,ke,0),Q.emplace(J++,Pe,Oe,je,ke,1),Q.emplace(J++,Pe,Oe,je,ke,2),Q.emplace(J++,Pe,Oe,je,ke,3)}(!xc||xc.length<2*z)&&(xc=function(ne){const Ce=2*ne,be=new v.QuadTriangleArray;be.resize(Ce),be._trim();for(let Pe=0;Pe<Ce;Pe++){const Oe=6*Pe;be.uint16[Oe+0]=4*Pe+0,be.uint16[Oe+1]=4*Pe+1,be.uint16[Oe+2]=4*Pe+2,be.uint16[Oe+3]=4*Pe+2,be.uint16[Oe+4]=4*Pe+3,be.uint16[Oe+5]=4*Pe+0}return be}(z));const de=k.createIndexBuffer(xc,!0),pe=k.createVertexBuffer(Q,v.collisionCircleLayout.members,!0);for(const ne of L){const Ce={u_matrix:ne.transform,u_inv_matrix:ne.invTransform,u_camera_to_center_distance:(ve=f.transform).cameraToCenterDistance,u_viewport_size:[ve.width,ve.height]};ee.draw(k,T.TRIANGLES,yi.disabled,on.disabled,f.colorModeForRenderPass(),an.disabled,Ce,f.style.terrain&&f.style.terrain.getTerrainData(ne.coord),u.id,pe,de,v.SegmentVector.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,f.transform.zoom,null,null,null)}var ve;pe.destroy(),de.destroy()}an.disabled=new an(!1,1029,2305),an.backCCW=new an(!0,1029,2305);const kp=v.identity(new Float32Array(16));function $h(f,a,u,p,y,x){const{horizontalAlign:D,verticalAlign:k}=v.getAnchorAlignment(f),T=-(D-.5)*a,P=-(k-.5)*u,L=v.evaluateVariableOffset(f,p);return new v.pointGeometry((T/y+L[0])*x,(P/y+L[1])*x)}function Qa(f,a,u,p,y,x,D,k,T,P,L){const z=f.text.placedSymbolArray,H=f.text.dynamicLayoutVertexArray,ee=f.icon.dynamicLayoutVertexArray,Q={};H.clear();for(let J=0;J<z.length;J++){const de=z.get(J),ve=de.hidden||!de.crossTileID||f.allowVerticalPlacement&&!de.placedOrientation?null:p[de.crossTileID];if(ve){const ne=new v.pointGeometry(de.anchorX,de.anchorY),Ce=ki(ne,u?D:x,L),be=Wn(y.cameraToCenterDistance,Ce.signedDistanceFromCamera);let Pe=v.evaluateSizeForFeature(f.textSizeData,T,de)*be/v.ONE_EM;u&&(Pe*=f.tilePixelRatio/k);const{width:Oe,height:je,anchor:ke,textOffset:rt,textBoxScale:Xe}=ve,ct=$h(ke,Oe,je,rt,Xe,Pe),Kt=u?ki(ne.add(ct),x,L).point:Ce.point.add(a?ct.rotate(-y.angle):ct),di=f.allowVerticalPlacement&&de.placedOrientation===v.WritingMode.vertical?Math.PI/2:0;for(let yt=0;yt<de.numGlyphs;yt++)v.addDynamicAttributes(H,Kt,di);P&&de.associatedIconIndex>=0&&(Q[de.associatedIconIndex]={shiftedAnchor:Kt,angle:di})}else Ht(de.numGlyphs,H)}if(P){ee.clear();const J=f.icon.placedSymbolArray;for(let de=0;de<J.length;de++){const pe=J.get(de);if(pe.hidden)Ht(pe.numGlyphs,ee);else{const ve=Q[de];if(ve)for(let ne=0;ne<pe.numGlyphs;ne++)v.addDynamicAttributes(ee,ve.shiftedAnchor,ve.angle);else Ht(pe.numGlyphs,ee)}}f.icon.dynamicLayoutVertexBuffer.updateData(ee)}f.text.dynamicLayoutVertexBuffer.updateData(H)}function Tp(f,a,u){return u.iconsInText&&a?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function ts(f,a,u,p,y,x,D,k,T,P,L,z){const H=f.context,ee=H.gl,Q=f.transform,J="map"===k,de="map"===T,pe="viewport"!==k&&"point"!==u.layout.get("symbol-placement"),ve=J&&!de&&!pe,ne=!u.layout.get("symbol-sort-key").isConstant();let Ce=!1;const be=f.depthModeForSublayer(0,yi.ReadOnly),Pe=u.layout.get("text-variable-anchor"),Oe=[];for(const je of p){const ke=a.getTile(je),rt=ke.getBucket(u);if(!rt)continue;const Xe=y?rt.text:rt.icon;if(!Xe||!Xe.segments.get().length)continue;const ct=Xe.programConfigurations.get(u.id),Kt=y||rt.sdfIcons,di=y?rt.textSizeData:rt.iconSizeData,yt=de||0!==Q.pitch,Gi=f.useProgram(Tp(Kt,y,rt),ct),en=v.evaluateSizeForZoom(di,Q.zoom),mi=f.style.terrain&&f.style.terrain.getTerrainData(je);let wi,tn,nr,Ms,ks=[0,0],Ts=null;if(y)tn=ke.glyphAtlasTexture,nr=ee.LINEAR,wi=ke.glyphAtlasTexture.size,rt.iconsInText&&(ks=ke.imageAtlasTexture.size,Ts=ke.imageAtlasTexture,Ms=yt||f.options.rotating||f.options.zooming||"composite"===di.kind||"camera"===di.kind?ee.LINEAR:ee.NEAREST);else{const mo=1!==u.layout.get("icon-size").constantOr(0)||rt.iconsNeedLinear;tn=ke.imageAtlasTexture,nr=Kt||f.options.rotating||f.options.zooming||mo||yt?ee.LINEAR:ee.NEAREST,wi=ke.imageAtlasTexture.size}const gr=Vn(ke,1,f.transform.zoom),Kr=Wa(je.posMatrix,de,J,f.transform,gr),Yi=es(je.posMatrix,de,J,f.transform,gr),Is=Pe&&rt.hasTextData(),Pu="none"!==u.layout.get("icon-text-fit")&&Is&&rt.hasIconData();if(pe){const mo=f.style.terrain?(Vl,Ul)=>f.style.terrain.getElevation(je,Vl,Ul):null,rl="map"===u.layout.get("text-rotation-alignment");wo(rt,je.posMatrix,f,y,Kr,Yi,de,P,rl,mo)}const Ln=f.translatePosMatrix(je.posMatrix,ke,x,D),si=pe||y&&Pe||Pu?kp:Kr,Ai=f.translatePosMatrix(Yi,ke,x,D,!0),rr=Kt&&0!==u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1);let _r;_r=Kt?rt.iconsInText?Xt(di.kind,en,ve,de,f,Ln,si,Ai,wi,ks):Ka(di.kind,en,ve,de,f,Ln,si,Ai,y,wi,!0):Ie(di.kind,en,ve,de,f,Ln,si,Ai,y,wi);const mn={program:Gi,buffers:Xe,uniformValues:_r,atlasTexture:tn,atlasTextureIcon:Ts,atlasInterpolation:nr,atlasInterpolationIcon:Ms,isSDF:Kt,hasHalo:rr};if(ne&&rt.canOverlap){Ce=!0;const mo=Xe.segments.get();for(const rl of mo)Oe.push({segments:new v.SegmentVector([rl]),sortKey:rl.sortKey,state:mn,terrainData:mi})}else Oe.push({segments:Xe.segments,sortKey:0,state:mn,terrainData:mi})}Ce&&Oe.sort((je,ke)=>je.sortKey-ke.sortKey);for(const je of Oe){const ke=je.state;if(H.activeTexture.set(ee.TEXTURE0),ke.atlasTexture.bind(ke.atlasInterpolation,ee.CLAMP_TO_EDGE),ke.atlasTextureIcon&&(H.activeTexture.set(ee.TEXTURE1),ke.atlasTextureIcon&&ke.atlasTextureIcon.bind(ke.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),ke.isSDF){const rt=ke.uniformValues;ke.hasHalo&&(rt.u_is_halo=1,wc(ke.buffers,je.segments,u,f,ke.program,be,L,z,rt,je.terrainData)),rt.u_is_halo=0}wc(ke.buffers,je.segments,u,f,ke.program,be,L,z,ke.uniformValues,je.terrainData)}}function wc(f,a,u,p,y,x,D,k,T,P){const L=p.context;y.draw(L,L.gl.TRIANGLES,x,D,k,an.disabled,T,P,u.id,f.layoutVertexBuffer,f.indexBuffer,a,u.paint,p.transform.zoom,f.programConfigurations.get(u.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function we(f,a,u,p,y,x,D){const k=f.context.gl,T=u.paint.get("fill-pattern"),P=T&&T.constantOr(1),L=u.getCrossfadeParameters();let z,H,ee,Q,J;D?(H=P&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",z=k.LINES):(H=P?"fillPattern":"fill",z=k.TRIANGLES);for(const de of p){const pe=a.getTile(de);if(P&&!pe.patternsLoaded())continue;const ve=pe.getBucket(u);if(!ve)continue;const ne=ve.programConfigurations.get(u.id),Ce=f.useProgram(H,ne),be=f.style.terrain&&f.style.terrain.getTerrainData(de);P&&(f.context.activeTexture.set(k.TEXTURE0),pe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ne.updatePaintBuffers(L));const Pe=T.constantOr(null);if(Pe&&pe.imageAtlas){const ke=pe.imageAtlas,rt=ke.patternPositions[Pe.to.toString()],Xe=ke.patternPositions[Pe.from.toString()];rt&&Xe&&ne.setConstantPatternPositions(rt,Xe)}const Oe=be?de:null,je=f.translatePosMatrix(Oe?Oe.posMatrix:de.posMatrix,pe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(D){Q=ve.indexBuffer2,J=ve.segments2;const ke=[k.drawingBufferWidth,k.drawingBufferHeight];ee="fillOutlinePattern"===H&&P?_d(je,f,L,pe,ke):gd(je,ke)}else Q=ve.indexBuffer,J=ve.segments,ee=P?bt(je,f,L,pe):ao(je);Ce.draw(f.context,z,y,f.stencilModeForClipping(de),x,an.disabled,ee,be,u.id,ve.layoutVertexBuffer,Q,J,u.paint,f.transform.zoom,ne)}}function Rl(f,a,u,p,y,x,D){const k=f.context,T=k.gl,P=u.paint.get("fill-extrusion-pattern"),L=P.constantOr(1),z=u.getCrossfadeParameters(),H=u.paint.get("fill-extrusion-opacity");for(const ee of p){const Q=a.getTile(ee),J=Q.getBucket(u);if(!J)continue;const de=f.style.terrain&&f.style.terrain.getTerrainData(ee),pe=J.programConfigurations.get(u.id),ve=f.useProgram(L?"fillExtrusionPattern":"fillExtrusion",pe);L&&(f.context.activeTexture.set(T.TEXTURE0),Q.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),pe.updatePaintBuffers(z));const ne=P.constantOr(null);if(ne&&Q.imageAtlas){const Oe=Q.imageAtlas,je=Oe.patternPositions[ne.to.toString()],ke=Oe.patternPositions[ne.from.toString()];je&&ke&&pe.setConstantPatternPositions(je,ke)}const Ce=f.translatePosMatrix(ee.posMatrix,Q,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),be=u.paint.get("fill-extrusion-vertical-gradient"),Pe=L?Un(Ce,f,be,H,ee,z,Q):pu(Ce,f,be,H);ve.draw(k,k.gl.TRIANGLES,y,x,D,an.backCCW,Pe,de,u.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,u.paint,f.transform.zoom,pe,f.style.terrain&&J.centroidVertexBuffer)}}function Je(f,a,u,p,y,x,D){const k=f.context,T=k.gl,P=u.fbo;if(!P)return;const L=f.useProgram("hillshade"),z=f.style.terrain&&f.style.terrain.getTerrainData(a);k.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,P.colorAttachment.get()),L.draw(k,T.TRIANGLES,y,x,D,an.disabled,((H,ee,Q,J)=>{const de=Q.paint.get("hillshade-shadow-color"),pe=Q.paint.get("hillshade-highlight-color"),ve=Q.paint.get("hillshade-accent-color");let ne=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Q.paint.get("hillshade-illumination-anchor")&&(ne-=H.transform.angle);const Ce=!H.options.moving;return{u_matrix:J?J.posMatrix:H.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:kn(0,ee.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),ne],u_shadow:de,u_highlight:pe,u_accent:ve}})(f,u,p,z?a:null),z,p.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function Cc(f,a,u,p,y,x){const D=f.context,k=D.gl,T=a.dem;if(T&&T.data){const P=T.dim,L=T.stride,z=T.getPixels();if(D.activeTexture.set(k.TEXTURE1),D.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||f.getTileTexture(L),a.demTexture){const ee=a.demTexture;ee.update(z,{premultiply:!1}),ee.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else a.demTexture=new hn(D,z,k.RGBA,{premultiply:!1}),a.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);D.activeTexture.set(k.TEXTURE0);let H=a.fbo;if(!H){const ee=new hn(D,{width:P,height:P,data:null},k.RGBA);ee.bind(k.LINEAR,k.CLAMP_TO_EDGE),H=a.fbo=D.createFramebuffer(P,P,!0),H.colorAttachment.set(ee.texture)}D.bindFramebuffer.set(H.framebuffer),D.viewport.set([0,0,P,P]),f.useProgram("hillshadePrepare").draw(D,k.TRIANGLES,p,y,x,an.disabled,((ee,Q)=>{const J=Q.stride,de=v.create();return v.ortho(de,0,v.EXTENT,-v.EXTENT,0,0,1),v.translate(de,de,[0,-v.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[J,J],u_zoom:ee.overscaledZ,u_unpack:Q.getUnpackVector()}})(a.tileID,T),null,u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function Pl(f,a,u,p,y,x){const D=p.paint.get("raster-fade-duration");if(!x&&D>0){const k=v.exported.now(),T=(k-f.timeAdded)/D,P=a?(k-a.timeAdded)/D:-1,L=u.getSource(),z=y.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),H=!a||Math.abs(a.tileID.overscaledZ-z)>Math.abs(f.tileID.overscaledZ-z),ee=H&&f.refreshedUponExpiration?1:v.clamp(H?T:1-P,0,1);return f.refreshedUponExpiration&&T>=1&&(f.refreshedUponExpiration=!1),a?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const wa=new v.Color(1,0,0,1),is=new v.Color(0,1,0,1),Gh=new v.Color(0,0,1,1),Cu=new v.Color(1,0,1,1),Es=new v.Color(0,1,1,1);function Mr(f,a,u,p){lo(f,0,a+u/2,f.transform.width,u,p)}function tr(f,a,u,p){lo(f,a-u/2,0,u,f.transform.height,p)}function lo(f,a,u,p,y,x){const D=f.context,k=D.gl;k.enable(k.SCISSOR_TEST),k.scissor(a*f.pixelRatio,u*f.pixelRatio,p*f.pixelRatio,y*f.pixelRatio),D.clear({color:x}),k.disable(k.SCISSOR_TEST)}function $i(f,a,u){const p=f.context,y=p.gl,x=u.posMatrix,D=f.useProgram("debug"),k=yi.disabled,T=on.disabled,P=f.colorModeForRenderPass(),L="$debug",z=f.style.terrain&&f.style.terrain.getTerrainData(u);p.activeTexture.set(y.TEXTURE0),f.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE);const H=a.getTileByID(u.key).latestRawTileData,ee=Math.floor((H&&H.byteLength||0)/1024),Q=a.getTile(u).tileSize,J=512/Math.min(Q,512)*(u.overscaledZ/f.transform.zoom)*.5;let de=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(de+=` => ${u.overscaledZ}`),function(pe,ve){pe.initDebugOverlayCanvas();const ne=pe.debugOverlayCanvas,Ce=pe.context.gl,be=pe.debugOverlayCanvas.getContext("2d");be.clearRect(0,0,ne.width,ne.height),be.shadowColor="white",be.shadowBlur=2,be.lineWidth=1.5,be.strokeStyle="white",be.textBaseline="top",be.font="bold 36px Open Sans, sans-serif",be.fillText(ve,5,5),be.strokeText(ve,5,5),pe.debugOverlayTexture.update(ne),pe.debugOverlayTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE)}(f,`${de} ${ee}kB`),D.draw(p,y.TRIANGLES,k,T,_n.alphaBlended,an.disabled,vc(x,v.Color.transparent,J),null,L,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),D.draw(p,y.LINE_STRIP,k,T,P,an.disabled,vc(x,v.Color.red),z,L,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function Ja(f,a,u){const p=f.context,y=p.gl,x=f.colorModeForRenderPass(),D=new yi(y.LEQUAL,yi.ReadWrite,f.depthRangeFor3D),k=f.useProgram("terrain"),T=a.getTerrainMesh(),P=a.getTerrainData(u.tileID);p.bindFramebuffer.set(null),p.viewport.set([0,0,f.width,f.height]),p.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,a.getRTTFramebuffer().colorAttachment.get());const L=f.transform.calculatePosMatrix(u.tileID.toUnwrapped());k.draw(p,y.TRIANGLES,D,on.disabled,x,an.backCCW,{u_matrix:L,u_texture:0},P,"terrain",T.vertexBuffer,T.indexBuffer,T.segments)}function Cd(f,a,u,p){const y=f.context,x=u.tileSize*a.qualityFactor;u.textures[p]||(u.textures[p]=f.getTileTexture(x)||new hn(y,{width:x,height:x,data:null},y.gl.RGBA),u.textures[p].bind(y.gl.LINEAR,y.gl.CLAMP_TO_EDGE),0===p&&a.sourceCache.renderHistory.unshift(u.tileID.key));const D=a.getRTTFramebuffer();D.colorAttachment.set(u.textures[p].texture),y.bindFramebuffer.set(D.framebuffer),y.viewport.set([0,0,x,x])}class Dd{constructor(a){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=a,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=a.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const a=this.painter.style,u=a.terrain;for(const p in a.sourceCaches){this._coordsDescendingInv[p]={};const y=a.sourceCaches[p].getVisibleCoordinates();for(const x of y){const D=u.sourceCache.getTerrainCoords(x);for(const k in D)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(D[k])}}for(const p of a._order){const y=a._layers[p],x=y.source;if(this._renderToTexture[y.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const D in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][D]=this._coordsDescendingInv[x][D].map(k=>k.key).sort().join()}}return this._renderableTiles.forEach(p=>{for(const y in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[y][p.tileID.key];x&&x!==p.textureCoords[y]&&p.clearTextures(this.painter),u.needsRerender(y,p.tileID)&&p.clearTextures(this.painter)}this._rerender[p.tileID.key]=!p.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(a){const u=a.type,p=this.painter,y=p.style._order,x=p.currentLayer,D=x+1===y.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(y[x]),!D))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===u||this._renderToTexture[u]&&D){this._prevType=u;const k=this._stacks.length-1,T=this._stacks[k]||[];for(const P of this._renderableTiles){if(Cd(p,p.style.terrain,P,k),this._rerender[P.tileID.key]){p.context.clear({color:v.Color.transparent});for(let L=0;L<T.length;L++){const z=p.style._layers[T[L]],H=z.source?this._coordsDescendingInv[z.source][P.tileID.key]:[P.tileID];p._renderTileClippingMasks(z,H),p.renderLayer(p,p.style.sourceCaches[z.source],z,H),z.source&&(P.textureCoords[z.source]=this._coordsDescendingInvStr[z.source][P.tileID.key])}}Ja(p,p.style.terrain,P)}if("hillshade"===u){this._stacks.push([y[x]]);for(const P of this._renderableTiles){const L=this._coordsDescendingInv[a.source][P.tileID.key];Cd(p,p.style.terrain,P,this._stacks.length-1),p.context.clear({color:v.Color.transparent}),p._renderTileClippingMasks(a,L),p.renderLayer(p,p.style.sourceCaches[a.source],a,L),Ja(p,p.style.terrain,P)}return!0}return this._renderToTexture[u]}return!1}}const Ol={symbol:function(f,a,u,p,y){if("translucent"!==f.renderPass)return;const x=on.disabled,D=f.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,T,P,L,z,H,ee){const Q=T.transform,J="map"===z,de="map"===H;for(const pe of k){const ve=L.getTile(pe),ne=ve.getBucket(P);if(!ne||!ne.text||!ne.text.segments.get().length)continue;const Ce=v.evaluateSizeForZoom(ne.textSizeData,Q.zoom),be=Vn(ve,1,T.transform.zoom),Pe=Wa(pe.posMatrix,de,J,T.transform,be),Oe="none"!==P.layout.get("icon-text-fit")&&ne.hasIconData();if(Ce){const je=Math.pow(2,Q.zoom-ve.tileID.overscaledZ);Qa(ne,J,de,ee,Q,Pe,pe.posMatrix,je,Ce,Oe,T.style.terrain?(ke,rt)=>T.style.terrain.getElevation(pe,ke,rt):null)}}}(p,f,u,a,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),y),0!==u.paint.get("icon-opacity").constantOr(1)&&ts(f,a,u,p,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),x,D),0!==u.paint.get("text-opacity").constantOr(1)&&ts(f,a,u,p,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),x,D),a.map.showCollisionBoxes&&(Al(f,a,u,p,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Al(f,a,u,p,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(f,a,u,p){if("translucent"!==f.renderPass)return;const y=u.paint.get("circle-opacity"),x=u.paint.get("circle-stroke-width"),D=u.paint.get("circle-stroke-opacity"),k=!u.layout.get("circle-sort-key").isConstant();if(0===y.constantOr(1)&&(0===x.constantOr(1)||0===D.constantOr(1)))return;const T=f.context,P=T.gl,L=f.depthModeForSublayer(0,yi.ReadOnly),z=on.disabled,H=f.colorModeForRenderPass(),ee=[];for(let Q=0;Q<p.length;Q++){const J=p[Q],de=a.getTile(J),pe=de.getBucket(u);if(!pe)continue;const ve=pe.programConfigurations.get(u.id),ne=f.useProgram("circle",ve),Ce=pe.layoutVertexBuffer,be=pe.indexBuffer,Pe=f.style.terrain&&f.style.terrain.getTerrainData(J),Oe={programConfiguration:ve,program:ne,layoutVertexBuffer:Ce,indexBuffer:be,uniformValues:Sr(f,J,de,u),terrainData:Pe};if(k){const je=pe.segments.get();for(const ke of je)ee.push({segments:new v.SegmentVector([ke]),sortKey:ke.sortKey,state:Oe})}else ee.push({segments:pe.segments,sortKey:0,state:Oe})}k&&ee.sort((Q,J)=>Q.sortKey-J.sortKey);for(const Q of ee){const{programConfiguration:J,program:de,layoutVertexBuffer:pe,indexBuffer:ve,uniformValues:ne,terrainData:Ce}=Q.state;de.draw(T,P.TRIANGLES,L,z,H,an.disabled,ne,Ce,u.id,pe,ve,Q.segments,u.paint,f.transform.zoom,J)}},heatmap:function(f,a,u,p){if(0!==u.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){const y=f.context,x=y.gl,D=on.disabled,k=new _n([x.ONE,x.ONE],v.Color.transparent,[!0,!0,!0,!0]);(function(T,P,L){const z=T.gl;T.activeTexture.set(z.TEXTURE1),T.viewport.set([0,0,P.width/4,P.height/4]);let H=L.heatmapFbo;if(H)z.bindTexture(z.TEXTURE_2D,H.colorAttachment.get()),T.bindFramebuffer.set(H.framebuffer);else{const ee=z.createTexture();z.bindTexture(z.TEXTURE_2D,ee),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),H=L.heatmapFbo=T.createFramebuffer(P.width/4,P.height/4,!1),function(Q,J,de,pe){const ve=Q.gl;ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,J.width/4,J.height/4,0,ve.RGBA,Q.extRenderToTextureHalfFloat?Q.extTextureHalfFloat.HALF_FLOAT_OES:ve.UNSIGNED_BYTE,null),pe.colorAttachment.set(de)}(T,P,ee,H)}})(y,f,u),y.clear({color:v.Color.transparent});for(let T=0;T<p.length;T++){const P=p[T];if(a.hasRenderableParent(P))continue;const L=a.getTile(P),z=L.getBucket(u);if(!z)continue;const H=z.programConfigurations.get(u.id),ee=f.useProgram("heatmap",H),{zoom:Q}=f.transform;ee.draw(y,x.TRIANGLES,yi.disabled,D,k,an.disabled,Ml(P.posMatrix,L,Q,u.paint.get("heatmap-intensity")),null,u.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,u.paint,f.transform.zoom,H)}y.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(y,x){const D=y.context,k=D.gl,T=x.heatmapFbo;if(!T)return;D.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,T.colorAttachment.get()),D.activeTexture.set(k.TEXTURE1);let P=x.colorRampTexture;P||(P=x.colorRampTexture=new hn(D,x.colorRamp,k.RGBA)),P.bind(k.LINEAR,k.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(D,k.TRIANGLES,yi.disabled,on.disabled,y.colorModeForRenderPass(),an.disabled,((L,z,H,ee)=>{const Q=v.create();v.ortho(Q,0,L.width,L.height,0,0,1);const J=L.context.gl;return{u_matrix:Q,u_world:[J.drawingBufferWidth,J.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:z.paint.get("heatmap-opacity")}})(y,x),null,x.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,x.paint,y.transform.zoom)}(f,u))},line:function(f,a,u,p){if("translucent"!==f.renderPass)return;const y=u.paint.get("line-opacity"),x=u.paint.get("line-width");if(0===y.constantOr(1)||0===x.constantOr(1))return;const D=f.depthModeForSublayer(0,yi.ReadOnly),k=f.colorModeForRenderPass(),T=u.paint.get("line-dasharray"),P=u.paint.get("line-pattern"),L=P.constantOr(1),z=u.paint.get("line-gradient"),H=u.getCrossfadeParameters(),ee=L?"linePattern":T?"lineSDF":z?"lineGradient":"line",Q=f.context,J=Q.gl;let de=!0;for(const pe of p){const ve=a.getTile(pe);if(L&&!ve.patternsLoaded())continue;const ne=ve.getBucket(u);if(!ne)continue;const Ce=ne.programConfigurations.get(u.id),be=f.context.program.get(),Pe=f.useProgram(ee,Ce),Oe=de||Pe.program!==be,je=f.style.terrain&&f.style.terrain.getTerrainData(pe),ke=P.constantOr(null);if(ke&&ve.imageAtlas){const ct=ve.imageAtlas,Kt=ct.patternPositions[ke.to.toString()],di=ct.patternPositions[ke.from.toString()];Kt&&di&&Ce.setConstantPatternPositions(Kt,di)}const rt=je?pe:null,Xe=L?Vi(f,ve,u,H,rt):T?Bt(f,ve,u,T,H,rt):z?fu(f,ve,u,ne.lineClipsArray.length,rt):ba(f,ve,u,rt);if(L)Q.activeTexture.set(J.TEXTURE0),ve.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Ce.updatePaintBuffers(H);else if(T&&(Oe||f.lineAtlas.dirty))Q.activeTexture.set(J.TEXTURE0),f.lineAtlas.bind(Q);else if(z){const ct=ne.gradients[u.id];let Kt=ct.texture;if(u.gradientVersion!==ct.version){let di=256;if(u.stepInterpolant){const yt=a.getSource().maxzoom,Gi=pe.canonical.z===yt?Math.ceil(1<<f.transform.maxZoom-pe.canonical.z):1;di=v.clamp(v.nextPowerOfTwo(ne.maxLineLength/v.EXTENT*1024*Gi),256,Q.maxTextureSize)}ct.gradient=v.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:di,image:ct.gradient||void 0,clips:ne.lineClipsArray}),ct.texture?ct.texture.update(ct.gradient):ct.texture=new hn(Q,ct.gradient,J.RGBA),ct.version=u.gradientVersion,Kt=ct.texture}Q.activeTexture.set(J.TEXTURE0),Kt.bind(u.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}Pe.draw(Q,J.TRIANGLES,D,f.stencilModeForClipping(pe),k,an.disabled,Xe,je,u.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,u.paint,f.transform.zoom,Ce,ne.layoutVertexBuffer2),de=!1}},fill:function(f,a,u,p){const y=u.paint.get("fill-color"),x=u.paint.get("fill-opacity");if(0===x.constantOr(1))return;const D=f.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),T=f.opaquePassEnabledForLayer()&&!k.constantOr(1)&&1===y.constantOr(v.Color.transparent).a&&1===x.constantOr(0)?"opaque":"translucent";if(f.renderPass===T){const P=f.depthModeForSublayer(1,"opaque"===f.renderPass?yi.ReadWrite:yi.ReadOnly);we(f,a,u,p,P,D,!1)}if("translucent"===f.renderPass&&u.paint.get("fill-antialias")){const P=f.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,yi.ReadOnly);we(f,a,u,p,P,D,!0)}},"fill-extrusion":function(f,a,u,p){const y=u.paint.get("fill-extrusion-opacity");if(0!==y&&"translucent"===f.renderPass){const x=new yi(f.context.gl.LEQUAL,yi.ReadWrite,f.depthRangeFor3D);if(1!==y||u.paint.get("fill-extrusion-pattern").constantOr(1))Rl(f,a,u,p,x,on.disabled,_n.disabled),Rl(f,a,u,p,x,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const D=f.colorModeForRenderPass();Rl(f,a,u,p,x,on.disabled,D)}}},hillshade:function(f,a,u,p){if("offscreen"!==f.renderPass&&"translucent"!==f.renderPass)return;const y=f.context,x=f.depthModeForSublayer(0,yi.ReadOnly),D=f.colorModeForRenderPass(),[k,T]="translucent"===f.renderPass?f.stencilConfigForOverlap(p):[{},p];for(const P of T){const L=a.getTile(P);void 0!==L.needsHillshadePrepare&&L.needsHillshadePrepare&&"offscreen"===f.renderPass?Cc(f,L,u,x,on.disabled,D):"translucent"===f.renderPass&&Je(f,P,L,u,x,k[P.overscaledZ],D)}y.viewport.set([0,0,f.width,f.height])},raster:function(f,a,u,p){if("translucent"!==f.renderPass||0===u.paint.get("raster-opacity")||!p.length)return;const y=f.context,x=y.gl,D=a.getSource(),k=f.useProgram("raster"),T=f.colorModeForRenderPass(),[P,L]=D instanceof No?[{},p]:f.stencilConfigForOverlap(p),z=L[L.length-1].overscaledZ,H=!f.options.moving;for(const ee of L){const Q=f.depthModeForSublayer(ee.overscaledZ-z,1===u.paint.get("raster-opacity")?yi.ReadWrite:yi.ReadOnly,x.LESS),J=a.getTile(ee);J.registerFadeDuration(u.paint.get("raster-fade-duration"));const de=a.findLoadedParent(ee,0),pe=Pl(J,de,a,u,f.transform,f.style.terrain);let ve,ne;const Ce="nearest"===u.paint.get("raster-resampling")?x.NEAREST:x.LINEAR;y.activeTexture.set(x.TEXTURE0),J.texture.bind(Ce,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(x.TEXTURE1),de?(de.texture.bind(Ce,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),ve=Math.pow(2,de.tileID.overscaledZ-J.tileID.overscaledZ),ne=[J.tileID.canonical.x*ve%1,J.tileID.canonical.y*ve%1]):J.texture.bind(Ce,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const be=f.style.terrain&&f.style.terrain.getTerrainData(ee),Pe=be?ee:null,Oe=Pe?Pe.posMatrix:f.transform.calculatePosMatrix(ee.toUnwrapped(),H),je=bp(Oe,ne||[0,0],ve||1,pe,u);D instanceof No?k.draw(y,x.TRIANGLES,Q,on.disabled,T,an.disabled,je,be,u.id,D.boundsBuffer,f.quadTriangleIndexBuffer,D.boundsSegments):k.draw(y,x.TRIANGLES,Q,P[ee.overscaledZ],T,an.disabled,je,be,u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,a,u,p){const y=u.paint.get("background-color"),x=u.paint.get("background-opacity");if(0===x)return;const D=f.context,k=D.gl,T=f.transform,P=T.tileSize,L=u.paint.get("background-pattern");if(f.isPatternMissing(L))return;const z=!L&&1===y.a&&1===x&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==z)return;const H=on.disabled,ee=f.depthModeForSublayer(0,"opaque"===z?yi.ReadWrite:yi.ReadOnly),Q=f.colorModeForRenderPass(),J=f.useProgram(L?"backgroundPattern":"background"),de=p||T.coveringTiles({tileSize:P,terrain:f.style.terrain});L&&(D.activeTexture.set(k.TEXTURE0),f.imageManager.bind(f.context));const pe=u.getCrossfadeParameters();for(const ve of de){const ne=p?ve.posMatrix:f.transform.calculatePosMatrix(ve.toUnwrapped()),Ce=L?xp(ne,x,f,L,{tileID:ve,tileSize:P},pe):Qi(ne,x,y),be=f.style.terrain&&f.style.terrain.getTerrainData(ve);J.draw(D,k.TRIANGLES,ee,H,Q,an.disabled,Ce,be,u.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,a,u){for(let p=0;p<u.length;p++)$i(f,a,u[p])},custom:function(f,a,u){const p=f.context,y=u.implementation;if("offscreen"===f.renderPass){const x=y.prerender;x&&(f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),x.call(y,p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState())}else if("translucent"===f.renderPass){f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),p.setStencilMode(on.disabled);const x="3d"===y.renderingMode?new yi(f.context.gl.LEQUAL,yi.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,yi.ReadOnly);p.setDepthMode(x),y.render(p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState(),p.bindFramebuffer.set(null)}}};class ns{constructor(a,u){this.context=new Mp(a),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:v.create(),renderTime:0},this.setup(),this.numSublayers=Ti.maxUnderzooming+Ti.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vt,this.gpuTimers={}}resize(a,u,p){if(this.width=a*p,this.height=u*p,this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const a=this.context,u=new v.PosArray;u.emplaceBack(0,0),u.emplaceBack(v.EXTENT,0),u.emplaceBack(0,v.EXTENT),u.emplaceBack(v.EXTENT,v.EXTENT),this.tileExtentBuffer=a.createVertexBuffer(u,Ii.members),this.tileExtentSegments=v.SegmentVector.simpleSegment(0,0,4,2);const p=new v.PosArray;p.emplaceBack(0,0),p.emplaceBack(v.EXTENT,0),p.emplaceBack(0,v.EXTENT),p.emplaceBack(v.EXTENT,v.EXTENT),this.debugBuffer=a.createVertexBuffer(p,Ii.members),this.debugSegments=v.SegmentVector.simpleSegment(0,0,4,5);const y=new v.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(v.EXTENT,0,v.EXTENT,0),y.emplaceBack(0,v.EXTENT,0,v.EXTENT),y.emplaceBack(v.EXTENT,v.EXTENT,v.EXTENT,v.EXTENT),this.rasterBoundsBuffer=a.createVertexBuffer(y,$s.members),this.rasterBoundsSegments=v.SegmentVector.simpleSegment(0,0,4,2);const x=new v.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(x,Ii.members),this.viewportSegments=v.SegmentVector.simpleSegment(0,0,4,2);const D=new v.LineStripIndexArray;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(D);const k=new v.TriangleIndexArray;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(k),this.emptyTexture=new hn(a,{width:1,height:1,data:new Uint8Array([0,0,0,0])},a.gl.RGBA);const T=this.context.gl;this.stencilClearMode=new on({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)}clearStencil(){const a=this.context,u=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=v.create();v.ortho(p,0,this.width,this.height,0,0,1),v.scale(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,u.TRIANGLES,yi.disabled,this.stencilClearMode,_n.disabled,an.disabled,Fi(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,u){if(this.currentStencilSource===a.source||!a.isTileClipped()||!u||!u.length)return;this.currentStencilSource=a.source;const p=this.context,y=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(_n.disabled),p.setDepthMode(yi.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of u){const k=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,T=this.style.terrain&&this.style.terrain.getTerrainData(D);x.draw(p,y.TRIANGLES,yi.disabled,new on({func:y.ALWAYS,mask:0},k,255,y.KEEP,y.KEEP,y.REPLACE),_n.disabled,an.disabled,Fi(D.posMatrix),T,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,u=this.context.gl;return new on({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){const u=this.context.gl;return new on({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(a){const u=this.context.gl,p=a.sort((D,k)=>k.overscaledZ-D.overscaledZ),y=p[p.length-1].overscaledZ,x=p[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const D={};for(let k=0;k<x;k++)D[k+y]=new on({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[D,p]}return[{[y]:on.disabled},p]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new _n([a.CONSTANT_COLOR,a.ONE],new v.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?_n.unblended:_n.alphaBlended}depthModeForSublayer(a,u,p){if(!this.opaquePassEnabledForLayer())return yi.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new yi(p||this.context.gl.LEQUAL,u,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,u){this.style=a,this.options=u,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(v.exported.now()),this.imageManager.beginFrame();const p=this.style._order,y=this.style.sourceCaches,x=this.style.terrain&&new Dd(this);for(const P in y){const L=y[P];L.used&&L.prepare(this.context)}const D={},k={},T={};for(const P in y){const L=y[P];D[P]=L.getVisibleCoordinates(),k[P]=D[P].slice().reverse(),T[P]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<p.length;P++)if(this.style._layers[p[P]].is3D()){this.opaquePassCutoff=P;break}if(x){this.opaquePassCutoff=0;const P=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!v.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(v.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(L,z){const H=L.context,ee=H.gl,Q=_n.unblended,J=new yi(ee.LEQUAL,yi.ReadWrite,[0,1]),de=z.getTerrainMesh(),pe=z.sourceCache.getRenderableTiles(),ve=L.useProgram("terrainDepth");H.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),H.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),H.clear({color:v.Color.transparent,depth:1});for(const ne of pe){const Ce=z.getTerrainData(ne.tileID),be=L.transform.calculatePosMatrix(ne.tileID.toUnwrapped());ve.draw(H,ee.TRIANGLES,J,on.disabled,Q,an.backCCW,{u_matrix:be},Ce,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}H.bindFramebuffer.set(null),H.viewport.set([0,0,L.width,L.height])}(this,this.style.terrain),function(L,z){const H=L.context,ee=H.gl,Q=_n.unblended,J=new yi(ee.LEQUAL,yi.ReadWrite,[0,1]),de=z.getTerrainMesh(),pe=z.getCoordsTexture(),ve=z.sourceCache.getRenderableTiles(),ne=L.useProgram("terrainCoords");H.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),H.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),H.clear({color:v.Color.transparent,depth:1}),z.coordsIndex=[];for(const Ce of ve){const be=z.getTerrainData(Ce.tileID);H.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,pe.texture);const Pe=L.transform.calculatePosMatrix(Ce.tileID.toUnwrapped());ne.draw(H,ee.TRIANGLES,J,on.disabled,Q,an.backCCW,{u_matrix:Pe,u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0},be,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),z.coordsIndex.push(Ce.tileID.key)}H.bindFramebuffer.set(null),H.viewport.set([0,0,L.width,L.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const P of p){const L=this.style._layers[P];if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const z=k[L.source];("custom"===L.type||z.length)&&this.renderLayer(this,y[L.source],L,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?v.Color.black:v.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!x)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[p[this.currentLayer]],L=y[P.source],z=D[P.source];this._renderTileClippingMasks(P,z),this.renderLayer(this,L,P,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const P=this.style._layers[p[this.currentLayer]],L=y[P.source];if(x&&x.renderLayer(P))continue;const z=("symbol"===P.type?T:k)[P.source];this._renderTileClippingMasks(P,D[P.source]),this.renderLayer(this,L,P,z)}if(this.options.showTileBoundaries){let P,L;Object.values(this.style._layers).forEach(z=>{z.source&&!z.isHidden(this.transform.zoom)&&(z.source!==(L&&L.id)&&(L=this.style.sourceCaches[z.source]),(!P||P.getSource().maxzoom<L.getSource().maxzoom)&&(P=L))}),P&&Ol.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const L=P.transform.padding;Mr(P,P.transform.height-(L.top||0),3,wa),Mr(P,L.bottom||0,3,is),tr(P,L.left||0,3,Gh),tr(P,P.transform.width-(L.right||0),3,Cu);const z=P.transform.centerPoint;var H,ee,Q,J;lo(H=P,(ee=z.x)-1,(Q=P.transform.height-z.y)-10,2,20,J=Es),lo(H,ee-10,Q-1,20,2,J)}(this),this.context.setDefault()}renderLayer(a,u,p,y){p.isHidden(this.transform.zoom)||("background"===p.type||"custom"===p.type||(y||[]).length)&&(this.id=p.id,this.gpuTimingStart(p),Ol[p.type](a,u,p,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let p=this.gpuTimers[a.id];p||(p=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),p.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}queryGpuTimers(a){const u={};for(const p in a){const y=a[p],x=this.context.extTimerQuery,D=x.getQueryObjectEXT(y.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(y.query),u[p]=D}return u}translatePosMatrix(a,u,p,y,x){if(!p[0]&&!p[1])return a;const D=x?"map"===y?this.transform.angle:0:"viewport"===y?-this.transform.angle:0;if(D){const P=Math.sin(D),L=Math.cos(D);p=[p[0]*L-p[1]*P,p[0]*P+p[1]*L]}const k=[x?p[0]:Vn(u,p[0],this.transform.zoom),x?p[1]:Vn(u,p[1],this.transform.zoom),0],T=new Float32Array(16);return v.translate(T,a,k),T}saveTileTexture(a){const u=this._tileTextures[a.size[0]];u?u.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const u=this._tileTextures[a];return u&&u.length>0?u.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const u=this.imageManager.getPattern(a.from.toString()),p=this.imageManager.getPattern(a.to.toString());return!u||!p}useProgram(a,u){this.cache=this.cache||{};const p=a+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new mu(this.context,a,yc[a],u,Nh[a],this._showOverdrawInspector,this.style.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new hn(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ca{constructor(a,u){this.points=a,this.planes=u}static fromInvProjectionMatrix(a,u,p){const y=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const T=1/(k=v.transformMat4([],k,a))[3]/u*y;return v.mul$1(k,k,[T,T,1/k[3],T])}),D=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const T=v.sub([],x[k[0]],x[k[1]]),P=v.sub([],x[k[2]],x[k[1]]),L=v.normalize([],v.cross([],T,P)),z=-v.dot(L,x[k[1]]);return L.concat(z)});return new Ca(x,D)}}class Fl{constructor(a,u){this.min=a,this.max=u,this.center=v.scale$1([],v.add([],this.min,this.max),.5)}quadrant(a){const u=[a%2==0,a<2],p=v.clone$2(this.min),y=v.clone$2(this.max);for(let x=0;x<u.length;x++)p[x]=u[x]?this.min[x]:this.center[x],y[x]=u[x]?this.center[x]:this.max[x];return y[2]=this.max[2],new Fl(p,y)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let y=0;y<a.planes.length;y++){const x=a.planes[y];let D=0;for(let k=0;k<u.length;k++)v.dot$1(x,u[k])>=0&&D++;if(0===D)return 0;D!==u.length&&(p=!1)}if(p)return 2;for(let y=0;y<3;y++){let x=Number.MAX_VALUE,D=-Number.MAX_VALUE;for(let k=0;k<a.points.length;k++){const T=a.points[k][y]-this.min[y];x=Math.min(x,T),D=Math.max(D,T)}if(D<0||x>this.max[y]-this.min[y])return 0}return 1}}class el{constructor(a=0,u=0,p=0,y=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=p,this.right=y}interpolate(a,u,p){return null!=u.top&&null!=a.top&&(this.top=v.number(a.top,u.top,p)),null!=u.bottom&&null!=a.bottom&&(this.bottom=v.number(a.bottom,u.bottom,p)),null!=u.left&&null!=a.left&&(this.left=v.number(a.left,u.left,p)),null!=u.right&&null!=a.right&&(this.right=v.number(a.right,u.right,p)),this}getCenter(a,u){const p=v.clamp((this.left+a-this.right)/2,0,a),y=v.clamp((this.top+u-this.bottom)/2,0,u);return new v.pointGeometry(p,y)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new el(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class tl{constructor(a,u,p,y,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===x||!!x,this._minZoom=a||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new v.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new el,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const a=new tl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.tileSize=this.tileSize,a.latRange=this.latRange,a.width=this.width,a.height=this.height,a._center=this._center,a._elevation=this._elevation,a.zoom=this.zoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._calcMatrices(),a}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){void 0===a?a=!0:null===a&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new v.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const u=-v.wrap(a,-180,180)*Math.PI/180;var p,y,x,D,k,T,P,L,z,H;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(p=new v.ARRAY_TYPE(4),v.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),y=this.rotationMatrix,D=this.angle,k=(x=this.rotationMatrix)[0],T=x[1],P=x[2],L=x[3],z=Math.sin(D),H=Math.cos(D),y[0]=k*H+P*z,y[1]=T*H+L*z,y[2]=k*-z+P*H,y[3]=T*-z+L*H)}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const u=v.clamp(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const u=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,p){this._unmodified=!1,this._edgeInsets.interpolate(a,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const u=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(a){const u=[new v.UnwrappedTileID(0,a)];if(this._renderWorldCopies){const p=this.pointCoordinate(new v.pointGeometry(0,0)),y=this.pointCoordinate(new v.pointGeometry(this.width,0)),x=this.pointCoordinate(new v.pointGeometry(this.width,this.height)),D=this.pointCoordinate(new v.pointGeometry(0,this.height)),k=Math.floor(Math.min(p.x,y.x,x.x,D.x)),T=Math.floor(Math.max(p.x,y.x,x.x,D.x)),P=1;for(let L=k-P;L<=T+P;L++)0!==L&&u.push(new v.UnwrappedTileID(L,a))}return u}coveringTiles(a){var u,p;let y=this.coveringZoomLevel(a);const x=y;if(void 0!==a.minzoom&&y<a.minzoom)return[];void 0!==a.maxzoom&&y>a.maxzoom&&(y=a.maxzoom);const D=this.pointCoordinate(this.getCameraPoint()),k=v.MercatorCoordinate.fromLngLat(this.center),T=Math.pow(2,y),P=[T*D.x,T*D.y,0],L=[T*k.x,T*k.y,0],z=Ca.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let H=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(H=y);const ee=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,Q=ne=>({aabb:new Fl([ne*T,0,0],[(ne+1)*T,T,0]),zoom:0,x:0,y:0,wrap:ne,fullyVisible:!1}),J=[],de=[],pe=y,ve=a.reparseOverscaled?x:y;if(this._renderWorldCopies)for(let ne=1;ne<=3;ne++)J.push(Q(-ne)),J.push(Q(ne));for(J.push(Q(0));J.length>0;){const ne=J.pop(),Ce=ne.x,be=ne.y;let Pe=ne.fullyVisible;if(!Pe){const ct=ne.aabb.intersects(z);if(0===ct)continue;Pe=2===ct}const Oe=a.terrain?P:L,je=ne.aabb.distanceX(Oe),ke=ne.aabb.distanceY(Oe),rt=Math.max(Math.abs(je),Math.abs(ke));if(ne.zoom===pe||rt>ee+(1<<pe-ne.zoom)-2&&ne.zoom>=H){const ct=pe-ne.zoom,Kt=P[0]-.5-(Ce<<ct),di=P[1]-.5-(be<<ct);de.push({tileID:new v.OverscaledTileID(ne.zoom===pe?ve:ne.zoom,ne.wrap,ne.zoom,Ce,be),distanceSq:v.sqrLen([L[0]-.5-Ce,L[1]-.5-be]),tileDistanceToCamera:Math.sqrt(Kt*Kt+di*di)})}else for(let ct=0;ct<4;ct++){const Kt=(Ce<<1)+ct%2,di=(be<<1)+(ct>>1),yt=ne.zoom+1;let Gi=ne.aabb.quadrant(ct);if(a.terrain){const en=new v.OverscaledTileID(yt,ne.wrap,yt,Kt,di),mi=a.terrain.getMinMaxElevation(en),wi=null!==(u=mi.minElevation)&&void 0!==u?u:this.elevation,tn=null!==(p=mi.maxElevation)&&void 0!==p?p:this.elevation;Gi=new Fl([Gi.min[0],Gi.min[1],wi],[Gi.max[0],Gi.max[1],tn])}J.push({aabb:Gi,zoom:yt,x:Kt,y:di,wrap:ne.wrap,fullyVisible:Pe})}}return de.sort((ne,Ce)=>ne.distanceSq-Ce.distanceSq).map(ne=>ne.tileID)}resize(a,u){this.width=a,this.height=u,this.pixelsToGLUnits=[2/a,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const u=v.clamp(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new v.pointGeometry(v.mercatorXfromLng(a.lng)*this.worldSize,v.mercatorYfromLat(u)*this.worldSize)}unproject(a){return new v.MercatorCoordinate(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(a){this.freezeElevation||(this.elevation=a?this.getElevation(this._center,a):0)}getElevation(a,u){const p=v.MercatorCoordinate.fromLngLat(a),y=(1<<this.tileZoom)*v.EXTENT,x=p.x*y,D=p.y*y,k=Math.floor(x/v.EXTENT),T=Math.floor(D/v.EXTENT),P=new v.OverscaledTileID(this.tileZoom,0,this.tileZoom,k,T);return u.getElevation(P,x%v.EXTENT,D%v.EXTENT,v.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const u=this.pointLocation(this.centerPoint,a),p=this.getElevation(u,a);if(!(this.elevation-p))return;const y=this.getCameraPosition(),x=v.MercatorCoordinate.fromLngLat(y.lngLat,y.altitude),D=v.MercatorCoordinate.fromLngLat(u,p),k=x.x-D.x,T=x.y-D.y,P=x.z-D.z,L=Math.sqrt(k*k+T*T+P*P),z=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=p,this._center=u,this.zoom=z}setLocationAtPoint(a,u){const p=this.pointCoordinate(u),y=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(a),D=new v.MercatorCoordinate(x.x-(p.x-y.x),x.y-(p.y-y.y));this.center=this.coordinateLocation(D),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,u){return u?this.coordinatePoint(this.locationCoordinate(a),this.getElevation(a,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,u){return this.coordinateLocation(this.pointCoordinate(a,u))}locationCoordinate(a){return v.MercatorCoordinate.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,u){if(u){const H=u.pointCoordinate(a);if(null!=H)return H}const p=[a.x,a.y,0,1],y=[a.x,a.y,1,1];v.transformMat4(p,p,this.pixelMatrixInverse),v.transformMat4(y,y,this.pixelMatrixInverse);const x=p[3],D=y[3],k=p[1]/x,T=y[1]/D,P=p[2]/x,L=y[2]/D,z=P===L?0:(0-P)/(L-P);return new v.MercatorCoordinate(v.number(p[0]/x,y[0]/D,z)/this.worldSize,v.number(k,T,z)/this.worldSize)}coordinatePoint(a,u=0,p=this.pixelMatrix){const y=[a.x*this.worldSize,a.y*this.worldSize,u,1];return v.transformMat4(y,y,p),new v.pointGeometry(y[0]/y[3],y[1]/y[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return(new v.LngLatBounds).extend(this.pointLocation(new v.pointGeometry(0,a))).extend(this.pointLocation(new v.pointGeometry(this.width,a))).extend(this.pointLocation(new v.pointGeometry(this.width,this.height))).extend(this.pointLocation(new v.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new v.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(a,u=!1){const p=a.key,y=u?this._alignedPosMatrixCache:this._posMatrixCache;if(y[p])return y[p];const x=a.canonical,D=this.worldSize/this.zoomScale(x.z),k=x.x+Math.pow(2,x.z)*a.wrap,T=v.identity(new Float64Array(16));return v.translate(T,T,[k*D,x.y*D,0]),v.scale(T,T,[D/v.EXTENT,D/v.EXTENT,1]),v.multiply(T,u?this.alignedProjMatrix:this.projMatrix,T),y[p]=new Float32Array(T),y[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let a,u,p,y,x=-90,D=90,k=-180,T=180;const P=this.size,L=this._unmodified;if(this.latRange){const ee=this.latRange;x=v.mercatorYfromLat(ee[1])*this.worldSize,D=v.mercatorYfromLat(ee[0])*this.worldSize,a=D-x<P.y?P.y/(D-x):0}if(this.lngRange){const ee=this.lngRange;k=v.wrap(v.mercatorXfromLng(ee[0])*this.worldSize,0,this.worldSize),T=v.wrap(v.mercatorXfromLng(ee[1])*this.worldSize,0,this.worldSize),T<k&&(T+=this.worldSize),u=T-k<P.x?P.x/(T-k):0}const z=this.point,H=Math.max(u||0,a||0);if(H)return this.center=this.unproject(new v.pointGeometry(u?(T+k)/2:z.x,a?(D+x)/2:z.y)),this.zoom+=this.scaleZoom(H),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const ee=z.y,Q=P.y/2;ee-Q<x&&(y=x+Q),ee+Q>D&&(y=D-Q)}if(this.lngRange){const ee=(k+T)/2,Q=v.wrap(z.x,ee-this.worldSize/2,ee+this.worldSize/2),J=P.x/2;Q-J<k&&(p=k+J),Q+J>T&&(p=T-J)}void 0===p&&void 0===y||(this.center=this.unproject(new v.pointGeometry(void 0!==p?p:z.x,void 0!==y?y:z.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=v.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let y=v.identity(new Float64Array(16));v.scale(y,y,[this.width/2,-this.height/2,1]),v.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=v.identity(new Float64Array(16)),v.scale(y,y,[1,-1,1]),v.translate(y,y,[-1,-1,0]),v.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=Math.PI/2+this._pitch,D=this._fov*(.5+a.y/this.height),k=Math.sin(D)*this.cameraToSeaLevelDistance/Math.sin(v.clamp(Math.PI-x-D,.01,Math.PI-.01)),T=this.getHorizon(),P=2*Math.atan(T/this.cameraToCenterDistance)*(.5+a.y/(2*T)),L=Math.sin(P)*this.cameraToSeaLevelDistance/Math.sin(v.clamp(Math.PI-x-P,.01,Math.PI-.01)),z=Math.cos(Math.PI/2-this._pitch)*k+this.cameraToSeaLevelDistance,H=Math.cos(Math.PI/2-this._pitch)*L+this.cameraToSeaLevelDistance,ee=1.01*Math.min(z,H),Q=this.height/50;y=new Float64Array(16),v.perspective(y,this._fov,this.width/this.height,Q,ee),y[8]=2*-a.x/this.width,y[9]=2*a.y/this.height,v.scale(y,y,[1,-1,1]),v.translate(y,y,[0,0,-this.cameraToCenterDistance]),v.rotateX(y,y,this._pitch),v.rotateZ(y,y,this.angle),v.translate(y,y,[-u,-p,0]),this.mercatorMatrix=v.scale([],y,[this.worldSize,this.worldSize,this.worldSize]),v.scale(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=v.multiply(new Float64Array(16),this.labelPlaneMatrix,y),v.translate(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=v.invert([],y),this.pixelMatrix3D=v.multiply(new Float64Array(16),this.labelPlaneMatrix,y);const J=this.width%2/2,de=this.height%2/2,pe=Math.cos(this.angle),ve=Math.sin(this.angle),ne=u-Math.round(u)+pe*J+ve*de,Ce=p-Math.round(p)+pe*de+ve*J,be=new Float64Array(y);if(v.translate(be,be,[ne>.5?ne-1:ne,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=be,y=v.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new v.pointGeometry(0,0)),u=[a.x*this.worldSize,a.y*this.worldSize,0,1];return v.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new v.pointGeometry(0,a))}getCameraQueryGeometry(a){const u=this.getCameraPoint();if(1===a.length)return[a[0],u];{let p=u.x,y=u.y,x=u.x,D=u.y;for(const k of a)p=Math.min(p,k.x),y=Math.min(y,k.y),x=Math.max(x,k.x),D=Math.max(D,k.y);return[new v.pointGeometry(p,y),new v.pointGeometry(x,y),new v.pointGeometry(x,D),new v.pointGeometry(p,D),new v.pointGeometry(p,y)]}}}class Du{constructor(a){this._hashName=a&&encodeURIComponent(a),v.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,p){let y=!1,x=null;const D=()=>{x=null,y&&(u(),x=setTimeout(D,300),y=!1)};return()=>(y=!0,x||D(),x)}(this._updateHashUnthrottled.bind(this))}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,y=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),D=Math.round(u.lng*x)/x,k=Math.round(u.lat*x)/x,T=this._map.getBearing(),P=this._map.getPitch();let L="";if(L+=a?`/${D}/${k}/${p}`:`${p}/${k}/${D}`,(T||P)&&(L+="/"+Math.round(10*T)/10),P&&(L+=`/${Math.round(P)}`),this._hashName){const z=this._hashName;let H=!1;const ee=window.location.hash.slice(1).split("&").map(Q=>{const J=Q.split("=")[0];return J===z?(H=!0,`${J}=${L}`):Q}).filter(Q=>Q);return H||ee.push(`${z}=${L}`),`#${ee.join("&")}`}return`#${L}`}_getCurrentHash(){const a=window.location.hash.replace("#","");if(this._hashName){let u;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(u=p)}),(u&&u[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._getCurrentHash();if(a.length>=3&&!a.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:u,pitch:+(a[4]||0)}),!0}return!1}_updateHashUnthrottled(){const a=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,a)}catch{}}}const Ll={linearity:.3,easing:v.bezier(0,0,.3,1)},Nl=v.extend({deceleration:2500,maxSpeed:1400},Ll),Eu=v.extend({deceleration:20,maxSpeed:1400},Ll),Su=v.extend({deceleration:1e3,maxSpeed:360},Ll),Bl=v.extend({deceleration:1e3,maxSpeed:90},Ll);class Mu{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.exported.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,u=v.exported.now();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new v.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const x=Ec(u.pan.mag(),p,v.extend({},Nl,a||{}));y.offset=u.pan.mult(x.amount/u.pan.mag()),y.center=this._map.transform.center,Dc(y,x)}if(u.zoom){const x=Ec(u.zoom,p,Eu);y.zoom=this._map.transform.zoom+x.amount,Dc(y,x)}if(u.bearing){const x=Ec(u.bearing,p,Su);y.bearing=this._map.transform.bearing+v.clamp(x.amount,-179,179),Dc(y,x)}if(u.pitch){const x=Ec(u.pitch,p,Bl);y.pitch=this._map.transform.pitch+x.amount,Dc(y,x)}if(y.zoom||y.bearing){const x=void 0===u.pinchAround?u.around:u.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),v.extend(y,{noMoveStart:!0})}}function Dc(f,a){(!f.duration||f.duration<a.duration)&&(f.duration=a.duration,f.easing=a.easing)}function Ec(f,a,u){const{maxSpeed:p,linearity:y,deceleration:x}=u,D=v.clamp(f*y/(a/1e3),-p,p),k=Math.abs(D)/(x*y);return{easing:u.easing,duration:1e3*k,amount:D*(k/2)}}class wn extends v.Event{constructor(a,u,p,y={}){const x=Ae.mousePos(u.getCanvasContainer(),p),D=u.unproject(x);super(a,v.extend({point:x,lngLat:D,originalEvent:p},y)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Sc extends v.Event{constructor(a,u,p){const y="touchend"===a?p.changedTouches:p.touches,x=Ae.touchPos(u.getCanvasContainer(),y),D=x.map(T=>u.unproject(T)),k=x.reduce((T,P,L,z)=>T.add(P.div(z.length)),new v.pointGeometry(0,0));super(a,{points:x,point:k,lngLats:D,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class co extends v.Event{constructor(a,u,p){super(a,{originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ip{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new co(a.type,this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new wn(a.type,this._map,a))}mouseup(a){this._map.fire(new wn(a.type,this._map,a))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new wn(a.type,this._map,a))}dblclick(a){return this._firePreventable(new wn(a.type,this._map,a))}mouseover(a){this._map.fire(new wn(a.type,this._map,a))}mouseout(a){this._map.fire(new wn(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Sc(a.type,this._map,a))}touchmove(a){this._map.fire(new Sc(a.type,this._map,a))}touchend(a){this._map.fire(new Sc(a.type,this._map,a))}touchcancel(a){this._map.fire(new Sc(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Da{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new wn(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new wn(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qh{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&0===a.button&&(Ae.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=p,this._box||(this._box=Ae.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const x=Math.min(y.x,p.x),D=Math.max(y.x,p.x),k=Math.min(y.y,p.y),T=Math.max(y.y,p.y);Ae.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=D-x+"px",this._box.style.height=T-k+"px"}mouseupWindow(a,u){if(!this._active||0!==a.button)return;const p=this._startPos,y=u;if(this.reset(),Ae.suppressClick(),p.x!==y.x||p.y!==y.y)return this._map.fire(new v.Event("boxzoomend",{originalEvent:a})),{cameraAnimation:x=>x.fitScreenCoordinates(p,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&27===a.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(Ae.remove(this._box),this._box=null),Ae.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new v.Event(a,{originalEvent:u}))}}function Qs(f,a){if(f.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${a.length}`);const u={};for(let p=0;p<f.length;p++)u[f[p].identifier]=a[p];return u}class zl{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=a.timeStamp),p.length===this.numTouches&&(this.centroid=function(y){const x=new v.pointGeometry(0,0);for(const D of y)x._add(D);return x.div(y.length)}(u),this.touches=Qs(p,u)))}touchmove(a,u,p){if(this.aborted||!this.centroid)return;const y=Qs(p,u);for(const x in this.touches){const k=y[x];(!k||k.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(a,u,p){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class ku{constructor(a){this.singleTap=new zl(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,u,p){this.singleTap.touchstart(a,u,p)}touchmove(a,u,p){this.singleTap.touchmove(a,u,p)}touchend(a,u,p){const y=this.singleTap.touchend(a,u,p);if(y){const x=a.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(y)<30;if(x&&D||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Ap{constructor(){this._zoomIn=new ku({numTouches:1,numTaps:2}),this._zoomOut=new ku({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,p){this._zoomIn.touchstart(a,u,p),this._zoomOut.touchstart(a,u,p)}touchmove(a,u,p){this._zoomIn.touchmove(a,u,p),this._zoomOut.touchmove(a,u,p)}touchend(a,u,p){const y=this._zoomIn.touchend(a,u,p),x=this._zoomOut.touchend(a,u,p);return y?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(y)},{originalEvent:a})}):x?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(x)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Rp={0:1,2:2};class Mt{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(a,u){return!1}_move(a,u){return{}}mousedown(a,u){if(this._lastPoint)return;const p=Ae.mouseButton(a);this._correctButton(a,p)&&(this._lastPoint=u,this._eventButton=p)}mousemoveWindow(a,u){const p=this._lastPoint;if(p)if(a.preventDefault(),function(y,x){const D=Rp[x];return void 0===y.buttons||(y.buttons&D)!==D}(a,this._eventButton))this.reset();else if(this._moved||!(u.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(p,u)}mouseupWindow(a){this._lastPoint&&Ae.mouseButton(a)===this._eventButton&&(this._moved&&Ae.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mc extends Mt{mousedown(a,u){super.mousedown(a,u),this._lastPoint&&(this._active=!0)}_correctButton(a,u){return 0===u&&!a.ctrlKey}_move(a,u){return{around:u,panDelta:u.sub(a)}}}class Js extends Mt{_correctButton(a,u){return 0===u&&a.ctrlKey||2===u}_move(a,u){const p=.8*(u.x-a.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(a){a.preventDefault()}}class ut extends Mt{_correctButton(a,u){return 0===u&&a.ctrlKey||2===u}_move(a,u){const p=-.5*(u.y-a.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(a){a.preventDefault()}}class Vt{constructor(a,u){this._minTouches=a.cooperativeGestures?2:1,this._clickTolerance=a.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new v.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(a,u,p){return this._calculateTransform(a,u,p)}touchmove(a,u,p){if(this._map._cooperativeGestures&&(2===this._minTouches&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(a,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return a.preventDefault(),this._calculateTransform(a,u,p)}touchend(a,u,p){this._calculateTransform(a,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,p){p.length>0&&(this._active=!0);const y=Qs(p,u),x=new v.pointGeometry(0,0),D=new v.pointGeometry(0,0);let k=0;for(const P in y){const L=y[P],z=this._touches[P];z&&(x._add(L),D._add(L.sub(z)),k++,y[P]=L)}if(this._touches=y,k<this._minTouches||!D.mag())return;const T=D.div(k);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class il{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(a){}_move(a,u,p){return{}}touchstart(a,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,p){if(!this._firstTwoTouches)return;a.preventDefault();const[y,x]=this._firstTwoTouches,D=ea(p,u,y),k=ea(p,u,x);if(!D||!k)return;const T=this._aroundCenter?null:D.add(k).div(2);return this._move([D,k],T,a)}touchend(a,u,p){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,D=ea(p,u,y),k=ea(p,u,x);D&&k||(this._active&&Ae.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ea(f,a,u){for(let p=0;p<f.length;p++)if(f[p].identifier===u)return a[p]}function Fe(f,a){return Math.log(f/a)/Math.LN2}class Ze extends il{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){const p=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Fe(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fe(this._distance,p),pinchAround:u}}}function Li(f,a){return 180*f.angleWith(a)/Math.PI}class kr extends il{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u){const p=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Li(this._vector,p),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const u=25/(Math.PI*this._minDiameter)*360,p=Li(a,this._startVector);return Math.abs(p)<u}}function Tr(f){return Math.abs(f.y)>Math.abs(f.x)}class Ea extends il{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,u,p){super.touchstart(a,u,p),this._currentTouchCount=p.length}_start(a){this._lastPoints=a,Tr(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=a[0].sub(this._lastPoints[0]),x=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,x,p.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(a,u,p){if(void 0!==this._valid)return this._valid;const y=a.mag()>=2,x=u.mag()>=2;if(!y&&!x)return;if(!y||!x)return void 0===this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const D=a.y>0==u.y>0;return Tr(a)&&Tr(u)&&D}}const uo={panStep:100,bearingStep:15,pitchStep:10};class Tu{constructor(){const a=uo;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,p=0,y=0,x=0,D=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?p=-1:(a.preventDefault(),x=-1);break;case 39:a.shiftKey?p=1:(a.preventDefault(),x=1);break;case 38:a.shiftKey?y=1:(a.preventDefault(),D=-1);break;case 40:a.shiftKey?y=-1:(a.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(p=0,y=0),{cameraAnimation:k=>{const T=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Wh,zoom:u?Math.round(T)+u*(a.shiftKey?2:1):T,bearing:k.getBearing()+p*this._bearingStep,pitch:k.getPitch()+y*this._pitchStep,offset:[-x*this._panStep,-D*this._panStep],center:k.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wh(f){return f*(2-f)}const kc=4.000244140625;class Iu{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,v.bindAll(["_onTimeout"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=a&&"center"===a.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;a.preventDefault()}let u=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const p=v.exported.now(),y=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==u&&u%kc==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=Ae.mousePos(this._el,a);this._around=v.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;if(0!==this._delta){const k="wheel"===this._type&&Math.abs(this._delta)>kc?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&0!==T&&(T=1/T);const P="number"==typeof this._targetZoom?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(P*T))),"wheel"===this._type&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u="number"==typeof this._targetZoom?this._targetZoom:a.zoom,p=this._startZoom,y=this._easing;let x,D=!1;if("wheel"===this._type&&p&&y){const k=Math.min((v.exported.now()-this._lastWheelEventTime)/200,1),T=y(k);x=v.number(p,u,T),k<1?this._frameId||(this._frameId=!0):D=!0}else x=u,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:x-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=v.ease;if(this._prevEase){const p=this._prevEase,y=(v.exported.now()-p.start)/p.duration,x=p.easing(y+.01)-p.easing(y),D=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-D*D);u=v.bezier(D,k,.25,1)}return this._prevEase={start:v.exported.now(),duration:a,easing:u},u}reset(){this._active=!1}}class Au{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class On{constructor(){this.reset()}reset(){this._active=!1}dblclick(a,u){return a.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(a.shiftKey?-1:1),around:p.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ht{constructor(){this._tap=new ku({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(a,u,p){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=u[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(a,u,p))}touchmove(a,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const y=u[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,a.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(a,u,p)}touchend(a,u,p){this._tapTime?this._swipePoint&&0===p.length&&this.reset():this._tap.touchend(a,u,p)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class At{constructor(a,u,p){this._el=a,this._mousePan=u,this._touchPan=p}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ji{constructor(a,u,p){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Uo{constructor(a,u,p,y){this._el=a,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const jo=f=>f.zoom||f.drag||f.pitch||f.rotate;class ir extends v.Event{}function Ss(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Cn{constructor(a,u){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mu(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),v.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,x,D]of this._listeners)Ae.addEventListener(y,x,y===document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(const[a,u,p]of this._listeners)Ae.removeEventListener(a,u,a===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(a){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Ip(u,a));const y=u.boxZoom=new qh(u,a);this._add("boxZoom",y);const x=new Ap,D=new On;u.doubleClickZoom=new Au(D,x),this._add("tapZoom",x),this._add("clickZoom",D);const k=new ht;this._add("tapDragZoom",k);const T=u.touchPitch=new Ea(u);this._add("touchPitch",T);const P=new Js(a),L=new ut(a);u.dragRotate=new Ji(a,P,L),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const z=new Mc(a),H=new Vt(a,u);u.dragPan=new At(p,z,H),this._add("mousePan",z),this._add("touchPan",H,["touchZoom","touchRotate"]);const ee=new kr,Q=new Ze;u.touchZoomRotate=new Uo(p,Q,ee,k),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",Q,["touchPan","touchRotate"]);const J=u.scrollZoom=new Iu(u,this);this._add("scrollZoom",J,["mousePan"]);const de=u.keyboard=new Tu;this._add("keyboard",de),this._add("blockableMapEvent",new Da(u));for(const pe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[pe]&&u[pe].enable(a[pe])}_add(a,u,p){this._handlers.push({handlerName:a,handler:u,allowed:p}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!jo(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,u,p){for(const y in a)if(y!==p&&(!u||u.indexOf(y)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const u=[];for(const p of a)this._el.contains(p.target)&&u.push(p);return u}handleEvent(a,u){if("blur"===a.type)return void this.stop(!0);this._updatingCamera=!0;const p="renderFrame"===a.type?void 0:a,y={needsRenderFrame:!1},x={},D={},k=a.touches,T=k?this._getMapTouches(k):void 0,P=T?Ae.touchPos(this._el,T):Ae.mousePos(this._el,a);for(const{handlerName:H,handler:ee,allowed:Q}of this._handlers){if(!ee.isEnabled())continue;let J;this._blockedByActive(D,Q,H)?ee.reset():ee[u||a.type]&&(J=ee[u||a.type](a,P,T),this.mergeHandlerResult(y,x,J,H,p),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||ee.isActive())&&(D[H]=ee)}const L={};for(const H in this._previousActiveHandlers)D[H]||(L[H]=p);this._previousActiveHandlers=D,(Object.keys(L).length||Ss(y))&&(this._changes.push([y,x,L]),this._triggerRenderFrame()),(Object.keys(D).length||Ss(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:z}=y;z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],z(this._map))}mergeHandlerResult(a,u,p,y,x){if(!p)return;v.extend(a,p);const D={handlerName:y,originalEvent:p.originalEvent||x};void 0!==p.zoomDelta&&(u.zoom=D),void 0!==p.panDelta&&(u.drag=D),void 0!==p.pitchDelta&&(u.pitch=D),void 0!==p.bearingDelta&&(u.rotate=D)}_applyChanges(){const a={},u={},p={};for(const[y,x,D]of this._changes)y.panDelta&&(a.panDelta=(a.panDelta||new v.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+y.pitchDelta),void 0!==y.around&&(a.around=y.around),void 0!==y.pinchAround&&(a.pinchAround=y.pinchAround),y.noInertia&&(a.noInertia=y.noInertia),v.extend(u,x),v.extend(p,D);this._updateMapTransform(a,u,p),this._changes=[]}_updateMapTransform(a,u,p){const y=this._map,x=y.transform,D=y.style&&y.style.terrain;if(!(Ss(a)||D&&this._drag))return this._fireEvents(u,p,!0);let{panDelta:k,zoomDelta:T,bearingDelta:P,pitchDelta:L,around:z,pinchAround:H}=a;void 0!==H&&(z=H),y._stop(!0),z=z||y.transform.centerPoint;const ee=x.pointLocation(k?z.sub(k):z);P&&(x.bearing+=P),L&&(x.pitch+=L),T&&(x.zoom+=T),D?u.drag&&!this._drag?(this._drag={center:x.centerPoint,lngLat:x.pointLocation(z),point:z,handlerName:u.drag.handlerName},y.fire(new v.Event("freezeElevation",{freeze:!0}))):this._drag&&p[this._drag.handlerName]?(y.fire(new v.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(x.center=x.pointLocation(x.centerPoint.sub(k))):x.setLocationAtPoint(ee,z),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,p,!0)}_fireEvents(a,u,p){const y=jo(this._eventsInProgress),x=jo(a),D={};for(const L in a){const{originalEvent:z}=a[L];this._eventsInProgress[L]||(D[`${L}start`]=z),this._eventsInProgress[L]=a[L]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const L in D)this._fireEvent(L,D[L]);x&&this._fireEvent("move",x.originalEvent);for(const L in a){const{originalEvent:z}=a[L];this._fireEvent(L,z)}const k={};let T;for(const L in this._eventsInProgress){const{handlerName:z,originalEvent:H}=this._eventsInProgress[L];this._handlersById[z].isActive()||(delete this._eventsInProgress[L],T=u[z]||H,k[`${L}end`]=T)}for(const L in k)this._fireEvent(L,k[L]);const P=jo(this._eventsInProgress);if(p&&(y||x)&&!P){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=H=>0!==H&&-this._bearingSnap<H&&H<this._bearingSnap;L?(z(L.bearing||this._map.getBearing())&&(L.bearing=0),this._map.easeTo(L,{originalEvent:T})):(this._map.fire(new v.Event("moveend",{originalEvent:T})),z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new v.Event(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new ir("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const fr={extend:(f,...a)=>v.extend(f,...a),run(f){f()},logToElement(f,a=!1,u="log"){const p=window.document.getElementById(u);p&&(a&&(p.innerHTML=""),p.innerHTML+=`<br>${f}`)}};class Wi extends v.Evented{constructor(a,u){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,v.bindAll(["_renderFrameCallback"],this)}getCenter(){return new v.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}panBy(a,u,p){return a=v.pointGeometry.convert(a).mult(-1),this.panTo(this.transform.center,v.extend({offset:a},u),p)}panTo(a,u,p){return this.easeTo(v.extend({center:a},u),p)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,p){return this.easeTo(v.extend({zoom:a},u),p)}zoomIn(a,u){return this.zoomTo(this.getZoom()+1,a,u),this}zoomOut(a,u){return this.zoomTo(this.getZoom()-1,a,u),this}getBearing(){return this.transform.bearing}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,p){return this.easeTo(v.extend({bearing:a},u),p)}resetNorth(a,u){return this.rotateTo(0,v.extend({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(v.extend({bearing:0,pitch:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}cameraForBounds(a,u){a=v.LngLatBounds.convert(a);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),p,u)}_cameraForBoxAndBearing(a,u,p,y){const x={top:0,bottom:0,right:0,left:0};if("number"==typeof(y=v.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding){const be=y.padding;y.padding={top:be,bottom:be,right:be,left:be}}y.padding=v.extend(x,y.padding);const D=this.transform,k=D.padding,T=D.project(v.LngLat.convert(a)),P=D.project(v.LngLat.convert(u)),L=T.rotate(-p*Math.PI/180),z=P.rotate(-p*Math.PI/180),H=new v.pointGeometry(Math.max(L.x,z.x),Math.max(L.y,z.y)),ee=new v.pointGeometry(Math.min(L.x,z.x),Math.min(L.y,z.y)),Q=H.sub(ee),J=(D.width-(k.left+k.right+y.padding.left+y.padding.right))/Q.x,de=(D.height-(k.top+k.bottom+y.padding.top+y.padding.bottom))/Q.y;if(de<0||J<0)return void v.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const pe=Math.min(D.scaleZoom(D.scale*Math.min(J,de)),y.maxZoom),ve=v.pointGeometry.convert(y.offset),ne=new v.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(p*Math.PI/180),Ce=ve.add(ne).mult(D.scale/D.zoomScale(pe));return{center:D.unproject(T.add(P).div(2).sub(Ce)),zoom:pe,bearing:p}}fitBounds(a,u,p){return this._fitInternal(this.cameraForBounds(a,u),u,p)}fitScreenCoordinates(a,u,p,y,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(v.pointGeometry.convert(a)),this.transform.pointLocation(v.pointGeometry.convert(u)),p,y),y,x)}_fitInternal(a,u,p){return a?(delete(u=v.extend(a,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(a,u){this.stop();const p=this.transform;let y=!1,x=!1,D=!1;return"zoom"in a&&p.zoom!==+a.zoom&&(y=!0,p.zoom=+a.zoom),void 0!==a.center&&(p.center=v.LngLat.convert(a.center)),"bearing"in a&&p.bearing!==+a.bearing&&(x=!0,p.bearing=+a.bearing),"pitch"in a&&p.pitch!==+a.pitch&&(D=!0,p.pitch=+a.pitch),null==a.padding||p.isPaddingEqual(a.padding)||(p.padding=a.padding),this.fire(new v.Event("movestart",u)).fire(new v.Event("move",u)),y&&this.fire(new v.Event("zoomstart",u)).fire(new v.Event("zoom",u)).fire(new v.Event("zoomend",u)),x&&this.fire(new v.Event("rotatestart",u)).fire(new v.Event("rotate",u)).fire(new v.Event("rotateend",u)),D&&this.fire(new v.Event("pitchstart",u)).fire(new v.Event("pitch",u)).fire(new v.Event("pitchend",u)),this.fire(new v.Event("moveend",u))}calculateCameraOptionsFromTo(a,u,p,y=0){const x=v.MercatorCoordinate.fromLngLat(a,u),D=v.MercatorCoordinate.fromLngLat(p,y),k=D.x-x.x,T=D.y-x.y,P=D.z-x.z,L=Math.hypot(k,T,P);if(0===L)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(k,T),H=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),ee=180*Math.atan2(k,-T)/Math.PI;let Q=180*Math.acos(z/L)/Math.PI;return Q=P<0?90-Q:90+Q,{center:D.toLngLat(),zoom:H,pitch:Q,bearing:ee}}easeTo(a,u){this._stop(!1,a.easeId),(!1===(a=v.extend({offset:[0,0],duration:500,easing:v.ease},a)).animate||!a.essential&&v.exported.prefersReducedMotion)&&(a.duration=0);const p=this.transform,y=this.getZoom(),x=this.getBearing(),D=this.getPitch(),k=this.getPadding(),T="zoom"in a?+a.zoom:y,P="bearing"in a?this._normalizeBearing(a.bearing,x):x,L="pitch"in a?+a.pitch:D,z="padding"in a?a.padding:p.padding,H=v.pointGeometry.convert(a.offset);let ee=p.centerPoint.add(H);const Q=p.pointLocation(ee),J=v.LngLat.convert(a.center||Q);this._normalizeCenter(J);const de=p.project(Q),pe=p.project(J).sub(de),ve=p.zoomScale(T-y);let ne,Ce;a.around&&(ne=v.LngLat.convert(a.around),Ce=p.locationPoint(ne));const be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||T!==y,this._rotating=this._rotating||x!==P,this._pitching=this._pitching||L!==D,this._padding=!p.isPaddingEqual(z),this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,be),this._ease(Pe=>{if(this._zooming&&(p.zoom=v.number(y,T,Pe)),this._rotating&&(p.bearing=v.number(x,P,Pe)),this._pitching&&(p.pitch=v.number(D,L,Pe)),this._padding&&(p.interpolatePadding(k,z,Pe),ee=p.centerPoint.add(H)),ne)p.setLocationAtPoint(ne,Ce);else{const Oe=p.zoomScale(p.zoom-y),je=T>y?Math.min(2,ve):Math.max(.5,ve),ke=Math.pow(je,1-Pe),rt=p.unproject(de.add(pe.mult(Pe*ke)).mult(Oe));p.setLocationAtPoint(p.renderWorldCopies?rt.wrap():rt,ee)}this._fireMoveEvents(u)},Pe=>{this._afterEase(u,Pe)},a),this}_prepareEase(a,u,p={}){this._moving=!0,this.fire(new v.Event("freezeElevation",{freeze:!0})),u||p.moving||this.fire(new v.Event("movestart",a)),this._zooming&&!p.zooming&&this.fire(new v.Event("zoomstart",a)),this._rotating&&!p.rotating&&this.fire(new v.Event("rotatestart",a)),this._pitching&&!p.pitching&&this.fire(new v.Event("pitchstart",a))}_fireMoveEvents(a){this.fire(new v.Event("move",a)),this._zooming&&this.fire(new v.Event("zoom",a)),this._rotating&&this.fire(new v.Event("rotate",a)),this._pitching&&this.fire(new v.Event("pitch",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new v.Event("freezeElevation",{freeze:!1}));const p=this._zooming,y=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new v.Event("zoomend",a)),y&&this.fire(new v.Event("rotateend",a)),x&&this.fire(new v.Event("pitchend",a)),this.fire(new v.Event("moveend",a))}flyTo(a,u){if(!a.essential&&v.exported.prefersReducedMotion){const yt=v.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(yt,u)}this.stop(),a=v.extend({offset:[0,0],speed:1.2,curve:1.42,easing:v.ease},a);const p=this.transform,y=this.getZoom(),x=this.getBearing(),D=this.getPitch(),k=this.getPadding(),T="zoom"in a?v.clamp(+a.zoom,p.minZoom,p.maxZoom):y,P="bearing"in a?this._normalizeBearing(a.bearing,x):x,L="pitch"in a?+a.pitch:D,z="padding"in a?a.padding:p.padding,H=p.zoomScale(T-y),ee=v.pointGeometry.convert(a.offset);let Q=p.centerPoint.add(ee);const J=p.pointLocation(Q),de=v.LngLat.convert(a.center||J);this._normalizeCenter(de);const pe=p.project(J),ve=p.project(de).sub(pe);let ne=a.curve;const Ce=Math.max(p.width,p.height),be=Ce/H,Pe=ve.mag();if("minZoom"in a){const yt=v.clamp(Math.min(a.minZoom,y,T),p.minZoom,p.maxZoom),Gi=Ce/p.zoomScale(yt-y);ne=Math.sqrt(Gi/Pe*2)}const Oe=ne*ne;function je(yt){const Gi=(be*be-Ce*Ce+(yt?-1:1)*Oe*Oe*Pe*Pe)/(2*(yt?be:Ce)*Oe*Pe);return Math.log(Math.sqrt(Gi*Gi+1)-Gi)}function ke(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function rt(yt){return(Math.exp(yt)+Math.exp(-yt))/2}const Xe=je(0);let ct=function(yt){return rt(Xe)/rt(Xe+ne*yt)},Kt=function(yt){return Ce*((rt(Xe)*(ke(Gi=Xe+ne*yt)/rt(Gi))-ke(Xe))/Oe)/Pe;var Gi},di=(je(1)-Xe)/ne;if(Math.abs(Pe)<1e-6||!isFinite(di)){if(Math.abs(Ce-be)<1e-6)return this.easeTo(a,u);const yt=be<Ce?-1:1;di=Math.abs(Math.log(be/Ce))/ne,Kt=function(){return 0},ct=function(Gi){return Math.exp(yt*ne*Gi)}}return a.duration="duration"in a?+a.duration:1e3*di/("screenSpeed"in a?+a.screenSpeed/ne:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=x!==P,this._pitching=L!==D,this._padding=!p.isPaddingEqual(z),this._prepareEase(u,!1),this._ease(yt=>{const Gi=yt*di,en=1/ct(Gi);p.zoom=1===yt?T:y+p.scaleZoom(en),this._rotating&&(p.bearing=v.number(x,P,yt)),this._pitching&&(p.pitch=v.number(D,L,yt)),this._padding&&(p.interpolatePadding(k,z,yt),Q=p.centerPoint.add(ee));const mi=1===yt?de:p.unproject(pe.add(ve.mult(Kt(Gi))).mult(en));p.setLocationAtPoint(p.renderWorldCopies?mi.wrap():mi,Q),this._fireMoveEvents(u)},()=>this._afterEase(u),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!a){const p=this.handlers;p&&p.stop(!1)}return this}_ease(a,u,p){!1===p.animate||0===p.duration?(a(1),u()):(this._easeStart=v.exported.now(),this._easeOptions=p,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((v.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,u){a=v.wrap(a,-180,180);const p=Math.abs(a-u);return Math.abs(a-360-u)<p&&(a-=360),Math.abs(a+360-u)<p&&(a+=360),a}_normalizeCenter(a){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=a.lng-u.center.lng;a.lng+=p>180?-360:p<-180?360:0}}class qt{constructor(a={}){this.options=a,v.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options&&this.options.compact,this._container=Ae.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ae.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ae.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Ae.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,u){const p=this._map._getUIString(`AttributionControl.${u}`);a.title=p,a.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(a){!a||"metadata"!==a.sourceDataType&&"visibility"!==a.sourceDataType&&"style"!==a.dataType&&"terrain"!==a.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(y=>"string"!=typeof y?"":y)):"string"==typeof this.options.customAttribution&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.sourceCaches;for(const y in u){const x=u[y];if(x.used||x.usedForTerrain){const D=x.getSource();D.attribution&&a.indexOf(D.attribution)<0&&a.push(D.attribution)}}a=a.filter(y=>String(y).trim()),a.sort((y,x)=>y.length-x.length),a=a.filter((y,x)=>{for(let D=x+1;D<a.length;D++)if(a[D].indexOf(y)>=0)return!1;return!0});const p=a.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,a.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Sa{constructor(a={}){this.options=a,v.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=Ae.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=Ae.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Ae.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const a=this._container.children;if(a.length){const u=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Ru{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const y of p)if(y.id===a)return void(y.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const nl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Fn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Tc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Xr{constructor(a,u,p=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Js({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,p&&(this.mousePitch=new ut({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),v.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Ae.addEventListener(u,"mousedown",this.mousedown),Ae.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),Ae.addEventListener(u,"touchmove",this.touchmove),Ae.addEventListener(u,"touchend",this.touchend),Ae.addEventListener(u,"touchcancel",this.reset)}down(a,u){this.mouseRotate.mousedown(a,u),this.mousePitch&&this.mousePitch.mousedown(a,u),Ae.disableDrag()}move(a,u){const p=this.map,y=this.mouseRotate.mousemoveWindow(a,u);if(y&&y.bearingDelta&&p.setBearing(p.getBearing()+y.bearingDelta),this.mousePitch){const x=this.mousePitch.mousemoveWindow(a,u);x&&x.pitchDelta&&p.setPitch(p.getPitch()+x.pitchDelta)}}off(){const a=this.element;Ae.removeEventListener(a,"mousedown",this.mousedown),Ae.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),Ae.removeEventListener(a,"touchmove",this.touchmove),Ae.removeEventListener(a,"touchend",this.touchend),Ae.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){Ae.enableDrag(),Ae.removeEventListener(window,"mousemove",this.mousemove),Ae.removeEventListener(window,"mouseup",this.mouseup)}mousedown(a){this.down(v.extend({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),Ae.mousePos(this.element,a)),Ae.addEventListener(window,"mousemove",this.mousemove),Ae.addEventListener(window,"mouseup",this.mouseup)}mousemove(a){this.move(a,Ae.mousePos(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){1!==a.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ae.touchPos(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){1!==a.targetTouches.length?this.reset():(this._lastPos=Ae.touchPos(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){0===a.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ho(f,a,u){if(f=new v.LngLat(f.lng,f.lat),a){const p=new v.LngLat(f.lng-360,f.lat),y=new v.LngLat(f.lng+360,f.lat),x=u.locationPoint(f).distSqr(a);u.locationPoint(p).distSqr(a)<x?f=p:u.locationPoint(y).distSqr(a)<x&&(f=y)}for(;Math.abs(f.lng-u.center.lng)>180;){const p=u.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;f.lng>u.center.lng?f.lng-=360:f.lng+=360}return f}const pt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kt(f,a,u){const p=f.classList;for(const y in pt)p.remove(`maplibregl-${u}-anchor-${y}`,`mapboxgl-${u}-anchor-${y}`);p.add(`maplibregl-${u}-anchor-${a}`,`mapboxgl-${u}-anchor-${a}`)}class Co extends v.Evented{constructor(a,u){if(super(),(a instanceof HTMLElement||u)&&(a=v.extend({element:a},u)),v.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&"auto"!==a.pitchAlignment?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=v.pointGeometry.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ae.create("div"),this._element.setAttribute("aria-label","Map marker");const p=Ae.createNS("http://www.w3.org/2000/svg","svg"),y=41,x=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${y}px`),p.setAttributeNS(null,"width",`${x}px`),p.setAttributeNS(null,"viewBox",`0 0 ${x} ${y}`);const D=Ae.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const k=Ae.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const T=Ae.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of P){const ne=Ae.createNS("http://www.w3.org/2000/svg","ellipse");ne.setAttributeNS(null,"opacity","0.04"),ne.setAttributeNS(null,"cx","10.5"),ne.setAttributeNS(null,"cy","5.80029008"),ne.setAttributeNS(null,"rx",ve.rx),ne.setAttributeNS(null,"ry",ve.ry),T.appendChild(ne)}const L=Ae.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const z=Ae.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(z);const H=Ae.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const ee=Ae.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(ee);const Q=Ae.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const J=Ae.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=Ae.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const pe=Ae.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),J.appendChild(de),J.appendChild(pe),k.appendChild(T),k.appendChild(L),k.appendChild(H),k.appendChild(Q),k.appendChild(J),p.appendChild(k),p.setAttributeNS(null,"height",y*this._scale+"px"),p.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(p),this._offset=v.pointGeometry.convert(a&&a.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),kt(this._element,this._anchor,"marker"),this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ae.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=v.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(24.6+y)],"bottom-right":[-y,-1*(24.6+y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(a){const u=a.code,p=a.charCode||a.keyCode;"Space"!==u&&"Enter"!==u&&32!==p&&13!==p||this.togglePopup()}_onMapClick(a){const u=a.originalEvent.target,p=this._element;this._popup&&(u===p||p.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this}_update(a){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ho(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?u=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?p="rotateX(0deg)":"map"===this._pitchAlignment&&(p=`rotateX(${this._map.getPitch()}deg)`),a&&"moveend"!==a.type||(this._pos=this._pos.round()),Ae.setTransform(this._element,`${pt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const y=this._map.unproject(this._pos),x=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=y.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(a){return this._offset=v.pointGeometry.convert(a),this._update(),this}_onMove(a){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new v.Event("dragstart"))),this.fire(new v.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new v.Event("dragend")),this._state="inactive"}_addDragHandler(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&"auto"!==a?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const rs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let os,jn=0,oi=!1;const ta={maxWidth:100,unit:"metric"};function Ed(f,a,u){const p=u&&u.maxWidth||100,y=f._container.clientHeight/2,x=f.unproject([0,y]),D=f.unproject([p,y]),k=x.distanceTo(D);if(u&&"imperial"===u.unit){const T=3.2808*k;T>5280?ia(a,p,T/5280,f._getUIString("ScaleControl.Miles")):ia(a,p,T,f._getUIString("ScaleControl.Feet"))}else u&&"nautical"===u.unit?ia(a,p,k/1852,f._getUIString("ScaleControl.NauticalMiles")):k>=1e3?ia(a,p,k/1e3,f._getUIString("ScaleControl.Kilometers")):ia(a,p,k,f._getUIString("ScaleControl.Meters"))}function ia(f,a,u,p){const y=function(x){const D=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/D;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(T){const P=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*P)/P}(k),D*k}(u);f.style.width=a*(y/u)+"px",f.innerHTML=`${y}&nbsp;${p}`}const Zi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Dn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ma(f){if(f){if("number"==typeof f){const a=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new v.pointGeometry(0,0),top:new v.pointGeometry(0,f),"top-left":new v.pointGeometry(a,a),"top-right":new v.pointGeometry(-a,a),bottom:new v.pointGeometry(0,-f),"bottom-left":new v.pointGeometry(a,-a),"bottom-right":new v.pointGeometry(-a,-a),left:new v.pointGeometry(f,0),right:new v.pointGeometry(-f,0)}}if(f instanceof v.pointGeometry||Array.isArray(f)){const a=v.pointGeometry.convert(f);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:v.pointGeometry.convert(f.center||[0,0]),top:v.pointGeometry.convert(f.top||[0,0]),"top-left":v.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":v.pointGeometry.convert(f["top-right"]||[0,0]),bottom:v.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":v.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":v.pointGeometry.convert(f["bottom-right"]||[0,0]),left:v.pointGeometry.convert(f.left||[0,0]),right:v.pointGeometry.convert(f.right||[0,0])}}return Ma(new v.pointGeometry(0,0))}const ss={supported:zi,setRTLTextPlugin:v.setRTLTextPlugin,getRTLTextPluginStatus:v.getRTLTextPluginStatus,Map:class extends Wi{constructor(f){var a;if(v.PerformanceUtils.mark(v.PerformanceMarkers.create),null!=(f=v.extend({},Fn,f)).minZoom&&null!=f.maxZoom&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=f.minPitch&&null!=f.maxPitch&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=f.minPitch&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=f.maxPitch&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new tl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._cooperativeGestures=f.cooperativeGestures,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new Ru,this._controls=[],this._mapId=v.uniqueId(),this._locale=v.extend({},nl,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=null!==(a=f.pixelRatio)&&void 0!==a?a:devicePixelRatio,this._requestManager=new Us(f.transformRequest),"string"==typeof f.container){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),v.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Cn(this,f),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=f.hash&&new Du("string"==typeof f.hash&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,v.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new qt({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new Sa,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update("style"===u.dataType),this.fire(new v.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new v.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new v.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(f,a){if(void 0===a&&(a=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[a];return-1!==a.indexOf("bottom")?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(f);return a>-1&&this._controls.splice(a,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,a,u,p){return null==p&&this.style.terrain&&(p=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(f,a,u,p)}resize(f){const a=this._containerDimensions(),u=a[0],p=a[1];this._resizeCanvas(u,p,this.getPixelRatio()),this.transform.resize(u,p),this.painter.resize(u,p,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new v.Event("movestart",f)).fire(new v.Event("move",f))),this.fire(new v.Event("resize",f)),y&&this.fire(new v.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[a,u]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(a,u,f),this.painter.resize(a,u,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(v.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(v.LngLat.convert(f),this.style&&this.style.terrain)}unproject(f){return this.transform.pointLocation(v.pointGeometry.convert(f),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,a,u){if("mouseenter"===f||"mouseover"===f){let p=!1;return{layer:a,listener:u,delegates:{mousemove:x=>{const D=this.getLayer(a)?this.queryRenderedFeatures(x.point,{layers:[a]}):[];D.length?p||(p=!0,u.call(this,new wn(f,this,x.originalEvent,{features:D}))):p=!1},mouseout:()=>{p=!1}}}}if("mouseleave"===f||"mouseout"===f){let p=!1;return{layer:a,listener:u,delegates:{mousemove:D=>{(this.getLayer(a)?this.queryRenderedFeatures(D.point,{layers:[a]}):[]).length?p=!0:p&&(p=!1,u.call(this,new wn(f,this,D.originalEvent)))},mouseout:D=>{p&&(p=!1,u.call(this,new wn(f,this,D.originalEvent)))}}}}{const p=y=>{const x=this.getLayer(a)?this.queryRenderedFeatures(y.point,{layers:[a]}):[];x.length&&(y.features=x,u.call(this,y),delete y.features)};return{layer:a,listener:u,delegates:{[f]:p}}}}on(f,a,u){if(void 0===u)return super.on(f,a);const p=this._createDelegatedListener(f,a,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const y in p.delegates)this.on(y,p.delegates[y]);return this}once(f,a,u){if(void 0===u)return super.once(f,a);const p=this._createDelegatedListener(f,a,u);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(f,a,u){return void 0===u?super.off(f,a):(this._delegatedListeners&&this._delegatedListeners[f]&&(p=>{const y=this._delegatedListeners[f];for(let x=0;x<y.length;x++){const D=y[x];if(D.layer===a&&D.listener===u){for(const k in D.delegates)this.off(k,D.delegates[k]);return y.splice(x,1),this}}})(),this)}queryRenderedFeatures(f,a){if(!this.style)return[];let u;if(void 0!==a||void 0===f||f instanceof v.pointGeometry||Array.isArray(f)||(a=f,f=void 0),a=a||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof v.pointGeometry||"number"==typeof f[0])u=[v.pointGeometry.convert(f)];else{const p=v.pointGeometry.convert(f[0]),y=v.pointGeometry.convert(f[1]);u=[p,new v.pointGeometry(y.x,p.y),y,new v.pointGeometry(p.x,y.y),p]}return this.style.queryRenderedFeatures(u,a,this.transform)}querySourceFeatures(f,a){return this.style.querySourceFeatures(f,a)}setStyle(f,a){return!1!==(a=v.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},a)).diff&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(f,a))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const a=this._locale[f];if(null==a)throw new Error(`Missing UI string '${f}'`);return a}_updateStyle(f,a){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new mr(this,a||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof f?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,a){if("string"==typeof f){const u=this._requestManager.transformRequest(f,v.ResourceType.Style);v.getJSON(u,(p,y)=>{p?this.fire(new v.ErrorEvent(p)):y&&this._updateDiff(y,a)})}else"object"==typeof f&&this._updateDiff(f,a)}_updateDiff(f,a){try{this.style.setState(f)&&this._update(!0)}catch(u){v.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(f,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():v.warnOnce("There is no style added to the map.")}addSource(f,a){return this._lazyInitEmptyStyle(),this.style.addSource(f,a),this._update(!0)}isSourceLoaded(f){const a=this.style&&this.style.sourceCaches[f];if(void 0!==a)return a.loaded();this.fire(new v.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){return this.style.setTerrain(f),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const a in f){const u=f[a]._tiles;for(const p in u){const y=u[p];if("loaded"!==y.state&&"errored"!==y.state)return!1}}return!0}addSourceType(f,a,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,a,u)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,a,{pixelRatio:u=1,sdf:p=!1,stretchX:y,stretchY:x,content:D}={}){if(this._lazyInitEmptyStyle(),a instanceof HTMLImageElement||v.isImageBitmap(a)){const{width:k,height:T,data:P}=v.exported.getImageData(a);this.style.addImage(f,{data:new v.RGBAImage({width:k,height:T},P),pixelRatio:u,stretchX:y,stretchY:x,content:D,sdf:p,version:0})}else{if(void 0===a.width||void 0===a.height)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:T,data:P}=a,L=a;this.style.addImage(f,{data:new v.RGBAImage({width:k,height:T},new Uint8Array(P)),pixelRatio:u,stretchX:y,stretchY:x,content:D,sdf:p,version:0,userImage:L}),L.onAdd&&L.onAdd(this,f)}}}updateImage(f,a){const u=this.style.getImage(f);if(!u)return this.fire(new v.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=a instanceof HTMLImageElement||v.isImageBitmap(a)?v.exported.getImageData(a):a,{width:y,height:x,data:D}=p;if(void 0===y||void 0===x)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||x!==u.data.height)return this.fire(new v.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(a instanceof HTMLImageElement||v.isImageBitmap(a));u.data.replace(D,k),this.style.updateImage(f,u)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new v.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,a){v.getImage(this._requestManager.transformRequest(f,v.ResourceType.Image),a)}listImages(){return this.style.listImages()}addLayer(f,a){return this._lazyInitEmptyStyle(),this.style.addLayer(f,a),this._update(!0)}moveLayer(f,a){return this.style.moveLayer(f,a),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,a,u){return this.style.setLayerZoomRange(f,a,u),this._update(!0)}setFilter(f,a,u={}){return this.style.setFilter(f,a,u),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,a,u,p={}){return this.style.setPaintProperty(f,a,u,p),this._update(!0)}getPaintProperty(f,a){return this.style.getPaintProperty(f,a)}setLayoutProperty(f,a,u,p={}){return this.style.setLayoutProperty(f,a,u,p),this._update(!0)}getLayoutProperty(f,a){return this.style.getLayoutProperty(f,a)}setLight(f,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,a){return this.style.setFeatureState(f,a),this._update()}removeFeatureState(f,a){return this.style.removeFeatureState(f,a),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,a=0;return this._container&&(f=this._container.clientWidth||400,a=this._container.clientHeight||300),[f,a]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const a=this._canvasContainer=Ae.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&a.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=Ae.create("canvas","maplibregl-canvas mapboxgl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const p=this._controlContainer=Ae.create("div","maplibregl-control-container mapboxgl-control-container",f),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=Ae.create("div",`maplibregl-ctrl-${x} mapboxgl-ctrl-${x}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const f=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=Ae.create("div","maplibregl-cooperative-gesture-screen",f);let a="Control",u="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(u="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",a="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${u}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",p=>{p.key===a&&(this._metaPress=!0)}),document.addEventListener("keyup",p=>{p.key===a&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",p=>{this._onCooperativeGesture(p,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(f,a,u){this._canvas.width=u*f,this._canvas.height=u*a,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const f=v.extend({},zi.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);a?(this.painter=new ns(a,this.transform),v.exported$1.testSupport(a)):this.fire(new v.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new v.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new v.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(f,a,u){return!a&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let a,u=0;const p=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(a=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,a),u=v.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const D=this.transform.zoom,k=v.exported.now();this.style.zoomHistory.update(D,k);const T=new v.EvaluationParameters(D,{now:k,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=T.crossFadingFactor();1===P&&P===this._crossFadingFactor||(y=!0,this._crossFadingFactor=P),this.style.update(T)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new v.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,v.PerformanceUtils.mark(v.PerformanceMarkers.load),this.fire(new v.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const D=v.exported.now()-u;p.endQueryEXT(p.TIME_ELAPSED_EXT,a),setTimeout(()=>{const k=p.getQueryObjectEXT(a,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(a),this.fire(new v.Event("gpu-timing-frame",{cpuTime:D,gpuTime:k}))},50)}if(this.listens("gpu-timing-layer")){const D=this.painter.collectGpuTimers();setTimeout(()=>{const k=this.painter.queryGpuTimers(D);this.fire(new v.Event("gpu-timing-layer",{layerTimes:k}))},50)}const x=this._sourcesDirty||this._styleDirty||this._placementDirty;return x||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new v.Event("idle")),!this._loaded||this._fullyLoaded||x||(this._fullyLoaded=!0,v.PerformanceUtils.mark(v.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Ae.remove(this._canvasContainer),Ae.remove(this._controlContainer),this._cooperativeGestures&&Ae.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),v.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new v.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=v.exported.frame(f=>{v.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,a){v.setCacheLimits(f,a)}get version(){return"2.4.0"}},NavigationControl:class{constructor(f){this.options=v.extend({},Tc,f),this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(v.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),Ae.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),Ae.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(v.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=Ae.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),a=f===this._map.getMaxZoom(),u=f===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Ae.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,a){const u=Ae.create("button",f,this._container);return u.type="button",u.addEventListener("click",a),u}_setButtonTitle(f,a){const u=this._map._getUIString(`NavigationControl.${a}`);f.title=u,f.setAttribute("aria-label",u)}},GeolocateControl:class extends v.Evented{constructor(f){super(),this.options=v.extend({},rs,f),v.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var a;return this._map=f,this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),a=this._setupUI,void 0!==os?a(os):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(u=>{os="denied"!==u.state,a(os)}):(os=!!window.navigator.geolocation,a(os)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ae.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jn=0,oi=!1}_isOutOfMapMaxBounds(f){const a=this._map.getMaxBounds(),u=f.coords;return a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new v.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(f),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new v.Event("geolocate",f)),this._finish()}}_updateCamera(f){const a=new v.LngLat(f.coords.longitude,f.coords.latitude),u=f.coords.accuracy,p=this._map.getBearing(),y=v.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(u),y,{geolocateSource:!0})}_updateMarker(f){if(f){const a=new v.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,a=this._map.unproject([0,f]),u=this._map.unproject([1,f]),p=a.distanceTo(u),y=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(1===f.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===f.code&&oi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new v.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=Ae.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),Ae.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===f){v.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ae.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Co(this._dotElement),this._circleElement=Ae.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Co({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||"ACTIVE_LOCK"!==this._watchState||a.originalEvent&&"resize"===a.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new v.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return v.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new v.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jn--,oi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new v.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new v.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jn++,jn>1?(f={maximumAge:6e5,timeout:0},oi=!0):(f=this.options.positionOptions,oi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:qt,LogoControl:Sa,ScaleControl:class{constructor(f){this.options=v.extend({},ta,f),v.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ed(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Ae.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Ed(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:v.warnOnce("Full screen control 'container' must be a DOM element.")),v.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",v.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){Ae.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=Ae.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);Ae.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(f){this.options=f,v.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(f){return this._map=f,this._container=Ae.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=Ae.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),Ae.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Ae.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends v.Evented{constructor(f){super(),this.options=v.extend(Object.create(Zi),f),v.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new v.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&Ae.remove(this._content),this._container&&(Ae.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new v.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=v.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const a=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=f;p=u.firstChild,p;)a.appendChild(p);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ae.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=Ae.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=Ae.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=Ae.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ho(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const a=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let u=this.options.anchor;const p=Ma(this.options.offset);if(!u){const x=this._container.offsetWidth,D=this._container.offsetHeight;let k;k=a.y+p.bottom.y<D?["top"]:a.y>this._map.transform.height-D?["bottom"]:[],a.x<x/2?k.push("left"):a.x>this._map.transform.width-x/2&&k.push("right"),u=0===k.length?"bottom":k.join("-")}const y=a.add(p[u]).round();Ae.setTransform(this._container,`${pt[u]} translate(${y.x}px,${y.y}px)`),kt(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Dn);f&&f.focus()}_onClose(){this.remove()}},Marker:Co,Style:mr,LngLat:v.LngLat,LngLatBounds:v.LngLatBounds,Point:v.pointGeometry,MercatorCoordinate:v.MercatorCoordinate,Evented:v.Evented,AJAXError:v.AJAXError,config:v.config,CanvasSource:ha,GeoJSONSource:Er,ImageSource:No,RasterDEMTileSource:Pt,RasterTileSource:xs,VectorTileSource:bl,VideoSource:Si,prewarm:function(){Dl().acquire(Gt)},clearPrewarmedResources:function(){const f=ws;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(Gt),ws=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return qr.workerCount},set workerCount(f){qr.workerCount=f},get maxParallelImageRequests(){return v.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){v.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){v.clearTileCache(f)},workerUrl:"",addProtocol(f,a){v.config.REGISTERED_PROTOCOLS[f]=a},removeProtocol(f){delete v.config.REGISTERED_PROTOCOLS[f]}};return fr.extend(ss,{isSafari:v.isSafari,getPerformanceMetrics:v.PerformanceUtils.getPerformanceMetrics}),ss}),Pi}()}},yp=>{yp(yp.s=372)}]);